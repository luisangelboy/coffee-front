{"version":3,"sources":["gql/Catalogos/usuarios.js","components/SnackBarMessages.js","img/Cafi.svg","gql/Ventas/abrir_cerrar_turno.js","context/Accesos/accesosCtx.js","components/Layouts/LayoutLogin.js","context/Catalogos/initialStatesProducto.js","context/Catalogos/CtxRegProducto.js","context/Catalogos/empresaContext.js","components/Layouts/BackDrop.js","components/ErrorPage.js","gql/Empresa/empresa.js","pages/sucursales/Empresa/Datos/MisDatos.js","pages/sucursales/Facturacion/catalogos.js","gql/Facturacion/Facturacion.js","pages/sucursales/Facturacion/CFDISellos/RegistrarSellos.js","pages/sucursales/Facturacion/CFDISellos/EliminarCSD.js","pages/sucursales/Empresa/InformacionFiscal/InformacionFiscal.js","pages/sucursales/Empresa/DatosEmpresa.js","gql/Empresa/sucursales.js","pages/sucursales/Empresa/Sucursal/DatosSucursal.js","pages/sucursales/Empresa/Empresa.js","config/reuserFunctions.js","pages/sucursales/Catalogos/Producto/PreciosVenta/UnidadesVenta.js","pages/sucursales/Catalogos/Producto/PreciosVenta/Precios.js","pages/sucursales/Catalogos/Producto/unidades.js","pages/sucursales/Catalogos/Producto/calculos_precios.js","pages/sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional.js","context/Compras/comprasContext.js","pages/sucursales/Catalogos/Producto/TallasColores/TablaPresentaciones.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosProductos.js","gql/Catalogos/productos.js","gql/Catalogos/colores.js","pages/sucursales/Catalogos/Producto/TallasColores/crearColor.js","gql/Catalogos/tallas.js","pages/sucursales/Catalogos/Producto/TallasColores/crearTalla.js","pages/sucursales/Catalogos/Producto/TallasColores/TallasColores.js","pages/sucursales/Compras/AbrirCompra/productos/TallasProducto.js","billing/Facturama/facturama.api.js","gql/CatalogosSat/catalogoProductosSat.js","pages/sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT.js","gql/Catalogos/categorias.js","gql/Catalogos/departamentos.js","gql/Catalogos/marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/RegistrarNuevoSelect.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Categorias.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Subcategorias.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Departamentos.js","pages/sucursales/Catalogos/Producto/DatosGenerales/Marcas.js","pages/sucursales/Catalogos/Producto/DatosGenerales/registrarInfoGeneral.js","pages/sucursales/Catalogos/Producto/Imagenes/cargarImagenesProducto.js","context/Almacenes/crearAlmacen.js","gql/Almacenes/Almacen.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso.js","context/Catalogos/usuarioContext.js","pages/sucursales/Catalogos/Usuarios/VerifyUsername.js","pages/sucursales/Catalogos/Usuarios/FormularioUsuario.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Parametros.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Catalogos.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/MiEmpresa.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Compras.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Almacenes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Tesoreria.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Reportes.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Ventas.js","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/Departamentos/Facturacion.js","icons/almacen.svg","icons/money.svg","icons/factura.svg","icons/ventas/cart-add.svg","pages/sucursales/Catalogos/Usuarios/AsingarAccesos/AsignarPermisos.js","icons/perfil.svg","icons/permisos.svg","pages/sucursales/Catalogos/Usuarios/CrearUsuario.js","pages/sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen.js","pages/sucursales/Catalogos/Producto/Inventario&Almacen/AlmacenInicial.js","pages/sucursales/Catalogos/Producto/validaciones.js","gql/Catalogos/centroCostos.js","pages/sucursales/Catalogos/Producto/CentroCostos/CentroCostos.js","pages/sucursales/Catalogos/Producto/PrecioPlazos/PrecioPlazos.js","pages/sucursales/Catalogos/Producto/validateDatos.js","icons/portapapeles.svg","icons/etiqueta-de-precio.svg","icons/tarea-completada.svg","icons/imagenes.svg","icons/tallas-colores.svg","pages/sucursales/Catalogos/Producto/crearProducto.js","pages/sucursales/Compras/AbrirCompra/productos/PreciosVenta.js","pages/sucursales/Compras/AbrirCompra/productos/Descuentos.js","context/Catalogos/crearClienteCtx.js","pages/sucursales/Catalogos/Cliente/RegistrarInfoBasica.js","pages/sucursales/Catalogos/Cliente/RegistroInfoCredito.js","gql/Catalogos/clientes.js","pages/sucursales/Catalogos/Cliente/CrearCliente.js","gql/Compras/compras.js","pages/sucursales/Compras/AbrirCompra/initial_states.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProveedorAlmacen.js","pages/sucursales/Compras/AbrirCompra/productos/mostrar_precios.js","pages/sucursales/Compras/AbrirCompra/productos/calculos_compra.js","pages/sucursales/Compras/AbrirCompra/productos/DatosProducto.js","pages/sucursales/Compras/AbrirCompra/productos/setOrResetData.js","pages/sucursales/Compras/AbrirCompra/TablaCompras.js","pages/sucursales/Compras/AbrirCompra/ConfirmarCompra.js","pages/sucursales/Compras/AbrirCompra/AbrirCompra.js","pages/sucursales/Compras/ComprasRealizadas/ExportarProductosCompra.js","pages/sucursales/Compras/ComprasRealizadas/DatosDeCompra.js","pages/sucursales/Compras/ComprasRealizadas/CancelarCompra.js","pages/sucursales/Compras/ComprasRealizadas/ListaCompras.js","pages/sucursales/Compras/ComprasRealizadas/ExportarComprasExcel.js","pages/sucursales/Compras/ComprasRealizadas/ComprasRealizadas.js","pages/sucursales/Compras/ComprasEnEspera/VerificarProductos.js","pages/sucursales/Compras/ComprasEnEspera/DatosDeCompraEspera.js","pages/sucursales/Compras/ComprasEnEspera/ListaEnEspera.js","pages/sucursales/Compras/ComprasEnEspera/ComprasEnEspera.js","pages/sucursales/Compras/Compras.js","pages/sucursales/Catalogos/Cliente/ListaClientes.js","pages/sucursales/Catalogos/Cliente/ClientesInactivos.js","pages/sucursales/Catalogos/Cliente/Cliente.js","gql/Catalogos/descuentos.js","pages/sucursales/Catalogos/Producto/Descuentos/ListaPrecios.js","pages/sucursales/Catalogos/Producto/Descuentos/Descuento.js","pages/sucursales/Catalogos/Producto/EliminarProducto.js","pages/sucursales/Catalogos/Producto/GenerarEtiquetaBarcode.js","pages/sucursales/Catalogos/Producto/ListaProductos.js","pages/sucursales/Catalogos/Producto/ProductosEliminados.js","icons/productos.svg","pages/sucursales/Catalogos/Producto/Productos.js","pages/sucursales/Catalogos/Producto/index.js","pages/sucursales/Catalogos/Tallas/ListaTallas.js","icons/shirt.svg","icons/shoes.svg","pages/sucursales/Catalogos/Tallas/RegistroTallas.js","components/DescripcionCatalogo.js","icons/tallas.svg","pages/sucursales/Catalogos/Tallas/Tallas.js","pages/sucursales/Catalogos/Proveedores/ListaProveedores.js","pages/sucursales/Catalogos/Proveedores/Proovedores.js","gql/Cajas/cajas.js","pages/sucursales/Catalogos/Cajas/ListaCajas.js","pages/sucursales/Catalogos/Cajas/RegistrarCajas.js","icons/cajas.svg","pages/sucursales/Catalogos/Cajas/Cajas.js","pages/sucursales/Catalogos/Usuarios/ListaUsuario.js","pages/sucursales/Catalogos/Usuarios/UsuariosInactivos.js","icons/usuarios.svg","pages/sucursales/Catalogos/Usuarios/Usuarios.js","context/Catalogos/Departamentos.js","pages/sucursales/Catalogos/Departamentos/ListaDepartamentos.js","pages/sucursales/Catalogos/Departamentos/RegistroDepartamento.js","icons/departamentos.svg","pages/sucursales/Catalogos/Departamentos/Departamentos.js","pages/sucursales/Catalogos/Categorias/RegistroCategorias.js","icons/categorias.svg","pages/sucursales/Catalogos/Categorias/Categorias.js","pages/sucursales/Catalogos/Colores/ListaColores.js","pages/sucursales/Catalogos/Colores/RegistroColores.js","icons/colores.svg","pages/sucursales/Catalogos/Colores/Colores.js","pages/sucursales/Catalogos/Marcas/ListaMarcas.js","context/Catalogos/Marcas.js","pages/sucursales/Catalogos/Marcas/VistaMarcas.js","pages/sucursales/Catalogos/Marcas/Marcas.js","pages/sucursales/Catalogos/CentroCostos/eliminarCuenta.js","pages/sucursales/Catalogos/CentroCostos/eliminarSubcuenta.js","pages/sucursales/Catalogos/CentroCostos/RegistroCentroCostos.js","icons/costos.svg","pages/sucursales/Catalogos/CentroCostos/CentroCostos.js","gql/Catalogos/conceptosAlmacen.js","pages/sucursales/Catalogos/ConceptosAlmacen/ListaConceptos.js","pages/sucursales/Catalogos/ConceptosAlmacen/RegistroConcepto.js","icons/conceptosAlmacen.svg","pages/sucursales/Catalogos/ConceptosAlmacen/ConceptosAlmacen.js","pages/sucursales/Catalogos/Catalogos.js","context/Tesoreria/tesoreriaCtx.js","icons/retiro-de-dinero.svg","pages/sucursales/Tesoreria/CajaPrincipal/RetiroDeposito.js","pages/sucursales/Tesoreria/CajaPrincipal/HistorialCuentas.js","pages/sucursales/Tesoreria/CajaPrincipal/CajaPrincipal.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaCompras.js","gql/Tesoreria/abonos.js","components/ExportExcel.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/TablaDeAbonos.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/AbonoPercibir.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/DetalleCuenta/DetallesCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/LiquidarCuenta.js","pages/sucursales/Tesoreria/Abonos/Provedores/Components/TablaAbonos.js","icons/salary.svg","pages/sucursales/Tesoreria/Abonos/Provedores/AbonosProovedores.js","context/Tesoreria/abonosCtx.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/AbonarSeleccion/DetalleVentaCredito.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/AbonarSeleccion/HistorialAbonos.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/Liquidar.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/Abonar.js","pages/sucursales/Tesoreria/Abonos/Clientes/Components/TablaVentasCredito.js","gql/Ventas/ventas_generales.js","pages/sucursales/Tesoreria/Abonos/Clientes/AbonosClientes.js","pages/sucursales/Tesoreria/Tesoreria.js","pages/sucursales/Tesoreria/IndexTesoreria.js","context/Facturacion/facturacionCtx.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ProductosSinClave.js","pages/sucursales/Facturacion/NuevaFactura/ListaVentas/ListaVentasFactura.js","pages/sucursales/Facturacion/NuevaFactura/Catalogos/CodigoPostal.js","pages/sucursales/Facturacion/NuevaFactura/ClientesSelect.js","pages/sucursales/Facturacion/NuevaFactura/RegistroFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EditarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/EliminarProductoFactura.js","pages/sucursales/Facturacion/NuevaFactura/TablaVenta/TablaDetallesFactura.js","pages/sucursales/Facturacion/NuevaFactura/validacion_factura.js","pages/sucursales/Facturacion/NuevaFactura/initial_factura_states.js","pages/sucursales/Facturacion/NuevaFactura/RealizarFactura.js","pages/sucursales/Facturacion/NuevaFactura/CancelarFactura.js","icons/Facturacion/factura-2.png","pages/sucursales/Facturacion/NuevaFactura/NuevaFactura.js","pages/sucursales/Facturacion/CFDISeries/RegistroSeries.js","pages/sucursales/Facturacion/CFDISeries/ListaSeries.js","icons/Facturacion/factura-1.png","pages/sucursales/Facturacion/CFDISeries/SeriesCdfi.js","pages/sucursales/Facturacion/FacturasRealizadas/DetallesFacturaModal.js","pages/sucursales/Facturacion/FacturasRealizadas/TablaComplementosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/TablaFacturasFiltradas.js","pages/sucursales/Facturacion/FacturasRealizadas/ExportarFacturas.js","pages/sucursales/Facturacion/FacturasRealizadas/FiltrosFactura.js","pages/sucursales/Facturacion/FacturasRealizadas/FacturasRealizadas.js","icons/Facturacion/factura-3.png","pages/sucursales/Facturacion/Facturacion.js","pages/sucursales/Almacenes/RegistroAlmacen/EliminarAlmacen.js","pages/sucursales/Almacenes/RegistroAlmacen/ListaAlmacen.js","pages/sucursales/Almacenes/RegistroAlmacen/RegistroAlmacen.js","context/Almacenes/traspasosAlmacen.js","components/Traspasos/TablePresentacionesNotOrigen.js","components/Traspasos/TallasColoresTraspasos.js","components/Traspasos/TableSelectMedidas.js","components/Traspasos/TableSelectProducts.js","pages/sucursales/Almacenes/Traspasos/Traspasos.js","pages/sucursales/Almacenes/InventarioPorAlmacen/MedidasAlmacenes.js","pages/sucursales/Almacenes/InventarioPorAlmacen/DialogMedidasAlmacenes.js","pages/sucursales/Almacenes/InventarioPorAlmacen/ListaProductos.js","pages/sucursales/Almacenes/InventarioPorAlmacen/InventariosPorAlmacen.js","pages/sucursales/Almacenes/Almacenes.js","pages/sucursales/Reportes/Cajas/TablaHistorialFiltrado.js","pages/sucursales/Reportes/Cajas/ExportarReportesCajas.js","pages/sucursales/Reportes/Cajas/HistorialCaja.js","pages/sucursales/Reportes/Cajas/CardCaja.js","pages/sucursales/Reportes/Cajas/Cajas.js","pages/sucursales/Reportes/TurnosUsuarios/TablaTurnosFiltrados.js","pages/sucursales/Reportes/TurnosUsuarios/ExportarTurnosExcel.js","icons/ventas/shift.svg","pages/sucursales/Reportes/TurnosUsuarios/ReportesTurnosUsuarios.js","pages/sucursales/Reportes/Compras/TablaComprasFiltradas.js","gql/Compras/reporte_compras.js","pages/sucursales/Reportes/Compras/ExportarCompras.js","pages/sucursales/Reportes/Compras/FiltrosCompra.js","pages/sucursales/Reportes/Compras/ReportesCompras.js","pages/sucursales/Reportes/Ventas/TabByProductos/TablaVentasFiltradas.js","pages/sucursales/Reportes/Ventas/TabByProductos/ExportarVentas.js","pages/sucursales/Reportes/Ventas/TabVentas/CampoCajas.js","pages/sucursales/Reportes/Ventas/CustomCheckBoxsStyles.js","pages/sucursales/Reportes/Ventas/TabByProductos/FiltrosVenta.js","pages/sucursales/Reportes/Ventas/TabVentas/TablaPorVentasFiltradas.js","pages/sucursales/Reportes/Ventas/TabVentas/ExportarPorVentas.js","pages/sucursales/Reportes/Ventas/TabVentas/ExportarPorRVPDF.js","pages/sucursales/Reportes/Ventas/TabVentas/FiltrosPorVenta.js","pages/sucursales/Reportes/Ventas/ReportesVentas.js","pages/sucursales/Reportes/Almacenes/ExportarTraspasos.js","pages/sucursales/Reportes/Almacenes/TablaAlmacenFiltradas.js","pages/sucursales/Reportes/Almacenes/ReportesAlmacen.js","components/TicketPrinter/Impresora.js","pages/sucursales/Reportes/Cortes/PrintTicketCorte.js","pages/sucursales/Reportes/Cortes/TablaCortesFiltradas.js","pages/sucursales/Reportes/Cortes/ExportExcel.js","components/TicketPrinter/ImpTicketPrueba.js","components/TicketPrinter/SelectPrinter.js","components/TicketPrinter/TicketPrinter.js","icons/ventas/cash-register.svg","pages/sucursales/Reportes/Cortes/ReportesCortes.js","gql/Tesoreria/egresos.js","pages/sucursales/Reportes/Tesoreria/ListaEgresos.js","pages/sucursales/Reportes/Tesoreria/ListaTransferencias.js","pages/sucursales/Reportes/Tesoreria/Reporte_Tesoreria.js","pages/sucursales/Reportes/Reportes.js","pages/sucursales/AdminInicio.js","context/Ventas/ventasContext.js","components/Connection/ComponentGetDataDBCloud.js","components/Connection/ComponentGetDataDBCloudAdmin.js","components/Connection/ComponentVentasToCloud.js","components/Connection/ComponentOnline.js","components/Navegaciones/NavegacionAdmin.js","components/Navegaciones/styles.js","pages/ventas/styles.js","pages/ventas/Operaciones/DepositoRetiros/crearNuevaCuenta.js","pages/ventas/Operaciones/DepositoRetiros/CrearSubcuenta.js","icons/ventas/cash-register2.svg","pages/ventas/Operaciones/DepositoRetiros/DepositoRetiroCaja.js","pages/ventas/AbrirCerrarTurno/CerrarTurno.js","pages/ventas/AbrirCerrarTurno/Turnos.js","pages/ventas/Operaciones/Precorte/PrintTicketPrecorte.js","pages/ventas/Operaciones/Precorte/PreCorteCaja.js","pages/ventas/Operaciones/VentaEnEspera.js","pages/ventas/ArticuloRapido/RegistroInformacionRapido.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TablaPresentaciones.js","pages/ventas/ArticuloRapido/TallasColoresRapidos/TallasColoresRapidos.js","components/AccesosPassword/Acceso.js","icons/ventas/tiempo-rapido.svg","pages/ventas/ArticuloRapido/ArticuloRapido.js","pages/ventas/ArticuloRapido/indexArticuloRapido.js","icons/ventas/lista-de-espera.svg","gql/Ventas/cotizaciones.js","pages/ventas/Cotizacion/CotizacionPdf.js","pages/ventas/Cotizacion/DetalleCotizacion.js","pages/ventas/Cotizacion/CotizacionesPendientes.js","pages/ventas/Cotizacion/ListaCotizaciones.js","components/Navegaciones/NavegacionVentas.js","pages/ventas/Abonos/Abonos.js","pages/ventas/BuscarProductos/ListaProductos.js","pages/ventas/BuscarProductos/InformacionProducto.js","pages/ventas/BuscarProductos/BuscarProducto.js","pages/ventas/ClientesVentas/ClientesVentas.js","pages/ventas/Cotizacion/NuevaCotizacion.js","pages/ventas/Cotizacion/Cotizacion.js","icons/ventas/shopping-cart.svg","pages/ventas/Operaciones/CancelarVenta.js","icons/ventas/money.svg","icons/ventas/tarjeta-de-credito.svg","icons/transferencia-bancaria.svg","icons/ventas/cheque.png","pages/ventas/CerrarVenta/Montos.js","pages/ventas/CerrarVenta/InfoVentaTotales.js","pages/ventas/CerrarVenta/Credito.js","pages/ventas/CerrarVenta/Descuento.js","pages/ventas/CerrarVenta/PrintTicketVenta.js","components/TicketPrinter/AbrirCajon.js","icons/ventas/cart.svg","pages/ventas/CerrarVenta/CerrarVenta.js","pages/ventas/CerrarVenta/calcularMonedero.js","pages/ventas/Operaciones/PreciosProducto.js","pages/ventas/VentasEspera/ListaVentas.js","pages/ventas/VentasEspera/VentasEspera.js","pages/ventas/VentasRealizadas/CancelarFolio.js","pages/ventas/VentasRealizadas/InfoVenta.js","pages/ventas/VentasRealizadas/ListaVentasRealizadas.js","pages/ventas/VentasRealizadas/VentasRealizadas.js","icons/ventas/cajon.svg","pages/ventas/Operaciones/AbrirCajon.js","icons/notacredito.png","pages/ventas/NotaCredito/CrearNota.js","pages/ventas/NotaCredito/NotaCredito.js","components/Navegaciones/NavegacionVentasLateral.js","pages/ventas/EliminarProductoVenta.js","pages/ventas/EliminarProductoNota.js","pages/ventas/Tabla_ventas_checkbox.js","icons/ventas/publicalo.svg","pages/ventas/InputsVentasGen.js/TipoVenta.js","pages/ventas/ClientesVentas.js","pages/ventas/InputsVentasGen.js/AgregarCliente.js","icons/ventas/busqueda-de-codigos-de-barras.svg","pages/ventas/InputsVentasGen.js/ProductoConMedidas.js","pages/ventas/InputsVentasGen.js/AgregarProducto.js","pages/ventas/InputsVentasGen.js/ContenedorInputs.js","pages/ventas/TotalesNotaCredito.js","pages/ventas/VentasGenerales.js","pages/ventas/AbrirCerrarTurno/AbrirTurno.js","pages/ventas/venta_index.js","components/Layouts/LayoutVentas.js","img/logochafa.PNG","icons/ventas/admin.svg","components/Layouts/LayoutHome.js","config/routes.js","components/Layouts/LayoutAdmin.js","config/colors.js","components/Connection/ConexionDetect.js","config/apollo.js","App.js","reportWebVitals.js","index.js"],"names":["VERIFY_USER","gql","CREAR_USUARIO","OBTENER_USUARIOS","ACTUALIZAR_USUARIO","LOGEAR_USUARIO","LOGEAR_USUARIO_ACCESOS","ACTUALIZAR_BD_LOCAL","useStyles","makeStyles","theme","snack","zIndex","SnackBarMessages","alert","setAlert","classes","Portal","Snackbar","className","anchorOrigin","vertical","horizontal","open","onClose","status","message","autoHideDuration","Box","display","style","color","mr","Typography","REGISTRAR_TURNOS","UP_TURNO","OBTENER_HISTORIAL_TURNOS","AccesosContext","createContext","AccesosProvider","children","useState","isOnline","setIsOnline","ventasToCloud","setVentasToCloud","abrirPanelAcceso","setAbrirPanelAcceso","departamento","subDepartamento","tipo_acceso","departamentos","setDepartamentos","reloadAdministrador","setReloadAdministrador","reloadProductoRapido","setReloadProductoRapido","reloadCancelarVenta","setReloadCancelarVenta","reloadVerPrecios","setReloadVerPrecios","reloadVerPreCorte","setReloadVerPreCorte","reloadEliminarVentaEspera","setReloadEliminarVentaEspera","reloadCrearCotizacion","setReloadCrearCotizacion","React","loadingPage","setLoadingPage","useMutation","subirTurnoCloud","useEffect","ventasCloud","JSON","parse","localStorage","getItem","undefined","turno","OnCloud","upTurno","onCloud","variables","activa","input","variableTurnoAbierto","data","done","removeItem","setItem","stringify","networkError","result","console","log","errors","graphQLErrors","Provider","value","objectVenta","oldItems","push","error","objetcVenta","arrayVentas","margin","marginTop","spacing","marginBottom","containerImagen","maxWidth","maxHeight","alignContent","justifyContent","imagen","initial_state_datos_generales","receta_farmacia","clave_producto_sat","Name","Value","initial_state_precios","monedero","monedero_electronico","iva_activo","ieps_activo","ieps","iva","granel","inventario","inventario_minimo","inventario_maximo","unidad_de_inventario","codigo_unidad","precio_de_compra","precio_con_impuesto","precio_sin_impuesto","unidad_de_compra","unidad","cantidad","precio_unitario_sin_impuesto","precio_unitario_con_impuesto","initial_state_unidadVentaXDefecto","codigo_barras","precio","descuento_activo","precio_unidad","numero_precio","precio_neto","precio_venta","unidad_mayoreo","iva_precio","ieps_precio","utilidad","precio_general","cantidad_unidad","unidad_maxima","unidad_principal","default","initial_state_unidadVentaSecundaria","initial_state_preciosP","initial_state_unidadesVenta","initial_state_almacen_inicial","id_almacen","almacen","fecha_de_expiracion","initial_state_centro_de_costos","initial_state_preciosPlazos","precio_piezas","precio_cajas","precio_costales","initial_state_subcategorias","initial_state_imagenes","initial_state_imagenes_eliminadas","initial_state_onPreview","index","image","initial_state_validacion","initial_state_subcostos","initial_state_presentaciones","RegProductoContext","RegProductoProvider","datos_generales","setDatosGenerales","precios","setPrecios","unidadVentaXDefecto","setUnidadVentaXDefecto","unidadVentaSecundaria","setUnidadVentaSecundaria","preciosP","setPreciosP","unidadesVenta","setUnidadesVenta","almacen_inicial","setAlmacenInicial","centro_de_costos","setCentroDeCostos","preciosPlazos","setPreciosPlazos","subcategorias","setSubcategorias","imagenes","setImagenes","imagenes_eliminadas","setImagenesEliminadas","onPreview","setOnPreview","validacion","setValidacion","subcostos","setSubcostos","selectedDate","setSelectedDate","update","setUpdate","presentaciones","setPresentaciones","presentaciones_eliminadas","setPresentacionesEliminadas","actualizarLista","setActualizarLista","datosPreciosProducto","setDatosPreciosProducto","preciosDescuentos","setPreciosDescuentos","preciosProductos","setPreciosProductos","datosEnDescuentos","setDatosEnDescuentos","almacen_existente","setAlmacenExistente","EmpresaContext","EmpresaProvider","nombre_empresa","nombre_dueno","telefono_dueno","celular","correo_empresa","nombre_fiscal","rfc","regimen_fiscal","curp","info_adicio","direccion","calle","no_ext","no_int","codigo_postal","colonia","municipio","localidad","estado","pais","direccionFiscal","datosBancarios","cuenta","sucursal","clave_banco","empresa","setEmpresa","toUpdate","setToUpdate","setError","backdrop","drawer","backgroundColor","BackdropComponent","loading","setLoading","Backdrop","CircularProgress","ErrorPage","height","altura","flexDirection","alignItems","fontSize","align","OBTENER_DATOS_EMPRESA","ACTUALIZAR_EMPRESA","appBar","position","title","marginLeft","flex","icon","subtitle","width","require","avatarContainer","border","borderRadius","avatar","MisDatos","props","sesion","accesos","mi_empresa","datos_empresa","editar","bloqueo","preview","setPreview","errorPage","setErrorPage","errorForm","setErrorForm","useContext","actualizarEmpresa","useQuery","id","_id","refetch","valor_puntos","vender_sin_inventario","empresaDatos","setEmpresaDatos","errorCatch","obtenerEmpresa","actEmp","nueva_sesion","obtenerCampos","e","valor","target","name","parseFloat","obtenerCamposDireccion","onDrop","useCallback","acceptedFiles","reader","FileReader","readAsDataURL","onload","useDropzone","accept","noKeyboard","getRootProps","getInputProps","Container","Grid","container","item","md","xs","Avatar","src","Button","size","onClick","startIcon","my","TextField","fullWidth","disabled","type","variant","helperText","onChange","inputMode","FormControlLabel","control","Checkbox","checked","label","mt","mb","Divider","DialogActions","setOpen","usosCfdi","tiposCfdi","NameId","tipoCambio","formaPago","metodoPago","regimenFiscal","Natural","Moral","CREAR_FACTURA","CREAR_SERIE","ACTUALIZAR_DEFAULT_SERIE","ELIMINAR_SERIE","OBTENER_SERIES","CREAR_SELLO_CFDI","ELIMINAR_SELLO_CFDI","OBTENER_FACTURAS_REALIZADAS","OBTENER_DOCUMENTO_FACTURA","RegistroSellos","datosEmpresa","firma_disabled","certificate","private_key","private_key_password","datos","setDatos","show","setShow","handleClose","crearCSDS","obtenerFiles","files","getBase64","file","Promise","resolve","baseURL","guardarBD","cer","key","then","base","split","nombre_cer","catch","err","nombre_key","Add","Dialog","DialogTitle","DialogContent","InputProps","endAdornment","InputAdornment","htmlFor","CloudUpload","component","disableElevation","readOnly","multiple","IconButton","onMouseDown","event","preventDefault","edge","Done","EliminarSellos","eliminarCSD","eliminarSelloCSD","DialogContentText","InformacionFiscal","informacion_fiscal","setFirmaDisabled","empresaFiscal","setEmpresaFiscal","new_sesion","fecha_registro_sello_sat","moment","format","sello_sat","limite_timbres","timbres_usados","response","obtenerCamposBancarios","FormControl","Select","MenuItem","map","res","multiline","m","Alert","severity","action","AlertTitle","sm","Transition","forwardRef","ref","Slide","direction","MiEmpresa","setValue","RenderViews","fullScreen","TransitionComponent","AppBar","Toolbar","Tabs","indicatorColor","centered","Tab","OBTENER_DATOS_SUCURSAL","ACTUALIZAR_SUCURSAL","CREAR_MOVIMIENTO_CUENTA","OBTENER_HISTORIAL_CUENTAS","DatosSucursal","actualizarSucursal","nombre_sucursal","descripcion","telefono","sucursalDatos","setSucursalDatos","obtenerDatosSucursal","usuario_sucursal","cuenta_sucursal","flexdirection","autoFocus","Empresa","ver","lg","numerosRandom","min","max","Math","floor","random","generateCodeNumerico","length","characters","charactersLength","i","charAt","formatoFecha","fecha","Date","toLocaleDateString","weekday","year","month","day","formatoFechaCorta","locale","formatoMexico","number","toFixed","toString","replace","cleanTypenames","Array","isArray","newObject","property","findProductArray","producto","venta","productosVentas","productos","found","producto_found","id_producto","clave_alterna","calculatePrices2","newP","origen","precio_boolean","cantidadNueva","valor_granel","precio_actual","descuento","cantidadCaja","cantidad_unidads","ivaCalculo","iepsCalculo","impuestoCalculo","subtotalCalculo","totalCalculo","monederoCalculo","descuentoCalculo","ob","cantidad_venta","granel_producto","precio_a_vender","precio_actual_producto","precio_actual_object","porciento","dinero_descontado","precio_anterior","calculatePricesNota","verifiPrising","amount","pricings","precios_producto","filter","p","finalPrising","pricing","number_pricing","object_prising","datoFinal","precio_seleccionado","NumerosaLetras","numero","decemill","unimill","centena","decena","ent","arreglo","texto","contenido","substr","separar_split","unidades","decenas","centenas","unidadesdemillar","centenamill","centenasdemillar","isNaN","diez","PreciosDeCompra","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","LocalOffer","inputProps","tipo_producto","UnidadesVentaSecundaria","setPrecio","price","calcularUnidadDesucuento","precio_unit","precio_venta_unit","suma_impuestos","PVSI","porcentaje","PVCDSI","dineroDescontado","PCSI","calcularUnidadDesucuentoCheck","boolean","calcularUnidad","PVCI","unidad_secundaria","OutlinedInput","GenCodigoBarras","Cached","onBlur","startAdornment","Tooltip","placement","arrow","aplicarDescuento","precioTitle","marginInput","titulos","fontWeight","PreciosDeVenta","newPreciosP","RenderPreciosP","preciosVenta","calculos","cantidad_sec","descuento_sec","descuento_activo_sec","PUCSI","utilidad_base","unidadXDefecto","unidadSecundaria","new_precio_venta_desc","precio_con_descuento","new_precio_venta_desc_sec","precio_con_descuento_sec","splice","verificarCampoVacio","minWidth","valor_base","PUCCI","obtenerUtilidad","pl","suma","obtenerPrecioNeto","parseInt","obtenerMayoreo","unitCodes","unitCodes_granel","calcular_iva","calcular_ieps","required","RegistroInfoAdidional","obtenerIva","setPrecioConImpuesto","setPrecioSinImpuesto","setPrecioConImpuestoVariable","setPrecioSinImpuestoVariable","obtenerIeps","precioConImpuesto","precioSinImpuesto","precioConImpuestoVariable","precioSinImpuestoVariable","useDebounce","PCI","PSI","obtenerUnidadCompra","child","unidad_activa","count","setCount","total_impuesto","obtenerPrecioConImpuesto","obtenerPrecioSinImpuesto","noWrap","onFocus","FormHelperText","ComprasContext","ComprasProvider","costo","cantidad_regalo","unidad_regalo","cantidad_total","descuento_porcentaje","descuento_precio","iva_total","ieps_total","subtotal","impuestos","total","mantener_precio","impuestos_descuento","subtotal_descuento","total_descuento","datosProducto","setDatosProducto","proveedor","en_espera","fecha_registro","compra_credito","fecha_vencimiento_credito","credito_pagado","saldo_credito_pendiente","forma_pago","descuento_aplicado","cantidad_descontada","datosCompra","setDatosCompra","setPreciosVenta","productoOriginal","setProductoOriginal","productosCompra","setProductosCompra","isEditing","setIsEditing","editFinish","setEditFinish","setCosto","setCantidad","issue","setIssue","loadingProductos","setLoadingProductos","compareFunction","a","b","medida","talla","localeCompare","root","paper","table","tableRow","alpha","palette","primary","main","visuallyHidden","clip","overflow","padding","top","colorContainer","TablaPresentaciones","from","setOnUpdate","onUpdate","withoutPrice","onlyPrice","mostrar_presentaciones","sort","Paper","stickyHeader","RenderPresentacionesRows","disabledInput","setDisabledInput","textfield","useRef","copy_presentaciones","copy_element_presentacion","copy_element_presentacion_descuento","copy_producto","obtenerDatos","existencia","cantidad_nueva","actionButton","hover","selected","Input","inputRef","nuevo","nombre_comercial","Chip","nombre","Zoom","hex","LocalOfferOutlined","checkedIcon","Edit","TabPanel","other","role","hidden","a11yProps","AlertDialogSlide","agregarCompra","cargando","toggleDrawer","resetProducto","new_precios","unidades_de_venta","unidades_secundaria","unidadxdefecto","actualizarContextProducto","keepMounted","newValue","scrollButtons","textColor","LocalAtm","SquareFoot","OBTENER_CONSULTAS","CREAR_PRODUCTO","OBTENER_PRODUCTOS","ACTUALIZAR_PRODUCTO","ELIMINAR_PRODUCTO","PRODUCTOS_ELIMINADOS","ACTIVAR_PRODUCTOS","CREAR_PRODUCTO_RAPIDO","CREAR_COLOR","OBTENER_COLORES","ACTUALIZAR_COLOR","ELIMINAR_COLOR","CrearColorProducto","setColor","values","setValues","toggleModal","crearColor","GuardarDatosBD","colores","scroll","disableEscapeKeyDown","reason","onChangeComplete","toUpperCase","bgcolor","onSubmit","focused","form","CREAR_TALLAS","OBTENER_TALLAS","ACTUALIZAR_TALLA","ELIMINAR_TALLA","CrearTallasProducto","setMedidasSeleccionadas","crearTalla","nueva_talla","tipo","cursor","ColoresTallas","obtenerConsultasProducto","tallas","calzados","medidasSeleccionadas","coloresSeleccionados","setColoresSeleccionados","medidas","obtenerColoresSeleccinados","colors","forEach","element","hashColor","hashMedida","colores_existentes","existColor","medidas_existentes","existMedida","pointerEvents","opacity","mx","RenderTallas","useTheme","setSelected","seleccionarMedidas","medidas_seleccionadas_temp","presentacion","presentacion_temp","array_medidad_finales","producto_medida","k","producto_color","presentacion_existente","producto_array_final","x","objeto_presentaciones_final","handleAddTallas","getContrastText","Colores","seleccionarColores","obtenerColores","verificate","setVerificate","disableHoverListener","valuesFacturama","$","ajaxSetup","beforeSend","xhr","withCredentials","setRequestHeader","facturama","settings","url","retrieve","path","callback","jQuery","get","list","postSyncWithData","callbackError","ajax","dataType","contentType","success","putSyncWithData","deleteSyncWithParam","param","async","facturamaObject","Clients","Get","List","Create","Remove","Update","Products","BranchOffice","Series","idBranch","Cfdi","listWithParam","Send","postSyncWithParam","Cancel","params","Download","Acuse","TaxEntity","UploadCsd","UploadImage","Catalogs","States","country","Municipalities","state","Localities","Neighborhoods","postalCode","ProductsOrServices","keyword","PostalCodes","Units","Currencies","Countries","PaymentForms","PaymentMethods","FederalTaxes","FiscalRegimens","CfdiTypes","RelationTypes","CfdiUses","CREAR_CODIGO_PRODUCTO","ELIMINAR_CODIGO_PRODUCTO","background","spin_container","spin","CatalogosProductosSAT","codigos","busqueda","setBusqueda","setProductos","loading_save","setLoadingSave","loading_delete","setLoadingDelete","selectedIndex","setSelectedIndex","crearCodigoProducto","eliminarCodigoProducto","limpiarDataModal","handleOk","eliminarCodigoBD","handleCancel","buscarCatalogo","Facturama","responseJSON","Message","Autocomplete","options","getOptionLabel","option","renderInput","renderOption","flexGrow","_","getOptionSelected","Search","dense","SelectedListItem","contiene","includes","ListItem","button","click","detail","ListItemText","CREAR_CATEGORIA","CREAR_SUBCATEGORIA","ACTUALIZAR_CATEGORIA","ACTUALIZAR_SUBCATEGORIA","OBTENER_CATEGORIAS","ELIMINAR_CATEGORIA","ELIMINAR_SUBCATEGORIA","OBTENER_DEPARTAMENTOS","REGISTRAR_DEPARTAMENTO","ACTUALIZAR_DEPARTAMENTO","ELIMINAR_DEPARTAMENTO","OBTENER_MARCAS","REGISTRAR_MARCAS","ACTUALIZAR_MARCAS","ELIMINAR_MARCAS","RegistrarNuevoSelect","crearCategoria","crearSubcategoria","CrearDepartamentos","CrearMarca","handleToggle","guardarDatos","idCategoria","id_categoria","categoria_creada","categoria","subcategoria_creada","id_subcategoria","subcategoria","departamento_creado","id_departamento","crearDepartamentos","marca_creada","id_marca","crearMarcas","marca","textTransform","endIcon","CategoriasProducto","categorias","SubcategoriasProducto","DepartamentosProducto","nombre_departamentos","MarcasProducto","marcas","nombre_marca","formInput","obligatorio","without_arrows","RegistroInfoGenerales","centro_costos","obtenerChecks","costos","id_cuenta","subcuentas","Autorenew","nombre_generico","formInputFlex","CargarImagenesProducto","render_imagenes","URL","createObjectURL","AddPhotoAlternate","minHeight","orientation","alt","RenderImagenes","key_imagen","url_imagen","handleModal","eliminarImagen","array","ModalDelete","Delete","CrearAlmacenContext","AlmacenProvider","nombre_almacen","id_usuario_encargado","datosAlmacen","setDatosAlmacen","openRegistro","setOpenRegistro","REGISTRO_ALMACEN","OBTENER_ALMACENES","ACTUALIZAR_ALMACEN","ELIMINAR_ALMACEN","OBTENER_PRODUCTOS_ALMACEN","REALIZAR_TRASPASO","OBTENER_PRODUCTOS_EMPRESA","OBTENER_TRASPASOS","arregloVacio","agregar","eliminar","compras","abrir_compra","compras_realizadas","compras_espera","tesoreria","cuentas_empresa","egresos","abonos_proveedores","abonos_clientes","caja_principal","reportes","reporte_historial_cajas","reporte_turnos","reporte_compras","reporte_ventas","rerporte_almacen","reporte_corte_caja","reporte_tesoreria","ventas","cancelar_venta","precios_productos","pre_corte","cotizaciones","administrador","eliminar_ventas","producto_rapido","almacenes","traspasos","inventario_almacen","catalogos","clientes","usuarios","contabilidad","provedores","cajas","conceptos_almacen","tallas_numeros","facturacion","generar_cdfi","cdfi_realizados","registro_series_cdfi","UsuarioContext","UsuarioProvider","estado_usuario","usuario","setUsuario","username","setUsername","VerifyUsername","accion","setStatus","verifyUserName","verificar","placeholder","autoComplete","username_login","FormularioUsuario","showPassword","setShowPassword","password","repeatPassword","email","ActualizarPasswordModal","actualizarUsuario","confirmarPassowrd","autocomplete","Parametros","arregloAccesos","obtenerAccesos","Catalogos","elevation","ml","Compras","Almacenes","Tesoreria","Reportes","Ventas","Facturacion","iconSvg","AsignarPermisos","almancenIcon","moneyIcon","facturaIcon","cartIcon","rootPrincipal","CrearUsuario","fromEmergent","limpiarCampos","turno_en_caja_activo","onCloseModal","crearUsuario","saveData","numero_usuario","perfilIcon","permisosIcon","subDepartamentos","ContainerRegistroAlmacen","CrearAlmacen","ActualizarAlmacen","obtenerUsuarios","eliminado","user","almacen_creado","crearAlmacen","id_sucursal","labelId","renderValue","RegistroAlmacenInicial","obtenerInventario","validaciones","generales","vista3","vista1","vista2","CREAR_CUENTA","CREAR_SUBCUENTA","ACTUALIZAR_CUENTA","ACTUALIZAR_SUBCUENTA","OBTENER_CUENTAS","ELIMINAR_CUENTA","ELIMINAR_SUBCUENTA","validateJsonEdit","object_date","end_array","object","root_app","dialogContent","tabs","borderRight","divider","CrearProducto","productosRefetch","fromCompra","getProductos","crearProducto","actualizarProducto","setInitialStates","resetInitialStates","validate","vista7","copy_unidadesVenta","imagenes_without_aws","precio_plazos","medidas_producto","inventario_general","window","onkeydown","keyCode","document","getElementById","saveButton","ButtonActions","NavigateNext","Badge","badgeContent","invisible","detallesImg","preciosImg","almacenesImg","imagenesImg","tallasImg","NavigateBefore","ContenidoModal","fetchPolicy","PreciosDeVentaCompras","RenderPrecios","setPrecioNeto","copy_preciosVenta","preciosVenta_base","calculosCompra","DescuentosInputs","iva_precio_actual","ieps_precio_actual","impuesto_actual","PCSI_actual","cantida_suma","PCSI_ACTUAL_TOTAL","round","subtotal_con_descuento","obtenerPrecio","obtenerPorcentaje","ClienteCtx","ClienteProvider","estado_cliente","cliente","setCliente","setClientes","updateClientVenta","setUpdateClientVenta","RegistrarInfoBasica","numero_cliente","nombre_cliente","representante","clave_cliente","fecha_nacimiento","RegistrarInfoCredito","cliente_base","credito_disponible","credito_usado","limite_credito","disponible","razon_social","dias_credito","DateRange","banco","numero_cuenta","CREAR_CLIENTE","OBTENER_CLIENTES","ACTUALIZAR_CLIENTE","ELIMINAR_CLIENTE","CrearCliente","fromCompras","handleClickOpen","crearCliente","actualizarCliente","copy_cliente","tipo_cliente","clienteBase","venta_actual","subTotal","venta_cliente","tipo_emision","CREAR_COMPRA","CREAR_COMPRA_ESPERA","CANCELAR_COMPRA","OBTENER_COMPRAS_REALIZADAS","OBTENER_COMPRAS_ESPERA","OBTENER_CONSULTA_GENERAL_PRODUCTO","ELIMINAR_COMPRA_ESPERA","initial_state_datosProducto","initial_state_datosCompra","initial_state_precios_venta","initial_state_productoOriginal","initial_state_productosCompra","DatosProveedorAlmacen","obtenerProveedorAlmacen","id_proveedor","default_almacen","errorRender","loadingRender","obtenerConsultaGeneralCompras","proveedores","MostrarPrecios","calculos_precios","anterior","DatosProducto","setCargando","pageLoaded","setPageLoaded","page","setPage","textValue","setTextValue","client","useApolloClient","dataDocs","setDataDocs","totalDocs","setTotalDocs","filtro","query","limit","offset","obtenerProductos","docs","COSTO","CANTIDAD","VALUE","resultado","obtenerCosto","obtenerCantidad","obtenerSelectsProducto","obtenerUnidadRegalo","actualizar_Precios","copy_datosCompra","copy_datosProducto","copy_datosGenerales","copy_precios","copy_preciosP","copy_almacenInicial","copy_centroCostos","copy_presentacionesEliminadas","copy_precioPlazos","factor","cantidad_total_media","cantidad_regalo_media","productosCompra_ordenados","existente","prod_exist","Boolean","array_ordenado","Fragment","ListboxProps","styles","onScroll","scrollHeight","scrollTop","clientHeight","newPage","ModalAgregarCompra","InfoOutlined","SetOrResetData","setStates","ListaCompras","productos_ordernados","RenderProductosCompra","isSelected","setIsSelected","productoCTX","seStates","unidad_producto","tabIndex","finish","ModalDeleteProducto","copy_compras","objeto_eliminado","ConfirmarCompra","realizarCompraBD","loading_modal","setLoadingModal","credito","setCredito","productos_recalculados","setProductosRecalculados","initial_state_descuento","descuento_base","setDescuentoBase","descuento_debounce","setDescuentoDebounce","porcentaje_debounce","setPorcentajeDebounce","DESCUENTO","PORCENTAJE","datos_descuento","productos_array","subtotal_actual","cantidad_descontada_product","recalcularPrecios","InputLabel","AbrirCompra","compra","handleOpenDetalles","refetchEspera","ModalCompra","openDelete","setOpenDelete","turnoEnCurso","crearCompra","crearCompraEnEspera","isAdmin","compra_en_espera","descuento_compra","productos_con_descuento","conflicto","horario_en_turno","numero_caja","id_caja","id_usuario","token_turno_user","numero_usuario_creador","usuario_en_turno","nombre_usuario_creador","admin","nombre_usuario","handleToggleDelete","Timer","CancelarCompra","ExcelFile","ReactExport","ExcelSheet","ExcelColumn","ExportarProductosComprasExcel","compra_realizada","productos_detalles","Cantidad_regalo","CloudDownloadOutlined","filename","DatosDeCompra","productosFiltrados","setProductosFiltrados","toLowerCase","marginRight","warning","borderColor","CancelCompraConfirm","cancelarCompra","cancelarCompraBD","id_compra","data_sesion","ListaProductos","obtenerComprasRealizadas","filtroFecha","TablePagination","rowsPerPageOptions","rowsPerPage","onPageChange","nextPage","RenderRowsCompras","DetallesCompra","handleOpen","AssignmentOutlined","ExportarComprasExcel","handleChange","datosExcel","ExportarExcelAction","nombre_documento","since","ComprasRealizadas","ContentDialogCompras","setFiltro","setFiltroFecha","searchfilter","filterDate","obtenerBusqueda","subtract","obtenerFecha","onDelete","current","VerificarProductosCompras","nuevoArray","setNuevoArray","setVerificado","setSuccess","VerifiedUser","ModalVerificacion","loadingVerificacion","setLoadingVerificacion","useLazyQuery","getQuery","productos_nuevos","copy_producto_compra","productos_filtrados","precios_base","unidades_base","presentaciones_base","u_default","u_default_base","present","y","present_base","nuevo_producto_compra","nueva","total_con_descuento","setTimeout","verificarProductos","compra_temp","setCompraTemp","permisosUsuario","verificado","paddingTop","paddingBottom","ModalEliminarCompra","eliminarCompraEnEspera","eliminarCompra","DeleteOutlined","ListaEnEspera","obtenerComprasEnEspera","elimina","RenderRowsComprasEspera","ModalContinuarCompra","ComprasEnEspera","ListaClientes","showModal","setShowModal","dataSelectRowClient","setDataSelectRowClient","handleClickOpenModal","obtenerClientes","row","clean_cliente","handleClickSelectClient","RowsRender","cambiarEstado","Switch","EliminarCliente","eliminarCliente","eliminarClienteBD","ClientesInactivosComponent","refetchProveedores","setFilter","handleModalToggle","ClientesInactivos","RenderClientes","handleDeleteToggle","RestoreFromTrash","paddingLeft","Cliente","InputBase","onKeyPress","defaultValue","REGISTRAR_DESCUENTOS","DESACTIVAR_DESCUENTOS","ELIMINAR_DESCUENTOS","headCells","EnhancedTableHead","onSelectAllClick","numSelected","rowCount","datosPrecios","variable","indeterminate","headCell","numeric","disablePadding","TablaPreciosDescuentos","setCleanList","cleanList","verificarDatos","setPrecioPrueba","handleClick","indexOf","newSelected","concat","slice","emptyRows","newSelecteds","n","isItemSelected","colSpan","openModal","setOpenModal","DesactivarDescuentoUnidad","ELiminarDescuentoUnidad","handleChangeActivo","editarDatos","handleDelete","eliminarDescuentoUnidad","defaultChecked","Modal","avatarGroup","rootSlice","rootTable","DescuentoProductos","CrearDescuentoUnidad","openDescuento","setOpenDescuento","precioPrueba","handleCloseDescuentos","cerrarModal","arrayDescuento","descuentos","textAlign","dislay","gutterBottom","justifyItems","Slider","getAriaValueText","valueLabelDisplay","valorText","obtenerPrecioText","EliminarProducto","eliminarProducto","handleToggleModal","eliminarProductoBD","GenerarEtiquetaBarcode","barcode","displayValue","fontOptions","font","textPosition","textMargin","lineColor","Print","RenderTableRows","cantidad_existente","unidad_inventario","ProdcutosEliminados","productosActivosRefetch","TablaProductosEliminados","obtenerProductosInactivos","RenderProductosTabla","activarProducto","reactivarProducto","Publish","Productos","ProductosIcon","RegistroComponent","existencias","setExistencias","ArrowBack","ProductoIndex","TablaTallas","eliminarTalla","resp","msgAlert","dato","RegistroTallas","loading_bd","setLoadingBD","actualizarTalla","obtenerTallas","guardarDatosBD","talla_actualizada","shirtIcon","shoesIcon","DescripcionCatalogo","active","setActive","Tallas","columns","TablaProveedores","column","Proveedores","ProveedoresComponent","CREAR_CAJA","OBTENER_CAJAS","CREAR_HISTORIAL_CAJA","OBTENER_HISTORIAL_CAJA","ELIMINAR_CAJA","OBTENER_PRE_CORTE_CAJA","OBTENER_CORTES_CAJA","OBTENER_CORTE_CAJA","TablaCajas","obtenerCajasSucursal","permisos","StyledBadge","withStyles","badge","boxShadow","left","animation","content","transform","RowCajasRender","styleProps","overlap","principal","EliminarCajasModal","eliminarCaja","deleteCaja","RegistroCajas","crearCaja","nuevaCaja","usuario_creador","Cajas","CajasImg","ListaUsuarios","EliminarUsuario","deleteUsuario","UsuariosInactivosComponent","UsuariosInactivos","Usuarios","UsuariosIcon","CreateDepartamentosContext","DepartamentosProvider","setData","setAccion","idDepartamento","setIdDepartamento","TablaDepartamentos","obtenerDepartamentos","ListaDepartamentosRender","DeleteDepartamento","eliminarDepartamento","RegistroDepartamentos","ActualzarDepartamentos","Departamentos","DepartamentosImg","fade","secondary","RegistroCategorias","setCategoria","toUpdateID","setToUpdateID","loadingBackDrop","setLoadingBackDrop","actualizarCategoria","guardarCategoria","categoriaActualizada","render_categorias","obtenerCategorias","RenderCategorias","setSubcategoria","actualizarSubcategoria","render_subcategorias","guardarSubcategoria","subCategoriaActualizada","idSubcategoria","Accordion","AccordionSummary","expandIcon","ExpandMore","stopPropagation","scrollTo","AccordionDetails","RenderSubcategorias","px","ModalEliminar","eliminarCategoria","eliminarSubcategoria","Categorias","CategoriasImg","TablaColores","eliminarColor","RegistroColores","error_data","loading_data","actualizarColor","msg","ColoresImg","ListaMarcas","updateData","obtenerMarcas","eliminarMarca","CreateMarcasContext","MarcasProvider","datosMarcas","setDatosMarcas","VistaMarcas","setUpdateData","actualzarMarcas","Marcas","EliminarCuenta","eliminarCuenta","deleteCuenta","EliminarSubcuenta","idCuenta","subcuenta","eliminarSubcuenta","deleteSubCuenta","idSubcuenta","RegistroCentroCostos","setCuenta","crearCuenta","actualizarCuenta","render_cuentas","obtenerCuentas","guardarCuenta","cuentaActualizada","RenderCuentas","setSubcuenta","crearSubcuenta","actualizarSubcuenta","render_subcuentas","guardarSubcuenta","subCuentaActualizada","RenderSubcuentas","CentroCostos","CostosImg","OBTENER_CONCEPTOS_ALMACEN","REGISTRAR_CONCEPTO_ALMACEN","ACTUALIZAR_CONCEPTO_ALMACEN","ELIMINAR_CONCEPTO_ALMACEN","TablaConceptos","setIdConcepto","idConcepto","obtenerConcepto","EliminarConceptoAlmacen","obtenerConceptosAlmacen","nombre_concepto","destino","editable","formControl","MenuProps","PaperProps","ITEM_HEIGHT","tipos","getStyles","tipoName","typography","fontWeightRegular","fontWeightMedium","RegistroServicios","crearConceptoAlmacen","actualizarConceptoAlmacen","handleSubmit","ConceptosAlmacen","ConceptosAlmacenImg","alignSelf","TesoreriaCtx","TesoreriaProvider","cuentas","setCuentas","reload","setReload","formComboBox","conceptos","RetiroDeposito","CrearMovimientoCuenta","datosMovimiento","setDatosMovimiento","concepto","setConcepto","usuarioEntrega","setUsuarioEntrega","setOrigen","setDestino","fechaMovimientoEntrega","setFechaMovimientoEntrega","cajasArray","queryObtenerUsuarios","queryObtenerCajas","onChangeDatos","tipo_movimiento","rol_movimiento","horario_turno","usuario_entrega","origen_entrega","fecha_movimiento_entrega","hora_moviento","hora","minutos","segundos","completa","fecha_movimiento","mes","dia","no_semana_year","week","no_dia_year","dayOfYear","montos_en_caja","monto_efectivo","monto","metodo_pago","monto_tarjeta_debito","monto_tarjeta_credito","monto_creditos","monto_monedero","monto_transferencia","monto_cheques","monto_vales_despensa","comentarios","enviarDatos","movimiento","crearMovimientoCuenta","handleChangeConcepto","con","RetirosIcon","usu","ori","caja","fecMov","des","rows","rootBusqueda","HistorialCuentas","setSaldoCaja","datosFiltro","setDatosFiltro","fecha_inicio","fecha_fin","historialCuenta","obtenerHistorialCuenta","saldo_en_caja","RowsHistorial","buttons","CajaPrincipal","saldoCaja","TablaCompras","OBTENER_ABONOS_PROVEEDORES","OBTENER_HISTORIAL_ABONOS","OBTENER_HISTORIAL_ABONOS_CLIENTE","CREAR_ABONO","CREAR_ABONO_CLIENTE","CANCELAR_ABONO_CLIENTE","CANCELAR_ABONO_PROVEEDOR","withRouter","fileName","columnName","columnsEffect","widthPx","abonoSelected","setAbonoSelected","openCancelar","setOpenCancelar","loadingCancelar","setLoadingCancelar","cancelarAbonoProveedor","dataExcel","id_cliente","id_egreso","abonos","obtenerHistorialAbonos","monto_total_abonado","cancelAbono","id_Caja","monto_abono","clave_proveedor","nombre_proveedor","telefono_proveedor","telefono_cliente","email_proveedor","email_cliente","id_abono","metodo_de_pago","abono","history","affirmCancelar","mrstyle","CrearAbono","setAbono","setMetodoPago","clave","metodo","DetallesCuenta","folio","recargar","cuentaTotalDescuento","setCuentaTotalDescuento","setDineroDescontado","porciento_descuento","valueLabelFormat","cuenta_con_descuento","pagada","vencidas","TablaAbonos","RowsCuentas","cuentaSelect","clearTimeout","timer","TwoClickInRowTableBuy","estatus_credito","vencer","rootSearch","AbonosProveedores","obtenerAbonosProveedores","AbonosIcon","AbonosCtx","AbonosProvider","setVentas","openAbonar","setOpenAbonar","setAbonos","DetalleVentaCredito","setOpenDetalle","openDetalle","columnsExcel","cancelarAbonoCliente","setOpenHistorial","openHistorial","rowSelected","fecha_movimiento_credito","estatus","id_venta","setTotal","crearAbonoVentaCredito","liquidarVentas","ObjectMetodoPago","val","monto_total","total_ventas","isIcon","liquidar","setNameMetodo","hacerAbono","openDialog","enviarCantidad","TablaVentasCredito","setRowSelected","fecha_de_vencimiento_credito","detalle","Dehaze","historial","selectedClient","CONSULTA_PRODUCTO_UNITARIO","CONSULTA_PRODUCTOS_VENTAS","OBTENER_CLIENTES_VENTAS","CREAR_VENTA","CREAR_NOTA_CREDITO","OBTENER_VENTAS_SUCURSAL","OBTENER_VENTAS_REPORTES","OBTENER_REPORTE_VENTAS_VENTA","CANCELAR_VENTA_SUCURSAL","SUBIR_VENTAS_CLOUD","titleSelect","iconSize","borderBotonChico","AbonosClientes","context","loadingClientes","setLoadingClientes","setSelectedClient","pageCliente","setPageCliente","pageHistorial","setPageHistorial","dataDocsClientes","setDataDocsClientes","totalDocsClientes","setTotalDocsClientes","totalVentas","setTotalVentas","historialVentasACredito","addEventListener","fromVentas","obtenerVentasCredito","idCliente","getClientes","reset","obtenerClientesVentas","arrayToset","ChangeClientAutocomplate","liquidarTodas","copyArray","IndexTesoreria","FacturacionCtx","FacturacionProvider","serie","currency","expedition_place","cfdi_type","payment_form","payment_method","logo_url","date","issuer","FiscalRegime","Rfc","receiver","CfdiUse","items","datosFactura","setDatosFactura","venta_factura","setVentaFactura","cp_valido","setCPValido","setCodigoPostal","error_validation","ProductosSinClaveSat","ListaVentasFactura","ComponentBusquedaVenta","open_productos","setOpenProductos","productos_sin_clave","setProductosSinClave","isDate","isValid","resultado_ventas","filtros","vista","openProductosClaves","RenderLista","obtenerVentasSucursal","facturada","factura","without_sat_code","productos_base","datos_factura","obtenerVenta","Description","CodigoPostal","CP","obtenerCodigoPostal","ListaClientesFacturas","BuscadorClienteComponent","openAlertRfc","setOpenAlertRfc","resultado_clientes","openAlertRFC","RenderListClientes","minwidth","obtenerClienteTabla","RegistroFactura","serie_default","ModificarProductoFactura","producto_base","setProductoBase","venta_base","setVentaBase","cantidad_base","precio_base","venta_copy","resta_base","suma_nuevo","precios_nuevos","impuestos_precio","copy_array_productos","guardarPrecios","EliminarProductoFactura","copy_venta","copy_productos","precio_resta","DetallesFactura","RowTableProductos","verificarDatosFactura","factura_initial_state","RealizarFactura","CrearFactura","crearFactura","nuevo_obj","Taxes","Total","Base","Rate","IsRetention","ProductCode","IdentificationNumber","UnitCode","UnitPrice","Quantity","Subtotal","subtotal_antes_de_impuestos","Discount","descuento_producto","folio_venta","InputsFacturaModal","CancelarFactura","handleCloseFactura","cancelar","NuevaFactura","FacturaIcon","DialogFacturaPrincipal","openCancel","setOpenCancel","cancelarCFDI","FacturaModalContent","seriesCfdi","obtenerSeriesCdfi","RegistroSeries","crearSerieCFDI","obtenerDatosSeries","ListaSeriesCDFI","modificarDefaultSerie","setPredeterminado","ModalDeleteSerie","eliminarSerie","eliminarSerieBD","SeriesCDFI","Factura1Icon","ContentSeriesCFDI","base64toBlob","bytes","atob","out","Uint8Array","charCodeAt","Blob","DetallesFacturaModal","facturaBase64","decodedHTML","htmlBase64","blob_pdf","pdfBase64","url_pdf","blob_xml","xmlBase64","url_xml","html","download","href","borderBottom","ComplementosFactura","handleSelectFactura","Collapse","in","timeout","unmountOnExit","complementos","cfdi","complement","Payments","RelatedDocuments","PaymentMethod","PaymentForm","PartialityNumber","PreviousBalanceAmount","Amount","notas_credito","borderLeft","TablaFacturasFiltradas","setFactura","setFacturaBase64","getDocumentCfdi","id_cfdi","obtenerDocumentCfdi","RenderListFacturas","desplegar","setDesplegar","discount","sub_total","ExportarFacturas","facturas","taxes","TaxName","satCertNumber","TaxStamp","SatCertNumber","FiltrosFactura","obtenerFacturas","CapturaDeDatos","obtenerCamposFiltro","realizarBusquedaBD","ClearOutlined","EliminarAlmacen","eliminarAlmacen","handleDeleteAlmacen","heigth","ListaAlmacen","obtenerAlmacenes","RegistroAlmacen","TraspasosAlmacenContext","TraspasosProvider","productosTo","setProductosTo","productosEmpTo","setProductosEmpTo","productosTras","setProductosTras","setDataExcel","productoData","setNew_medidas","nuevaCantidad","medidas_registradas","new_medidas","presentaciones_existentes","paddingRight","cell","idProducto","cantidadAnt","copy_medida","product_selected","new_medidasCopia","med","Object","hasOwnProperty","call","cant","order","orderBy","onRequestSort","headCellsNames","add","sortDirection","TableSortLabel","useToolbarStyles","inputCantidad","inputCantidadTable","highlight","lighten","light","text","dark","flexWrap","DialogTallas","close","setOpenTallas","setproduct_selected","prod","openTallas","almacenOrigen","newMedidasCopy","prodSelect","existe","copyProductosTras","medidasTo","newMed","obj","EnhancedTableToolbar","cantidadTo","setCantidadTo","openEnd","setOpenEnd","tipoPieza","setValueToTrans","mensaje","find","totalCantExistMasNuevaCantidad","piezas","cantidad_existente_maxima","unidadMaxima","TipoPiezaComponent","TIPO_PIEZA","unidad_minima","clsx","intValue","onlyNumbers","deletesItems","EnhancedTable","setOrder","setOrderBy","setCant","setTipoPieza","elemento","haveCant","datosMap","handleSelectAllClick","scope","prod_sel","editItem","prodSet","deleteItem","pageAlm","setPageAlm","boxUpData","selected2","inputBox","boxControl","centerControl","almacenName","transportes","steps","Traspasos","haveConcepto","setHaveConcepto","conceptoTraspaso","setConceptoTraspaso","isAlmacenOrigen","setIsAlmacenOrigen","isAlmacenDestino","setIsAlmacenDestino","setAlmacenOrigen","almacenDestino","setAlmacenDestino","almacenesDestino","setAlmacenesDestino","transporte","setTransporte","placas","setPlacas","nombreQuien","setNombreQuien","activeStep","setActiveStep","Set","skipped","setSkipped","CrearTraspaso","queryObtenerAlmacenes","dataConceptos","categoriasQuery","productosQuery","productosEmpresaQuery","obtenerProductosAlmacen","obtenerProductosEmpresa","obtenerProductosPorEmpresa","newSkipped","isStepSkipped","delete","prevActiveStep","step","has","handleBack","traspasar","concepto_traspaso","almacen_origen","almacen_destino","datos_transporte","nombre_encargado","sucursalOrigen","sucursalDestino","traspaso","crearTraspaso","productosAlmacenQuery","sx","almacenIcon","Stepper","stepProps","completed","Step","StepLabel","justify","trans","pt","handleNext","MedidasAlmacenes","almacenSeleccionado","Row","ItemReturn","DialogMedidasAlmacenes","setAlmacen","medidasAlmacen","setMedidasAlmacen","alm","ListaAlmacenes","toShowMedidasAlmacen","productosLength","Rowrow","rowProps","dataExcelHere","setDataExcelHere","arrayCantidades","setArrayCantidades","sz","alignment","wrapText","bottom","rgb","setRow","setUnidad_Minima","tot","r","datExc","uniMin","arrayCantidadesInto","almacenColumna","existencia_almacenes","costo_producto","costoProducto","costo_total_produc","totalProductosExcel","costoProd","totalHere","totalProductos","InventariosPorAlmacen","conceptosAlmacenImg","InventarioPorAlmacen","setObtenerAlmacenes","setColumns","almace","obtenerProductosAlmacenes","TablaHistorialFiltrado","abs","ExportarReportesCajas","reporteData","hora_movimiento","cajaSelected","iconSave","right","HistorialCaja","datosBuscar","setDatosBuscar","obtenerHistorialCaja","fecha_incio","handleDatos","media","expand","transition","transitions","create","duration","shortest","expandOpen","red","textActive","CardCaja","Card","CardHeader","setCajaSelected","handleClickOpenHistorial","CajaIcon","cantidad_efectivo_actual","fetchCajas","TablaTurnosFiltrados","turnos","hora_entrada","hora_salida","ExportarReportesTurnos","reportesData","fecha_entrada","fecha_salida","ReportesTurnosUsuarios","TurnosIcon","FiltroTablaTurnos","setFiltros","historialTurnos","fechaInicio","fechaFin","obtenerFiltroTurnos","TablaComprasFiltradas","OBTENER_REPORTE_COMPRAS","ExportarCompras","forma","FiltrosCompras","vigentes","liquidadas","obtenerProductoMovimientos","obtenerChecksVencidas","ReportesCompras","normal_color","cancelada","TablaVentasFiltradas","checkbox","nota_credito","venta_credito","cantidad_devuelta","cantidad_vendida","totalVenta","ExportarVentas","cliente_venta","cantidad_regresada","total_nota","CampoCajas","CustomCheckboxCanceladas","CustomCheckboxNotas","initial_state_filtros","canceladas","facturadas","FiltrosVenta","obtenerVentasReportes","obtenerChecksFiltro","obtenerVentasByVentaReportes","forma_pago_filtrada","metodo_pago_filtrada","usuario_caja","textTable","ExportarRVPDF","loadingPdf","setLoadingPdf","divInformation","html2canvas","canvas","doc","jsPDF","imgData","toDataURL","imgProps","getImageProperties","pdfWidth","internal","pageSize","getWidth","pdfHeight","addImage","autoTable","didDrawPage","footerStr","pageNumber","setFontSize","save","printDocument","ContentPDF","pb","FiltrosComponentPDF","publico_general","cafiLogo","formaP","obtenerFormaPago","CheckBox","CheckBoxOutlineBlankOutlined","FiltrosPorVenta","notifyOnNetworkStatusChange","ReportesVentas","CartIcon","ExportarTraspasos","id_traspaso","TablaAlmacenFiltradas","ReportesAlmacen","AlmacenIcon","RenderComponentQuery","fecha_final","inputFilter","encargado","setEncargado","traspasosAlmacenes","setDatosInput","fil","obtenerTraspasos","enc","almDes","almOri","encId","setEncargadoInput","setQueryAlmacenOrigen","setQueryAlmacenDestino","filt","limpiarFiltros","C","AccionWrite","AccionCut","AccionCash","AccionCutPartial","AccionAlign","AccionFontSize","AccionFont","AccionEmphasize","AccionFeed","AccionQr","AlineacionCentro","AlineacionDerecha","AlineacionIzquierda","FuenteA","FuenteB","AccionBarcode128","AccionBarcode39","AccionBarcode93","AccionBarcodeEAN","AccionBarcodeTwoOfFiveSinInterleaved","AccionBarcodeTwoOfFiveInterleaved","AccionBarcodeCodabar","AccionBarcodeUPCA","AccionBarcodeUPCE","Medida80","Medida100","Medida156","Medida200","Medida300","Medida350","URL_PLUGIN","OperacionTicket","this","Impresora","ruta","operaciones","Error","fetch","method","body","json","nombreImpresora","payload","impresora","validarMedida","validarTipo","ip","respuestaDecodificada","imprimirTicketCorte","corte","montos","tableHead","tableBody","cut","setEmphasize","setAlign","write","feed","cutPartial","end","TablaCortesFiltradas","cortes","loadingPrint","setLoadingPrint","number_user","obtenerCorte","montos_sistema","obtenerCorteCaja","montos_en_sistema","handlePrintTicket","InformacionCorteCaja","ExportExcel","historialCortes","cortesCajaData","imprimirTicketVenta","SelectPrinter","setPrint","print","printers","setPrinters","loadingPrinters","setLoadingPrinters","getImpresoras","listaDeImpresoras","printer","setImpresora","TicketPrinterComponent","ReportesCortes","cajasBase","fecha_consulta","obtenerCortesDeCaja","CashRegisterIcon","createData","code","population","density","iconSvgVenta","AlmacenImg","MoneyImg","FacturaImg","axis","onChangeIndex","VentasContext","VentasProvider","DatosVentasActual","setDatosVentasActual","datosProductoVentas","setDatosProductoVentas","setProductosVentas","datosVentas","setDatosVentas","productoCambioPrecio","setProductoCambioPrecio","precioSelectProductoVenta","setPrecioSelectProductoVenta","clientesVentas","setClientesVentas","turnoActivo","setTurnoActivo","ubicacionTurno","setUbicacionTurno","abrirTurnosDialog","setAbrirTurnosDialog","venta_retomada","setVentaRetomada","updateTablaVentas","setUpdateTablaVentas","openBackDrop","setOpenBackDrop","openBuscarProducto","setOpenBuscarProducto","ComponentGetDataDBCloud","actualizarBDLocal","getData","CloudDownload","htmlColor","buttonIcon","ComponentGetDataDBCloudViewAdmin","ComponentVentasToCloud","subirVentasCloud","removeStorageVentas","saveVentasToCloudFail","subir_ventas_cloud","arrayVentasCloud","up_ventas","ventas_fail","Backup","ComponentOnline","openMenu","setOpenMenu","currentTarget","Wifi","WifiOff","Menu","anchorEl","appbar","navbar","grey","menuButton","CerrarSesionDialog","signOut","token","reloadPage","setReloadPage","location","Link","to","ShoppingCart","flexShrink","drawerColor","drawerPaper","navigationTop","iconSizeSuperior","info","iconSizeSecondSuperior","iconSizeInferior","iconSizeSecondInferior","iconSizeSecondInferiorGrande","iconSizeInferiorGrande","borderBoton","rootPrecioProductos","containerImage","rootBusquedaProductos","rootFecha","iconSizeDialogs","iconSizeDialogsPequeno","containerImagenesProducto","imagenProducto","CrearNuevaCuenta","CrearNuevaSubcuenta","DepositoRetiroCaja","CrearHistorialCaja","preCorteDeCaja","dineroEnCaja","obtenerPreCorteCaja","monto_efectivo_precorte","altKey","id_User","CashReg2Icon","RadioGroup","Radio","ComponenteSinConexion","CrearRegistroDeTurno","montoTurno","setMontoTurno","cerrarTurno","setCerrarTurno","montoResguardo","setMontoResguardo","montoRetiro","setMontoRetiro","montosTotales","setMontosTotales","obtenerCamposMontos","sum","monto_puntos","arraySesion","exp","iat","actualizarTurnoSesion","montoEfectivo","montoTranferir","sign","Turnos","imprimirTicketPrecorte","PreCorteCaja","loadingTicket","setLoadingTicket","printTicket","CorteIcon","VentaEnEspera","ventaLS","agregarVentaEnEspera","datosVenta","cleanData","RegistroInformacionRapido","setAbrirTallaColor","varIVA","varIEPS","TallasColoresRapidos","Acceso","datosUser","setDatosUser","handleClickClose","obtenerQuery","obtenerAccesoPermiso","permiso_concedido","SwitchPermisos","ArticuloRapido","crearProductoRapido","abrirTallaColor","AceesoProductoRapido","ArticuloIcon","DetallesIcon","ColoresIcon","ProductoRapidoIndex","CREAR_COTIZACION","CONSULTAR_COTIZACIONES","backgroundPosition","backgroundSize","textoSecundario","firma","intructor","codigo","CotizacionPdf","cotizacion","pdf","addPage","CotizacionInformation","iva_total_producto","ieps_total_producto","subtotal_total_producto","impuestos_total_producto","total_total_producto","ComponenteDescuento","descuento_general_activo","descuento_general","DetalleCotizacion","ComponenteMedidaColor","CotizacionesPendientes","view","setView","handleModalCotizacion","obtenerCotizaciones","CotizacionRow","openMessage","setOpenMessage","updateDataStorage","openDetail","fecha_vencimiento_cotizacion","AgregarVentaDeNuevo","objectToSave","isBefore","RegresarVenta","ListaCotizaciones","ListaIcon","BottomNavigation","Abonos","productosBusqueda","setProductoSeleccionado","productoSeleccionado","agregarProductos","handleTableSelect","RowsProductos","ComponentCantidad","InformacionProducto","BuscarProducto","open_message","searchProducto","setSearchProducto","inputProductos","obtenerProductosVentas","useMemo","without_inventary","granel_base","venta_existente","productosVentasTemp","CalculosData","producto_encontrado","productoPrecioFinal","new_prices","verify_prising","calculo_resta","calculo_sumar","new_resta","focus","ClientesVentas","NuevaCotizacion","CrearCotizacion","newCotizacion","setNewCotizacion","totalDescount","setTotalDescount","setPorcentaje","original_datos_Ventas","crearCotizacion","fecha_vencimiento","cantidad_descontado","dias_de_credito_venta","productosFinal","productStorage","product","porsentajeNewDescuento","dineroDescontadoDescuento","newPrecioVentaProduct","newIvaProduct","newIepsProduct","newPrecioNetoProduct","newUtilidadProduct","valorGranel","descuentoProducto","handleCalculateNewDiscountVenta","ventaSubtotal","obtenerPorciento","Cotizacion","tipoVentana","setTipoVentana","CancelarVenta","ShoppinIcon","ObtenerMontos","setMontos","totales","setTotales","montoEnCaja","setMontoEnCaja","datosCliente","efectivoConstante","setEfectivoConstante","venta_original","total_venta","handlerChangeValue","efectivo","tarjeta","puntos","transferencia","cheque","monto_caja","monto_pagado","cambio_caja","cambio","clearFieldOnFocus","validateCantidadesCorrectas","MoneyIcon","TarjetaIcon","TransfeIcon","ChequeIcon","InfoTotalesVenta","CreditoVenta","setDatosCliente","fechaVencimientoDate","setfechaVencimientoDate","setAbonoMinimo","abono_minimo","modelDate","hoy","diasDiff","diff","DescuentoVenta","descuentoAplicarVenta","setDescuentoAplicarVenta","descuentoPorsentajeVenta","setDescuentoPorsentajeVenta","setVariables","subtotal_venta","descuentoPorsentaje","descuentoPrecio","handleInvalidInput","precioVariable","setPrecioVariable","porcentVariable","setPorcentVariable","PRICE","PERCENT","positiveDiscount","handlerChangeDiscountVenta","dineroDescuento","handleChangePorsentDiscount","ventaFinal","tableTotal","tablePago","abrirCajonQuery","resultDecodificada","initial_state_montos","initial_state_totales","CerrarVenta","setCambio","sesionUsuario","saveVentasToCloud","setVentaCredito","setCreditoDisponible","limite_superado","setLimiteSuperado","monederoTotal","setMonederoTotal","editarCliente","setEditarCliente","setMonedero","fecha_venta","setFechaVenta","createVenta","datos_cliente","monedero_generado","calcularMonedero","handleCloseCambio","resetStates","handleClickFinishVenta","montosEnCaja","abonoMinimo","editar_cliente","puntos_totales_venta","numero_mayor","keys","ventaTo","datos_to_save_storage","tipo_venta","resultCajon","tecla_escape","pr","PreciosProductos","selectPrisingProduct","setSelectPrisingProduct","handleAceptChangePrising","newProductoPrecioNuevo","newProductoPrecioActual","new_suma","doubleClick","ListaVentas","handleModalEspera","listaEnEspera","RowsVentas","borrarVenta","nueva_venta_espera","verificarPermisos","EliminarVentaEspera","VentasEspera","EnEsperaIcon","CancelarFolio","handleCloseInfoVenta","dinero_disponible","observaciones","devolucion_efectivo","devolucion_credito","cancelarVentasSucursal","handleChangeChecks","handleCancelSale","seleccionado","InfoVentaFolio","handleCloseListaVentas","openSnack","setOpenSnack","restaurarVenta","cantidad_venta_original","id_unidad_venta","total_original","saldo_favor","disableRipple","disableFocusRipple","ListaVentasRealizadas","setParams","input_precorte","res_precorte","data_precorte","tableStyles","today_color","RowComprasRealizadas","today","VentasRealizadas","VentasIcon","AbrirCajon","abrirCajon","CajonIcon","CrearNota","setObservaciones","crearNotaCredito","crearNota","litros","generar_cfdi","devolucion_en","NotaIcon","NotaCredito","NavegacionVentasLateral","EliminarProductoNota","copy_product","agregarProducto","breakpoints","up","datosTabla","setDatosTabla","newCantidadProduct","setNewCantidadProduct","tempAmount","setTempAmount","CalculeDataPricing","new_cant","newPrising","precio_actual_porducto","calculateNewPricingAmount","AgregarTipoVenta","setTipoEmision","TipoVentaIcon","loaded","setLoaded","selectClient","setSelectClient","openOnFocus","dataCliente","AgregarClienteVenta","justifySelf","ClienteIcon","ProductoConMedidas","VistaMedidasVenta","MappingProductos","showZero","AgregarProductoVenta","setClave","openMedidas","setOpenMedidas","setProducto","datosProductos","consultaBase","setConsultaBase","keyUpEvent","input_value","datosQuery","data_operation","data_key","productosBase","obtenerUnProductoVentas","CodigoIcon","onKeyUp","ContenedorInputsGeneral","TotalesNotaCredito","VentasGenerales","AbrirTurno","abrirTurno","setAbrirTurno","numeroCaja","setNumeroCaja","obtenerTurno","turno_en_curso","caja_elegida","monto_abrir","crearRegistroDeTurno","VentaIndex","AbrirTurnoEnVentas","LayoutWithProvider","NavDataCajaUsers","Administrador","srsc","routes","logearUsuario","signin","decoded","jwt_decode","labelWidth","exact","logo","adminIcon","AdminInicio","createTheme","secondaryCafi","ConexionDetect","firstLoad","setLoasetFirstLoad","coneccion","setConeccion","render","online","SnackOnline","SnackOffline","httpLink","createUploadLink","uri","process","ApolloClient","connectToDevTools","cache","InMemoryCache","addTypename","link","RoutesWithSubRoutes","route","App","CssBaseline","ApolloProvider","ThemeProvider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"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","file":"static/js/main.dad28cf6.chunk.js","sourcesContent":["import { gql } from \"@apollo/client\";\r\n\r\nexport const VERIFY_USER = gql`\r\n  mutation verifyUserName($username: String) {\r\n    verifyUserName(username: $username) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_USUARIO = gql`\r\n  mutation crearUsuario($input: CrearUsuarioInput) {\r\n    crearUsuario(input: $input) {\r\n      _id\r\n      numero_usuario\r\n      nombre\r\n      telefono\r\n      celular\r\n      email\r\n      turno_en_caja_activo\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      imagen\r\n      estado_usuario\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n        correo_empresa\r\n        nombre_dueno\r\n        telefono_dueno\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n        descripcion\r\n      }\r\n      accesos {\r\n        mi_empresa {\r\n          datos_empresa {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          informacion_fiscal {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        compras {\r\n          abrir_compra {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          compras_realizadas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          compras_espera {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        tesoreria {\r\n          cuentas_empresa {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          egresos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          abonos_proveedores {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          abonos_clientes {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          caja_principal {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        reportes {\r\n          reporte_historial_cajas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_turnos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_compras {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_ventas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          rerporte_almacen {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_corte_caja {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_tesoreria {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        ventas {\r\n          cancelar_venta {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          precios_productos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          pre_corte {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          cotizaciones {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          administrador {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          eliminar_ventas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          producto_rapido {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        facturacion {\r\n          generar_cdfi {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          cdfi_realizados {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          registro_series_cdfi {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        almacenes {\r\n          almacen {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          traspasos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          inventario_almacen {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        catalogos {\r\n          clientes {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          usuarios {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          productos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          marcas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          contabilidad {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          provedores {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          cajas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          departamentos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          centro_costos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          conceptos_almacen {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          categorias {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          colores {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          colores {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          tallas_numeros {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_USUARIOS = gql`\r\n  query obtenerUsuarios(\r\n    $empresa: String!\r\n    $sucursal: String\r\n    $filtro: String\r\n    $eliminado: Boolean\r\n  ) {\r\n    obtenerUsuarios(empresa: $empresa, sucursal: $sucursal, filtro: $filtro, eliminado: $eliminado) {\r\n      _id\r\n      numero_usuario\r\n      nombre\r\n      telefono\r\n      celular\r\n      turno_en_caja_activo\r\n      email\r\n      username_login\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      imagen\r\n      estado_usuario\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n        correo_empresa\r\n        nombre_dueno\r\n        telefono_dueno\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n        descripcion\r\n      }\r\n      accesos {\r\n        mi_empresa {\r\n          datos_empresa {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          informacion_fiscal {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        compras {\r\n          abrir_compra {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          compras_realizadas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          compras_espera {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        tesoreria {\r\n          cuentas_empresa {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          egresos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          abonos_proveedores {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          abonos_clientes {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          caja_principal {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        reportes {\r\n          reporte_historial_cajas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_turnos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_compras {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_ventas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          rerporte_almacen {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_corte_caja {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          reporte_tesoreria {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        ventas {\r\n          cancelar_venta {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          precios_productos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          pre_corte {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          cotizaciones {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          administrador {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          eliminar_ventas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          producto_rapido {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        almacenes {\r\n          almacen {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          traspasos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          inventario_almacen {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        facturacion {\r\n          generar_cdfi {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          cdfi_realizados {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          registro_series_cdfi {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n        catalogos {\r\n          clientes {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          usuarios {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          productos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          marcas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          contabilidad {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          provedores {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          cajas {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          departamentos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          centro_costos {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          conceptos_almacen {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          categorias {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          colores {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n          tallas_numeros {\r\n            ver\r\n            agregar\r\n            editar\r\n            eliminar\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_USUARIO = gql`\r\n  mutation actualizarUsuario( $id: ID!, $input: ActualizarUsuarioInput, $empresa: ID!, $sucursal: ID!) {\r\n    actualizarUsuario(id: $id, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const LOGEAR_USUARIO = gql`\r\n  mutation logearUsuario($input: LogearUsuarioInput) {\r\n    logearUsuario(input: $input) {\r\n      token\r\n    }\r\n  }\r\n`;\r\n\r\nexport const LOGEAR_USUARIO_ACCESOS = gql`\r\n  query ObtenerAccesoPermiso($input: ObtenerAccesoPermisosInput) {\r\n    obtenerAccesoPermiso(input: $input) {\r\n      permiso_concedido\r\n      departamento\r\n      subDepartamento\r\n    }\r\n  }\r\n`;\r\n\r\nexport const AGIGNAR_PERMISOS_USUARIO = gql`\r\n  mutation asignarAccesosUsuario($input: CrearArregloDeAccesosInput, $id: ID!) {\r\n    asignarAccesosUsuario(id: $id, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_BD_LOCAL = gql`\r\n  mutation actualizarBDLocal($empresa: ID!, $sucursal: ID!) {\r\n    actualizarBDLocal(empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { Box, makeStyles, Snackbar, Typography, Portal } from '@material-ui/core';\r\n/* import { Alert } from '@material-ui/lab'; */\r\nimport React from 'react';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tsnack: {\r\n\t\tzIndex: `${99999}!important`\r\n\t}\r\n}));\r\n\r\nexport default function SnackBarMessages({ alert, setAlert }) {\r\n\tconst classes = useStyles();\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAlert({ open: false, status: alert.status, message: '' });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Portal>\r\n\t\t\t<Snackbar\r\n\t\t\t\tclassName={classes.snack}\r\n\t\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\t\topen={alert.open}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t\tautoHideDuration={3000}\r\n\t\t\t\tmessage={\r\n\t\t\t\t\t<Box display=\"flex\">\r\n\t\t\t\t\t\t{alert.status === 'success' ? (\r\n\t\t\t\t\t\t\t<CheckCircleIcon style={{ color: '#22bb33' }} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ErrorIcon style={{ color: 'red' }} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Box mr={1} />\r\n\t\t\t\t\t\t<Typography>{alert.message}</Typography>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t</Portal>\r\n\t);\r\n\t/* return (\r\n\t\t<Snackbar\r\n\t\t\tclassName={classes.snack}\r\n\t\t\tanchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n\t\t\topen={alert.open}\r\n\t\t\tonClose={handleClose}\r\n\t\t\tautoHideDuration={2000}\r\n\t\t>\r\n\t\t\t<Alert onClose={handleClose} severity={alert.status}>\r\n\t\t\t\t{alert.message}\r\n\t\t\t</Alert>\r\n\t\t</Snackbar>\r\n\t); */\r\n}\r\n","export default __webpack_public_path__ + \"static/media/Cafi.d1da222a.svg\";","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRAR_TURNOS = gql`\r\n  mutation crearRegistroDeTurno(\r\n    $input: AbrirCerrarTurnoInput\r\n    $activa: Boolean\r\n  ) {\r\n    crearRegistroDeTurno(input: $input, activa: $activa) {\r\n      _id\r\n      horario_en_turno\r\n      token_turno_user\r\n      concepto\r\n      numero_caja\r\n      id_caja\r\n      comentarios\r\n      hora_entrada {\r\n        hora\r\n        minutos\r\n        segundos\r\n      }\r\n      hora_salida {\r\n        hora\r\n        minutos\r\n        segundos\r\n      }\r\n      fecha_entrada {\r\n        year\r\n        mes\r\n        dia\r\n        no_semana_year\r\n        no_dia_year\r\n      }\r\n      fecha_salida {\r\n        year\r\n        mes\r\n        dia\r\n        no_semana_year\r\n        no_dia_year\r\n      }\r\n      fecha_movimiento\r\n      montos_en_caja {\r\n        monto_efectivo {\r\n          monto\r\n        }\r\n        monto_tarjeta_credito {\r\n          monto\r\n        }\r\n        monto_tarjeta_debito {\r\n          monto\r\n        }\r\n        monto_creditos {\r\n          monto\r\n        }\r\n        monto_monedero {\r\n          monto\r\n        }\r\n        monto_transferencia {\r\n          monto\r\n        }\r\n        monto_cheques {\r\n          monto\r\n        }\r\n        monto_vales_despensa {\r\n          monto\r\n        }\r\n      }\r\n      usuario_en_turno {\r\n        numero_usuario\r\n        nombre\r\n      }\r\n      id_usuario\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\nexport const UP_TURNO = gql`\r\n  mutation subirTurnoCloud(\r\n    $input: AbrirCerrarTurnoInput\r\n    $activa: Boolean,\r\n    $isOnline: Boolean\r\n  ) {\r\n    subirTurnoCloud(input: $input, activa: $activa, isOnline: $isOnline) {\r\n      message\r\n      done\r\n    }\r\n  }\r\n`;\r\nexport const OBTENER_HISTORIAL_TURNOS = gql`\r\n  query obtenerFiltroTurnos(\r\n    $input: HistorialTurnosInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n\t$limit: Int\r\n\t$offset: Int\r\n  ) {\r\n    obtenerFiltroTurnos(input: $input, empresa: $empresa, sucursal: $sucursal, limit: $limit, offset: $offset) {\r\n      docs {\r\n        horario_en_turno\r\n        concepto\r\n        numero_caja\r\n        id_caja\r\n        comentarios\r\n        hora_entrada {\r\n          hora\r\n          minutos\r\n          segundos\r\n          completa\r\n        }\r\n        hora_salida {\r\n          hora\r\n          minutos\r\n          segundos\r\n          completa\r\n        }\r\n        fecha_entrada {\r\n          year\r\n          mes\r\n          dia\r\n          no_semana_year\r\n          no_dia_year\r\n          completa\r\n        }\r\n        fecha_salida {\r\n          year\r\n          mes\r\n          dia\r\n          no_semana_year\r\n          no_dia_year\r\n          completa\r\n        }\r\n        fecha_movimiento\r\n        montos_en_caja {\r\n          monto_efectivo {\r\n            monto\r\n          }\r\n          monto_tarjeta_credito {\r\n            monto\r\n          }\r\n          monto_tarjeta_debito {\r\n            monto\r\n          }\r\n          monto_creditos {\r\n            monto\r\n          }\r\n          monto_monedero {\r\n            monto\r\n          }\r\n          monto_transferencia {\r\n            monto\r\n          }\r\n          monto_cheques {\r\n            monto\r\n          }\r\n          monto_vales_despensa {\r\n            monto\r\n          }\r\n        }\r\n        usuario_en_turno {\r\n          numero_usuario\r\n          nombre\r\n        }\r\n        empresa\r\n        sucursal\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n","import React, { createContext, useState, useEffect } from 'react';\r\nimport { UP_TURNO } from \"../../gql/Ventas/abrir_cerrar_turno\";\r\nimport { useMutation } from \"@apollo/client\";\r\nexport const AccesosContext = createContext();\r\n\r\nexport const AccesosProvider = ({ children }) => {\r\n    const [ isOnline, setIsOnline ] = useState(false);\r\n    const [ ventasToCloud, setVentasToCloud ] = useState([]);\r\n    const [ abrirPanelAcceso, setAbrirPanelAcceso ] = useState(false);\r\n    const [ departamentos, setDepartamentos ] = useState({departamento: '', subDepartamento: '', tipo_acceso: ''});\r\n\r\n    const [ reloadAdministrador, setReloadAdministrador ] = useState(false);\r\n    const [ reloadProductoRapido, setReloadProductoRapido ] = useState(false);\r\n    const [ reloadCancelarVenta, setReloadCancelarVenta ] = useState(false);\r\n    const [ reloadVerPrecios, setReloadVerPrecios ] = useState(false);\r\n    const [ reloadVerPreCorte, setReloadVerPreCorte ] = useState(false);\r\n    const [ reloadEliminarVentaEspera, setReloadEliminarVentaEspera ] = useState(false);\r\n    const [ reloadCrearCotizacion, setReloadCrearCotizacion ] = useState(false);\r\n    const [loadingPage, setLoadingPage] = React.useState(false);\r\n    const [subirTurnoCloud] = useMutation(UP_TURNO);\r\n    const saveVentasToCloud = (objectVenta) => {\r\n        try {\r\n            let oldItems = (JSON.parse(localStorage.getItem('ventasToCloud'))) ? \r\n                (JSON.parse(localStorage.getItem('ventasToCloud')))\r\n                :\r\n                [];\r\n            ;\r\n           \r\n            oldItems.push(objectVenta);\r\n            localStorage.setItem(\"ventasToCloud\", JSON.stringify(oldItems));\r\n            setVentasToCloud(oldItems); \r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n       \r\n    };\r\n     \r\n    const saveVentasToCloudFail = (arrayVentas) => {\r\n        try {\r\n            localStorage.removeItem('ventasToCloud');\r\n            setVentasToCloud(arrayVentas); \r\n            localStorage.setItem(\"ventasToCloud\", JSON.stringify(arrayVentas));\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n       \r\n    };\r\n    const removeStorageVentas = (objetcVenta) => {\r\n        try {\r\n            localStorage.removeItem('ventasToCloud');\r\n            setVentasToCloud([]); \r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n       \r\n    };\r\n    \r\n    useEffect(() => {\r\n        let ventasCloud = JSON.parse(localStorage.getItem('ventasToCloud'))\r\n        setVentasToCloud((ventasCloud) ? ventasCloud : []);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if(isOnline !== undefined && isOnline === true){\r\n            let turno = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n            if(turno){\r\n                if(!turno.OnCloud){\r\n                    upTurno(turno, isOnline);  \r\n                }\r\n            }\r\n            \r\n        }\r\n \r\n    }, [isOnline]);\r\n    \r\n    const upTurno = async (turno, isOnline) => {\r\n        try {\r\n            if(!turno.onCloud){\r\n\r\n                const variableTurnoAbierto = await subirTurnoCloud({\r\n                    variables: {\r\n                    activa: true,\r\n                    input:turno,\r\n                    isOnline: isOnline\r\n                    },\r\n                }); \r\n        \r\n                turno.onCloud = variableTurnoAbierto.data.subirTurnoCloud.done;\r\n                localStorage.removeItem('turnoEnCurso');\r\n            \r\n                localStorage.setItem('turnoEnCurso',  JSON.stringify(turno));\r\n            }\r\n        } catch (error) {\r\n            if (error.networkError.result) {\r\n            console.log(error.networkError.result.errors);\r\n            } else if (error.graphQLErrors) {\r\n            console.log(error.graphQLErrors.message);\r\n            }\r\n        }\r\n    }\r\n    return (\r\n\t\t<AccesosContext.Provider value={\r\n            { \r\n                departamentos, \r\n                setDepartamentos,\r\n                reloadProductoRapido, \r\n                setReloadProductoRapido,\r\n                reloadAdministrador, \r\n                setReloadAdministrador,\r\n                abrirPanelAcceso, \r\n                setAbrirPanelAcceso,\r\n                reloadCancelarVenta, \r\n                setReloadCancelarVenta,\r\n                reloadVerPrecios, \r\n                setReloadVerPrecios,\r\n                reloadVerPreCorte, \r\n                setReloadVerPreCorte,\r\n                reloadEliminarVentaEspera, \r\n                setReloadEliminarVentaEspera,\r\n                reloadCrearCotizacion, \r\n                setReloadCrearCotizacion,\r\n                setReloadCrearCotizacion,\r\n                isOnline,\r\n                setIsOnline,\r\n                ventasToCloud,\r\n                saveVentasToCloud,\r\n                removeStorageVentas,\r\n                saveVentasToCloudFail,\r\n                loadingPage,\r\n                setLoadingPage\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</AccesosContext.Provider>\r\n\t);\r\n};","import React, { useState, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Container,\r\n  TextField,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { LOGEAR_USUARIO } from \"../../gql/Catalogos/usuarios\";\r\nimport SnackBarMessages from \"../SnackBarMessages\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { FormControl } from \"@material-ui/core\";\r\nimport { InputLabel } from \"@material-ui/core\";\r\nimport { OutlinedInput } from \"@material-ui/core\";\r\nimport { InputAdornment } from \"@material-ui/core\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport cafiLogo from \"../../img/Cafi.svg\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  margin: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  containerImagen: {\r\n    maxWidth: \"100%\",\r\n    maxHeight: 250,\r\n    display: \"flex\",\r\n    alignContent: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  imagen: {\r\n    maxWidth: \"100%\",\r\n    maxHeight: \"100%\",\r\n  },\r\n}));\r\n\r\nexport default function LayoutLogin(props) {\r\n  const classes = useStyles();\r\n  const sesion = localStorage.getItem(\"sesionCafi\");\r\n  const { isOnline} = useContext(AccesosContext);\r\n  const [datos, setDatos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  if (sesion) props.history.push(\"/ventas/venta-general\");\r\n\r\n  const [logearUsuario] = useMutation(LOGEAR_USUARIO);\r\n\r\n  const signin = async (e) => {\r\n    e.preventDefault();\r\n    if (!datos.numero_usuario || !datos.password) {\r\n      setAlert({\r\n        message: \"Los campos estan vacíos\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      return;\r\n    }\r\n    setLoading(true);\r\n\r\n    try {\r\n      const result = await logearUsuario({\r\n        variables: {\r\n          input: {\r\n            numero_usuario: datos.numero_usuario,\r\n            password: datos.password,\r\n            isOnline: isOnline\r\n          },\r\n        },\r\n      });\r\n      const { token } = result.data.logearUsuario;\r\n      const decoded = jwt_decode(token);\r\n      setLoading(false);\r\n      localStorage.setItem(\"sesionCafi\", JSON.stringify(decoded));\r\n      localStorage.setItem(\"tokenCafi\", JSON.stringify(token));\r\n      props.history.push(\"/ventas/venta-general\");\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    setDatos({\r\n      ...datos,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleClickShowPassword = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box\r\n        height=\"90vh\"\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Box width=\"80%\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            justifyItems=\"center\"\r\n          >\r\n            <Box className={classes.containerImagen} textAlign=\"center\">\r\n              <img\r\n                className={classes.imagen}\r\n                src={cafiLogo}\r\n                alt=\"imagen no disponible\"\r\n              />\r\n            </Box>\r\n          </Box>\r\n          {/* <Box display=\"flex\" textAlign=\"center\" justifyContent=\"center\">\r\n            <Typography variant=\"h4\" component=\"p\" className={classes.margin}>\r\n              <b>Entrar a cafi</b>\r\n            </Typography>\r\n          </Box> */}\r\n          <form autocomplete=\"on\" onSubmit={signin}>\r\n            <TextField\r\n              label=\"Numero de usuario o Username\"\r\n              variant=\"outlined\"\r\n              name=\"numero_usuario\"\r\n              fullWidth\r\n              className={classes.margin}\r\n              onChange={obtenerCampos}\r\n              autoComplete=\"new-password\"\r\n            />\r\n\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              name=\"password\"\r\n              className={classes.margin}\r\n              fullWidth\r\n            >\r\n              <InputLabel htmlFor=\"usuario-password\">Contraseña</InputLabel>\r\n              <OutlinedInput\r\n                autoComplete=\"new-password\"\r\n                name=\"password\"\r\n                id=\"usuario-password\"\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                onChange={obtenerCampos}\r\n                endAdornment={\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton\r\n                      onClick={handleClickShowPassword}\r\n                      onMouseDown={handleMouseDownPassword}\r\n                      edge=\"end\"\r\n                    >\r\n                      {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n                labelWidth={70}\r\n              />\r\n            </FormControl>\r\n            <Button\r\n              fullWidth\r\n              size=\"large\"\r\n              variant=\"contained\"\r\n              disableElevation\r\n              className={classes.margin}\r\n              color=\"primary\"\r\n              type=\"submit\"\r\n              endIcon={\r\n                loading ? <CircularProgress size={25} color=\"inherit\" /> : null\r\n              }\r\n            >\r\n              Entrar\r\n            </Button>\r\n          </form>\r\n        </Box>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","export const initial_state_datos_generales = {\r\n  receta_farmacia: false,\r\n  clave_producto_sat: {\r\n    Name: \"\",\r\n    Value: \"\",\r\n  },\r\n};\r\nexport const initial_state_precios = {\r\n  monedero: false,\r\n  monedero_electronico: 0,\r\n  iva_activo: true,\r\n  ieps_activo: false,\r\n  ieps: 0,\r\n  iva: 16,\r\n  granel: false,\r\n  inventario: {\r\n    inventario_minimo: 0,\r\n    inventario_maximo: 0,\r\n    unidad_de_inventario: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n  },\r\n  precio_de_compra: {\r\n    precio_con_impuesto: 0,\r\n    precio_sin_impuesto: 0,\r\n    iva: 0,\r\n    ieps: 0,\r\n  },\r\n  unidad_de_compra: {\r\n    unidad: \"Pz\",\r\n    codigo_unidad: \"H87\",\r\n    cantidad: 1,\r\n    precio_unitario_sin_impuesto: 0,\r\n    precio_unitario_con_impuesto: 0,\r\n  },\r\n};\r\n\r\nexport const initial_state_unidadVentaXDefecto = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Pz\",\r\n  codigo_unidad: \"H87\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  descuento_activo: null,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: true,\r\n  default: true,\r\n};\r\n\r\nexport const initial_state_unidadVentaSecundaria = {\r\n  codigo_barras: \"\",\r\n  unidad: \"Caja\",\r\n  codigo_unidad: \"XBX\",\r\n  cantidad: 1,\r\n  precio: 0,\r\n  descuento_activo: null,\r\n  precio_unidad: {\r\n    numero_precio: 0,\r\n    precio_neto: 0,\r\n    precio_venta: 0,\r\n    unidad_mayoreo: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n    utilidad: 0,\r\n    precio_general: 0,\r\n    cantidad_unidad: 0,\r\n    unidad_maxima: false\r\n  },\r\n  unidad_principal: false,\r\n  default: false,\r\n};\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_unidadesVenta = [\r\n  \r\n];\r\n\r\nexport const initial_state_almacen_inicial = {\r\n  id_almacen: \"\",\r\n  almacen: \"\",\r\n  cantidad: 0,\r\n  fecha_de_expiracion: \"\",\r\n};\r\nexport const initial_state_centro_de_costos = {};\r\n\r\nexport const initial_state_preciosPlazos = {\r\n  precio_piezas: [],\r\n  precio_cajas: [],\r\n  precio_costales: [],\r\n};\r\n\r\nexport const initial_state_subcategorias = [];\r\nexport const initial_state_imagenes = [];\r\nexport const initial_state_imagenes_eliminadas = [];\r\nexport const initial_state_onPreview = { index: \"\", image: \"\" };\r\nexport const initial_state_validacion = { error: false, message: \"\" };\r\nexport const initial_state_subcostos = [];\r\nexport const initial_state_selectedDate = null;\r\nexport const initial_state_presentaciones = [];\r\n","import React, { createContext, useState } from \"react\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_preciosP,\r\n  initial_state_unidadesVenta,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_subcategorias,\r\n  initial_state_imagenes,\r\n  initial_state_imagenes_eliminadas,\r\n  initial_state_onPreview,\r\n  initial_state_validacion,\r\n  initial_state_subcostos,\r\n  initial_state_selectedDate,\r\n  initial_state_presentaciones,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"./initialStatesProducto\";\r\n\r\nexport const RegProductoContext = createContext();\r\n\r\nexport const RegProductoProvider = ({ children }) => {\r\n  const [datos_generales, setDatosGenerales] = useState(\r\n    initial_state_datos_generales\r\n  );\r\n  const [precios, setPrecios] = useState(initial_state_precios);\r\n  const [unidadVentaXDefecto, setUnidadVentaXDefecto] = useState(\r\n    initial_state_unidadVentaXDefecto\r\n  );\r\n  const [unidadVentaSecundaria, setUnidadVentaSecundaria] = useState(\r\n    initial_state_unidadVentaSecundaria\r\n  );\r\n  const [preciosP, setPreciosP] = useState(initial_state_preciosP);\r\n  \r\n  const [unidadesVenta, setUnidadesVenta] = useState(\r\n    initial_state_unidadesVenta\r\n  );\r\n  const [almacen_inicial, setAlmacenInicial] = useState(\r\n    initial_state_almacen_inicial\r\n  );\r\n  const [centro_de_costos, setCentroDeCostos] = useState(\r\n    initial_state_centro_de_costos\r\n  );\r\n  const [preciosPlazos, setPreciosPlazos] = useState(\r\n    initial_state_preciosPlazos\r\n  );\r\n  const [subcategorias, setSubcategorias] = useState(\r\n    initial_state_subcategorias\r\n  );\r\n  const [imagenes, setImagenes] = useState(initial_state_imagenes);\r\n  const [imagenes_eliminadas, setImagenesEliminadas] = useState(\r\n    initial_state_imagenes_eliminadas\r\n  );\r\n  const [onPreview, setOnPreview] = useState(initial_state_onPreview);\r\n  const [validacion, setValidacion] = useState(initial_state_validacion);\r\n  const [subcostos, setSubcostos] = useState(initial_state_subcostos);\r\n  const [selectedDate, setSelectedDate] = useState(initial_state_selectedDate);\r\n  const [update, setUpdate] = useState(false);\r\n  const [presentaciones, setPresentaciones] = useState(\r\n    initial_state_presentaciones\r\n  );\r\n  const [presentaciones_eliminadas, setPresentacionesEliminadas] = useState([]);\r\n  const [actualizarLista, setActualizarLista] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  // USESTATES DE DESCUENTOS DE PRODUCTOS\r\n  const [ datosPreciosProducto, setDatosPreciosProducto ] = useState([]);\r\n  const [ preciosDescuentos, setPreciosDescuentos] = useState([]);\r\n  const [ preciosProductos, setPreciosProductos ] = useState([]);\r\n  const [ datosEnDescuentos, setDatosEnDescuentos ] = useState([]);\r\n  const [ almacen_existente, setAlmacenExistente] = useState(false);\r\n\r\n  return (\r\n    <RegProductoContext.Provider\r\n      value={{\r\n        datos_generales,\r\n        setDatosGenerales,\r\n        precios,\r\n        setPrecios,\r\n        almacen_inicial,\r\n        setAlmacenInicial,\r\n        imagenes,\r\n        setImagenes,\r\n        imagenes_eliminadas,\r\n        setImagenesEliminadas,\r\n        onPreview,\r\n        setOnPreview,\r\n        validacion,\r\n        setValidacion,\r\n        preciosP,\r\n        setPreciosP,\r\n        preciosPlazos,\r\n        setPreciosPlazos,\r\n        unidadesVenta,\r\n        setUnidadesVenta,\r\n        centro_de_costos,\r\n        setCentroDeCostos,\r\n        unidadVentaXDefecto,\r\n        setUnidadVentaXDefecto,\r\n        subcategorias,\r\n        setSubcategorias,\r\n        subcostos,\r\n        setSubcostos,\r\n        selectedDate,\r\n        setSelectedDate,\r\n        update,\r\n        setUpdate,\r\n        presentaciones,\r\n        setPresentaciones,\r\n        presentaciones_eliminadas,\r\n        setPresentacionesEliminadas,\r\n        actualizarLista,\r\n        setActualizarLista,\r\n        alert,\r\n        setAlert,\r\n\r\n        datosPreciosProducto, \r\n        setDatosPreciosProducto,\r\n        preciosDescuentos, \r\n        setPreciosDescuentos,\r\n        preciosProductos, \r\n        setPreciosProductos,\r\n        datosEnDescuentos, \r\n        setDatosEnDescuentos,\r\n        almacen_existente, \r\n        setAlmacenExistente,\r\n        unidadVentaSecundaria, \r\n        setUnidadVentaSecundaria\r\n      }}\r\n    >\r\n      {children}\r\n    </RegProductoContext.Provider>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const EmpresaContext = createContext();\r\n\r\nexport const EmpresaProvider = ({ children }) => {\r\n   \r\n\tconst [ empresa, setEmpresa ] = useState({\r\n\t\tnombre_empresa:'',\r\n        nombre_dueno:'',\r\n\t\ttelefono_dueno:'',\r\n\t\tcelular:'',\r\n\t\tcorreo_empresa:'',\r\n        nombre_fiscal:'',\r\n        rfc:'',\r\n        regimen_fiscal:'',\r\n        curp:'',\r\n        info_adicio:'',\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n        direccionFiscal: {\r\n            calle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n        },\r\n        datosBancarios:{\r\n            cuenta: '',\r\n            sucursal: '',\r\n            clave_banco: ''\r\n        },\r\n\t\timagen: null\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState({error: false, message: ''});\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<EmpresaContext.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tempresa,\r\n\t\t\t\tsetEmpresa,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</EmpresaContext.Provider>\r\n\t);\r\n};","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n    backgroundColor: \"rgba(0, 0, 0, 0.3)\"\r\n  },\r\n}));\r\n\r\nexport default function BackdropComponent({loading, setLoading}) {\r\n  const classes = useStyles();\r\n\r\n  /* const handleClose = () => {\r\n    setLoading(false);\r\n  }; */\r\n\r\n  return (\r\n    <div>\r\n      <Backdrop className={classes.backdrop} open={loading} /* onClick={handleClose} */>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport { Box, Typography } from '@material-ui/core';\r\n\r\nexport default function ErrorPage({ error, altura}) {\r\n\tlet height = altura\r\n\tif(!height) height = 400;\r\n\treturn (\r\n\t\t<Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" height={height}>\r\n\t\t\t<ErrorOutlineIcon style={{ fontSize: 100, color: 'rgba(17,85,204, 0.7)' }} />\r\n\t\t\t<Typography align=\"center\" style={{ fontSize: 18, color: 'rgba(17,85,204)' }}>\r\n\t\t\t\tHubo un problema\r\n\t\t\t</Typography>\r\n\t\t</Box>\r\n\t);\r\n}\r\n","import { gql } from \"@apollo/client\";\r\nexport const OBTENER_DATOS_EMPRESA = gql`\r\n  query obtenerEmpresa($id: ID!) {\r\n    obtenerEmpresa(id: $id) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      fecha_registro_sello_sat\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      valor_puntos\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n      vender_sin_inventario\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_EMPRESA = gql`\r\n  mutation actualizarEmpresa($id: ID!, $input: EditarEmpresa) {\r\n    actualizarEmpresa(id: $id, input: $input) {\r\n      _id\r\n      nombre_empresa\r\n      nombre_dueno\r\n      telefono_dueno\r\n      celular\r\n      correo_empresa\r\n      limite_timbres\r\n      timbres_usados\r\n      sello_sat\r\n      nombre_cer\r\n      nombre_key\r\n      imagen\r\n      nombre_fiscal\r\n      rfc\r\n      regimen_fiscal\r\n      curp\r\n      info_adicio\r\n      valor_puntos\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      direccionFiscal {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      datosBancarios {\r\n        cuenta\r\n        sucursal\r\n        clave_banco\r\n      }\r\n    }\r\n  }\r\n`;\r\n","import React, { useContext, useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Avatar,\r\n  Container,\r\n  FormControlLabel,\r\n  Checkbox,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, DialogActions } from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& .requerido\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"150px\",\r\n    height: \"150px\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function MisDatos(props) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(false);\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { empresa, update, setEmpresa, setUpdate } = useContext(EmpresaContext);\r\n\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  const [empresaDatos, setEmpresaDatos] = useState({\r\n    nombre_empresa: \"\",\r\n    nombre_dueno: \"\",\r\n    telefono_dueno: \"\",\r\n    celular: \"\",\r\n    correo_empresa: \"\",\r\n    valor_puntos: \"\",\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    regimen_fiscal: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n    imagen: null,\r\n    vender_sin_inventario: false,\r\n  });\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [update, refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaDatos({\r\n        nombre_empresa: empresa.nombre_empresa,\r\n        nombre_dueno: empresa.nombre_dueno,\r\n        telefono_dueno: empresa.telefono_dueno,\r\n        celular: empresa.celular,\r\n        valor_puntos: empresa.valor_puntos,\r\n        correo_empresa: empresa.correo_empresa,\r\n        direccion: empresa.direccion,\r\n        imagen: empresa.imagen,\r\n        vender_sin_inventario: empresa.vender_sin_inventario,\r\n      });\r\n    } catch (errorCatch) {\r\n      // console.log(errorCatch)\r\n    }\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      if(!empresaDatos.nombre_empresa || !empresaDatos.nombre_dueno){\r\n        setErrorForm(true);\r\n        return\r\n      }\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaDatos); */\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaDatos,\r\n        },\r\n      });\r\n      const empresa = { ...sesion.empresa, ...empresaDatos };\r\n      let nueva_sesion = { ...sesion };\r\n      nueva_sesion.empresa = empresa;\r\n      localStorage.setItem(\"sesionCafi\", JSON.stringify(nueva_sesion));\r\n\r\n      setUpdate(true);\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    try {\r\n      let valor = e.target.value;\r\n      if (e.target.name === \"valor_puntos\") {\r\n        valor = parseFloat(valor);\r\n      }\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        [e.target.name]: valor,\r\n      });\r\n    } catch (error) {}\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      direccion: { ...empresaDatos.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n  const handleClose = () => {\r\n    props.setOpen(false);\r\n  };\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setEmpresaDatos({\r\n        ...empresaDatos,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [empresaDatos, setEmpresaDatos]\r\n  );\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const removerImagen = () => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      imagen: \"\",\r\n    });\r\n    setPreview(\"\");\r\n  };\r\n\r\n  const handleChangeVenderInventario = (e) => {\r\n    setEmpresaDatos({\r\n      ...empresaDatos,\r\n      vender_sin_inventario: e.target.checked,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n      {errorPage ? (\r\n        <ErrorPage error={errorPage} />\r\n      ) : (\r\n        <Container style={{ marginTop: 8 }}>\r\n          <Grid container spacing={3} className={classes.require}>\r\n            <Grid\r\n              item\r\n              md={2}\r\n              xs={12}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n              }}\r\n            >\r\n              <Box>\r\n                <Box className={classes.avatarContainer} {...getRootProps()}>\r\n                  <input {...getInputProps()} />\r\n                  {preview ? (\r\n                    <Avatar className={classes.avatar} src={`${preview}`} />\r\n                  ) : (\r\n                    <Avatar\r\n                      className={classes.avatar}\r\n                      src={`${empresaDatos.imagen}`}\r\n                    />\r\n                  )}\r\n                </Box>\r\n                <Box>\r\n                  <Button\r\n                    color=\"secondary\"\r\n                    size=\"medium\"\r\n                    onClick={removerImagen}\r\n                    startIcon={<DeleteOutlineIcon />}\r\n                  >\r\n                    Remover imagen\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={5} xs={12} className={classes.require}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>\r\n                    <span className=\"requerido\">* </span>Nombre de empresa\r\n                  </b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  error={errorForm && !empresaDatos.nombre_empresa}\r\n                  name=\"nombre_empresa\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaDatos.nombre_empresa\r\n                      ? empresaDatos.nombre_empresa\r\n                      : \"\"\r\n                  }\r\n                  helperText={\r\n                    errorForm ? \"El campo nombre es obligatorio\" : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>\r\n                    <span className=\"requerido\">* </span>Nombre dueño\r\n                  </b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  error={errorForm && !empresaDatos.nombre_dueno}\r\n                  name=\"nombre_dueno\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaDatos.nombre_dueno ? empresaDatos.nombre_dueno : \"\"\r\n                  }\r\n                  helperText={\r\n                    errorForm ? \"El campo nombre es obligatorio\" : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Teléfono</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  size=\"small\"\r\n                  name=\"telefono_dueno\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaDatos.telefono_dueno\r\n                      ? empresaDatos.telefono_dueno\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={5} xs={12}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Celular</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  size=\"small\"\r\n                  name=\"celular\"\r\n                  variant=\"outlined\"\r\n                  value={empresaDatos.celular ? empresaDatos.celular : \"\"}\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>E-mail</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  size=\"small\"\r\n                  name=\"correo_empresa\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaDatos.correo_empresa\r\n                      ? empresaDatos.correo_empresa\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item md={4}>\r\n                    <Typography>\r\n                      <b>Valor de puntos</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      inputMode=\"numeric\"\r\n                      type=\"number\"\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"valor_puntos\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        empresaDatos.valor_puntos\r\n                          ? empresaDatos.valor_puntos\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    md={8}\r\n                    style={{ display: \"flex\", alignItems: \"center\" }}\r\n                  >\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          disabled={bloqueo}\r\n                          checked={empresaDatos.vender_sin_inventario}\r\n                          onChange={handleChangeVenderInventario}\r\n                          name=\"checkedA\"\r\n                        />\r\n                      }\r\n                      label=\"Vender productos sin inventario\"\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Box mt={3} mb={2}>\r\n            <Typography className={classes.subtitle}>\r\n              <b>Domicilio empresa</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={3} className={classes.require}>\r\n            <Grid item md={4}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Calle</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"calle\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.calle\r\n                      ? empresaDatos.direccion.calle\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Num. Ext</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"no_ext\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.no_ext\r\n                      ? empresaDatos.direccion.no_ext\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Num. Int</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"no_int\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.no_int\r\n                      ? empresaDatos.direccion.no_int\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={4}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>C.P.</b>{\" \"}\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"codigo_postal\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.codigo_postal\r\n                      ? empresaDatos.direccion.codigo_postal\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Colonia</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"colonia\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.colonia\r\n                      ? empresaDatos.direccion.colonia\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Municipio</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"municipio\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.municipio\r\n                      ? empresaDatos.direccion.municipio\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={4}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Localidad</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"localidad\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.localidad\r\n                      ? empresaDatos.direccion.localidad\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Estado</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"estado\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.estado\r\n                      ? empresaDatos.direccion.estado\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Pais</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"pais\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaDatos.direccion.pais\r\n                      ? empresaDatos.direccion.pais\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n            <DialogActions\r\n              style={{ marginTop: 15, width: \"100%\", justifyContent: \"center\" }}\r\n            >\r\n              <Button onClick={handleClose} color=\"primary\">\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                onClick={() => actEmp()}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Guardar\r\n              </Button>\r\n            </DialogActions>\r\n          )}\r\n        </Container>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import moment from \"moment\";\r\n\r\nexport const usosCfdi = [\r\n  {\r\n    Value: \"G01\",\r\n    Name: \"Adquisición de mercancías\",\r\n  },\r\n  {\r\n    Value: \"G02\",\r\n    Name: \"Devoluciones, descuentos o bonificaciones\",\r\n  },\r\n  {\r\n    Value: \"G03\",\r\n    Name: \"Gastos en general\",\r\n  },\r\n  {\r\n    Value: \"I01\",\r\n    Name: \"Construcciones\",\r\n  },\r\n  {\r\n    Value: \"I02\",\r\n    Name: \"Mobiliario y equipo de oficina por inversiones\",\r\n  },\r\n  {\r\n    Value: \"I03\",\r\n    Name: \"Equipo de transporte\",\r\n  },\r\n  {\r\n    Value: \"I04\",\r\n    Name: \"Equipo de cómputo y accesorios\",\r\n  },\r\n  {\r\n    Value: \"I05\",\r\n    Name: \"Dados, troqueles, moldes, matrices y herramental\",\r\n  },\r\n  {\r\n    Value: \"I06\",\r\n    Name: \"Comunicaciones telefónicas\",\r\n  },\r\n  {\r\n    Value: \"I07\",\r\n    Name: \"Comunicaciones satelitales\",\r\n  },\r\n  {\r\n    Value: \"I08\",\r\n    Name: \"Otra maquinaria y equipo\",\r\n  },\r\n  {\r\n    Value: \"D01\",\r\n    Name: \"Honorarios médicos, dentales y gastos hospitalarios\",\r\n  },\r\n  {\r\n    Value: \"D02\",\r\n    Name: \"Gastos médicos por incapacidad o discapacidad\",\r\n  },\r\n  {\r\n    Value: \"D03\",\r\n    Name: \"Gastos funerales.\",\r\n  },\r\n  {\r\n    Value: \"D04\",\r\n    Name: \"Donativos\",\r\n  },\r\n  {\r\n    Value: \"D05\",\r\n    Name:\r\n      \"Intereses reales efectivamente pagados por créditos hipotecarios (casa habitación).\",\r\n  },\r\n  {\r\n    Value: \"D06\",\r\n    Name: \"Aportaciones voluntarias al SAR.\",\r\n  },\r\n  {\r\n    Value: \"D07\",\r\n    Name: \"Primas por seguros de gastos médicos.\",\r\n  },\r\n  {\r\n    Value: \"D08\",\r\n    Name: \"Gastos de transportación escolar obligatoria.\",\r\n  },\r\n  {\r\n    Value: \"D09\",\r\n    Name:\r\n      \"Depósitos en cuentas para el ahorro, primas que tengan como base planes de pensiones.\",\r\n  },\r\n  {\r\n    Value: \"D10\",\r\n    Name: \"Pagos por servicios educativos (colegiaturas)\",\r\n  },\r\n  {\r\n    Value: \"P01\",\r\n    Name: \"Por definir\",\r\n  },\r\n];\r\nexport const tiposCfdi = [\r\n  {\r\n    NameId: 1,\r\n    Name: \"Factura\",\r\n    Value: \"I\",\r\n  },\r\n  {\r\n    NameId: 2,\r\n    Name: \"Nota de Crédito\",\r\n    Value: \"E\",\r\n  },\r\n  {\r\n    NameId: 14,\r\n    Name: \"Complemento de pago\",\r\n    Value: \"P\",\r\n  },\r\n];\r\nexport const tipoCambio = [\r\n  {\r\n    Value: \"MXN\",\r\n    Name: \"Peso Mexicano\",\r\n  },\r\n  {\r\n    Value: \"EUR\",\r\n    Name: \"Euro\",\r\n  },\r\n  {\r\n    Value: \"USD\",\r\n    Name: \"Dolar Americano\",\r\n  },\r\n];\r\nexport const formaPago = [\r\n  {\r\n    Name: \"Efectivo\",\r\n    Value: \"01\",\r\n  },\r\n  {\r\n    Name: \"Cheque nominativo\",\r\n    Value: \"02\",\r\n  },\r\n  {\r\n    Name: \"Transferencia electrónica de fondos\",\r\n    Value: \"03\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de crédito\",\r\n    Value: \"04\",\r\n  },\r\n  {\r\n    Name: \"Monedero electrónico\",\r\n    Value: \"05\",\r\n  },\r\n  {\r\n    Name: \"Dinero electrónico\",\r\n    Value: \"06\",\r\n  },\r\n  {\r\n    Name: \"Vales de despensa\",\r\n    Value: \"08\",\r\n  },\r\n  /* {\r\n        Name: \"Dación en pago\",\r\n        Value: \"12\"\r\n    },\r\n    {\r\n        Name: \"Pago por subrogación\",\r\n        Value: \"13\"\r\n    },\r\n    {\r\n        Name: \"Pago por consignación\",\r\n        Value: \"14\"\r\n    },\r\n    {\r\n        Name: \"Condonación\",\r\n        Value: \"15\"\r\n    },\r\n    {\r\n        Name: \"Compensación\",\r\n        Value: \"17\"\r\n    },\r\n    {\r\n        Name: \"Novación\",\r\n        Value: \"23\"\r\n    },\r\n    {\r\n        Name: \"Confusión\",\r\n        Value: \"24\"\r\n    },\r\n    {\r\n        Name: \"Remisión de deuda\",\r\n        Value: \"25\"\r\n    },\r\n    {\r\n        Name: \"Prescripción o caducidad\",\r\n        Value: \"26\"\r\n    },\r\n    {\r\n        Name: \"A satisfacción del acreedor\",\r\n        Value: \"27\"\r\n    }, */\r\n  {\r\n    Name: \"Tarjeta de débito\",\r\n    Value: \"28\",\r\n  },\r\n  /* {\r\n        Name: \"Tarjeta de servicios\",\r\n        Value: \"29\"\r\n    }, */\r\n  {\r\n    Name: \"Aplicación de anticipos\",\r\n    Value: \"30\",\r\n  },\r\n  /* {\r\n        Name: \"Intermediarios\",\r\n        Value: \"31\"\r\n    }, */\r\n  {\r\n    Name: \"Por definir\",\r\n    Value: \"99\",\r\n  },\r\n];\r\nexport const metodoPago = [\r\n  {\r\n    Value: \"PPD\",\r\n    Name: \"Pago en parcialidades ó diferido\",\r\n  },\r\n  {\r\n    Value: \"PUE\",\r\n    Name: \"Pago en una sola exhibición\",\r\n  },\r\n];\r\nexport const regimenFiscal = [\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"General de Ley Personas Morales\",\r\n    Value: \"601\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Personas Morales con Fines no Lucrativos\",\r\n    Value: \"603\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sueldos y Salarios e Ingresos Asimilados a Salarios\",\r\n    Value: \"605\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Arrendamiento\",\r\n    Value: \"606\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Régimen de Enajenación o Adquisición de Bienes\",\r\n    Value: \"607\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Demás ingresos\",\r\n    Value: \"608\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name:\r\n      \"Residentes en el Extranjero sin Establecimiento Permanente en México\",\r\n    Value: \"610\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por Dividendos (socios y accionistas)\",\r\n    Value: \"611\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Personas Físicas con Actividades Empresariales y Profesionales\",\r\n    Value: \"612\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Ingresos por intereses\",\r\n    Value: \"614\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Régimen de los ingresos por obtención de premios\",\r\n    Value: \"615\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Sin obligaciones fiscales\",\r\n    Value: \"616\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name:\r\n      \"Sociedades Cooperativas de Producción que optan por diferir sus ingresos\",\r\n    Value: \"620\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Incorporación Fiscal\",\r\n    Value: \"621\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: true,\r\n    Name: \"Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras\",\r\n    Value: \"622\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Opcional para Grupos de Sociedades\",\r\n    Value: \"623\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Coordinados\",\r\n    Value: \"624\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"Régimen de las Actividades Empresariales con ingresos a través de Plataformas Tecnológicas\",\r\n    Value: \"625\",\r\n  },\r\n  {\r\n    Natural: false,\r\n    Moral: true,\r\n    Name: \"Hidrocarburos\",\r\n    Value: \"628\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name:\r\n      \"De los Regímenes Fiscales Preferentes y de las Empresas Multinacionales\",\r\n    Value: \"629\",\r\n  },\r\n  {\r\n    Natural: true,\r\n    Moral: false,\r\n    Name: \"Enajenación de acciones en bolsa de valores\",\r\n    Value: \"630\",\r\n  },\r\n];\r\n\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_FACTURA = gql`\r\n  mutation crearFactura($input: CrearFacturaInput) {\r\n    crearFactura(input: $input) {\r\n      message\r\n      success\r\n      pdf\r\n      xml\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SERIE = gql`\r\n  mutation crearSerieCFDI($input: CrearSerieCfdiInput!) {\r\n    crearSerieCFDI(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEFAULT_SERIE = gql`\r\n  mutation modificarDefaultSerie($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n    modificarDefaultSerie(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SERIE = gql`\r\n  mutation eliminarSerie($id: ID!) {\r\n    eliminarSerie(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_SERIES = gql`\r\n  query obtenerSeriesCdfi($empresa: ID!, $sucursal: ID!) {\r\n    obtenerSeriesCdfi(empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n      success\r\n      seriesCfdi {\r\n        _id\r\n        serie\r\n        folio\r\n        default\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_SELLO_CFDI = gql`\r\n  mutation crearCSDS($input: CrearCSDSInput!) {\r\n    crearCSDS(input: $input) {\r\n      message\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_SELLO_CFDI = gql`\r\n  mutation eliminarCSD($rfc: String, $empresa: ID!) {\r\n    eliminarCSD(rfc: $rfc, empresa: $empresa) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CATALOGOS_SAT_API = gql`\r\n  query obtenerCatalogosSAT($input: CrearFacturaInput!) {\r\n    obtenerCatalogosSAT(input: $input) {\r\n      message\r\n      currencies {\r\n        Decimals\r\n        PrecisionRate\r\n        Name\r\n        Value\r\n      }\r\n      paymentForms {\r\n        Name\r\n        Value\r\n      }\r\n      paymentMethods {\r\n        Name\r\n        Value\r\n      }\r\n      fiscalRegimens {\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n      cfdiTypes {\r\n        NameId\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_SERVICIOS_SAT_API = gql`\r\n  query obtenerProductosOServicios($input: CrearFacturaInput!) {\r\n    obtenerProductosOServicios(input: $input) {\r\n      message\r\n      productosOServicios {\r\n        DangerousMaterial\r\n        Complement\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_POSTAL_CODES_SAT_API = gql`\r\n  query obtenerCodigoPostal($input: CrearFacturaInput!) {\r\n    obtenerCodigoPostal(input: $input) {\r\n      message\r\n      codigoPostal {\r\n        StateCode\r\n        MunicipalityCode\r\n        LocationCode\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_CFDIU_USES_SAT_API = gql`\r\n  query obtenerCfdiUses($input: CrearFacturaInput!) {\r\n    obtenerCfdiUses(input: $input) {\r\n      message\r\n      cfdiUses {\r\n        message\r\n        Natural\r\n        Moral\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_FACTURAS_REALIZADAS = gql`\r\n  query obtenerFacturas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtros: filtrosFactura\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerFacturas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtros: $filtros\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        id_cfdi\r\n        serie\r\n        currency\r\n        expedition_place\r\n        folio\r\n        cfdi_type\r\n        payment_form\r\n        payment_method\r\n        logo_url\r\n        date\r\n        issuer {\r\n          FiscalRegime\r\n          Rfc\r\n          TaxName\r\n        }\r\n        receiver {\r\n          Rfc\r\n          Name\r\n          CfdiUse\r\n        }\r\n        items {\r\n          ProductCode\r\n          IdentificationNumber\r\n          Description\r\n          Unit\r\n          UnitCode\r\n          UnitPrice\r\n          Quantity\r\n          Subtotal\r\n          Discount\r\n          Total\r\n        }\r\n        taxes {\r\n          Total\r\n          Name\r\n          Rate\r\n          Type\r\n        }\r\n        complement {\r\n          TaxStamp {\r\n            Uuid\r\n            Date\r\n            CdfiSign\r\n            SatCertNumber\r\n            SatSign\r\n            RfcProvCertif\r\n          }\r\n        }\r\n        original_string\r\n        sub_total\r\n        total\r\n        discount\r\n        fecha_registro\r\n        id_venta\r\n        folio_venta\r\n        complementos {\r\n          id_cfdi\r\n          serie\r\n          currency\r\n          expedition_place\r\n          folio\r\n          cfdi_type\r\n          payment_form\r\n          payment_method\r\n          logo_url\r\n          date\r\n          issuer {\r\n            FiscalRegime\r\n            Rfc\r\n            TaxName\r\n          }\r\n          receiver {\r\n            Rfc\r\n            Name\r\n            CfdiUse\r\n          }\r\n          items {\r\n            ProductCode\r\n            IdentificationNumber\r\n            Description\r\n            Unit\r\n            UnitCode\r\n            UnitPrice\r\n            Quantity\r\n            Subtotal\r\n            Discount\r\n            Total\r\n          }\r\n          taxes {\r\n            Total\r\n            Name\r\n            Rate\r\n            Type\r\n          }\r\n          complement {\r\n            TaxStamp {\r\n              Uuid\r\n              Date\r\n              CdfiSign\r\n              SatCertNumber\r\n              SatSign\r\n              RfcProvCertif\r\n            }\r\n            Payments {\r\n              _id\r\n              RelatedDocuments {\r\n                _id\r\n                Uuid\r\n                Folio\r\n                Currency\r\n                PaymentMethod\r\n                PartialityNumber\r\n                PreviousBalanceAmount\r\n                AmountPaid\r\n                ImpSaldoInsoluto\r\n              }\r\n              Date\r\n              PaymentForm\r\n              Currency\r\n              Amount\r\n              ExpectedPaid\r\n            }\r\n          }\r\n          original_string\r\n          sub_total\r\n          total\r\n          discount\r\n          fecha_registro\r\n          id_venta\r\n          folio_venta\r\n        }\r\n        id_nota\r\n        tipo\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_DOCUMENTO_FACTURA = gql`\r\n  query obtenerDocumentCfdi($id: String!) {\r\n    obtenerDocumentCfdi(id: $id) {\r\n      htmlBase64\r\n      pdfBase64\r\n      xmlBase64\r\n    }\r\n  }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  InputAdornment,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  CloudUpload,\r\n  Done,\r\n  Visibility,\r\n  VisibilityOff,\r\n} from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function RegistroSellos({\r\n  datosEmpresa,\r\n  firma_disabled,\r\n  refetch,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    certificate: \"\",\r\n    private_key: \"\",\r\n    private_key_password: \"\",\r\n    rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n  });\r\n  const [show, setShow] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      certificate: \"\",\r\n      private_key: \"\",\r\n      private_key_password: \"\",\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n      sucursal: sesion && sesion.sucursal._id ? sesion.sucursal._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [crearCSDS] = useMutation(CREAR_SELLO_CFDI);\r\n\r\n  const handleClickShowPassword = () => setShow(!show);\r\n  const handleMouseDownPassword = (event) => event.preventDefault();\r\n\r\n  const obtenerFiles = (e) => {\r\n    const { name, files } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: files[0],\r\n    });\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatos({\r\n      ...datos,\r\n      private_key_password: e.target.value,\r\n    });\r\n  };\r\n\r\n  const getBase64 = (file) => {\r\n    return new Promise((resolve) => {\r\n      let baseURL = \"\";\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = () => {\r\n        baseURL = reader.result;\r\n        resolve(baseURL);\r\n      };\r\n    });\r\n  };\r\n\r\n  const guardarBD = async () => {\r\n    if (\r\n      !datos.certificate ||\r\n      !datos.private_key ||\r\n      !datos.private_key_password ||\r\n      !datos.rfc\r\n    )\r\n      return;\r\n\r\n    try {\r\n      let data = { ...datos };\r\n      let cer = data.certificate;\r\n      let key = data.private_key;\r\n      await getBase64(cer)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.certificate = base[1];\r\n          data.nombre_cer = cer.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n      await getBase64(key)\r\n        .then((result) => {\r\n          const base = result.split(\",\");\r\n          data.private_key = base[1];\r\n          data.nombre_key = key.name;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n\r\n      setLoading(true);\r\n      const result = await crearCSDS({\r\n        variables: {\r\n          input: {\r\n            certificate: data.certificate,\r\n            private_key: data.private_key,\r\n            private_key_password: data.private_key_password,\r\n            rfc: data.rfc,\r\n            empresa: data.empresa,\r\n            sucursal: data.sucursal,\r\n            nombre_cer: data.nombre_cer,\r\n            nombre_key: data.nombre_key,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearCSDS.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<Add />}\r\n          disabled={firma_disabled}\r\n        >\r\n          Agregar CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Registrar firma digital</DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            {datosEmpresa.rfc ? (\r\n              <Typography>{`RFC: ${datosEmpresa.rfc}`}</Typography>\r\n            ) : (\r\n              <Typography color=\"error\">\r\n                *No tienes registrado un RFC\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>\r\n              Archivo *.cer <b>Certificado de la firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.certificate ? datos.certificate.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-cer-sello-digital\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".cer\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-cer-sello-digital\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"certificate\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" mt={2}>\r\n            <Typography>\r\n              Archivo *.key <b>Llave Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                value={datos.private_key ? datos.private_key.name : \"\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <label htmlFor=\"archivo-key-llave_privada\">\r\n                        <Button\r\n                          startIcon={<CloudUpload />}\r\n                          color=\"primary\"\r\n                          component=\"span\"\r\n                          disableElevation\r\n                        >\r\n                          Upload\r\n                        </Button>\r\n                      </label>\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                }}\r\n              />\r\n              <input\r\n                accept=\".key\"\r\n                style={{ display: \"none\" }}\r\n                id=\"archivo-key-llave_privada\"\r\n                multiple\r\n                type=\"file\"\r\n                name=\"private_key\"\r\n                onChange={obtenerFiles}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\" my={2}>\r\n            <Typography>\r\n              Contraseña de la llave <b>Privada de la Firma Digital</b>\r\n            </Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                type={show ? \"text\" : \"password\"}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"private_key_password\"\r\n                onChange={obtenerDatos}\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        onClick={handleClickShowPassword}\r\n                        onMouseDown={handleMouseDownPassword}\r\n                        edge=\"end\"\r\n                      >\r\n                        {show ? <Visibility /> : <VisibilityOff />}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            onClick={() => guardarBD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogContentText,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport { Close, DeleteOutline } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_SELLO_CFDI } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function EliminarSellos({ datosEmpresa, refetch }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({\r\n    rfc: datosEmpresa && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n    empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({\r\n      rfc: sesion && datosEmpresa.rfc ? datosEmpresa.rfc : \"\",\r\n      empresa: sesion && sesion.empresa._id ? sesion.empresa._id : \"\",\r\n    });\r\n  };\r\n\r\n  const [eliminarCSD] = useMutation(ELIMINAR_SELLO_CFDI);\r\n\r\n  const eliminarSelloCSD = async () => {\r\n    if (!datos.rfc) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await eliminarCSD({\r\n        variables: {\r\n          rfc: datos.rfc,\r\n          empresa: datos.empresa,\r\n        },\r\n      });\r\n\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCSD.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClose();\r\n      refetch();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"inherit\"\r\n          startIcon={<DeleteOutline />}\r\n        >\r\n          Remover CSD\r\n        </Button>\r\n      </Box>\r\n      <Dialog maxWidth=\"xs\" fullWidth open={open} onClose={() => handleClose()}>\r\n        <DialogTitle>Eliminar Firma Digital</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            {`Se eliminara el CSD registrado con el RFC ${datosEmpresa.rfc}`}\r\n          </DialogContentText>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={<Close />}\r\n            size=\"large\"\r\n            onClick={() => handleClose()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} /> : <DeleteOutline />\r\n            }\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            onClick={() => eliminarSelloCSD()}\r\n            disabled={loading || !datos.rfc}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Container,\r\n  FormControl,\r\n  Select,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, DialogActions } from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n\r\nimport { EmpresaContext } from \"../../../../context/Catalogos/empresaContext\";\r\nimport {\r\n  ACTUALIZAR_EMPRESA,\r\n  OBTENER_DATOS_EMPRESA,\r\n} from \"../../../../gql/Empresa/empresa\";\r\nimport { regimenFiscal } from \"../../Facturacion/catalogos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport RegistroSellos from \"../../Facturacion/CFDISellos/RegistrarSellos\";\r\nimport EliminarSellos from \"../../Facturacion/CFDISellos/EliminarCSD\";\r\nimport moment from \"moment\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function InformacionFiscal(props) {\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(\r\n    useState({ error: false, message: \"\" })\r\n  );\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.informacion_fiscal.editar === false ? true : false\r\n  );\r\n  const { empresa, setEmpresa } = useContext(EmpresaContext);\r\n  const [actualizarEmpresa] = useMutation(ACTUALIZAR_EMPRESA);\r\n  const [firma_disabled, setFirmaDisabled] = useState(false);\r\n  const [empresaFiscal, setEmpresaFiscal] = useState({\r\n    nombre_fiscal: \"\",\r\n    rfc: \"\",\r\n    curp: \"\",\r\n    info_adicio: \"\",\r\n    regimen_fiscal: \"\",\r\n    direccionFiscal: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    datosBancarios: {\r\n      cuenta: \"\",\r\n      sucursal: \"\",\r\n      clave_banco: \"\",\r\n    },\r\n  });\r\n  /* Queries */\r\n\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_EMPRESA, {\r\n    variables: { id: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setEmpresa(data.obtenerEmpresa);\r\n        let new_sesion = sesion;\r\n        new_sesion.empresa = data.obtenerEmpresa;\r\n        localStorage.setItem(\"sesionCafi\", JSON.stringify(new_sesion));\r\n        if (!data.obtenerEmpresa.rfc) {\r\n          setFirmaDisabled(true);\r\n        } else {\r\n          setFirmaDisabled(false);\r\n        }\r\n      }\r\n    } catch (errorCatch) {\r\n      //console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setEmpresa, sesion]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setEmpresaFiscal({\r\n        nombre_fiscal: empresa.nombre_fiscal,\r\n        rfc: empresa.rfc,\r\n        curp: empresa.curp,\r\n        fecha_registro_sello_sat: empresa.fecha_registro_sello_sat\r\n          ? moment(empresa.fecha_registro_sello_sat).format(\"DD/MM/YYYY\")\r\n          : \"\",\r\n        info_adicio: empresa.info_adicio,\r\n        regimen_fiscal: empresa.regimen_fiscal,\r\n        sello_sat: empresa.sello_sat,\r\n        nombre_cer: empresa.nombre_cer,\r\n        nombre_key: empresa.nombre_key,\r\n        limite_timbres: empresa.limite_timbres,\r\n        timbres_usados: empresa.timbres_usados,\r\n        direccionFiscal: {\r\n          calle: empresa.direccionFiscal.calle,\r\n          no_ext: empresa.direccionFiscal.no_ext,\r\n          no_int: empresa.direccionFiscal.no_int,\r\n          codigo_postal: empresa.direccionFiscal.codigo_postal,\r\n          colonia: empresa.direccionFiscal.colonia,\r\n          municipio: empresa.direccionFiscal.municipio,\r\n          localidad: empresa.direccionFiscal.localidad,\r\n          estado: empresa.direccionFiscal.estado,\r\n          pais: empresa.direccionFiscal.pais,\r\n        },\r\n        datosBancarios: {\r\n          cuenta: empresa.datosBancarios.cuenta,\r\n          sucursal: empresa.datosBancarios.sucursal,\r\n          clave_banco: empresa.datosBancarios.clave_banco,\r\n        },\r\n      });\r\n    } catch (errorCatch) {}\r\n  }, [empresa]);\r\n\r\n  const actEmp = async () => {\r\n    try {\r\n      setLoadingPage(true);\r\n      /* const input = cleanTypenames(empresaFiscal); */\r\n      delete empresaFiscal.fecha_registro_sello_sat;\r\n\r\n      await actualizarEmpresa({\r\n        variables: {\r\n          id: sesion.empresa._id,\r\n          input: empresaFiscal,\r\n        },\r\n      });\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n      refetch();\r\n    } catch (error) {\r\n      setLoadingPage(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      console.log(error);\r\n      if (error.response) {\r\n        console.log(error.response);\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    props.setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      direccionFiscal: {\r\n        ...empresaFiscal.direccionFiscal,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n  const obtenerCamposBancarios = (e) => {\r\n    setEmpresaFiscal({\r\n      ...empresaFiscal,\r\n      datosBancarios: {\r\n        ...empresaFiscal.datosBancarios,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n\r\n      {errorPage ? (\r\n        <ErrorPage error={errorPage} />\r\n      ) : (\r\n        <Container>\r\n          <Grid container spacing={1}>\r\n            <Grid item md={6} xs={12} className={classes.require}>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>\r\n                    {\" \"}\r\n                    <span>* </span>Nombre fiscal\r\n                  </b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  type=\"text\"\r\n                  size=\"small\"\r\n                  error={errorForm.error && !empresaFiscal.nombre_fiscal}\r\n                  name=\"nombre_fiscal\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaFiscal.nombre_fiscal\r\n                      ? empresaFiscal.nombre_fiscal\r\n                      : \"\"\r\n                  }\r\n                  helperText={\r\n                    errorForm.error &&\r\n                    errorForm.message !== \"El campo nombre es obligatorio\"\r\n                      ? errorForm.message\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>RFC</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  disabled={bloqueo}\r\n                  size=\"small\"\r\n                  name=\"rfc\"\r\n                  variant=\"outlined\"\r\n                  value={empresaFiscal.rfc ? empresaFiscal.rfc : \"\"}\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>Régimen fiscal</Typography>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"regimen_fiscal\"\r\n                >\r\n                  <Select\r\n                    value={\r\n                      empresaFiscal.regimen_fiscal\r\n                        ? empresaFiscal.regimen_fiscal\r\n                        : \"\"\r\n                    }\r\n                    name=\"regimen_fiscal\"\r\n                    onChange={obtenerCampos}\r\n                  >\r\n                    <MenuItem value=\"\">\r\n                      <em>Selecciona uno</em>\r\n                    </MenuItem>\r\n                    {regimenFiscal.map((res, index) => (\r\n                      <MenuItem\r\n                        key={index}\r\n                        value={res.Value}\r\n                      >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>CURP</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled={bloqueo}\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"curp\"\r\n                  variant=\"outlined\"\r\n                  value={empresaFiscal.curp ? empresaFiscal.curp : \"\"}\r\n                  onChange={obtenerCampos}\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Info. Adicional</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled={bloqueo}\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"info_adicio\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaFiscal.info_adicio ? empresaFiscal.info_adicio : \"\"\r\n                  }\r\n                  onChange={obtenerCampos}\r\n                  multiline\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.subtitle}>\r\n                <b>Firma digital</b>\r\n              </Typography>\r\n              <Divider />\r\n              <Box m={1}>\r\n                {empresaFiscal.sello_sat === true ? (\r\n                  <Alert\r\n                    severity=\"success\"\r\n                    action={\r\n                      <EliminarSellos\r\n                        firma_disabled={firma_disabled}\r\n                        datosEmpresa={empresaFiscal}\r\n                        refetch={refetch}\r\n                      />\r\n                    }\r\n                  >\r\n                    <AlertTitle>Firma Digital Activa</AlertTitle>\r\n                  </Alert>\r\n                ) : (\r\n                  <Alert\r\n                    severity=\"info\"\r\n                    action={\r\n                      <RegistroSellos\r\n                        firma_disabled={firma_disabled}\r\n                        datosEmpresa={empresaFiscal}\r\n                        refetch={refetch}\r\n                      />\r\n                    }\r\n                  >\r\n                    <AlertTitle>Sin Firma Digital</AlertTitle>\r\n                    Sin esta firma no prodrás realizar facturas\r\n                    {firma_disabled ? (\r\n                      <li>Necesitas tener un RFC registrado</li>\r\n                    ) : null}\r\n                  </Alert>\r\n                )}\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Archivo *.cer</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaFiscal.nombre_cer ? empresaFiscal.nombre_cer : \"\"\r\n                  }\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Archivo *.key</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  value={\r\n                    empresaFiscal.nombre_key ? empresaFiscal.nombre_key : \"\"\r\n                  }\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Typography>\r\n                  <b>Fecha de registro</b>\r\n                </Typography>\r\n                <TextField\r\n                  disabled\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  value={empresaFiscal.fecha_registro_sello_sat}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Box>\r\n            <Typography className={classes.subtitle}>\r\n              <b>Domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Calle</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"calle\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.calle\r\n                      ? empresaFiscal.direccionFiscal.calle\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Num. Ext</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"no_ext\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.no_ext\r\n                      ? empresaFiscal.direccionFiscal.no_ext\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Num. Int</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"no_int\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.no_int\r\n                      ? empresaFiscal.direccionFiscal.no_int\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>C.P.</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"codigo_postal\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.codigo_postal\r\n                      ? empresaFiscal.direccionFiscal.codigo_postal\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Colonia</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"colonia\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.colonia\r\n                      ? empresaFiscal.direccionFiscal.colonia\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Municipio</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"municipio\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.municipio\r\n                      ? empresaFiscal.direccionFiscal.municipio\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} sm={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Localidad</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"localidad\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.localidad\r\n                      ? empresaFiscal.direccionFiscal.localidad\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Estado</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"estado\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.estado\r\n                      ? empresaFiscal.direccionFiscal.estado\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Pais</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"pais\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.direccionFiscal.pais\r\n                      ? empresaFiscal.direccionFiscal.pais\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposDireccion}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Box mt={1}>\r\n            <Typography className={classes.subtitle}>\r\n              <b>Datos bancarios</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Cuenta</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"cuenta\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.datosBancarios.cuenta\r\n                      ? empresaFiscal.datosBancarios.cuenta\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposBancarios}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} md={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Sucursal</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"sucursal\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.datosBancarios.sucursal\r\n                      ? empresaFiscal.datosBancarios.sucursal\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposBancarios}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} md={4}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Clave de banco</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"clave_banco\"\r\n                  variant=\"outlined\"\r\n                  disabled={bloqueo}\r\n                  value={\r\n                    empresaFiscal.datosBancarios.clave_banco\r\n                      ? empresaFiscal.datosBancarios.clave_banco\r\n                      : \"\"\r\n                  }\r\n                  onChange={obtenerCamposBancarios}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          {sesion.accesos.mi_empresa.informacion_fiscal.editar ===\r\n          false ? null : (\r\n            <DialogActions\r\n              m={2}\r\n              style={{ marginTop: 10, width: \"100%\", justifyContent: \"center\" }}\r\n            >\r\n              <Button onClick={handleClose} color=\"primary\">\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                onClick={() => actEmp()}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                Guardar\r\n              </Button>\r\n            </DialogActions>\r\n          )}\r\n        </Container>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React,{useState} from 'react';\r\nimport {  DialogContent, Button, Box, Dialog, Slide, Typography, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport MisDatos from './Datos/MisDatos';\r\nimport InformacionFiscal from './InformacionFiscal/InformacionFiscal';\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    border: \"dashed 2px black\",\r\n    borderRadius: \"100%\",\r\n  },\r\n  avatar: {\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n \r\n}));\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function MiEmpresa() {\r\n  const classes = useStyles();\r\n\tconst [value, setValue] = useState(0);\r\n\tconst [open, setOpen] = useState(false);\r\n\t\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n    \r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\t\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const RenderViews = () => {\r\n    switch (value) {\r\n      case 1:\r\n        return(<InformacionFiscal setOpen={setOpen} />);\r\n      default:\r\n        return(<MisDatos setOpen={setOpen} />);\r\n    }\r\n  }\r\n  \r\n\treturn (\r\n\t\t<div>\r\n    <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de empresa\r\n        </Box>\r\n      </Button>\r\n        <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        \r\n          <Box >\r\n            <Tabs\r\n              indicatorColor=\"primary\"\r\n              value={value}\r\n              onChange={handleChange}\r\n              aria-label=\"simple tabs example\"\r\n              centered\r\n            >\r\n              <Tab label=\"Datos empresa\" value={0} />\r\n              <Tab label=\"Datos fiscales\" value={1} />\r\n            </Tabs>\r\n          </Box>\r\n          <DialogContent>  \r\n            <RenderViews />\r\n          </DialogContent>\r\n      </Dialog>  \r\n      \r\n     \r\n\t\t\t\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_SUCURSALES = gql`\r\n    query ObtenerSucursalesEmpresa($id: ID!){\r\n        obtenerSucursalesEmpresa(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                efectivo\r\n            }         \r\n        }\r\n    }\r\n`\r\nexport const OBTENER_DATOS_SUCURSAL = gql`\r\n    query obtenerDatosSucursal($id: ID!){\r\n        obtenerDatosSucursal(id: $id){\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                efectivo\r\n            }         \r\n        }\r\n    }\r\n`\r\nexport const ACTUALIZAR_SUCURSAL = gql`\r\n  mutation editarSucursal($id: ID!, $input: EditarSucursal) {\r\n    editarSucursal(id: $id, input: $input) {\r\n         _id\r\n            nombre_sucursal\r\n            descripcion\r\n            usuario_sucursal\r\n            direccion{\r\n                calle\r\n                no_ext\r\n                no_int\r\n                codigo_postal\r\n                colonia\r\n                municipio\r\n                localidad\r\n                estado\r\n                pais\r\n            }\r\n            cuenta_sucursal {\r\n                efectivo\r\n            }         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_MOVIMIENTO_CUENTA = gql`\r\n    mutation CrearMovimientoCuenta($input: CrearMovimientoCuentaInput, $empresa: ID!, $sucursal: ID!, $tipo: Boolean){\r\n        crearMovimientoCuenta(input: $input, empresa: $empresa, sucursal: $sucursal, tipo: $tipo){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CUENTAS = gql`\r\n    query ObtenerHistorialCuenta($empresa: ID!, $sucursal: ID!, $input: ObtenerHistorialCuenta, $tipo: Boolean, $limit: Int, $offset: Int){\r\n        obtenerHistorialCuenta(empresa: $empresa, sucursal: $sucursal, input: $input, tipo: $tipo, limit: $limit, offset: $offset){\r\n            saldo_en_caja\r\n            totalDocs\r\n            docs {\r\n                tipo_movimiento\r\n                id_usuario\r\n                numero_caja\r\n                id_Caja\r\n                numero_usuario_creador\r\n                nombre_usuario_creador\r\n                horario_turno\r\n                concepto\r\n                comentarios\r\n                montos_en_caja { \r\n                    monto_efectivo{\r\n                        monto \r\n                    }\r\n                }\r\n                fecha_movimiento{\r\n                    completa\r\n                }\r\n               \r\n                empresa\r\n                sucursal \r\n            }            \r\n        }\r\n    }\r\n`;","import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  TextField,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Slide,\r\n  Typography,\r\n  Toolbar,\r\n  AppBar,\r\n  Divider,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcNook } from \"react-icons/fc\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  OBTENER_DATOS_SUCURSAL,\r\n  ACTUALIZAR_SUCURSAL,\r\n} from \"../../../../gql/Empresa/sucursales\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  subtitle: {\r\n    marginLeft: \"10px\",\r\n    width: \"100%\",\r\n  },\r\n  require: {\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DatosSucursal() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [loadingPage, setLoadingPage] = React.useState(false);\r\n  const [bloqueo] = useState(\r\n    sesion.accesos.mi_empresa.datos_empresa.editar === false ? true : false\r\n  );\r\n  const [open, setOpen] = React.useState(false);\r\n  const [errorPage, setErrorPage] = React.useState(false);\r\n  const [errorForm, setErrorForm] = React.useState(false);\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [actualizarSucursal] = useMutation(ACTUALIZAR_SUCURSAL);\r\n\r\n  /* Queries */\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_DATOS_SUCURSAL, {\r\n    variables: { id: sesion.sucursal._id },\r\n  });\r\n\r\n  const [sucursalDatos, setSucursalDatos] = useState({\r\n    nombre_sucursal: \"\",\r\n    descripcion: \"\",\r\n    telefono: \"\",\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [refetch]);\r\n  useEffect(() => {\r\n    try {\r\n      setLoadingPage(loading);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECTUPDATE\",errorCatch)\r\n    }\r\n  }, [loading]);\r\n  useEffect(() => {\r\n    try {\r\n      if (data !== undefined) {\r\n        setSucursalDatos(data.obtenerDatosSucursal[0]);\r\n      }\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [data, setSucursalDatos]);\r\n  useEffect(() => {\r\n    try {\r\n      setErrorPage(error);\r\n    } catch (errorCatch) {\r\n      // console.log(\"SESSIONREFECT\",errorCatch)\r\n    }\r\n  }, [error]);\r\n\r\n  const actEmp = async () => {\r\n    if (!sucursalDatos.nombre_sucursal || !sucursalDatos.descripcion) {\r\n      setErrorForm(true);\r\n      return;\r\n    }\r\n    try {\r\n      setLoadingPage(true);\r\n      const {\r\n        _id,\r\n        usuario_sucursal,\r\n        cuenta_sucursal,\r\n        ...input\r\n      } = sucursalDatos;\r\n      await actualizarSucursal({\r\n        variables: {\r\n          id: sesion.sucursal._id,\r\n          input,\r\n        },\r\n      });\r\n\r\n      setLoadingPage(false);\r\n      setAlert({\r\n        message: \"Se han actualizado correctamente los datos.\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setErrorForm(false);\r\n    } catch (errorCatch) {\r\n      console.log(errorCatch);\r\n      if (errorCatch.networkError) {\r\n        console.log(errorCatch.networkError.result);\r\n      } else if (errorCatch.graphQLErrors) {\r\n        console.log(errorCatch.graphQLErrors);\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingPage(false);\r\n    }\r\n  };\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const obtenerCampos = (e) => {\r\n    console.log(e.target.value);\r\n    setSucursalDatos({\r\n      ...sucursalDatos,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setSucursalDatos({\r\n      ...sucursalDatos,\r\n      direccion: {\r\n        ...sucursalDatos.direccion,\r\n        [e.target.name]: e.target.value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcNook className={classes.icon} />\r\n          </Box>\r\n          Datos de sucursal\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loadingPage} setLoading={setLoadingPage} />\r\n\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Datos\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          {errorPage ? (\r\n            <ErrorPage error={errorPage} />\r\n          ) : (\r\n            <Container style={{ marginTop: 8 }}>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4} flexdirection=\"row\">\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>\r\n                        <span>* </span>Nombre de sucursal\r\n                      </b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm && !sucursalDatos.nombre_sucursal}\r\n                      name=\"nombre_sucursal\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.nombre_sucursal\r\n                          ? sucursalDatos.nombre_sucursal\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm ? \"El campo nombre es obligatorio\" : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>\r\n                        <span>* </span>Descripción\r\n                      </b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      type=\"text\"\r\n                      size=\"small\"\r\n                      error={errorForm && !sucursalDatos.descripcion}\r\n                      name=\"descripcion\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.descripcion\r\n                          ? sucursalDatos.descripcion\r\n                          : \"\"\r\n                      }\r\n                      helperText={\r\n                        errorForm ? \"El campo nombre es obligatorio\" : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box>\r\n                  {/*  <Box>\r\n                    <Typography>Teléfono</Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      disabled={bloqueo}\r\n                      size=\"small\"\r\n                      name=\"telefono_dueno\"\r\n                      variant=\"outlined\"\r\n                      value={\r\n                        sucursalDatos.telefono_dueno\r\n                          ? sucursalDatos.telefono_dueno\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                    />\r\n                  </Box> */}\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <Box mt={5}>\r\n                <Typography className={classes.subtitle}>\r\n                  <b>Domicilio</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Grid container spacing={3} className={classes.require}>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Calle</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"calle\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.calle\r\n                          ? sucursalDatos.direccion.calle\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Num. Ext</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_ext\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.no_ext\r\n                          ? sucursalDatos.direccion.no_ext\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Num. Int</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"no_int\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.no_int\r\n                          ? sucursalDatos.direccion.no_int\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>C.P.</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"codigo_postal\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.codigo_postal\r\n                          ? sucursalDatos.direccion.codigo_postal\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Colonia</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"colonia\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.colonia\r\n                          ? sucursalDatos.direccion.colonia\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Municipio</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"municipio\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.municipio\r\n                          ? sucursalDatos.direccion.municipio\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item md={4}>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Localidad</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"localidad\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.localidad\r\n                          ? sucursalDatos.direccion.localidad\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Estado</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"estado\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.estado\r\n                          ? sucursalDatos.direccion.estado\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Pais</b>\r\n                    </Typography>\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      name=\"pais\"\r\n                      variant=\"outlined\"\r\n                      disabled={bloqueo}\r\n                      value={\r\n                        sucursalDatos.direccion.pais\r\n                          ? sucursalDatos.direccion.pais\r\n                          : \"\"\r\n                      }\r\n                      onChange={obtenerCamposDireccion}\r\n                    />\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </Container>\r\n          )}\r\n        </DialogContent>\r\n        {sesion.accesos.mi_empresa.datos_empresa.editar === false ? null : (\r\n          <DialogActions style={{ justifyContent: \"center\" }}>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              onClick={() => actEmp()}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              autoFocus\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </DialogActions>\r\n        )}\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { EmpresaProvider } from \"../../../context/Catalogos/empresaContext\";\r\nimport MiEmpresa from \"./DatosEmpresa\";\r\nimport { Box, Grid } from \"@material-ui/core\";\r\nimport Sucursal from \"./Sucursal/DatosSucursal\";\r\n\r\nexport default function Empresa() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  return (\r\n    <div>\r\n      <EmpresaProvider>\r\n        <Grid container spacing={5} justifyContent=\"center\">\r\n          {sesion.accesos.mi_empresa.datos_empresa.ver === false ? null : (\r\n            <Grid item lg={2}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <MiEmpresa />\r\n              </Box>\r\n            </Grid>\r\n          )}\r\n          <Grid item lg={2}>\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <Sucursal />\r\n            </Box>\r\n          </Grid>\r\n          {/*    {sesion.accesos.mi_empresa.informacion_fiscal.ver === false ? (null):(\r\n                        <Grid item lg={2}>\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <InformacionFiscal />\r\n                            </Box> \r\n                        </Grid>\r\n                    )} */}\r\n        </Grid>\r\n      </EmpresaProvider>\r\n    </div>\r\n  );\r\n}\r\n","import moment from \"moment\";\r\n\r\nexport const numerosRandom = (min, max) => {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n};\r\n\r\nexport const generateCode = (length) => {\r\n  var result = \"\";\r\n  var characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const generateCodeNumerico = (length) => {\r\n  var result = \"\";\r\n  var characters = \"0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const formatoHora = (hora) => {\r\n  if (!hora) {\r\n    return null;\r\n  } else {\r\n    var newtime = new Date(hora);\r\n    return newtime.toLocaleTimeString(\"en-US\", { hour12: \"false\" });\r\n  }\r\n};\r\n\r\nexport const formatoFecha = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    var newdate = new Date(fecha);\r\n    return newdate.toLocaleDateString(\"es-MX\", {\r\n      weekday: \"short\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n    });\r\n  }\r\n};\r\n\r\nexport const formatoFechaCorta = (fecha) => {\r\n  if (!fecha) {\r\n    return null;\r\n  } else {\r\n    /* var newdate = new Date(fecha); */\r\n    return moment(fecha).locale(\"es-mx\").format(\"ll\");\r\n    /*  return newdate.toLocaleDateString(\"es-mx\", {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n    }); */\r\n  }\r\n};\r\n\r\nexport const formatoMexico = (number) => {\r\n  if (!number) {\r\n    return 0.0;\r\n  } else {\r\n    let nueva;\r\n    if (number % 1 === 0) {\r\n      nueva = parseFloat(number).toFixed(2);\r\n    } else {\r\n      nueva = parseFloat(number).toFixed(2);\r\n    }\r\n    const exp = /(\\d)(?=(\\d{3})+(?!\\d))/g;\r\n    const rep = \"$1,\";\r\n    return nueva.toString().replace(exp, rep);\r\n  }\r\n};\r\n\r\nexport const cleanTypenames = (value) => {\r\n  if (Array.isArray(value)) {\r\n    return value.map(cleanTypenames);\r\n  } else if (value !== null && typeof value === \"object\") {\r\n    const newObject = {};\r\n    for (const property in value)\r\n      if (property !== \"__typename\")\r\n        newObject[property] = cleanTypenames(value[property]);\r\n    return newObject;\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\nexport const findProductArray = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      if (productosVentas[i].codigo_barras) {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          producto_found = {\r\n            producto: productosVentas[i],\r\n            index: i,\r\n          };\r\n          found = true;\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          if (productosVentas[i].unidad === producto.unidad) {\r\n            //esta condicion no estaba originalmente en codigo uriel\r\n            producto_found = {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            };\r\n            found = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const calculatePrices = async (\r\n  newP,\r\n  cantidad,\r\n  granel,\r\n  newPrising = 0\r\n) => {\r\n  let subtotalCalculo = 0,\r\n    totalCalculo = 0,\r\n    impuestoCalculo = 0,\r\n    ivaCalculo = 0,\r\n    iepsCalculo = 0,\r\n    descuentoCalculo = 0,\r\n    monederoCalculo = 0;\r\n  // console.log(\"newPrising\",newPrising);\r\n  const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n  // console.log(newP);\r\n  const iva_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.iva < 9\r\n          ? `0${newP.id_producto.precios.iva}`\r\n          : newP.id_producto.precios.iva\r\n      }`\r\n    );\r\n\r\n  const ieps_producto =\r\n    parseFloat(newP.id_producto.precios.precios_producto[0].precio_venta) *\r\n    parseFloat(\r\n      `0.${\r\n        newP.id_producto.precios.ieps < 9\r\n          ? `0${newP.id_producto.precios.ieps}`\r\n          : newP.id_producto.precios.ieps\r\n      }`\r\n    );\r\n\r\n  const precioProducto = newPrising;\r\n  // const precioDescuentoProducto = newP.descuento_activo ? parseFloat(newP.descuento.precio_con_descuento) : 0;\r\n\r\n  totalCalculo =\r\n    granel.granel === true\r\n      ? precioProducto * cantidadNueva * parseFloat(granel.valor)\r\n      : precioProducto * cantidadNueva;\r\n\r\n  subtotalCalculo =\r\n    granel.granel === true\r\n      ? (precioProducto - (iva_producto + ieps_producto)) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (precioProducto - (iva_producto + ieps_producto)) * cantidadNueva;\r\n\r\n  impuestoCalculo =\r\n    granel.granel === true\r\n      ? (iva_producto + ieps_producto) *\r\n        cantidadNueva *\r\n        parseFloat(granel.valor)\r\n      : (iva_producto + ieps_producto) * cantidadNueva;\r\n\r\n  ivaCalculo =\r\n    granel.granel === true\r\n      ? iva_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : iva_producto * cantidadNueva;\r\n\r\n  iepsCalculo =\r\n    granel.granel === true\r\n      ? ieps_producto * cantidadNueva * parseFloat(granel.valor)\r\n      : ieps_producto * cantidadNueva;\r\n\r\n  descuentoCalculo =\r\n    granel.granel === true\r\n      ? newP.descuento_activo === true\r\n        ? parseFloat(newP.descuento.dinero_descontado) *\r\n          cantidadNueva *\r\n          parseFloat(granel.valor)\r\n        : 0\r\n      : newP.descuento_activo === true\r\n      ? parseFloat(newP.descuento.dinero_descontado) * cantidadNueva\r\n      : 0;\r\n\r\n  monederoCalculo = newP.id_producto.precios.monedero\r\n    ? newP.id_producto.precios.monedero_electronico * cantidadNueva\r\n    : 0;\r\n\r\n  return {\r\n    totalCalculo,\r\n    subtotalCalculo,\r\n    impuestoCalculo,\r\n    ivaCalculo,\r\n    iepsCalculo,\r\n    descuentoCalculo,\r\n    monederoCalculo,\r\n  };\r\n};\r\n\r\nexport const calculatePrices2 = async ({\r\n  newP,\r\n  cantidad,\r\n  granel,\r\n  origen,\r\n  precio_boolean = false,\r\n  precio,\r\n}) => {\r\n  try {\r\n    let subtotalCalculo = 0,\r\n      totalCalculo = 0,\r\n      impuestoCalculo = 0,\r\n      ivaCalculo = 0,\r\n      iepsCalculo = 0,\r\n      descuentoCalculo = 0,\r\n      monederoCalculo = 0;\r\n    // const descuento = newP.descuento_activo === null ? false : true;\r\n    const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n    const valor_granel = granel.granel ? parseFloat(granel.valor) : 1;\r\n    const precio_actual = precio_boolean\r\n      ? precio\r\n      : newP.descuento_activo\r\n      ? newP.descuento\r\n      : newP.precio_unidad;\r\n    const cantidadCaja =\r\n      precio_actual.unidad_maxima === true ? precio_actual.cantidad_unidads : 1;\r\n    ivaCalculo = precio_actual.iva_precio * cantidadCaja;\r\n    iepsCalculo = precio_actual.ieps_precio * cantidadCaja;\r\n    impuestoCalculo = ivaCalculo + iepsCalculo;\r\n    subtotalCalculo = precio_actual.precio_venta * cantidadCaja;\r\n    totalCalculo = precio_actual.precio_neto * cantidadCaja;\r\n    monederoCalculo = newP.id_producto.precios.monedero\r\n      ? newP.id_producto.precios.monedero_electronico * cantidadCaja\r\n      : 0;\r\n    descuentoCalculo = totalCalculo - newP.precio_unidad.precio_neto;\r\n    const ob = {\r\n      ivaCalculo: parseFloat(\r\n        (ivaCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      iepsCalculo: parseFloat(\r\n        (iepsCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      impuestoCalculo: parseFloat(\r\n        (impuestoCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      subtotalCalculo: parseFloat(\r\n        (subtotalCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      totalCalculo: parseFloat(\r\n        (totalCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      monederoCalculo: parseFloat(\r\n        (monederoCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      descuentoCalculo: parseFloat(\r\n        (descuentoCalculo * valor_granel * cantidadNueva).toFixed(2)\r\n      ),\r\n      newP,\r\n    };\r\n    if (origen === \"Ventas1\") {\r\n      newP.cantidad_venta = valor_granel; //si hay granel pone su valor si no 1\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_actual_producto = parseFloat(\r\n        precio_actual.precio_neto.toFixed(2)\r\n      );\r\n      newP.precio_actual_object = {\r\n        cantidad_unidad: precio_actual.cantidad_unidad\r\n          ? precio_actual.cantidad_unidad\r\n          : 1,\r\n        numero_precio: precio_actual.numero_precio\r\n          ? precio_actual.numero_precio\r\n          : 1,\r\n        unidad_maxima: precio_actual.unidad_maxima\r\n          ? precio_actual.unidad_maxima\r\n          : false,\r\n        precio_general: precio_actual.precio_general\r\n          ? parseFloat(precio_actual.precio_general.toFixed(2))\r\n          : 0,\r\n        precio_neto: precio_actual.precio_neto\r\n          ? parseFloat(precio_actual.precio_neto.toFixed(2))\r\n          : 0,\r\n        precio_venta: precio_actual.precio_venta\r\n          ? parseFloat(precio_actual.precio_venta.toFixed(2))\r\n          : 0,\r\n        iva_precio: precio_actual.iva_precio\r\n          ? parseFloat(precio_actual.iva_precio.toFixed(2))\r\n          : 0,\r\n        ieps_precio: precio_actual.ieps_precio\r\n          ? parseFloat(precio_actual.ieps_precio.toFixed(2))\r\n          : 0,\r\n        utilidad: precio_actual.utilidad ? precio_actual.utilidad : 0,\r\n        porciento: precio_actual.porciento ? precio_actual.porciento : 0,\r\n        dinero_descontado: precio_actual.dinero_descontado\r\n          ? parseFloat(precio_actual.dinero_descontado.toFixed(2))\r\n          : 0,\r\n      };\r\n    } else if (origen === \"Ventas2\") {\r\n      if (granel.granel) {\r\n        newP.cantidad_venta = valor_granel; //si hay granel pone su valor si no 1\r\n      }\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_anterior = newP.precio_actual_producto;\r\n    }\r\n\r\n    return ob;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const calculatePricesNota = async ({\r\n  newP,\r\n  cantidad,\r\n  granel,\r\n  origen,\r\n  precio_boolean = false,\r\n  precio,\r\n}) => {\r\n  try {\r\n    let subtotalCalculo = 0,\r\n      totalCalculo = 0,\r\n      impuestoCalculo = 0,\r\n      ivaCalculo = 0,\r\n      iepsCalculo = 0,\r\n      descuentoCalculo = 0,\r\n      monederoCalculo = 0;\r\n    // const descuento = newP.descuento_activo === null ? false : true;\r\n    const cantidadNueva = cantidad > 0 ? cantidad : 1;\r\n    const valor_granel = granel.granel ? parseFloat(granel.valor) : 1;\r\n    const precio_actual = precio_boolean\r\n      ? precio\r\n      : newP.descuento_activo\r\n      ? newP.descuento\r\n      : newP.precio_unidad;\r\n    const cantidadCaja =\r\n      precio_actual.unidad_maxima === true ? precio_actual.cantidad_unidads : 1;\r\n    ivaCalculo = precio_actual.iva_precio * cantidadCaja;\r\n    iepsCalculo = precio_actual.ieps_precio * cantidadCaja;\r\n    impuestoCalculo = ivaCalculo + iepsCalculo;\r\n    subtotalCalculo = precio_actual.precio_venta * cantidadCaja;\r\n    totalCalculo = precio_actual.precio_neto * cantidadCaja;\r\n    monederoCalculo = newP.id_producto.precios.monedero\r\n      ? newP.id_producto.precios.monedero_electronico * cantidadCaja\r\n      : 0;\r\n    descuentoCalculo = totalCalculo - newP.precio_unidad.precio_neto;\r\n    console.log(totalCalculo, valor_granel, cantidadNueva);\r\n    const ob = {\r\n      ivaCalculo: parseFloat((ivaCalculo * cantidadNueva).toFixed(2)),\r\n      iepsCalculo: parseFloat((iepsCalculo * cantidadNueva).toFixed(2)),\r\n      impuestoCalculo: parseFloat((impuestoCalculo * cantidadNueva).toFixed(2)),\r\n      subtotalCalculo: parseFloat((subtotalCalculo * cantidadNueva).toFixed(2)),\r\n      totalCalculo: parseFloat((totalCalculo * cantidadNueva).toFixed(2)),\r\n      monederoCalculo: parseFloat((monederoCalculo * cantidadNueva).toFixed(2)),\r\n      descuentoCalculo: parseFloat(\r\n        (descuentoCalculo * cantidadNueva).toFixed(2)\r\n      ),\r\n      newP,\r\n    };\r\n    if (origen === \"Ventas1\") {\r\n      newP.cantidad_venta = valor_granel; //si hay granel pone su valor si no 1\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_actual_producto = parseFloat(\r\n        precio_actual.precio_neto.toFixed(2)\r\n      );\r\n      newP.precio_actual_object = {\r\n        cantidad_unidad: precio_actual.cantidad_unidad\r\n          ? precio_actual.cantidad_unidad\r\n          : 1,\r\n        numero_precio: precio_actual.numero_precio\r\n          ? precio_actual.numero_precio\r\n          : 1,\r\n        unidad_maxima: precio_actual.unidad_maxima\r\n          ? precio_actual.unidad_maxima\r\n          : false,\r\n        precio_general: precio_actual.precio_general\r\n          ? parseFloat(precio_actual.precio_general.toFixed(2))\r\n          : 0,\r\n        precio_neto: precio_actual.precio_neto\r\n          ? parseFloat(precio_actual.precio_neto.toFixed(2))\r\n          : 0,\r\n        precio_venta: precio_actual.precio_venta\r\n          ? parseFloat(precio_actual.precio_venta.toFixed(2))\r\n          : 0,\r\n        iva_precio: precio_actual.iva_precio\r\n          ? parseFloat(precio_actual.iva_precio.toFixed(2))\r\n          : 0,\r\n        ieps_precio: precio_actual.ieps_precio\r\n          ? parseFloat(precio_actual.ieps_precio.toFixed(2))\r\n          : 0,\r\n        utilidad: precio_actual.utilidad ? precio_actual.utilidad : 0,\r\n        porciento: precio_actual.porciento ? precio_actual.porciento : 0,\r\n        dinero_descontado: precio_actual.dinero_descontado\r\n          ? parseFloat(precio_actual.dinero_descontado.toFixed(2))\r\n          : 0,\r\n      };\r\n    } else if (origen === \"Ventas2\") {\r\n      if (granel.granel) {\r\n        newP.cantidad_venta = valor_granel; //si hay granel pone su valor si no 1\r\n      }\r\n      newP.granel_producto = granel;\r\n      newP.precio_a_vender = ob.totalCalculo;\r\n      newP.precio_anterior = newP.precio_actual_producto;\r\n    }\r\n\r\n    return ob;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const verifiPrising = async (newP) => {\r\n  try {\r\n    if (!newP) return false;\r\n    if (newP.codigo_unidad === \"XBX\") return false;\r\n    const amount = newP.cantidad_venta;\r\n    const pricings = newP.id_producto.precios.precios_producto.filter(\r\n      (p) => p.unidad_mayoreo > 0 && p.precio_neto > 0\r\n    );\r\n\r\n    let finalPrising = {\r\n      found: false,\r\n      pricing: 0,\r\n      number_pricing: 0,\r\n      object_prising: {},\r\n    };\r\n    const datoFinal = pricings.length;\r\n    if (newP.precio_seleccionado) return finalPrising;\r\n    //CONIDICONAR SI EL PRECIO ES MENOR Y MENOR PERO QUE NO SEA MAYOR AL SEGUNDO\r\n    if (amount < newP.id_producto.precios.precios_producto[1].unidad_mayoreo)\r\n      return (finalPrising = {\r\n        found: true,\r\n        pricing: newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.id_producto.precios.precios_producto[0].precio_neto,\r\n        number_pricing:\r\n          newP.id_producto.precios.precios_producto[0].numero_precio,\r\n        object_prising: newP.descuento_activo\r\n          ? newP.descuento\r\n          : newP.id_producto.precios.precios_producto[0],\r\n      });\r\n\r\n    for (let i = 0; i < pricings.length; i++) {\r\n      if (i + 1 === datoFinal && amount >= pricings[i].unidad_mayoreo)\r\n        return (finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i],\r\n        });\r\n\r\n      if (\r\n        i + 1 < datoFinal &&\r\n        amount >= pricings[i].unidad_mayoreo &&\r\n        amount < pricings[i + 1].unidad_mayoreo\r\n      ) {\r\n        finalPrising = {\r\n          found: true,\r\n          pricing: pricings[i].precio_neto,\r\n          number_pricing: pricings[i].numero_precio,\r\n          object_prising: pricings[i],\r\n        };\r\n      }\r\n    }\r\n    return finalPrising;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport function formatCurrency(number) {\r\n  var formatted = new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n    minimumFractionDigits: 2,\r\n  }).format(number);\r\n  console.log(formatted);\r\n  return formatted;\r\n}\r\n\r\nexport const findProductArrayRefactor = async (producto) => {\r\n  try {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    //Declarar variables\r\n    let found = false;\r\n    let producto_found = {\r\n      producto: {},\r\n      index: 0,\r\n    };\r\n    //Se recorren los productos\r\n    for (let i = 0; i < productosVentas.length; i++) {\r\n      //Se verifica si tiene codigo de barras ya que no es obligatorio\r\n      if (typeof productosVentas[i].codigo_barras !== \"undefined\") {\r\n        if (productosVentas[i].codigo_barras === producto.codigo_barras) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      } else {\r\n        if (\r\n          productosVentas[i].id_producto.datos_generales.clave_alterna ===\r\n          producto.id_producto.datos_generales.clave_alterna\r\n        ) {\r\n          return {\r\n            producto_found: {\r\n              producto: productosVentas[i],\r\n              index: i,\r\n            },\r\n            found: true,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      producto_found,\r\n      found,\r\n    };\r\n  } catch (error) {\r\n    console.log(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const truncteDecimals = (number, digits) => {\r\n  number = parseFloat(number);\r\n  var multiplier = Math.pow(10, 2),\r\n    adjustedNum = number * multiplier,\r\n    truncatedNum = Math[adjustedNum < 0 ? \"ceil\" : \"floor\"](adjustedNum);\r\n  return truncatedNum / multiplier;\r\n};\r\n\r\nexport const NumerosaLetras = (cantidad) => {\r\n  var numero = 0;\r\n  cantidad = parseFloat(cantidad);\r\n\r\n  if (cantidad == \"0.00\" || cantidad == \"0\") {\r\n    return \"CERO PESOS CON 00/100 MXN\";\r\n  } else {\r\n    var ent = cantidad.toString().split(\".\");\r\n    var arreglo = separar_split(ent[0]);\r\n    var longitud = arreglo.length;\r\n\r\n    switch (longitud) {\r\n      case 1:\r\n        numero = unidades(arreglo[0]);\r\n        break;\r\n      case 2:\r\n        numero = decenas(arreglo[0], arreglo[1]);\r\n        break;\r\n      case 3:\r\n        numero = centenas(arreglo[0], arreglo[1], arreglo[2]);\r\n        break;\r\n      case 4:\r\n        numero = unidadesdemillar(\r\n          arreglo[0],\r\n          arreglo[1],\r\n          arreglo[2],\r\n          arreglo[3]\r\n        );\r\n        break;\r\n      case 5:\r\n        numero = decenasdemillar(\r\n          arreglo[0],\r\n          arreglo[1],\r\n          arreglo[2],\r\n          arreglo[3],\r\n          arreglo[4]\r\n        );\r\n        break;\r\n      case 6:\r\n        numero = centenasdemillar(\r\n          arreglo[0],\r\n          arreglo[1],\r\n          arreglo[2],\r\n          arreglo[3],\r\n          arreglo[4],\r\n          arreglo[5]\r\n        );\r\n        break;\r\n    }\r\n\r\n    ent[1] = isNaN(ent[1]) ? \"00\" : ent[1];\r\n\r\n    return numero + \"PESOS CON \" + ent[1] + \"/100 MXN\";\r\n  }\r\n}\r\n\r\nfunction unidades(unidad) {\r\n  var unidades = Array(\r\n    \"UN \",\r\n    \"DOS \",\r\n    \"TRES \",\r\n    \"CUATRO \",\r\n    \"CINCO \",\r\n    \"SEIS \",\r\n    \"SIETE \",\r\n    \"OCHO \",\r\n    \"NUEVE \"\r\n  );\r\n\r\n  return unidades[unidad - 1];\r\n}\r\n\r\nfunction decenas(decena, unidad) {\r\n  var diez = Array(\r\n    \"ONCE \",\r\n    \"DOCE \",\r\n    \"TRECE \",\r\n    \"CATORCE \",\r\n    \"QUINCE\",\r\n    \"DIECISEIS \",\r\n    \"DIECISIETE \",\r\n    \"DIECIOCHO \",\r\n    \"DIECINUEVE \"\r\n  );\r\n  var decenas = Array(\r\n    \"DIEZ \",\r\n    \"VEINTE \",\r\n    \"TREINTA \",\r\n    \"CUARENTA \",\r\n    \"CINCUENTA \",\r\n    \"SESENTA \",\r\n    \"SETENTA \",\r\n    \"OCHENTA \",\r\n    \"NOVENTA \"\r\n  );\r\n\r\n  if (decena == 0 && unidad == 0) {\r\n    return \"\";\r\n  }\r\n\r\n  if (decena == 0 && unidad > 0) {\r\n    return unidades(unidad);\r\n  }\r\n\r\n  if (decena == 1) {\r\n    if (unidad == 0) {\r\n      return decenas[decena - 1];\r\n    } else {\r\n      return diez[unidad - 1];\r\n    }\r\n  } else if (decena == 2) {\r\n    if (unidad == 0) {\r\n      return decenas[decena - 1];\r\n    } else if (unidad == 1) {\r\n      return (\"VEINTI\" + \"UN \");\r\n    } else {\r\n      return (\"VEINTI\" + unidades(unidad));\r\n    }\r\n  } else {\r\n    if (unidad == 0) {\r\n      return decenas[decena - 1] + \" \";\r\n    }\r\n    if (unidad == 1) {\r\n      return decenas[decena - 1] + \" Y \" + \"UNO\";\r\n    }\r\n\r\n    return decenas[decena - 1] + \" Y \" + unidades(unidad);\r\n  }\r\n}\r\n\r\nfunction centenas(centena, decena, unidad) {\r\n  var centenas = Array(\r\n    \"CIENTO \",\r\n    \"DOSCIENTOS \",\r\n    \"TRESCIENTOS \",\r\n    \"CUATROCIENTOS \",\r\n    \"QUINIENTOS \",\r\n    \"SEISCIENTOS \",\r\n    \"SETECIENTOS \",\r\n    \"OCHOCIENTOS \",\r\n    \"NOVECIENTOS \"\r\n  );\r\n\r\n  if (centena == 0 && decena == 0 && unidad == 0) {\r\n    return \"\";\r\n  }\r\n  if (centena == 1 && decena == 0 && unidad == 0) {\r\n    return \"CIEN \";\r\n  }\r\n\r\n  if (centena == 0 && decena == 0 && unidad > 0) {\r\n    return unidades(unidad);\r\n  }\r\n\r\n  if (decena == 0 && unidad == 0) {\r\n    return centenas[centena - 1] + \"\";\r\n  }\r\n\r\n  if (decena == 0) {\r\n    var numero = centenas[centena - 1] + \"\" + decenas(decena, unidad);\r\n    return numero.replace(\" Y \", \" \");\r\n  }\r\n  if (centena == 0) {\r\n    return decenas(decena, unidad);\r\n  }\r\n\r\n  return centenas[centena - 1] + \"\" + decenas(decena, unidad);\r\n}\r\n\r\nfunction unidadesdemillar(unimill, centena, decena, unidad) {\r\n  var numero = unidades(unimill) + \" MIL \" + centenas(centena, decena, unidad);\r\n  numero = numero.replace(\"UN MIL \", \"MIL \");\r\n  if (unidad == 0) {\r\n    return numero.replace(\" Y \", \" \");\r\n  } else {\r\n    return numero;\r\n  }\r\n}\r\n\r\nfunction decenasdemillar(decemill, unimill, centena, decena, unidad) {\r\n  var numero =\r\n    decenas(decemill, unimill) + \" MIL \" + centenas(centena, decena, unidad);\r\n  return numero;\r\n}\r\n\r\nfunction centenasdemillar(\r\n  centenamill,\r\n  decemill,\r\n  unimill,\r\n  centena,\r\n  decena,\r\n  unidad\r\n) {\r\n  var numero = 0;\r\n  numero =\r\n    centenas(centenamill, decemill, unimill) +\r\n    \" MIL \" +\r\n    centenas(centena, decena, unidad);\r\n\r\n  return numero;\r\n}\r\n\r\nfunction separar_split(texto) {\r\n  var contenido = new Array();\r\n  for (var i = 0; i < texto.length; i++) {\r\n    contenido[i] = texto.substr(i, 1);\r\n  }\r\n  return contenido;\r\n}\r\n","import React, { Fragment, useContext, useEffect } from \"react\";\r\nimport {\r\n  IconButton,\r\n  InputAdornment,\r\n  OutlinedInput,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport { Box, TextField, Typography, Table, Checkbox } from \"@material-ui/core\";\r\nimport { Cached, LocalOffer } from \"@material-ui/icons\";\r\nimport { FormControl } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function PreciosDeCompra() {\r\n  const {\r\n    datos_generales,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const descuentoUnidadXdefecto = (descuento_activo) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      descuento_activo,\r\n    });\r\n  };\r\n\r\n  const checkUnidadDefault = (checked) => {\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      unidad_principal: true,\r\n    });\r\n    if (checked) {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad_principal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box>\r\n        <TableContainer>\r\n          <Table size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Precio</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>Aplicar Descuento</TableCell>\r\n                <TableCell>Unidad Principal</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              <TableRow /* selected={actualizarUnidad ? true : false} */>\r\n                <TableCell>{datos_generales.codigo_barras}</TableCell>\r\n                <TableCell>{unidadVentaXDefecto.unidad}</TableCell>\r\n                <TableCell>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    {unidadVentaXDefecto.descuento_activo &&\r\n                    unidadVentaXDefecto.descuento_activo !== null ? (\r\n                      <LocalOffer\r\n                        color={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? \"primary\"\r\n                            : \"action\"\r\n                        }\r\n                      />\r\n                    ) : null}\r\n                    <Box mr={1} />\r\n                    <Typography>\r\n                      <b>\r\n                        $\r\n                        {formatoMexico(\r\n                          unidadVentaXDefecto.descuento_activo &&\r\n                            unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento.precio_neto\r\n                            : unidadVentaXDefecto.precio\r\n                        )}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </TableCell>\r\n                <TableCell>{unidadVentaXDefecto.cantidad}</TableCell>\r\n                <TableCell>\r\n                  {unidadVentaXDefecto.descuento_activo &&\r\n                  unidadVentaXDefecto.descuento_activo !== null ? (\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                      <Checkbox\r\n                        checked={\r\n                          unidadVentaXDefecto.descuento_activo === true\r\n                            ? unidadVentaXDefecto.descuento_activo\r\n                            : false\r\n                        }\r\n                        onChange={(e) =>\r\n                          descuentoUnidadXdefecto(e.target.checked)\r\n                        }\r\n                        inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                        color=\"primary\"\r\n                        disabled={unidadVentaXDefecto.descuento_activo === null}\r\n                      />\r\n                      <Typography color=\"primary\">\r\n                        %\r\n                        {parseFloat(\r\n                          unidadVentaXDefecto.descuento_activo !== null\r\n                            ? unidadVentaXDefecto.descuento.porciento\r\n                            : 0\r\n                        )}\r\n                      </Typography>\r\n                    </Box>\r\n                  ) : null}\r\n                </TableCell>\r\n                <TableCell>\r\n                  <Checkbox\r\n                    checked={unidadVentaXDefecto.unidad_principal}\r\n                    onChange={(e) => checkUnidadDefault(e.target.checked)}\r\n                    inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n                  />\r\n                </TableCell>\r\n              </TableRow>\r\n              {datos_generales.tipo_producto !== \"OTROS\" ? null : (\r\n                <UnidadesVentaSecundaria />\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst UnidadesVentaSecundaria = () => {\r\n  const {\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n  const [precio, setPrecio] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let price =\r\n      unidadVentaSecundaria.descuento_activo &&\r\n      unidadVentaSecundaria.descuento_activo === true\r\n        ? unidadVentaSecundaria.descuento.precio_neto\r\n        : unidadVentaSecundaria.precio;\r\n\r\n    setPrecio(price);\r\n  }, [unidadVentaSecundaria]);\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const obtenerCantidad = (e) => {\r\n    let { value } = e.target;\r\n    if (value) {\r\n      value = parseFloat(value);\r\n    }\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      cantidad: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (e) => {\r\n    let { value } = e.target;\r\n    if (value) {\r\n      value = parseFloat(value);\r\n    }\r\n\r\n    if (\r\n      unidadVentaSecundaria.descuento_activo &&\r\n      unidadVentaSecundaria.descuento_activo === true\r\n    ) {\r\n      console.log(\"a\");\r\n      setPrecio(value);\r\n      calcularUnidadDesucuento(value);\r\n    } else {\r\n      setPrecio(value);\r\n    }\r\n  };\r\n\r\n  const calcularUnidadDesucuento = (value) => {\r\n    const { cantidad, precio_unidad } = unidadVentaSecundaria;\r\n    if (!value || !cantidad) return;\r\n\r\n    const precio_unit = value / cantidad;\r\n    const { iva, ieps, unidad_de_compra } = precios;\r\n    const { precio_venta, numero_precio, unidad_maxima } = precio_unidad;\r\n    const precio_venta_unit = precio_venta / cantidad;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVSI = parseFloat(precio_unit / (suma_impuestos + 1));\r\n    let porcentaje = parseFloat(((PVSI / precio_venta_unit) * 100).toFixed(2));\r\n    let descuento = parseFloat(100 - porcentaje);\r\n\r\n    let PVCDSI = parseFloat((precio_venta_unit * porcentaje) / 100);\r\n    let dineroDescontado = parseFloat(precio_venta_unit - PVCDSI);\r\n\r\n    let iva_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n    );\r\n    let PCSI = unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad = parseFloat(((PVCDSI - PCSI) / PCSI) * 100);\r\n    let precio_neto = parseFloat(PVCDSI + iva_precio + ieps_precio);\r\n    let precio_general = parseFloat(precio_neto * cantidad);\r\n\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      descuento: {\r\n        cantidad_unidad: cantidad,\r\n        numero_precio: numero_precio,\r\n        unidad_maxima: unidad_maxima,\r\n        precio_general: parseFloat(precio_general.toFixed(2)),\r\n        precio_neto: parseFloat(precio_general.toFixed(2)),\r\n        precio_venta: parseFloat(PVCDSI.toFixed(2)),\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: parseFloat(utilidad.toFixed(2)),\r\n        porciento: parseFloat(descuento.toFixed(2)),\r\n        dinero_descontado: parseFloat(dineroDescontado.toFixed(2)),\r\n      },\r\n    });\r\n  };\r\n\r\n  const calcularUnidadDesucuentoCheck = (boolean) => {\r\n    const { cantidad, precio_unidad, descuento } = unidadVentaSecundaria;\r\n    if (!precio || !cantidad) return;\r\n\r\n    /* const precio_unit = value / cantidad; */\r\n    const { iva, ieps, unidad_de_compra } = precios;\r\n    const { precio_venta, numero_precio, unidad_maxima } = precio_unidad;\r\n\r\n    const precio_venta_unit = precio / cantidad;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVSI = parseFloat(precio_venta_unit / (suma_impuestos + 1));\r\n    /* let porcentaje = parseFloat(((PVSI / precio_venta_unit) * 100)));\r\n    let descuento = parseFloat(((100 - porcentaje))); */\r\n\r\n    let PVCDSI = parseFloat((PVSI * descuento.porciento) / 100);\r\n    let dineroDescontado = parseFloat(PVSI - PVCDSI);\r\n\r\n    let iva_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n    );\r\n    let PCSI = unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad = parseFloat(((PVCDSI - PCSI) / PCSI) * 100);\r\n    let precio_neto = parseFloat(PVCDSI + iva_precio + ieps_precio);\r\n    let precio_general = parseFloat(precio_neto * cantidad);\r\n\r\n    setPrecio(precio_general);\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      descuento_activo: boolean,\r\n      precio,\r\n      descuento: {\r\n        cantidad_unidad: cantidad,\r\n        numero_precio: numero_precio,\r\n        unidad_maxima: unidad_maxima,\r\n        precio_general: parseFloat(precio_general.toFixed(2)),\r\n        precio_neto: parseFloat(precio_general.toFixed(2)),\r\n        precio_venta: parseFloat(PVCDSI.toFixed(2)),\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: parseFloat(utilidad.toFixed(2)),\r\n        porciento: descuento.porciento,\r\n        dinero_descontado: parseFloat(dineroDescontado.toFixed(2)),\r\n      },\r\n    });\r\n  };\r\n\r\n  const calcularUnidad = (e) => {\r\n    if (e.target.value === \"\") {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad_principal: false,\r\n        precio: 0,\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: true,\r\n      });\r\n      return;\r\n    }\r\n    if (!unidadVentaSecundaria.precio || !unidadVentaSecundaria.cantidad)\r\n      return;\r\n\r\n    const { cantidad } = unidadVentaSecundaria;\r\n\r\n    const { iva, ieps } = precios;\r\n\r\n    let suma_impuestos =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let PVCI = parseFloat(precio / cantidad);\r\n    let PVSI = parseFloat(PVCI / (suma_impuestos + 1));\r\n\r\n    let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let iva_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n    );\r\n    let ieps_precio = parseFloat(\r\n      PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n    );\r\n    let utilidad = parseFloat(((PVSI - PCSI) / PCSI) * 100);\r\n    let precio_venta = PVSI * cantidad;\r\n    let precio_neto = PVCI * cantidad;\r\n\r\n    let unidad_secundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio,\r\n      cantidad,\r\n      precio_unidad: {\r\n        numero_precio: 1,\r\n        precio_venta: parseFloat(precio_venta.toFixed(2)),\r\n        precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n        unidad_mayoreo: 0,\r\n        iva_precio: parseFloat((cantidad * iva_precio).toFixed(2)),\r\n        ieps_precio: parseFloat((cantidad * ieps_precio).toFixed(2)),\r\n        utilidad: parseFloat(utilidad.toFixed(2)),\r\n        unidad_maxima: true,\r\n        precio_general: precio,\r\n        cantidad_unidad: cantidad,\r\n      },\r\n    };\r\n\r\n    setUnidadVentaSecundaria(unidad_secundaria);\r\n  };\r\n\r\n  const checkUnidadPrincipal = (checked) => {\r\n    setUnidadVentaSecundaria({\r\n      ...unidadVentaSecundaria,\r\n      unidad_principal: true,\r\n    });\r\n    if (checked) {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad_principal: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (boolean) => {\r\n    let precio = boolean\r\n      ? unidadVentaSecundaria.descuento.precio_neto\r\n      : unidadVentaSecundaria.precio;\r\n    if (boolean) {\r\n      calcularUnidadDesucuentoCheck(boolean);\r\n    } else {\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        descuento_activo: boolean,\r\n      });\r\n      setPrecio(precio);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell width={220}>\r\n        <FormControl variant=\"outlined\" size=\"small\" name=\"codigo_barras\">\r\n          <OutlinedInput\r\n            id=\"input-codigo-barras\"\r\n            name=\"codigo_barras\"\r\n            value={unidadVentaSecundaria.codigo_barras}\r\n            endAdornment={\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  onClick={() => GenCodigoBarras()}\r\n                >\r\n                  <Cached />\r\n                </IconButton>\r\n              </InputAdornment>\r\n            }\r\n          />\r\n        </FormControl>\r\n      </TableCell>\r\n      <TableCell>{unidadVentaSecundaria.unidad}</TableCell>\r\n      <TableCell width={200}>\r\n        <TextField\r\n          type=\"number\"\r\n          name=\"precio\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onBlur={(e) => calcularUnidad(e)}\r\n          onChange={obtenerPrecio}\r\n          value={precio}\r\n          disabled={\r\n            unidadVentaSecundaria.descuento_activo !== null &&\r\n            unidadVentaSecundaria.descuento_activo === true\r\n          }\r\n          InputProps={{\r\n            inputProps: { min: 0 },\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {unidadVentaSecundaria.descuento_activo !== null ? (\r\n                  <LocalOffer\r\n                    color={\r\n                      unidadVentaSecundaria.descuento_activo\r\n                        ? \"primary\"\r\n                        : \"disabled\"\r\n                    }\r\n                  />\r\n                ) : null}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </TableCell>\r\n      <TableCell width={110}>\r\n        <Tooltip\r\n          title={<Typography variant=\"subtitle2\">Pz/Kg por Unidad</Typography>}\r\n          placement=\"top\"\r\n          arrow\r\n        >\r\n          <TextField\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            type=\"number\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"cantidad\"\r\n            onBlur={calcularUnidad}\r\n            onChange={obtenerCantidad}\r\n            value={unidadVentaSecundaria.cantidad}\r\n            /* onBlur={(e) => {\r\n              if (e.target.value === \"\") {\r\n                setUnidadVentaSecundaria({\r\n                  ...unidadVentaSecundaria,\r\n                  cantidad: precios.unidad_de_compra.cantidad,\r\n                });\r\n              }\r\n            }} */\r\n          />\r\n        </Tooltip>\r\n      </TableCell>\r\n      <TableCell>\r\n        {unidadVentaSecundaria.descuento_activo !== null ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Checkbox\r\n              checked={\r\n                unidadVentaSecundaria.descuento_activo\r\n                  ? unidadVentaSecundaria.descuento_activo\r\n                  : false\r\n              }\r\n              onChange={(e) => aplicarDescuento(e.target.checked)}\r\n              inputProps={{ \"aria-label\": \"check descuento\" }}\r\n              color=\"primary\"\r\n              disabled={unidadVentaSecundaria.descuento_activo === null}\r\n            />\r\n            <Typography color=\"primary\">\r\n              %\r\n              {parseFloat(\r\n                unidadVentaSecundaria.descuento &&\r\n                  unidadVentaSecundaria.descuento !== null\r\n                  ? unidadVentaSecundaria.descuento.porciento\r\n                  : 0\r\n              )}\r\n            </Typography>\r\n          </Box>\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell>\r\n        <Checkbox\r\n          checked={unidadVentaSecundaria.unidad_principal}\r\n          onChange={(e) => checkUnidadPrincipal(e.target.checked)}\r\n          inputProps={{ \"aria-label\": \"primary checkbox\" }}\r\n          disabled={unidadVentaSecundaria.precio === 0}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  InputAdornment,\r\n  makeStyles,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n  },\r\n  marginInput: {\r\n    marginTop: 19,\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function PreciosDeVenta() {\r\n  const { preciosP } = useContext(RegProductoContext);\r\n  let newPreciosP = [...preciosP];\r\n\r\n  return (\r\n    <Fragment>\r\n      {preciosP.map((res, index) => (\r\n        <RenderPreciosP\r\n          key={index}\r\n          data={res}\r\n          index={index}\r\n          newPreciosP={newPreciosP}\r\n        />\r\n      ))}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RenderPreciosP = ({ data, index, newPreciosP }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    preciosP,\r\n    precios,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setPreciosP,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n  let preciosVenta = { ...preciosP[index] };\r\n  const [error, setError] = useState(false);\r\n\r\n  const obtenerUtilidad = (valor_base) => {\r\n    if (!valor_base) {\r\n      preciosVenta.utilidad = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    /* let utilidad = 1; */\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let { iva, ieps } = precios;\r\n    let utilidad = valor_base / 100;\r\n\r\n    const precio_venta = PUCSI * utilidad + PUCSI;\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    const precio_neto = precio_venta + impuestos;\r\n\r\n    preciosVenta.utilidad = parseFloat(valor_base);\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n    preciosVenta.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n    preciosVenta.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n\r\n    let PUCCI = precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n    if (precio_neto < PUCCI && precio_neto !== 0) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n        precio_venta: parseFloat(precio_venta.toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat((cantidad_sec * iva_precio).toFixed(2)),\r\n        ieps_precio: parseFloat((cantidad_sec * ieps_precio).toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n        unidadXDefecto = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerPrecioNeto = (value) => {\r\n    if (!value) {\r\n      /* console.log(value); */\r\n      preciosVenta.precio_neto = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n\r\n    let precio_neto = parseFloat(value);\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let { iva, ieps } = precios;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio_neto / (suma + 1)));\r\n    let iva_precio =\r\n      precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n    let ieps_precio =\r\n      precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let impuestos = iva_precio + ieps_precio;\r\n    let utilidad_base = ((precio_neto - impuestos - PUCSI) / PUCSI) * 100;\r\n\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n    preciosVenta.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n    preciosVenta.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n    preciosVenta.utilidad = parseFloat(utilidad_base.toFixed(2));\r\n\r\n    let PUCCI = precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n    if (precio_neto < PUCCI && precio_neto !== 0) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n        precio_venta: parseFloat(precio_venta.toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat((cantidad_sec * iva_precio).toFixed(2)),\r\n        ieps_precio: parseFloat((cantidad_sec * ieps_precio).toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      if (descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const obtenerMayoreo = (value) => {\r\n    if (!value) {\r\n      preciosVenta.unidad_mayoreo = \"\";\r\n      newPreciosP.splice(index, 1, preciosVenta);\r\n      setPreciosP(newPreciosP);\r\n      return;\r\n    }\r\n    preciosVenta.unidad_mayoreo = parseInt(value);\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  const calculos = () => {\r\n    let { iva, ieps } = precios;\r\n    let {\r\n      /* unidad, cantidad,  */ descuento,\r\n      descuento_activo,\r\n    } = unidadVentaXDefecto;\r\n    let cantidad_sec = unidadVentaSecundaria.cantidad;\r\n    let descuento_sec = unidadVentaSecundaria.descuento;\r\n    let descuento_activo_sec = unidadVentaSecundaria.descuento_activo;\r\n    let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n    let utilidad_base = preciosVenta.utilidad ? preciosVenta.utilidad : 0;\r\n    let utilidad = utilidad_base / 100;\r\n\r\n    //precio venta y neto con utilidad\r\n    const precio_venta = parseFloat((PUCSI * utilidad + PUCSI));\r\n    let iva_precio =\r\n      (precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`));\r\n    let ieps_precio =\r\n      (precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`));\r\n    let impuestos = iva_precio + ieps_precio;\r\n\r\n\r\n    const precio_neto = parseFloat((precio_venta + impuestos));\r\n\r\n    //meter los valores a preciosVenta\r\n    preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n    preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n    preciosVenta.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n    preciosVenta.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n\r\n    //meter los precios a unidadXdefecto\r\n    let unidadXDefecto = {\r\n      ...unidadVentaXDefecto,\r\n      precio: precio_neto,\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n        precio_venta: parseFloat(precio_venta.toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n        ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    let unidadSecundaria = {\r\n      ...unidadVentaSecundaria,\r\n      precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n      precio_unidad: {\r\n        numero_precio: preciosVenta.numero_precio,\r\n        precio_neto: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n        precio_venta: parseFloat((cantidad_sec * precio_venta).toFixed(2)),\r\n        unidad_mayoreo: preciosVenta.unidad_mayoreo,\r\n        iva_precio: parseFloat((cantidad_sec * iva_precio).toFixed(2)),\r\n        ieps_precio: parseFloat((cantidad_sec * ieps_precio).toFixed(2)),\r\n        utilidad: preciosVenta.utilidad,\r\n        unidad_maxima: false,\r\n      },\r\n    };\r\n\r\n    if (preciosVenta.numero_precio === 1) {\r\n      /* if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: precio_neto,\r\n        };\r\n      } else {\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat(((cantidad * precio_neto)).toFixed(2)),\r\n        };\r\n      } */\r\n      if (descuento_activo === true) {\r\n        //calcular nuevo precio entre %\r\n        /* let precio_con_descuento = Math.round(\r\n          precio_neto - precio_neto * parseFloat(\".\" + descuento.porciento)\r\n        ); */\r\n\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        unidadXDefecto = {\r\n          ...unidadXDefecto,\r\n          precio: parseFloat(precio_neto.toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaXDefecto.descuento,\r\n            precio_neto: precio_con_descuento,\r\n          },\r\n        };\r\n      }\r\n      if (descuento_activo_sec === true) {\r\n        //calcular nuevo precio entre %\r\n        let new_precio_venta_desc_sec =\r\n          (precio_venta * descuento_sec.porciento) / 100;\r\n        let new_iva_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio_sec =\r\n          new_precio_venta_desc_sec *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos_sec = new_iva_precio_sec + new_ieps_precio_sec;\r\n        let precio_con_descuento_sec =\r\n          new_precio_venta_desc_sec + new_impuestos_sec;\r\n\r\n        unidadSecundaria = {\r\n          ...unidadSecundaria,\r\n          precio: parseFloat((cantidad_sec * precio_neto).toFixed(2)),\r\n          descuento: {\r\n            ...unidadVentaSecundaria.descuento,\r\n            precio_neto: parseFloat(\r\n              (cantidad_sec * precio_con_descuento_sec).toFixed(2)\r\n            ),\r\n          },\r\n        };\r\n      }\r\n      setUnidadVentaXDefecto(unidadXDefecto);\r\n      setUnidadVentaSecundaria(unidadSecundaria);\r\n    }\r\n\r\n    newPreciosP.splice(index, 1, preciosVenta);\r\n    setPreciosP(newPreciosP);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (preciosVenta.numero_precio === 1) {\r\n      calculos();\r\n    } else if (preciosVenta.numero_precio > 1 && preciosVenta.precio_neto) {\r\n      calculos();\r\n    }\r\n  }, [precios.unidad_de_compra.precio_unitario_con_impuesto]);\r\n\r\n  const verificarCampoVacio = (name, value) => {\r\n    switch (name) {\r\n      case \"utilidad\":\r\n        if (!value) {\r\n          preciosVenta.utilidad = 0;\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n          setError(false);\r\n        }\r\n        break;\r\n      case \"precio_neto\":\r\n        if (!value) {\r\n          preciosVenta.precio_neto =\r\n            preciosVenta.numero_precio > 1\r\n              ? 0\r\n              : precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n          preciosVenta.utilidad = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n          setError(false);\r\n        }\r\n        break;\r\n      case \"unidad_mayoreo\":\r\n        if (!value) {\r\n          preciosVenta.unidad_mayoreo = 0;\r\n          newPreciosP.splice(index, 1, preciosVenta);\r\n          setPreciosP(newPreciosP);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Utilidad</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box minWidth={130}>\r\n          <Typography className={classes.titulos}>\r\n            Precio {data.numero_precio}\r\n          </Typography>\r\n          <Box mb={2} />\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">%</InputAdornment>\r\n              ),\r\n            }}\r\n            size=\"small\"\r\n            value={preciosVenta.utilidad}\r\n            name=\"utilidad\"\r\n            variant=\"outlined\"\r\n            onChange={(e) => obtenerUtilidad(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"utilidad\", preciosVenta.utilidad)\r\n            }\r\n            error={preciosVenta.utilidad === \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Box\r\n            alignItems=\"flex-end\"\r\n            flexDirection=\"column\"\r\n            display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n          >\r\n            <Typography className={classes.precioTitle}>\r\n              <b>Precio de venta</b>\r\n            </Typography>\r\n            <Typography\r\n              className={classes.precioTitle}\r\n              variant=\"caption\"\r\n              color=\"textSecondary\"\r\n            >\r\n              (precio sin impuestos)\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n        <Box pl={1}>\r\n          <Typography>\r\n            <b>${parseFloat(preciosVenta.precio_venta.toFixed(2))}</b>\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" my={1} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          flexDirection=\"column\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Precio venta neto</b>\r\n          </Typography>\r\n          <Typography\r\n            className={classes.precioTitle}\r\n            variant=\"caption\"\r\n            color=\"textSecondary\"\r\n          >\r\n            (precio con impuestos)\r\n          </Typography>\r\n        </Box>\r\n        <Box className={data.numero_precio > 1 ? classes.marginInput : \"\"}>\r\n          <TextField\r\n            disabled={\r\n              !parseFloat(precios.unidad_de_compra.precio_unitario_sin_impuesto)\r\n            }\r\n            fullWidth\r\n            type=\"number\"\r\n            InputProps={{\r\n              inputProps: { min: 0 },\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">$</InputAdornment>\r\n              ),\r\n            }}\r\n            size=\"small\"\r\n            name=\"precio_neto\"\r\n            variant=\"outlined\"\r\n            value={preciosVenta.precio_neto}\r\n            onChange={(e) => obtenerPrecioNeto(e.target.value)}\r\n            onBlur={() =>\r\n              verificarCampoVacio(\"precio_neto\", preciosVenta.precio_neto)\r\n            }\r\n            error={preciosVenta.precio_neto === \"\" || error}\r\n            helperText={error ? \"Precio menor a costo\" : \"\"}\r\n          />\r\n        </Box>\r\n      </Box>\r\n\r\n      <Box display=\"flex\" my={2} mr={1}>\r\n        <Box\r\n          alignItems=\"flex-end\"\r\n          display={data.numero_precio > 1 ? \"none\" : \"flex\"}\r\n        >\r\n          <Typography className={classes.precioTitle}>\r\n            <b>Unidad por mayoreo</b>\r\n          </Typography>\r\n        </Box>\r\n        {data.numero_precio > 1 ? (\r\n          <Box>\r\n            <TextField\r\n              disabled={\r\n                !parseFloat(\r\n                  precios.unidad_de_compra.precio_unitario_sin_impuesto\r\n                )\r\n              }\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"unidad_mayoreo\"\r\n              variant=\"outlined\"\r\n              value={preciosVenta.unidad_mayoreo}\r\n              onChange={(e) => obtenerMayoreo(e.target.value)}\r\n              onBlur={() =>\r\n                verificarCampoVacio(\r\n                  \"unidad_mayoreo\",\r\n                  preciosVenta.unidad_mayoreo\r\n                )\r\n              }\r\n              error={preciosVenta.unidad_mayoreo === \"\"}\r\n            />\r\n          </Box>\r\n        ) : null}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","export const unitCodes = [\r\n    {unidad: \"Pz\", codigo_unidad: \"H87\"},\r\n    {unidad: \"Caja\", codigo_unidad: \"XBX\"}\r\n]\r\n\r\nexport const unitCodes_granel = [\r\n  {unidad: \"Kg\", codigo_unidad: \"KGM\"},\r\n  {unidad: \"Lt\", codigo_unidad: \"LTR\"},\r\n  {unidad: \"Costal\", codigo_unidad: \"KGM\"},\r\n]","\r\nexport const calcular_iva = (name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"iva_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = parseFloat(precio_sin_impuesto) * 0.16;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva = 0;\r\n      ieps =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(\r\n          precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps\r\n        );\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.ieps_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n\r\n  return {\r\n    ...precios,\r\n    iva_activo: name === \"iva_activo\" ? value : precios.iva_activo,\r\n    iva: name === \"iva\" ? parseFloat(value) : value ? 16 : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n\r\nexport const calcular_ieps = (name, value, precios) => {\r\n  let precio_con_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n  let iva = 0;\r\n  let ieps = 0;\r\n  let precio_unitario_sin_impuesto = 0;\r\n  let precio_unitario_con_impuesto = 0;\r\n  if (name === \"ieps_activo\") {\r\n    if (value) {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      ieps = parseFloat(precio_sin_impuesto) * precios.ieps;\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    } else {\r\n      precio_sin_impuesto = parseFloat(\r\n        precios.precio_de_compra.precio_sin_impuesto\r\n      );\r\n      ieps = 0;\r\n      iva =\r\n        parseFloat(precio_sin_impuesto) *\r\n        parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n      precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n      precio_unitario_sin_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      precio_unitario_con_impuesto =\r\n        precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n      if (!precios.iva_activo) {\r\n        precio_con_impuesto = 0;\r\n        precio_unitario_con_impuesto =\r\n          precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n      }\r\n    }\r\n  } else {\r\n    precio_sin_impuesto = parseFloat(\r\n      precios.precio_de_compra.precio_sin_impuesto\r\n    );\r\n    iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(value < 10 ? \".0\" + value : \".\" + value);\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n  }\r\n  return {\r\n    ...precios,\r\n    ieps_activo: name === \"ieps_activo\" ? value : precios.ieps_activo,\r\n    ieps: name === \"ieps\" ? parseFloat(value) : value ? precios.ieps : 0,\r\n    precio_de_compra: {\r\n      ...precios.precio_de_compra,\r\n      precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n      iva: parseFloat(iva.toFixed(2)),\r\n      ieps: parseFloat(ieps.toFixed(2)),\r\n      precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n    },\r\n    unidad_de_compra: {\r\n      ...precios.unidad_de_compra,\r\n      precio_unitario_sin_impuesto: parseFloat(\r\n        precio_unitario_sin_impuesto.toFixed(2)\r\n      ),\r\n      precio_unitario_con_impuesto: parseFloat(\r\n        precio_unitario_con_impuesto.toFixed(2)\r\n      ),\r\n    },\r\n  };\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Checkbox,\r\n  TextField,\r\n  MenuItem,\r\n  FormHelperText,\r\n  InputAdornment,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { Typography, Divider, FormControl, Select } from \"@material-ui/core\";\r\nimport PreciosDeCompra from \"./UnidadesVenta\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport PreciosDeVenta from \"./Precios\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\nimport { calcular_ieps, calcular_iva } from \"../calculos_precios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  required: {\r\n    color: \"red\",\r\n  },\r\n  precioTitle: {\r\n    width: theme.spacing(20),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function RegistroInfoAdidional() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    preciosP,\r\n    update,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* CHECKBOX IVA */\r\n  const obtenerIva = async (e) => {\r\n    if (e.target.name === \"iva\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        iva: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"iva_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_iva(name, value, precios);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecioConImpuestoVariable(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuestoVariable(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecios(result);\r\n  };\r\n\r\n  /* CHECKBOX IEPS */\r\n  const obtenerIeps = async (e) => {\r\n    if (e.target.name === \"ieps\" && !e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        ieps: \"\",\r\n      });\r\n      return;\r\n    }\r\n    const name = e.target.name;\r\n    const value = name === \"ieps_activo\" ? e.target.checked : e.target.value;\r\n    const result = await calcular_ieps(name, value, precios);\r\n    setPrecioConImpuesto(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuesto(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecioConImpuestoVariable(result.precio_de_compra.precio_con_impuesto);\r\n    setPrecioSinImpuestoVariable(result.precio_de_compra.precio_sin_impuesto);\r\n    setPrecios(result);\r\n  };\r\n\r\n  const [precioConImpuesto, setPrecioConImpuesto] = useState(\r\n    precios.precio_de_compra.precio_con_impuesto\r\n  );\r\n  const [precioSinImpuesto, setPrecioSinImpuesto] = useState(\r\n    precios.precio_de_compra.precio_sin_impuesto\r\n  );\r\n\r\n  const [precioConImpuestoVariable, setPrecioConImpuestoVariable] = useState(\r\n    precios.precio_de_compra.precio_con_impuesto\r\n  );\r\n  const [precioSinImpuestoVariable, setPrecioSinImpuestoVariable] = useState(\r\n    precios.precio_de_compra.precio_sin_impuesto\r\n  );\r\n\r\n  const [PCI] = useDebounce(precioConImpuestoVariable, 800);\r\n  const [PSI] = useDebounce(precioSinImpuestoVariable, 800);\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioConImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let total_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio con impuesto */\r\n    precio_con_impuesto = parseFloat(value);\r\n    /* setPrecioConImpuesto(precio_con_impuesto); */\r\n    total_impuesto =\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva) +\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_sin_impuesto = precio_con_impuesto / parseFloat(total_impuesto + 1);\r\n    iva =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva);\r\n    ieps =\r\n      precio_sin_impuesto *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps);\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    \r\n    setPrecioSinImpuesto(parseFloat(precio_sin_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE PRECIOS DE COMPRA */\r\n  const obtenerPrecioSinImpuesto = (value) => {\r\n    let precio_con_impuesto = 0;\r\n    let precio_sin_impuesto = 0;\r\n    let iva = 0;\r\n    let ieps = 0;\r\n    let precio_unitario_sin_impuesto = 0;\r\n    let precio_unitario_con_impuesto = 0;\r\n\r\n    /* Precio sin impuesto */\r\n    precio_sin_impuesto = parseFloat(value);\r\n    /* setPrecioSinImpuesto(precio_sin_impuesto); */\r\n    iva =\r\n      parseFloat((precio_sin_impuesto *\r\n      parseFloat(precios.iva < 10 ? \".0\" + precios.iva : \".\" + precios.iva)));\r\n    ieps =\r\n      parseFloat((precio_sin_impuesto *\r\n      parseFloat(precios.ieps < 10 ? \".0\" + precios.ieps : \".\" + precios.ieps)));\r\n    precio_con_impuesto = precio_sin_impuesto + iva + ieps;\r\n    precio_unitario_sin_impuesto =\r\n      precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    precio_unitario_con_impuesto =\r\n      precio_con_impuesto / precios.unidad_de_compra.cantidad;\r\n    if (!precios.iva_activo && !precios.ieps_activo) {\r\n      precio_con_impuesto = precio_sin_impuesto /*  / precios.unidad_de_compra.cantidad */;\r\n      precio_unitario_con_impuesto =\r\n        precio_sin_impuesto / precios.unidad_de_compra.cantidad;\r\n    }\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n    if (isNaN(iva)) iva = 0;\r\n    if (isNaN(ieps)) ieps = 0;\r\n    /* if (isNaN(precio_con_impuesto)) precio_con_impuesto = 0;\r\n\t\tif (isNaN(precio_sin_impuesto)) precio_sin_impuesto = 0; */\r\n\r\n    setPrecioConImpuesto(parseFloat(precio_con_impuesto.toFixed(2)));\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_sin_impuesto: parseFloat(precio_sin_impuesto.toFixed(2)),\r\n        iva: parseFloat(iva.toFixed(2)),\r\n        ieps: parseFloat(ieps.toFixed(2)),\r\n        precio_con_impuesto: parseFloat(precio_con_impuesto.toFixed(2)),\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  /* ARMAR OBJETO DE UNIDAD DE COMPRA */\r\n  const obtenerUnidadCompra = (e, child) => {\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      let precio =\r\n        precios.unidad_de_compra.cantidad * unidadVentaXDefecto.precio;\r\n      if (unidad === \"Caja\" || unidad === \"Costal\") {\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad,\r\n          unidad,\r\n          unidad_activa: true,\r\n          unidad_principal: true,\r\n        });\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: unidad === \"Caja\" ? \"Pz\" : \"kg\",\r\n          codigo_unidad: unidad === \"Caja\" ? \"H87\" : \"KGM\",\r\n          cantidad: 1,\r\n          precio: unidadVentaXDefecto.precio,\r\n          unidad_principal: false,\r\n        });\r\n        /* setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad,\r\n            codigo_unidad,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: unidad,\r\n            codigo_unidad,\r\n          },\r\n        }); */\r\n      } else {\r\n        setUnidadVentaXDefecto({\r\n          ...unidadVentaXDefecto,\r\n          unidad: unidad === \"Pz\" ? \"Pz\" : unidad === \"Lt\" ? \"Lt \" : \"kg\",\r\n          codigo_unidad:\r\n            unidad === \"Pz\" ? \"H87\" : unidad === \"Lt\" ? \"LTR\" : \"KGM\",\r\n          cantidad: 1,\r\n          precio: unidadVentaXDefecto.precio,\r\n          unidad_principal: true,\r\n        });\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          precio: parseFloat(precio.toFixed(2)),\r\n          codigo_unidad:\r\n            unidad === \"Pz\" ? \"XBX\" : unidad === \"Lt\" ? \"LTR\" : \"KGM\",\r\n          unidad:\r\n            unidad === \"Pz\" ? \"Caja\" : unidad === \"Caja\" ? \"LTR\" : \"Costal\",\r\n          unidad_activa: false,\r\n          unidad_principal: false,\r\n        });\r\n      }\r\n\r\n      /* setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            unidad: e.target.value,\r\n            cantidad: 1,\r\n          },\r\n          inventario: {\r\n            ...precios.inventario,\r\n            unidad_de_inventario: e.target.value,\r\n          },\r\n        }); */\r\n      setPrecios({\r\n        ...precios,\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad,\r\n          codigo_unidad,\r\n          cantidad: 1,\r\n        },\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n    } else {\r\n      if (!precios.iva_activo && !precios.ieps_activo) {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      } else {\r\n        setPrecios({\r\n          ...precios,\r\n          unidad_de_compra: {\r\n            ...precios.unidad_de_compra,\r\n            [e.target.name]: parseFloat(e.target.value),\r\n            precio_unitario_sin_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_sin_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n            precio_unitario_con_impuesto: parseFloat(\r\n              (\r\n                precios.precio_de_compra.precio_con_impuesto / e.target.value\r\n              ).toFixed(2)\r\n            ),\r\n          },\r\n        });\r\n      }\r\n      if (\r\n        precios.unidad_de_compra.unidad === \"Caja\" ||\r\n        precios.unidad_de_compra.unidad === \"Costal\"\r\n      ) {\r\n        setUnidadVentaSecundaria({\r\n          ...unidadVentaSecundaria,\r\n          cantidad: parseFloat(e.target.value),\r\n        });\r\n      }\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        cantidad: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  const [count, setCount] = useState(0)\r\n\r\n  useEffect(() => {\r\n    if(count === 0) return\r\n    obtenerPrecioConImpuesto(PCI);\r\n  }, [PCI]);\r\n\r\n  useEffect(() => {\r\n    if(count === 0) return\r\n    obtenerPrecioSinImpuesto(PSI);\r\n  }, [PSI]);\r\n\r\n  return (\r\n    <Box>\r\n      <div /* className={classes.input} */>\r\n        <Box mb={2}>\r\n          <Typography>\r\n            <b>Impuestos</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                IVA\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={!precios.iva_activo}\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Checkbox\r\n                        checked={precios.iva_activo}\r\n                        onChange={obtenerIva}\r\n                        name=\"iva_activo\"\r\n                      />\r\n                      <Typography>%</Typography>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                name=\"iva\"\r\n                id=\"form-producto-iva\"\r\n                variant=\"outlined\"\r\n                value={precios.iva}\r\n                onChange={obtenerIva}\r\n                onFocus={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: \"\",\r\n                    });\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (!value) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: 16,\r\n                    });\r\n                  }\r\n                }}\r\n                error={precios.iva === \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                porcentaje IEPS\r\n              </Typography>\r\n              <TextField\r\n                disabled={!precios.ieps_activo}\r\n                fullWidth\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">\r\n                      <Checkbox\r\n                        checked={precios.ieps_activo}\r\n                        onChange={obtenerIeps}\r\n                        name=\"ieps_activo\"\r\n                      />\r\n                      <Typography>%</Typography>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                name=\"ieps\"\r\n                id=\"form-producto-ieps\"\r\n                variant=\"outlined\"\r\n                value={precios.ieps}\r\n                onChange={obtenerIeps}\r\n                onFocus={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: \"\",\r\n                    });\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { name, value } = e.target;\r\n                  if (!value) {\r\n                    setPrecios({\r\n                      ...precios,\r\n                      [name]: 0,\r\n                    });\r\n                  }\r\n                }}\r\n                error={precios.ieps === \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          {/* \r\n          <Grid item md={4} xs={12}>\r\n            <Box display=\"flex\" alignItems=\"flex-end\" height=\"100%\" ml={1}>\r\n              <Alert severity=\"info\">Selecciona los impuestos aplicables</Alert>\r\n            </Box>\r\n          </Grid> */}\r\n        </Grid>\r\n        <Box my={3}>\r\n          <Typography>\r\n            <b>Precios y unidad de compra</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                Unidad Compra\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={validacion.error && !precios.unidad_de_compra.unidad}\r\n                >\r\n                  {precios.granel ? (\r\n                    <Select\r\n                      disabled={update}\r\n                      id=\"form-producto-categoria\"\r\n                      name=\"unidad\"\r\n                      value={precios.unidad_de_compra.unidad}\r\n                      onChange={obtenerUnidadCompra}\r\n                    >\r\n                      {unitCodes_granel.map((res, index) => (\r\n                        <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                          {res.unidad}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      disabled={update}\r\n                      id=\"form-producto-categoria\"\r\n                      name=\"unidad\"\r\n                      value={precios.unidad_de_compra.unidad}\r\n                      onChange={obtenerUnidadCompra}\r\n                    >\r\n                      {unitCodes.map((res, index) => (\r\n                        <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                          {res.unidad}\r\n                        </MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  )}\r\n                  <FormHelperText>{validacion.message}</FormHelperText>\r\n                </FormControl>\r\n              </Box>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap align=\"center\" className={classes.titulos}>\r\n                Unidad Conversion\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  {precios.unidad_de_compra.unidad === \"Caja\"\r\n                    ? \"Pz\"\r\n                    : precios.unidad_de_compra.unidad === \"Costal\"\r\n                    ? \"Kg\"\r\n                    : precios.unidad_de_compra.unidad}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={4} md={2} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Factor por Unidad\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={\r\n                  precios.unidad_de_compra.unidad === \"Caja\" ||\r\n                  precios.unidad_de_compra.unidad === \"Costal\"\r\n                    ? false\r\n                    : true\r\n                }\r\n                type=\"number\"\r\n                InputProps={{ inputProps: { min: 1 } }}\r\n                size=\"small\"\r\n                error={validacion.error && !precios.unidad_de_compra.cantidad}\r\n                name=\"cantidad\"\r\n                id=\"form-producto-cantidad\"\r\n                variant=\"outlined\"\r\n                value={precios.unidad_de_compra.cantidad}\r\n                helperText={validacion.message}\r\n                onChange={obtenerUnidadCompra}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={6} md={3} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Precio sin impuestos\r\n              </Typography>\r\n              <TextField\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">$</InputAdornment>\r\n                  ),\r\n                }}\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !precioSinImpuesto}\r\n                name=\"precio_sin_impuesto\"\r\n                id=\"form-producto-precio_sin_impuesto\"\r\n                variant=\"outlined\"\r\n                value={precioSinImpuesto}\r\n                helperText={validacion.message}\r\n                onChange={(e) => {\r\n                  setCount(1)\r\n                  setPrecioSinImpuesto(e.target.value);\r\n                  setPrecioSinImpuestoVariable(e.target.value);\r\n                }}\r\n                /* onChange={(e) => obtenerPrecioSinImpuesto(e.target.value)} */\r\n                onFocus={(e) => {\r\n                  const { value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecioSinImpuesto(\"\");\r\n                    setPrecioSinImpuestoVariable(\"\");\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { value } = e.target;\r\n                  if (!value) {\r\n                    setPrecioSinImpuesto(0);\r\n                    setPrecioSinImpuestoVariable(\"\");\r\n                  }\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item sm={6} md={3} xs={12}>\r\n            <Box>\r\n              <Typography noWrap className={classes.titulos}>\r\n                <span className={classes.required}>* </span>Precio con impuestos\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                disabled={!precios.iva_activo && !precios.ieps_activo}\r\n                type=\"number\"\r\n                InputProps={{\r\n                  inputProps: { min: 0 },\r\n                  startAdornment: (\r\n                    <InputAdornment position=\"start\">$</InputAdornment>\r\n                  ),\r\n                }}\r\n                size=\"small\"\r\n                error={validacion.error && !precioConImpuesto}\r\n                name=\"precio_con_impuesto\"\r\n                id=\"form-producto-precio_con_impuesto\"\r\n                variant=\"outlined\"\r\n                value={precioConImpuesto}\r\n                helperText={validacion.message}\r\n                onChange={(e) => {\r\n                  setCount(1);\r\n                  setPrecioConImpuesto(e.target.value);\r\n                  setPrecioConImpuestoVariable(e.target.value);\r\n                }}\r\n                /* onChange={(e) => obtenerPrecioConImpuesto(e.target.value)} */\r\n                onFocus={(e) => {\r\n                  const { value } = e.target;\r\n                  if (parseFloat(value) === 0) {\r\n                    setPrecioConImpuesto(\"\");\r\n                    setPrecioConImpuestoVariable(\"\");\r\n                  }\r\n                }}\r\n                onBlur={(e) => {\r\n                  const { value } = e.target;\r\n                  if (!value) {\r\n                    setPrecioConImpuesto(0);\r\n                    setPrecioConImpuestoVariable(0);\r\n                  }\r\n                }}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={3} />\r\n        <Grid container spacing={2}>\r\n          <Grid item md={2} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                IVA\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  $ {parseFloat(precios.precio_de_compra.iva.toFixed(2))}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                IEPS\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  $ {parseFloat(precios.precio_de_compra.ieps.toFixed(2))}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                Precio unitario sin impuestos\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  ${\" \"}\r\n                  {parseFloat(\r\n                      precios.unidad_de_compra.precio_unitario_sin_impuesto.toFixed(2)\r\n                  )}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box>\r\n              <Typography align=\"center\" className={classes.titulos}>\r\n                Precio unitario con impuestos\r\n              </Typography>\r\n              <Typography align=\"center\" variant=\"h6\">\r\n                <b>\r\n                  ${\" \"}\r\n                  {parseFloat(\r\n                      precios.unidad_de_compra.precio_unitario_con_impuesto.toFixed(2)\r\n                  )}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={2}>\r\n          <Typography>\r\n            <b>Precios de venta</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n\r\n        <Box display=\"flex\">\r\n          <PreciosDeVenta />\r\n        </Box>\r\n        <Box my={2}>\r\n          <Typography>\r\n            <b>Unidades de venta</b>\r\n          </Typography>\r\n          <Divider />\r\n        </Box>\r\n        <Box>\r\n          <PreciosDeCompra />\r\n        </Box>\r\n      </div>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\nimport { initial_state_precios } from \"../Catalogos/initialStatesProducto\";\r\nimport moment from \"moment\";\r\n\r\nexport const ComprasContext = createContext();\r\n\r\nexport const ComprasProvider = ({ children }) => {\r\n  const [datosProducto, setDatosProducto] = useState({\r\n    producto: {},\r\n    costo: 0,\r\n    cantidad: 1,\r\n    cantidad_regalo: 0,\r\n    unidad_regalo: \"\",\r\n    cantidad_total: 0,\r\n    descuento_porcentaje: 0,\r\n    descuento_precio: 0,\r\n    iva_total: 0,\r\n    ieps_total: 0,\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    mantener_precio: true,\r\n    impuestos_descuento: 0,\r\n    subtotal_descuento: 0,\r\n    total_descuento: 0,\r\n  });\r\n\r\n  const [datosCompra, setDatosCompra] = useState({\r\n    productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0,\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n  });\r\n\r\n  const [preciosVenta, setPreciosVenta] = useState([\r\n    {\r\n      numero_precio: 1,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 2,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 3,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 4,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 5,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n    {\r\n      numero_precio: 6,\r\n      utilidad: 0,\r\n      precio_neto: 0,\r\n      unidad_mayoreo: 0,\r\n      precio_venta: 0,\r\n      iva_precio: 0,\r\n      ieps_precio: 0,\r\n    },\r\n  ]);\r\n\r\n  const [productoOriginal, setProductoOriginal] = useState({\r\n    precios: initial_state_precios,\r\n  });\r\n  const [productosCompra, setProductosCompra] = useState([]);\r\n  const [isEditing, setIsEditing] = useState({});\r\n  const [editFinish, setEditFinish] = useState(false);\r\n  const [costo, setCosto] = useState(0);\r\n  const [cantidad, setCantidad] = useState(1);\r\n  const [issue, setIssue] = useState(false);\r\n  const [loadingProductos, setLoadingProductos] = useState(false);\r\n\r\n  return (\r\n    <ComprasContext.Provider\r\n      value={{\r\n        datosProducto,\r\n        setDatosProducto,\r\n        productosCompra,\r\n        setProductosCompra,\r\n        datosCompra,\r\n        setDatosCompra,\r\n        productoOriginal,\r\n        setProductoOriginal,\r\n        preciosVenta,\r\n        setPreciosVenta,\r\n        isEditing,\r\n        setIsEditing,\r\n        editFinish,\r\n        setEditFinish,\r\n        costo,\r\n        setCosto,\r\n        cantidad,\r\n        setCantidad,\r\n        issue,\r\n        setIssue,\r\n        loadingProductos,\r\n        setLoadingProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </ComprasContext.Provider>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport {\r\n  Box,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n  Zoom,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Cached,\r\n  Close,\r\n  Edit,\r\n  LocalOffer,\r\n  LocalOfferOutlined,\r\n} from \"@material-ui/icons\";\r\nimport { alpha } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    maxHeight: \"65vh\",\r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: alpha(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) {\r\n  const classes = useStyles();\r\n  const { presentaciones, setPresentaciones } = useContext(RegProductoContext);\r\n\r\n  let mostrar_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n\r\n  /* useEffect(() => {\r\n    let nuevo_array = [];\r\n    mostrar_presentaciones.forEach((element) => {\r\n      let obj = {\r\n        codigo_barras: element.codigo_barras,\r\n        cantidad: parseFloat(element.cantidad),\r\n        descuento: element.descuento,\r\n        descuento_activo: element.descuento_activo,\r\n        color: element.color,\r\n        existencia: element.existencia,\r\n        medida: element.medida,\r\n        nombre_comercial: element.nombre_comercial,\r\n      };\r\n\r\n      if (element.descuento_activo === true) {\r\n        obj.aplicar_descuento = true;\r\n        obj.precio = parseFloat(element.descuento.precio_neto);\r\n      } else {\r\n        obj.aplicar_descuento = false;\r\n        obj.precio = parseFloat(element.precio);\r\n      }\r\n      nuevo_array.push(obj);\r\n    });\r\n    setPresentaciones(nuevo_array);\r\n  }, []); */\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                {!withoutPrice ? (\r\n                  <Fragment>\r\n                    <TableCell>Precio</TableCell>\r\n                    <TableCell padding=\"checkbox\">Aplicar descuento</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                {!onlyPrice ? (\r\n                  <Fragment>\r\n                    {from && from === \"compra\" ? (\r\n                      <TableCell padding=\"checkbox\">Existente</TableCell>\r\n                    ) : null}\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null}\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {mostrar_presentaciones.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    index={index}\r\n                    from={from}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                    withoutPrice={withoutPrice}\r\n                    onlyPrice={onlyPrice}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  producto,\r\n  index,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  const { presentaciones, setPresentaciones, preciosP, precios } = useContext(\r\n    RegProductoContext\r\n  );\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  const copy_element_presentacion_descuento = {\r\n    ...copy_presentaciones[index].descuento,\r\n  };\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.cantidad) {\r\n      copy_element_presentacion.cantidad = 0;\r\n    }\r\n    if (!copy_producto.cantidad_nueva) {\r\n      copy_element_presentacion.cantidad_nueva = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = preciosP[0].precio_neto;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad = \"\";\r\n        copy_element_presentacion.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      if (value === \"0\") {\r\n        copy_element_presentacion.existencia = false;\r\n      } else {\r\n        copy_element_presentacion.existencia = true;\r\n      }\r\n      copy_element_presentacion.cantidad = parseFloat(value);\r\n    } else if (name === \"cantidad_nueva\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad_nueva = \"\";\r\n        copy_element_presentacion.existencia = copy_producto.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.cantidad_nueva = parseFloat(value);\r\n      copy_element_presentacion.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      if (!value) {\r\n        copy_element_presentacion.precio = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = precios;\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat(\r\n        precio_neto / (suma_impuestos + 1)\r\n      );\r\n      let iva_precio = parseFloat(\r\n        precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        precio_venta *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n      );\r\n      let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat(\r\n        (((precio_venta - PUCSI) / PUCSI) * 100)\r\n      );\r\n\r\n      let { descuento_activo, descuento } = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          precio_con_descuento.toFixed(2)\r\n        );\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n        copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.precio = parseFloat(value);\r\n      }\r\n      copy_element_presentacion.precio_unidad.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n      copy_element_presentacion.precio_unidad.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n      copy_element_presentacion.precio_unidad.utilidad = parseFloat(utilidad.toFixed(2));\r\n      copy_element_presentacion.precio_unidad.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n      copy_element_presentacion.precio_unidad.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.codigo_barras = codigo_barras;\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.descuento_activo = value;\r\n\r\n    let precio_con_descuento = 0;\r\n    let { iva, ieps } = precios;\r\n    let { descuento, precio } = copy_element_presentacion;\r\n    let suma =\r\n      parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n      parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n    let precio_venta = parseFloat((precio / (suma + 1)).toFixed(2));\r\n\r\n    if (value) {\r\n      let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n      let new_iva_precio =\r\n        new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n      let new_ieps_precio =\r\n        new_precio_venta_desc *\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let new_impuestos = new_iva_precio + new_ieps_precio;\r\n      precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n    } else {\r\n      precio_con_descuento = precio;\r\n    }\r\n\r\n    copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n      precio_con_descuento.toFixed(2)\r\n    );\r\n    /* copy_element_presentacion.precio = parseFloat(value); */\r\n    copy_element_presentacion.descuento = copy_element_presentacion_descuento;\r\n\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              presentaciones.length > 0 && !copy_producto.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {presentaciones.length === 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : presentaciones.length > 0 && copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida._id ? (\r\n          <Chip label={copy_producto.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n      {!withoutPrice ? (\r\n        <Fragment>\r\n          <TableCell width={110} className={classes.input}>\r\n            <Input\r\n              inputRef={textfield}\r\n              onChange={(e) => obtenerDatos(e)}\r\n              disabled={disabledInput}\r\n              value={copy_producto.precio}\r\n              type=\"number\"\r\n              name=\"precio\"\r\n            />\r\n          </TableCell>\r\n          <TableCell width={200}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              {copy_producto.descuento_activo !== undefined &&\r\n              copy_producto.descuento_activo !== null ? (\r\n                <Fragment>\r\n                  <Checkbox\r\n                    checked={\r\n                      copy_producto.descuento_activo === true\r\n                        ? copy_producto.descuento_activo\r\n                        : false\r\n                    }\r\n                    onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                    icon={<LocalOfferOutlined />}\r\n                    checkedIcon={<LocalOffer />}\r\n                    inputProps={{ \"aria-label\": \"check descuento\" }}\r\n                    color=\"primary\"\r\n                    disabled={copy_producto.descuento_activo === null}\r\n                  />\r\n                  <Typography\r\n                    color={\r\n                      copy_producto.descuento_activo === true\r\n                        ? \"primary\"\r\n                        : \"textSecondary\"\r\n                    }\r\n                  >\r\n                    %\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.porciento\r\n                        : 0\r\n                    )}{\" \"}\r\n                    $\r\n                    {parseFloat(\r\n                      copy_producto.descuento !== null\r\n                        ? copy_producto.descuento.precio_neto\r\n                        : 0\r\n                    )}\r\n                  </Typography>\r\n                </Fragment>\r\n              ) : null}\r\n            </Box>\r\n          </TableCell>\r\n        </Fragment>\r\n      ) : null}\r\n      {!onlyPrice ? (\r\n        <Fragment>\r\n          {from && from === \"compra\" ? (\r\n            <Fragment>\r\n              <TableCell padding=\"checkbox\">{producto.cantidad}</TableCell>\r\n              <TableCell padding=\"checkbox\">\r\n                <Input\r\n                  inputRef={textfield}\r\n                  onChange={(e) => obtenerDatos(e)}\r\n                  disabled={disabledInput}\r\n                  value={copy_producto.cantidad_nueva}\r\n                  type=\"tel\"\r\n                  name=\"cantidad_nueva\"\r\n                />\r\n              </TableCell>\r\n            </Fragment>\r\n          ) : (\r\n            <TableCell padding=\"checkbox\">\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.cantidad}\r\n                type=\"tel\"\r\n                name=\"cantidad\"\r\n              />\r\n            </TableCell>\r\n          )}\r\n        </Fragment>\r\n      ) : null}\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport FormularioPrecios from \"../../../Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport { Close, LocalAtm, SquareFoot } from \"@material-ui/icons\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { CircularProgress, DialogTitle } from \"@material-ui/core\";\r\nimport TablaPresentaciones from \"../../../Catalogos/Producto/TallasColores/TablaPresentaciones\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      style={{ height: \"80vh\" }}\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={3}>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nexport default function AlertDialogSlide({\r\n  agregarCompra,\r\n  handleClose,\r\n  cargando,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const { datosProducto, productoOriginal /* setDatosProducto */ } = useContext(\r\n    ComprasContext\r\n  );\r\n  const {\r\n    precios,\r\n    setPrecios,\r\n    setUnidadesVenta,\r\n    setPreciosP,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const toggleDrawer = () => setOpen(!open);\r\n\r\n  const resetProducto = () => {\r\n    /* SET STATES WHEN UPDATING */\r\n    const { precios_producto, ...new_precios } = productoOriginal.precios;\r\n    const { unidades_de_venta } = productoOriginal;\r\n    let unidades_secundaria = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = productoOriginal.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    /* setDatosProducto({...datosProducto, mantener_precio: true}) */\r\n    setPrecios(new_precios);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(productoOriginal.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    toggleDrawer();\r\n  };\r\n\r\n  const actualizarContextProducto = () => {\r\n    toggleDrawer();\r\n    let precio_unitario_con_impuesto =\r\n      datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n    let precio_unitario_sin_impuesto =\r\n      precios.precio_de_compra.precio_sin_impuesto /\r\n      precios.unidad_de_compra.cantidad;\r\n\r\n    if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n    if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n    setPrecios({\r\n      ...precios,\r\n      precio_de_compra: {\r\n        ...precios.precio_de_compra,\r\n        precio_con_impuesto: datosProducto.costo,\r\n      },\r\n      unidad_de_compra: {\r\n        ...precios.unidad_de_compra,\r\n        precio_unitario_con_impuesto: parseFloat(\r\n          precio_unitario_con_impuesto.toFixed(2)\r\n        ),\r\n        precio_unitario_sin_impuesto: parseFloat(\r\n          precio_unitario_sin_impuesto.toFixed(2)\r\n        ),\r\n      },\r\n    });\r\n  };\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        onClick={() => actualizarContextProducto()}\r\n      >\r\n        Actualizar precios\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => resetProducto()}\r\n        aria-labelledby=\"alert-precios-compra-title\"\r\n        aria-describedby=\"alert-precios-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n          <DialogTitle style={{ padding: 0 }}>\r\n            <AppBar position=\"static\" color=\"default\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab label=\"Precios\" icon={<LocalAtm />} {...a11yProps(0)} />\r\n                <Tab\r\n                  label=\"Precios Medidas\"\r\n                  icon={<SquareFoot />}\r\n                  {...a11yProps(1)}\r\n                />\r\n              </Tabs>\r\n            </AppBar>\r\n          </DialogTitle>\r\n        ) : null}\r\n        <DialogContent>\r\n          {datosProducto.producto.datos_generales &&\r\n          datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\" ? (\r\n            <div>\r\n              <TabPanel value={value} index={0}>\r\n                <FormularioPrecios />\r\n              </TabPanel>\r\n              <TabPanel value={value} index={1}>\r\n                <TablaPresentaciones\r\n                  from=\"compras\"\r\n                  datos={datosProducto.producto}\r\n                  setOnUpdate={setOnUpdate}\r\n                  onUpdate={onUpdate}\r\n                  onlyPrice={true}\r\n                />\r\n              </TabPanel>\r\n            </div>\r\n          ) : (\r\n            <FormularioPrecios />\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => resetProducto()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => {\r\n              /* setDatosProducto({...datosProducto, mantener_precio: false}) */\r\n              agregarCompra(\"actualizar_precios\");\r\n              handleClose();\r\n              toggleDrawer();\r\n            }}\r\n            startIcon={\r\n              cargando ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            disabled={!precios.precio_de_compra.precio_con_impuesto}\r\n          >\r\n            Aceptar y agregar compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_CONSULTAS = gql`\r\n  query obtenerConsultasProducto($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultasProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      categorias {\r\n        _id\r\n        categoria\r\n        subcategorias {\r\n          _id\r\n          subcategoria\r\n        }\r\n      }\r\n      departamentos {\r\n        _id\r\n        nombre_departamentos\r\n      }\r\n      marcas {\r\n        _id\r\n        nombre_marca\r\n      }\r\n      colores {\r\n        _id\r\n        nombre\r\n        hex\r\n      }\r\n      tallas {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      calzados {\r\n        _id\r\n        talla\r\n        tipo\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n      }\r\n      centro_costos {\r\n        _id\r\n        cuenta\r\n        subcuentas {\r\n          _id\r\n          subcuenta\r\n        }\r\n      }\r\n      codigos {\r\n        _id\r\n        Name\r\n        Value\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO = gql`\r\n  mutation crearProducto($input: CrearProductoInput) {\r\n    crearProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS = gql`\r\n  query obtenerProductos(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $almacen: ID\r\n    $existencias: Boolean\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerProductos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      almacen: $almacen\r\n      existencias: $existencias\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        _id\r\n        centro_de_costos {\r\n          id_cuenta\r\n          cuenta\r\n          id_subcuenta\r\n          subcuenta\r\n        }\r\n        unidades_de_venta {\r\n          _id\r\n          precio\r\n          cantidad\r\n          unidad\r\n          codigo_unidad\r\n          unidad_principal\r\n          codigo_barras\r\n          id_producto\r\n          descuento_activo\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          default\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        empresa\r\n        imagenes {\r\n          location_imagen\r\n          extencion_imagen\r\n          url_imagen\r\n          key_imagen\r\n        }\r\n        precio_plazos {\r\n          precio_cajas {\r\n            plazo\r\n            unidad\r\n            precio\r\n            codigo_unidad\r\n          }\r\n          precio_piezas {\r\n            plazo\r\n            unidad\r\n            precio\r\n            codigo_unidad\r\n          }\r\n          precio_costales {\r\n            plazo\r\n            unidad\r\n            codigo_unidad\r\n            precio\r\n          }\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          granel\r\n        }\r\n        medidas_producto {\r\n          _id\r\n          cantidad\r\n          codigo_unidad\r\n          unidad\r\n          almacen\r\n          descuento_activo\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          codigo_barras\r\n          color {\r\n            _id\r\n            nombre\r\n            hex\r\n          }\r\n          existencia\r\n          medida {\r\n            _id\r\n            talla\r\n            tipo\r\n          }\r\n          nombre_comercial\r\n          precio\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n        inventario_general {\r\n          _id\r\n          cantidad_existente\r\n          unidad_inventario\r\n          codigo_unidad\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n          id_almacen_general\r\n          eliminado\r\n        }\r\n        medidas_registradas\r\n        sucursal\r\n        usuario\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_PRODUCTO = gql`\r\n  mutation actualizarProducto($id: ID!, $input: ActualizarProductoInput, $empresa:ID!, $sucursal:ID!) {\r\n    actualizarProducto(id: $id, input: $input, empresa: $empresa, sucursal:$sucursal ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_PRODUCTO = gql`\r\n  mutation eliminarProducto($id: ID!, $empresa:ID!, $sucursal:ID!) {\r\n    eliminarProducto(id: $id, empresa: $empresa, sucursal:$sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PRODUCTOS_ELIMINADOS = gql`\r\n  query obtenerProductosInactivos($empresa: ID!, $sucursal: ID!) {\r\n    obtenerProductosInactivos(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      producto {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          granel\r\n        }\r\n      }\r\n      cantidad_existente\r\n      unidad_de_inventario\r\n      id_almacen\r\n      eliminado\r\n      empresa\r\n      sucursal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTIVAR_PRODUCTOS = gql`\r\n  mutation activarProducto($id: ID!, $empresa:ID!, $sucursal:ID!) {\r\n    activarProducto(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_PRODUCTO_RAPIDO = gql`\r\n  mutation crearProductoRapido($input: CrearProductoRapidoInput) {\r\n    crearProductoRapido(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COLOR = gql`\r\n  mutation crearColor($input: CrearColorInput) {\r\n    crearColor(input: $input) {\r\n      _id\r\n      nombre\r\n      hex\r\n      empresa {\r\n        nombre_empresa\r\n        correo_empresa\r\n        nombre_dueno\r\n        telefono_dueno\r\n        sucursales_activas\r\n        limite_sucursales\r\n        _id\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COLORES = gql`\r\n  query obtenerColores($empresa: ID!) {\r\n    obtenerColores(empresa: $empresa) {\r\n      _id\r\n      nombre\r\n      hex\r\n      empresa {\r\n        nombre_empresa\r\n        correo_empresa\r\n        nombre_dueno\r\n        telefono_dueno\r\n        sucursales_activas\r\n        limite_sucursales\r\n        _id\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n        descripcion\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_COLOR = gql`\r\n\tmutation actualizarColor($input: ActualizarColorInput, $id: ID!, $empresa:ID!, $sucursal:ID!) {\r\n\t\tactualizarColor(id: $id, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_COLOR = gql`\r\n\tmutation eliminarColor($id: ID!, $empresa:ID!, $sucursal:ID!) {\r\n\t\teliminarColor(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Typography,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_COLOR } from \"../../../../../gql/Catalogos/colores\";\r\n\r\nexport default function CrearColorProducto({ refetch }) {\r\n  const [color, setColor] = useState({});\r\n  const [values, setValues] = useState({ nombre: \"\", hex: \"\" });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  /* Mutations */\r\n  const [crearColor] = useMutation(CREAR_COLOR);\r\n\r\n  const handleChangeComplete = (color) => {\r\n    setColor(color);\r\n    setValues({\r\n      ...values,\r\n      hex: color.hex.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!values.nombre || !values.hex) {\r\n      return;\r\n    }\r\n    try {\r\n      const colores = values;\r\n      await crearColor({\r\n        variables: {\r\n          input: {\r\n            nombre: colores.nombre,\r\n            hex: colores.hex,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add />\r\n          nuevo color\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        /* onClose={() => toggleModal()} */\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <SketchPicker\r\n              color={color}\r\n              onChangeComplete={handleChangeComplete}\r\n            />\r\n            <Box mt={2}>\r\n              <Typography>Color seleccionado:</Typography>\r\n              {!values.hex ? (\r\n                <Box display=\"flex\" justifyContent=\"center\" width={220}>\r\n                  <Typography color=\"secondary\">NINGUNO</Typography>\r\n                </Box>\r\n              ) : (\r\n                <Box bgcolor={values.hex} height={30} width={220} />\r\n              )}\r\n            </Box>\r\n            <Box my={2}>\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  label=\"Nombre del color\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  value={values.nombre}\r\n                  onChange={(e) =>\r\n                    setValues({\r\n                      ...values,\r\n                      nombre: e.target.value.toUpperCase(),\r\n                    })\r\n                  }\r\n                  fullWidth\r\n                  focused\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_TALLAS = gql`\r\n  mutation crearTalla($input: CrearTallaInput) {\r\n    crearTalla(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_TALLAS = gql`\r\n  query obtenerTallas($empresa: ID!, $tipo: String!) {\r\n    obtenerTallas(empresa: $empresa, tipo: $tipo) {\r\n      _id\r\n      talla\r\n      tipo\r\n      empresa {\r\n        nombre_empresa\r\n        correo_empresa\r\n        nombre_dueno\r\n        telefono_dueno\r\n        sucursales_activas\r\n        limite_sucursales\r\n        _id\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_TALLA = gql`\r\n\tmutation actualizarTalla($input: ActualizarTallaInput, $id: ID!, $empresa:ID!, $sucursal:ID!) {\r\n\t\tactualizarTalla(id: $id, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_TALLA = gql`\r\n\tmutation eliminarTalla($input: ActualizarTallaInput,$id: ID!, $empresa:ID!, $sucursal:ID!) {\r\n\t\teliminarTalla(id: $id, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n","import React, { useState, Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Done } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_TALLAS } from \"../../../../../gql/Catalogos/tallas\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nexport default function CrearTallasProducto({\r\n  setMedidasSeleccionadas,\r\n  refetch,\r\n  tipo_producto\r\n}) {\r\n  const [value, setValue] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales } = useContext(RegProductoContext);\r\n\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n\r\n  const toggleModal = () => setOpen(!open);\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      return; \r\n    }\r\n    try {\r\n      const nueva_talla = value;\r\n      await crearTalla({\r\n        variables: {\r\n          input: {\r\n            talla: nueva_talla,\r\n            tipo: (datos_generales.tipo_producto) ? datos_generales.tipo_producto : tipo_producto,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      refetch();\r\n      setMedidasSeleccionadas([nueva_talla]);\r\n      setValue(\"\");\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      toggleModal();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button color=\"primary\" onClick={() => toggleModal()}>\r\n          <Add /> Nueva talla\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <DialogContent>\r\n          <Box>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              my={2}\r\n            >\r\n              <form\r\n                id=\"form-registro-color\"\r\n                onSubmit={(e) => GuardarDatosBD(e)}\r\n              >\r\n                <TextField\r\n                  id=\"outlined-error-helper-text\"\r\n                  label={\r\n                    datos_generales.tipo_producto === \"ROPA\"\r\n                      ? \"Talla\"\r\n                      : \"Número\"\r\n                  }\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  focused\r\n                  fullWidth\r\n                  value={value}\r\n                  onChange={(e) => setValue(e.target.value.toUpperCase())}\r\n                />\r\n              </form>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n            size=\"large\"\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-registro-color\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\r\nimport { Typography, Tooltip, Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentaciones from \"./TablaPresentaciones\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CrearColorProducto from \"./crearColor\";\r\nimport CrearTallasProducto from \"./crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\nexport default function ColoresTallas({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n  from,\r\n  withoutPrice,\r\n}) {\r\n  const {\r\n    /* almacen_inicial,\r\n    setAlmacenInicial, */\r\n    presentaciones,\r\n    datos_generales,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    /* almacenes, */ colores,\r\n    tallas,\r\n    calzados,\r\n  } = obtenerConsultasProducto;\r\n  const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n  const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n  const medidas =\r\n    datos_generales.tipo_producto === \"ROPA\" ? [...tallas] : [...calzados];\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  const classes = useStyles();\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n    const copy_presentaciones = [...presentaciones];\r\n\r\n    copy_presentaciones.forEach((element) => {\r\n      if (element.color._id) colors.push(element.color);\r\n      if (element.medida._id) medidas.push(element.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n  }, [presentaciones]);\r\n\r\n  /* const obtenerAlmacenes = (event, child) => {\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n  }; */\r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n    <div>\r\n      <Box>\r\n        <Grid container spacing={2}>\r\n          {/* {!almacen_existente ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\" >\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    <Select\r\n                      name=\"almacen\"\r\n                      value={almacen_inicial.almacen}\r\n                      onChange={obtenerAlmacenes}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Seleccione uno</em>\r\n                      </MenuItem>\r\n                      {almacenes ? (\r\n                        almacenes.map((res) => {\r\n                          return (\r\n                            <MenuItem\r\n                              name=\"id_almacen\"\r\n                              key={res._id}\r\n                              value={res.nombre_almacen}\r\n                              id={res._id}\r\n                            >\r\n                              {res.nombre_almacen}\r\n                            </MenuItem>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <MenuItem value=\"\" />\r\n                      )}\r\n                    </Select>\r\n                    {presentaciones.length > 0 && !almacen_inicial.almacen ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n                  {from === \"compra\" ? null : (\r\n                    <AlmacenProvider>\r\n                      <ContainerRegistroAlmacen\r\n                        accion=\"registrar\"\r\n                        refetch={refetch}\r\n                      />\r\n                    </AlmacenProvider>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography className={classes.titulos}>\r\n                  {datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              <Grid container>\r\n                {medidas.map((talla, index) => (\r\n                  <RenderTallas\r\n                    key={index}\r\n                    talla={talla}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                    setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography className={classes.titulos}>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n              <Grid container>\r\n                {colores.map((color, index) => (\r\n                  <Colores\r\n                    key={index}\r\n                    color={color}\r\n                    coloresSeleccionados={coloresSeleccionados}\r\n                    setColoresSeleccionados={setColoresSeleccionados}\r\n                    medidasSeleccionadas={medidasSeleccionadas}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={3} />\r\n        <TablaPresentaciones\r\n          from={from}\r\n          withoutPrice={withoutPrice}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  talla,\r\n  coloresSeleccionados,\r\n  medidasSeleccionadas,\r\n  setMedidasSeleccionadas,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    almacen_existente,\r\n  } = useContext(RegProductoContext);\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarMedidas = useCallback(() => {\r\n    medidasSeleccionadas.forEach((res) => {\r\n      if (res._id === talla._id) setSelected(true);\r\n    });\r\n  }, [talla._id, medidasSeleccionadas]);\r\n\r\n  useEffect(() => {\r\n    if (almacen_existente) {\r\n      return seleccionarMedidas();\r\n    }\r\n  }, [seleccionarMedidas]);\r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: producto_medida,\r\n          color: { nombre: \"\", hex: \"\" },\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          cantidad_nueva: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n            ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida._id === producto_medida._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            cantidad_nueva: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: medidas_seleccionadas_temp[k],\r\n            color: array_medidad_finales[i].color,\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            cantidad_nueva: array_medidad_finales[i].cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            preciosP[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            preciosP[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              unidad: \"Pz\",\r\n              codigo_unidad: \"H87\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              cantidad_nueva: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: {},\r\n            color: objeto_presentaciones_final.color,\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            cantidad_nueva: objeto_presentaciones_final.cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          noWrap\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    presentaciones,\r\n    setPresentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    almacen_existente,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarColores = useCallback(() => {\r\n    coloresSeleccionados.forEach((res) => {\r\n      if (res._id === color._id) setSelected(true);\r\n    });\r\n  }, [color._id, coloresSeleccionados]);\r\n\r\n  useEffect(() => {\r\n    if (almacen_existente) {\r\n      return seleccionarColores();\r\n    }\r\n  }, [seleccionarColores]);\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: {},\r\n          color: producto_color,\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          cantidad_nueva: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n            ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.color._id === producto_color._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: {},\r\n            color: producto_color,\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            cantidad_nueva: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: array_medidad_finales[i].medida,\r\n            color: coloresSeleccionados[k],\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            cantidad_nueva: array_medidad_finales[i].cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            preciosP[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            preciosP[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              unidad: \"Pz\",\r\n              codigo_unidad: \"H87\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              cantidad_nueva: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            unidad: \"Pz\",\r\n            codigo_unidad: \"H87\",\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: objeto_presentaciones_final.medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            cantidad_nueva: objeto_presentaciones_final.cantidad_nueva,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { Button, CircularProgress, Tooltip } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Done, SquareFoot } from \"@material-ui/icons\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTAS } from \"../../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport TallasProducto from \"../../../Catalogos/Producto/TallasColores/TallasColores\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AlertDialogSlide({verificate, setVerificate}) {\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datosProducto, datosCompra, setLoadingProductos } = useContext(ComprasContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  /* useEffect(() => {\r\n    if(loading){\r\n      setLoadingProductos(true);\r\n    }else{\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loading]); */\r\n\r\n  if (loading)\r\n    return (\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"medium\"\r\n        disabled={true}\r\n        startIcon={<CircularProgress size={16} color=\"inherit\" />}\r\n      >\r\n        Medidas\r\n      </Button>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const toggleDrawer = () => {\r\n    setOpen(!open);\r\n    setVerificate(false);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Tooltip title=\"Selecciona medidas y colores\" disableHoverListener={true} open={verificate} placement=\"top\">\r\n        <Button\r\n          color={verificate ? \"secondary\" :\"inherit\"}\r\n          variant=\"outlined\"\r\n          size=\"medium\"\r\n          onClick={() => toggleDrawer()}\r\n          startIcon={<SquareFoot />}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n        >\r\n          Medidas\r\n        </Button>\r\n      </Tooltip>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={toggleDrawer}\r\n        aria-labelledby=\"alert-tallas-compra\"\r\n        aria-describedby=\"alert-tallas-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        <DialogContent>\r\n          <TallasProducto\r\n            datos={datosProducto.producto}\r\n            obtenerConsultasProducto={obtenerConsultasProducto}\r\n            refetch={refetch}\r\n            from=\"compra\"\r\n            almacen={datosCompra.almacen}\r\n            withoutPrice={true}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            size=\"large\"\r\n            onClick={() => toggleDrawer()}\r\n            startIcon={<Done />}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import $ from \"jquery\"\r\nimport jQuery from \"jquery\"\r\n\r\nvar valuesFacturama = {\r\n    token: \"QUJTT0xVQ0lPTkVTOkxlb24yMDE4Iw==\",\r\n    url: \"https://apisandbox.facturama.mx/\"\r\n};\r\n\r\n$.ajaxSetup({\r\n    beforeSend: function (xhr) {\r\n        xhr.withCredentials = true;\r\n        xhr.setRequestHeader(\"Authorization\", \"Basic \" + valuesFacturama.token);\r\n    }\r\n});\r\n\r\nfunction facturama() {\r\n\r\n    var settings = {\r\n        url: valuesFacturama.url\r\n    };\r\n\r\n    function retrieve(path, id, callback) {\r\n        return jQuery.get(settings.url + path + '/' + id, undefined, callback, \"json\");\r\n    }\r\n\r\n    function list(path, callback) {\r\n        return jQuery.get(settings.url + path, undefined, callback, \"json\");\r\n    }\r\n\r\n    function listWithParam(path, param, callback) {\r\n        return jQuery.get(settings.url + path + param, undefined, callback, \"json\");\r\n    }\r\n\r\n    function postSyncWithParam(path, param, callback) {\r\n        $.ajax({\r\n            url: settings.url + path + param,\r\n            type: 'POST',\r\n            async: false,\r\n            success: callback\r\n        });\r\n    }\r\n\r\n    function postSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'POST',\r\n            dataType: 'json',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function putSyncWithData(path, data, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path,\r\n            type: 'PUT',\r\n            data: JSON.stringify(data),\r\n            contentType: \"application/json\",\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    function deleteSyncWithParam(path, param, callback, callbackError) {\r\n        $.ajax({\r\n            url: settings.url + path + '/' + param,\r\n            type: 'DELETE',\r\n            async: false,\r\n            success: callback,\r\n            error: callbackError\r\n        });\r\n    }\r\n\r\n    var facturamaObject = {\r\n        Clients: {\r\n            Get: function (id, callback) {\r\n                return retrieve('client', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('client', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('client', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('client/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('client/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Products: {\r\n            Get: function (id, callback) {\r\n                return retrieve('product', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('product', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('product', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('product/', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('product/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        BranchOffice: {\r\n            Get: function (id, callback) {\r\n                return retrieve('branchOffice', id, callback);\r\n            },\r\n            List: function (callback) {\r\n                return list('branchOffice', callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('branchOffice', data, callback, callbackError);\r\n            },\r\n            Remove: function (id, callback, callbackError) {\r\n                deleteSyncWithParam('branchOffice', id, callback, callbackError);\r\n            },\r\n            Update: function (id, data, callback, callbackError) {\r\n                putSyncWithData('branchOffice/' + id, data, callback, callbackError);\r\n            }\r\n        },\r\n        Series: {\r\n            List: function (id, callback) {\r\n                return retrieve('serie', id, callback);\r\n            },\r\n            Create: function (idBranch, data, callback, callbackError) {\r\n                postSyncWithData('serie/' + idBranch, data, callback, callbackError);\r\n            },\r\n            Remove: function (idBranch, name, callback, callbackError) {\r\n                deleteSyncWithParam('serie/' + idBranch, name, callback, callbackError);\r\n            },\r\n            Update: function (idBranch, name, data, callback, callbackError) {\r\n                putSyncWithData('serie/' + idBranch + '/' + name, data, callback, callbackError);\r\n            }\r\n        },\r\n        Cfdi: {\r\n            Get: function (id, callback) {\r\n                return retrieve('cfdi', id, callback);\r\n            },\r\n            List: function (param, callback) {\r\n                return listWithParam('cfdi', param, callback);\r\n            },\r\n            Create: function (data, callback, callbackError) {\r\n                postSyncWithData('2/cfdis', data, callback, callbackError);\r\n            },\r\n            Send: function (param, callback) {\r\n                postSyncWithParam('cfdi', param, callback);\r\n            },\r\n            Cancel: function (params, callback, callbackError) {\r\n                deleteSyncWithParam('cfdi', params, callback, callbackError);\r\n            },\r\n            Download: function (format, type, id, callback) {\r\n                retrieve('cfdi/' + format + '/' + type, id, callback);\r\n            },\r\n            Acuse: function (format, type, id, callback) {\r\n                retrieve('acuse/' + format + '/' + type, id, callback);\r\n            }\r\n        },\r\n        TaxEntity: {\r\n            Get: function (callback) {\r\n                return list('taxEntity', callback);\r\n            },\r\n            Update: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity', data, callback, callbackError);\r\n            },\r\n            UploadCsd: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadCsd', data, callback, callbackError);\r\n            },\r\n            UploadImage: function (data, callback, callbackError) {\r\n                putSyncWithData('taxEntity/UploadLogo', data, callback, callbackError);\r\n            }\r\n        },\r\n        Catalogs: {\r\n            States: function (country, callback) {\r\n                return list('catalogs/municipalities?countryCode' + country, callback);\r\n            },\r\n            Municipalities: function (state, callback) {\r\n                return list('catalogs/municipalities?stateCode' + state, callback);\r\n            },\r\n            Localities: function (state, callback) {\r\n                return list('catalogs/localities?stateCode' + state, callback);\r\n            },\r\n            Neighborhoods: function (postalCode, callback) {\r\n                return list('catalogs/neighborhoods?postalCode' + postalCode, callback);\r\n            },\r\n            ProductsOrServices: function (keyword, callback) {\r\n                return list('catalogs/ProductsOrServices?keyword=' + keyword, callback);\r\n            },\r\n            PostalCodes: function (keyword, callback) {\r\n                return list('catalogs/PostalCodes?keyword=' + keyword, callback);\r\n            },\r\n            Units: function (callback) {\r\n                return list('catalogs/Units', callback);\r\n            },\r\n            Currencies: function (callback) {\r\n                return list('catalogs/Currencies', callback);\r\n            },\r\n            Countries: function (callback) {\r\n                return list('catalogs/Countries', callback);\r\n            },\r\n            PaymentForms: function (callback) {\r\n                return list('catalogs/PaymentForms', callback);\r\n            },\r\n            PaymentMethods: function (callback) {\r\n                return list('catalogs/PaymentMethods', callback);\r\n            },\r\n            FederalTaxes: function (callback) {\r\n                return list('catalogs/FederalTaxes', callback);\r\n            },\r\n            FiscalRegimens: function (callback) {\r\n                return list('catalogs/FiscalRegimens', callback);\r\n            },\r\n            CfdiTypes: function (callback) {\r\n                return list('catalogs/CfdiTypes', callback);\r\n            },\r\n            RelationTypes: function (callback) {\r\n                return list('catalogs/RelationTypes', callback);\r\n            },\r\n            CfdiUses: function (keyword, callback) {\r\n                return list('catalogs/CfdiUses?keyword=' + keyword, callback);\r\n            }\r\n        }\r\n    };\r\n\r\n    facturamaObject.getToken = function () {\r\n        return \"Basic \" + valuesFacturama.token;\r\n    };\r\n\r\n    facturamaObject.getBaseUri = function () {\r\n        return settings.url;\r\n    };\r\n\r\n    return facturamaObject;\r\n}\r\n\r\n export default facturama()\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_CODIGO_PRODUCTO = gql`\r\n  mutation crearCodigoProducto($input: CodigoCatalogoProductoInput) {\r\n    crearCodigoProducto(input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CODIGOS_PRODUCTO = gql`\r\n  query obtenerCodigosProducto($empresa: ID!, $sucursal: ID) {\r\n    obtenerCodigosProducto(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      Name\r\n      Value\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_CODIGO_PRODUCTO = gql`\r\n  mutation eliminarCodigoProducto($id: ID!) {\r\n    eliminarCodigoProducto(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import React, { Fragment, useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Close, Search } from \"@material-ui/icons\";\r\nimport {\r\n  CircularProgress,\r\n  IconButton,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport {\r\n  CREAR_CODIGO_PRODUCTO,\r\n  ELIMINAR_CODIGO_PRODUCTO,\r\n} from \"../../../../../gql/CatalogosSat/catalogoProductosSat\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  spin_container: {\r\n    position: \"absolute\",\r\n    height: \"100%\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  spin: {\r\n    zIndex: 9999,\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CatalogosProductosSAT({ codigos, refetch }) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = React.useState(false);\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productos, setProductos] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loading_save, setLoadingSave] = useState(false);\r\n  const [loading_delete, setLoadingDelete] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState({});\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [crearCodigoProducto] = useMutation(CREAR_CODIGO_PRODUCTO);\r\n  const [eliminarCodigoProducto] = useMutation(ELIMINAR_CODIGO_PRODUCTO);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const limpiarDataModal = () => {\r\n    setSelectedIndex({});\r\n    setProductos([]);\r\n    setBusqueda(\"\");\r\n    handleClose();\r\n  };\r\n\r\n  const [value] = useDebounce(busqueda, 500);\r\n\r\n  const handleOk = async (selectedIndex) => {\r\n    const { Name, Value } = selectedIndex;\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name,\r\n        Value,\r\n      },\r\n    });\r\n    //Crear Codigo product a la BD\r\n    try {\r\n      setLoadingSave(true);\r\n      const result = await crearCodigoProducto({\r\n        variables: {\r\n          input: {\r\n            Name,\r\n            Value,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.crearCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setLoadingSave(false);\r\n        refetch();\r\n        limpiarDataModal();\r\n      }\r\n    } catch (error) {\r\n      setLoadingSave(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const eliminarCodigoBD = async (data) => {\r\n    try {\r\n      setLoadingDelete(true);\r\n      const result = await eliminarCodigoProducto({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n\r\n      if (result) {\r\n        const { message } = result.data.eliminarCodigoProducto;\r\n        setAlert({\r\n          message: message,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosGenerales({\r\n          ...datos_generales,\r\n          clave_producto_sat: {\r\n            Name: \"\",\r\n            Value: \"\",\r\n          },\r\n        });\r\n        setLoadingDelete(false);\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      setLoadingDelete(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    limpiarDataModal();\r\n  };\r\n\r\n  const obtenerCampos = (data) => {\r\n    if (!data) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        clave_producto_sat: {\r\n          Name: \"\",\r\n          Value: \"\",\r\n        },\r\n      });\r\n      return null;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      clave_producto_sat: {\r\n        Name: data.Name,\r\n        Value: data.Value,\r\n      },\r\n    });\r\n  };\r\n\r\n  const buscarCatalogo = useCallback(\r\n    async () => {\r\n      if (!value) {\r\n        setProductos([]);\r\n        return;\r\n      }\r\n      setLoading(true);\r\n      try {\r\n        await Facturama.Catalogs.ProductsOrServices(\r\n          value,\r\n          function (result) {\r\n            setProductos(result);\r\n            setLoading(false);\r\n          },\r\n          function (error) {\r\n            if (error && error.responseJSON) {\r\n              setError(error.responseJSON);\r\n            }\r\n            setLoading(false);\r\n          }\r\n        );\r\n      } catch (error) {\r\n        if (error && error.responseJSON) {\r\n          setError(error.responseJSON.Message);\r\n        }\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [ value],\r\n  )\r\n  ;\r\n\r\n  useEffect(() => {\r\n    buscarCatalogo();\r\n  }, [ buscarCatalogo]);\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Typography className={classes.titulos}>Clave de producto SAT</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"catalogos-bd-productos\"\r\n          size=\"small\"\r\n          options={codigos}\r\n          disabled={loading_delete}\r\n          getOptionLabel={(option) =>\r\n            option.Name ? `${option.Value} - ${option.Name}` : \"\"\r\n          }\r\n          fullWidth\r\n          renderInput={(params) => (\r\n            <TextField\r\n              {...params}\r\n              variant=\"outlined\"\r\n              InputProps={{\r\n                ...params.InputProps,\r\n                endAdornment: (\r\n                  <Fragment>\r\n                    {loading_delete ? <CircularProgress size={20} /> : null}\r\n                    {params.InputProps.endAdornment}\r\n                  </Fragment>\r\n                ),\r\n              }}\r\n            />\r\n          )}\r\n          renderOption={(option) => (\r\n            <Fragment>\r\n              {`${option.Value} - ${option.Name}`}\r\n              <div style={{ flexGrow: 1 }} />\r\n              <IconButton size=\"small\" onClick={() => eliminarCodigoBD(option)}>\r\n                <Close />\r\n              </IconButton>\r\n            </Fragment>\r\n          )}\r\n          onChange={(_, data) => obtenerCampos(data)}\r\n          getOptionSelected={(option, value) => option.Value === value.Value}\r\n          value={datos_generales.clave_producto_sat}\r\n        />\r\n        <Button color=\"primary\" onClick={handleClickOpen}>\r\n          <Search />\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleCancel}\r\n        aria-labelledby=\"alert-dialog-clave-producto\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-clave-producto\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              Catalogo de productos y servicios SAT\r\n            </Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => handleCancel()}\r\n                size=\"large\"\r\n                disabled={loading_save}\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </DialogTitle>\r\n        {loading_save ? (\r\n          <div className={classes.spin_container}>\r\n            <CircularProgress className={classes.spin} size={35} />\r\n          </div>\r\n        ) : null}\r\n        <div\r\n          style={\r\n            loading_save\r\n              ? {\r\n                  pointerEvents: \"none\",\r\n                  opacity: 0.4,\r\n                }\r\n              : null\r\n          }\r\n        >\r\n          <Box p={2}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              label=\"producto, servicio o giro de la empresa\"\r\n              fullWidth\r\n              size=\"small\"\r\n              onChange={(e) => {\r\n                setBusqueda(e.target.value);\r\n                setError(\"\");\r\n              }}\r\n              value={busqueda}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search color=\"disabled\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n              error={error ? true : false}\r\n              helperText={error ? error : \"\"}\r\n            />\r\n            <Box my={1}>\r\n              <Alert severity=\"info\">\r\n                Para seleccionar un cliente haz un doble click!\r\n              </Alert>\r\n            </Box>\r\n          </Box>\r\n\r\n          <DialogContent style={{ height: \"50vh\" }}>\r\n            <Box my={3} className={classes.root}>\r\n              {loading ? (\r\n                <Box\r\n                  display=\"flex\"\r\n                  justifyContent=\"center\"\r\n                  alignItems=\"center\"\r\n                  height=\"25vh\"\r\n                >\r\n                  <CircularProgress />\r\n                </Box>\r\n              ) : (\r\n                <List dense component=\"nav\" aria-label=\"main mailbox folders\">\r\n                  {productos.map((res, index) => (\r\n                    <SelectedListItem\r\n                      key={index}\r\n                      producto={res}\r\n                      busqueda={busqueda}\r\n                      handleOk={handleOk}\r\n                      setSelectedIndex={setSelectedIndex}\r\n                      selectedIndex={selectedIndex}\r\n                    />\r\n                  ))}\r\n                </List>\r\n              )}\r\n            </Box>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => handleCancel()}>Cancelar</Button>\r\n          </DialogActions>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SelectedListItem = ({\r\n  producto,\r\n  busqueda,\r\n  handleOk,\r\n  selectedIndex,\r\n  setSelectedIndex,\r\n}) => {\r\n  const handleListItemClick = (click, data) => {\r\n    setSelectedIndex(data);\r\n    if (click === 2) {\r\n      handleOk(data);\r\n    }\r\n  };\r\n\r\n  const contiene = busqueda.includes(\"potacio\");\r\n  if (producto.Value === \"0\" && !contiene) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <ListItem\r\n        button\r\n        selected={selectedIndex.Value === producto.Value}\r\n        onClick={(e) => handleListItemClick(e.detail, producto)}\r\n      >\r\n        <ListItemText primary={`${producto.Value} - ${producto.Name}`} />\r\n      </ListItem>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n","import { gql } from '@apollo/client';\r\n \r\nexport const CREAR_CATEGORIA = gql`\r\n\tmutation crearCategoria($input: CrearCategoriasInput) {\r\n\t\tcrearCategoria(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCATEGORIA = gql`\r\n\tmutation crearSubcategoria($idCategoria: ID!, $input: CrearSubcategoriasInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tcrearSubcategoria(idCategoria: $idCategoria, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CATEGORIA = gql`\r\n\tmutation actualizarCategoria($idCategoria: ID!, $input: ActualizarCategoriasInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tactualizarCategoria(idCategoria: $idCategoria, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCATEGORIA = gql`\r\n\tmutation actualizarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!, $input: ActualizarSubcategoriasInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tactualizarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n\tquery obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n\t\tobtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\t_id\r\n\t\t\tcategoria\r\n\t\t\tsubcategorias {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcategoria\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ELIMINAR_CATEGORIA = gql`\r\n\tmutation eliminarCategoria($idCategoria: ID!,$empresa: ID!, $sucursal: ID!) {\r\n\t\teliminarCategoria(idCategoria: $idCategoria, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\n\r\nexport const ELIMINAR_SUBCATEGORIA = gql`\r\n\tmutation eliminarSubcategoria($idCategoria: ID!, $idSubcategoria: ID!, $empresa: ID!, $sucursal: ID!) {\r\n\t\teliminarSubcategoria(idCategoria: $idCategoria, idSubcategoria: $idSubcategoria, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_DEPARTAMENTOS = gql`\r\n  query ObtenerDepartamentos($empresa: ID!, $sucursal: ID!) {\r\n    obtenerDepartamentos(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      nombre_departamentos\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const REGISTRAR_DEPARTAMENTO = gql`\r\n  mutation CrearDepartamentos(\r\n    $input: DepartamentosInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n  ) {\r\n    crearDepartamentos(input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DEPARTAMENTO = gql`\r\n\tmutation ActualzarDepartamentos($input: DepartamentosInput, $id: ID!, $empresa:ID!, $sucursal:ID!){\r\n        actualzarDepartamentos(input: $input, id: $id, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DEPARTAMENTO = gql`\r\n    mutation EliminarDepartamento($id: ID!, $empresa:ID!, $sucursal:ID!){\r\n        eliminarDepartamento(id: $id, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n\t\r\n`;\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_MARCAS = gql`\r\n  query ObtenerMarcas($empresa: ID!, $sucursal: ID) {\r\n    obtenerMarcas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      nombre_marca\r\n    }\r\n  }\r\n`;\r\n\r\nexport const REGISTRAR_MARCAS = gql`\r\n  mutation CrearMarca($input: MarcasInput!, $empresa: ID!, $sucursal: ID!) {\r\n    crearMarcas(input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_MARCAS = gql`\r\n    mutation actualzarMarcas($input: MarcasInput, $id: ID!, $empresa:ID!, $sucursal:ID! ) {\r\n\t\tactualzarMarcas(id: $id, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_MARCAS = gql`\r\n  mutation eliminarMarca($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n    eliminarMarca(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\n\r\nexport default function RegistrarNuevoSelect({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria(\r\n            {  \r\n              empresa : sesion.empresa._id,\r\n              sucursal :sesion.sucursal._id,\r\n              ...variables \r\n            }\r\n          );\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if(error.message){\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n      }else{\r\n        setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CategoriasProducto({ categorias, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales, setSubcategorias } = useContext(\r\n    RegProductoContext\r\n  );\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        categoria: \"\",\r\n        id_categoria: \"\",\r\n      });\r\n      setSubcategorias([]);\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      categoria: value.categoria,\r\n      id_categoria: value._id,\r\n    });\r\n    setSubcategorias(value.subcategorias);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Categoria</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-categoria\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={categorias}\r\n          getOptionLabel={(option) => option.categoria}\r\n          renderInput={(param) => {\r\n            let params = {...param}\r\n            params.inputProps.style = { textTransform: \"uppercase\" };\r\n            return(<TextField {...params} variant=\"outlined\" />)\r\n          }}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.categoria === value.categoria\r\n          }\r\n          value={datos_generales.categoria ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"categoria\"\r\n          name=\"categoria\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function SubcategoriasProducto({ refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales, subcategorias, setSubcategorias } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        subcategoria: \"\",\r\n        id_subcategoria: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      subcategoria: value.subcategoria,\r\n      id_subcategoria: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Subcategoria</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-subcategoria\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={subcategorias}\r\n          getOptionLabel={(option) => option.subcategoria}\r\n          renderInput={(param) => {\r\n            let params = {...param}\r\n            params.inputProps.style = { textTransform: \"uppercase\" };\r\n            return(<TextField {...params} variant=\"outlined\" />)\r\n          }}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.subcategoria === value.subcategoria\r\n          }\r\n          value={datos_generales.subcategoria ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"subcategoria\"\r\n          name=\"subcategoria\"\r\n          refetch={refetch}\r\n          subcategorias={subcategorias}\r\n          setSubcategorias={setSubcategorias}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function DepartamentosProducto({ departamentos, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        departamento: \"\",\r\n        id_departamento: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      departamento: value.nombre_departamentos,\r\n      id_departamento: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Departamento</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-departamento\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={departamentos}\r\n          getOptionLabel={(option) =>\r\n            option.nombre_departamentos\r\n              ? option.nombre_departamentos\r\n              : option.departamento\r\n          }\r\n          renderInput={(param) => {\r\n            let params = {...param}\r\n            params.inputProps.style = { textTransform: \"uppercase\" };\r\n            return(<TextField {...params} variant=\"outlined\" />)\r\n          }}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.nombre_departamentos === value.departamento\r\n          }\r\n          value={datos_generales.departamento ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"departamento\"\r\n          name=\"nombre_departamentos\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistrarNuevoSelect from \"./RegistrarNuevoSelect\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function MarcasProducto({ marcas, refetch }) {\r\n  const classes = useStyles();\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n\r\n  const obtenerDatos = (_, value) => {\r\n    if (!value) {\r\n      setDatosGenerales({\r\n        ...datos_generales,\r\n        marca: \"\",\r\n        id_marca: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      marca: value.nombre_marca,\r\n      id_marca: value._id,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.titulos}>Marca</Typography>\r\n      <Box display=\"flex\">\r\n        <Autocomplete\r\n          id=\"form-producto-marca\"\r\n          size=\"small\"\r\n          fullWidth\r\n          options={marcas}\r\n          getOptionLabel={(option) =>\r\n            option.nombre_marca ? option.nombre_marca : option.marca\r\n          }\r\n          renderInput={(param) => {\r\n            let params = {...param}\r\n            params.inputProps.style = { textTransform: \"uppercase\" };\r\n            return(<TextField {...params} variant=\"outlined\" />)\r\n          }}\r\n          onChange={(_, value) => obtenerDatos(_, value)}\r\n          getOptionSelected={(option, value) =>\r\n            option.nombre_marca === value.marca\r\n          }\r\n          value={datos_generales.marca ? datos_generales : null}\r\n        />\r\n        <RegistrarNuevoSelect\r\n          tipo=\"marca\"\r\n          name=\"nombre_marca\"\r\n          refetch={refetch}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  Divider,\r\n  MenuItem,\r\n  Select,\r\n  Container,\r\n  FormHelperText,\r\n  OutlinedInput,\r\n  InputAdornment,\r\n  Grid,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n  Checkbox,\r\n  FormControlLabel,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { Add, Autorenew } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"./CatalogoProductosSAT\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n} from \"../../../../../gql/Catalogos/categorias\";\r\nimport { REGISTRAR_DEPARTAMENTO } from \"../../../../../gql/Catalogos/departamentos\";\r\nimport { REGISTRAR_MARCAS } from \"../../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport CategoriasProducto from \"./Categorias\";\r\nimport SubcategoriasProducto from \"./Subcategorias\";\r\nimport DepartamentosProducto from \"./Departamentos\";\r\nimport MarcasProducto from \"./Marcas\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  obligatorio: {\r\n    color: \"red\",\r\n  },\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n  without_arrows: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistroInfoGenerales({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    validacion,\r\n    precios,\r\n    setPrecios,\r\n    centro_de_costos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    setSubcategorias,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    presentaciones,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    categorias,\r\n    departamentos,\r\n    marcas,\r\n    centro_costos,\r\n    codigos,\r\n  } = obtenerConsultasProducto;\r\n\r\n  const obtenerCampos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"monedero_electronico\") {\r\n      if (!value) {\r\n        setPrecios({\r\n          ...precios,\r\n          [name]: \"\",\r\n        });\r\n        return;\r\n      }\r\n      setPrecios({\r\n        ...precios,\r\n        [name]: parseFloat(value),\r\n      });\r\n      return;\r\n    }\r\n    if (name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: value,\r\n      });\r\n    }\r\n    if(name === \"tipo_producto\" && value !== \"OTROS\"){\r\n      setPrecios({\r\n        ...precios,\r\n        granel: false,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    const { name, checked } = e.target;\r\n    if (name === \"monedero\" && checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n        monedero: checked,\r\n      });\r\n      return;\r\n    }\r\n    /* setPrecios({\r\n\t\t\t...precios,\r\n\t\t\t[name]: checked\r\n\t\t}); */\r\n    if (name === \"granel\" && checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [name]: checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Costal\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [name]: checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n  };\r\n\r\n  /* const obtenerIDs = (event, child) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.categoria) {\r\n      const { subcategorias } = child.props.categoria;\r\n      setSubcategorias(subcategorias);\r\n    }\r\n  }; */\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const verificarCampoVacio = (campo) => {\r\n    if (!precios.monedero_electronico) {\r\n      setPrecios({\r\n        ...precios,\r\n        monedero_electronico: 1,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (update) {\r\n      const categoria = categorias.filter(\r\n        (res) => res._id === datos_generales.id_categoria\r\n      );\r\n      const costos = centro_costos.filter(\r\n        (res) => res._id === centro_de_costos.id_cuenta\r\n      );\r\n      if (categoria.length > 0) {\r\n        setSubcategorias(categoria[0].subcategorias);\r\n      }\r\n      if (costos.length > 0) {\r\n        setSubcostos(costos[0].subcuentas);\r\n      }\r\n    }\r\n  }, [update]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container maxWidth=\"lg\">\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              fullWidth\r\n              className={classes.without_arrows}\r\n            >\r\n              <Typography className={classes.titulos}>\r\n                Código de barras\r\n              </Typography>\r\n              <OutlinedInput\r\n                disabled={update && datos_generales.codigo_barras ? true : false}\r\n                style={{ padding: 0 }}\r\n                id=\"form-producto-codigo-barras\"\r\n                name=\"codigo_barras\"\r\n                value={\r\n                  datos_generales.codigo_barras\r\n                    ? datos_generales.codigo_barras\r\n                    : \"\"\r\n                }\r\n                type=\"number\"\r\n                onChange={obtenerCampos}\r\n                autoFocus\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      disabled={update && datos_generales.codigo_barras ? true : false}\r\n                      onClick={() => GenCodigoBarras()}\r\n                      /* edge=\"end\" */\r\n                      color=\"primary\"\r\n                      size=\"small\"\r\n                    >\r\n                      <Autorenew />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Clave alterna\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.clave_alterna}\r\n              name=\"clave_alterna\"\r\n              id=\"form-producto-clave-alterna\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.clave_alterna\r\n                  ? datos_generales.clave_alterna\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Tipo de producto\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.tipo_producto}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"tipo_producto\"\r\n                value={\r\n                  datos_generales.tipo_producto\r\n                    ? datos_generales.tipo_producto\r\n                    : \"\"\r\n                }\r\n                disabled={presentaciones.length}\r\n                onChange={obtenerCampos}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"ROPA\">ROPA</MenuItem>\r\n                <MenuItem value=\"CALZADO\">CALZADO</MenuItem>\r\n                <MenuItem value=\"OTROS\">OTROS</MenuItem>\r\n              </Select>\r\n              <FormHelperText>{validacion.message}</FormHelperText>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={5} xs={12}>\r\n            <CatalogosProductosSAT codigos={codigos} refetch={refetch} />\r\n          </Grid>\r\n\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Nombre comercial\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_comercial}\r\n              name=\"nombre_comercial\"\r\n              id=\"form-producto-nombre-comercial\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_comercial\r\n                  ? datos_generales.nombre_comercial\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className={classes.obligatorio}>* </span>Nombre genérico\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              error={validacion.error && !datos_generales.nombre_generico}\r\n              name=\"nombre_generico\"\r\n              id=\"form-producto-nombre-generico\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.nombre_generico\r\n                  ? datos_generales.nombre_generico\r\n                  : \"\"\r\n              }\r\n              helperText={validacion.message}\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography className={classes.titulos}>Descripción</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"descripcion\"\r\n              id=\"form-producto-descripcion\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datos_generales.descripcion ? datos_generales.descripcion : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Grid>\r\n\r\n          <Grid item md={6} xs={12}>\r\n            <CategoriasProducto refetch={refetch} categorias={categorias} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <SubcategoriasProducto refetch={refetch} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <DepartamentosProducto refetch={refetch} departamentos={departamentos} />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <MarcasProducto refetch={refetch} marcas={marcas} />\r\n          </Grid>\r\n        </Grid>\r\n        <Box display=\"flex\" mt={4}>\r\n          <Grid container>\r\n            <Grid item md={3} xs={12}>\r\n              {!update ? (\r\n                <Box>\r\n                  <Box>\r\n                    <Typography>\r\n                      <b>Granel</b>\r\n                    </Typography>\r\n                    <Divider />\r\n                  </Box>\r\n                  <div className={classes.formInput}>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <Checkbox\r\n                          checked={precios.granel ? precios.granel : false}\r\n                          onChange={obtenerChecks}\r\n                          name=\"granel\"\r\n                          disabled={datos_generales.tipo_producto !== \"OTROS\" ? true : false}\r\n                        />\r\n                      }\r\n                      label=\"Vender a granel\"\r\n                    />\r\n                  </div>\r\n                </Box>\r\n              ) : null}\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Farmacia</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <div className={classes.formInput}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={\r\n                        datos_generales.receta_farmacia\r\n                          ? datos_generales.receta_farmacia\r\n                          : false\r\n                      }\r\n                      onChange={checkFarmacia}\r\n                      name=\"receta_farmacia\"\r\n                    />\r\n                  }\r\n                  label=\"Necesita receta\"\r\n                  name=\"receta_farmacia\"\r\n                />\r\n              </div>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography>\r\n                  <b>Monedero eléctronico</b>\r\n                </Typography>\r\n                <Divider />\r\n              </Box>\r\n              <Box>\r\n                <Box className={classes.formInput}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        checked={precios.monedero}\r\n                        onChange={obtenerChecks}\r\n                        name=\"monedero\"\r\n                      />\r\n                    }\r\n                    label=\"Monedero electrónico\"\r\n                  />\r\n                  <TextField\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 }, startAdornment: <InputAdornment position=\"start\">$</InputAdornment> }}\r\n                    size=\"small\"\r\n                    label=\"Valor por punto\"\r\n                    name=\"monedero_electronico\"\r\n                    id=\"form-producto-monedero_electronico\"\r\n                    variant=\"outlined\"\r\n                    value={precios.monedero_electronico}\r\n                    onChange={obtenerCampos}\r\n                    disabled={precios.monedero ? false : true}\r\n                    onBlur={() => verificarCampoVacio(\"monedero_electronico\")}\r\n                    error={precios.monedero_electronico === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Container>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({\r\n  tipo,\r\n  name,\r\n  refetch,\r\n  subcategorias,\r\n  setSubcategorias,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales, setDatosGenerales } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Categorias Mutation */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  /*  Subcategorias Mutation */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  /*  Departamentos Mutation */\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  /*  Marcas Mutation */\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    };\r\n    if (tipo === \"categoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      };\r\n    }\r\n    if (tipo === \"subcategoria\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCategoria: datos_generales.id_categoria,\r\n      };\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"categoria\":\r\n          const categoria_creada = await crearCategoria({ variables });\r\n          refetch();\r\n          const id_categoria = categoria_creada.data.crearCategoria._id;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            categoria: value,\r\n            id_categoria,\r\n          });\r\n          break;\r\n        case \"subcategoria\":\r\n          const subcategoria_creada = await crearSubcategoria(\r\n            {  \r\n              empresa : sesion.empresa._id,\r\n              sucursal :sesion.sucursal._id,\r\n              ...variables\r\n            });\r\n          refetch();\r\n          const id_subcategoria =\r\n            subcategoria_creada.data.crearSubcategoria.message;\r\n          setSubcategorias([\r\n            ...subcategorias,\r\n            { _id: id_subcategoria, subcategoria: value },\r\n          ]);\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            subcategoria: value,\r\n            id_subcategoria,\r\n          });\r\n          break;\r\n        case \"departamento\":\r\n          const departamento_creado = await CrearDepartamentos({ variables });\r\n          refetch();\r\n          const id_departamento =\r\n            departamento_creado.data.crearDepartamentos.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            departamento: value,\r\n            id_departamento,\r\n          });\r\n          break;\r\n        case \"marca\":\r\n          const marca_creada = await CrearMarca({ variables });\r\n          refetch();\r\n          const id_marca = marca_creada.data.crearMarcas.message;\r\n          setDatosGenerales({\r\n            ...datos_generales,\r\n            marca: value,\r\n            id_marca,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcategoria\" && !datos_generales.id_categoria ? true : false}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogActions, DialogTitle } from '@material-ui/core';\r\nimport { Box, Typography, Button, Divider, Grid } from '@material-ui/core';\r\nimport { AddPhotoAlternate, Visibility, Delete } from '@material-ui/icons';\r\nimport { RegProductoContext } from '../../../../../context/Catalogos/CtxRegProducto';\r\n\r\nimport PhotoSizeSelectActualOutlinedIcon from '@material-ui/icons/PhotoSizeSelectActualOutlined';\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\twidth: '100%',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(0)}px ${theme.spacing(1)}px`\r\n\t},\r\n\tinput: {\r\n\t\tdisplay: 'none'\r\n\t},\r\n\timagen: {\r\n\t\tmaxHeight: \"100%\",\r\n\t\tmaxWidth: \"100%\"\r\n\t}\r\n}));\r\n\r\nexport default function CargarImagenesProducto() {\r\n\tconst classes = useStyles();\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview } = useContext(RegProductoContext);\r\n\r\n\tconst cargarImagen = (e) => {\r\n\t\tconst { files } = e.target;\r\n\t\tif (e.target.files.length < 1) return\r\n\t\tsetImagenes([\r\n\t\t\t...imagenes,\r\n\t\t\tfiles[0]\r\n\t\t]);\r\n\t\tsetOnPreview({image: URL.createObjectURL(files[0])})\r\n\t};\r\n\r\n\tconst render_imagenes = imagenes.map((res, index) => <RenderImagenes key={index} index={index} imagen={res} />);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\t\tid=\"contained-button-file\"\r\n\t\t\t\t\t\t\t/* multiple */\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tonChange={cargarImagen}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"contained-button-file\">\r\n\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\" component=\"span\" startIcon={<AddPhotoAlternate />}>\r\n\t\t\t\t\t\t\t\tCargar imagen\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t{render_imagenes}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item md={6}>\r\n\t\t\t\t\t<Box display=\"flex\" minHeight={300}>\r\n\t\t\t\t\t\t<Box mx={1}>\r\n\t\t\t\t\t\t\t<Divider orientation=\"vertical\" />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box width=\"100%\" height=\"50vh\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t{!onPreview.image ? (\r\n\t\t\t\t\t\t\t\t<PhotoSizeSelectActualOutlinedIcon style={{ fontSize: 150 }} />\r\n\t\t\t\t\t\t\t) : (<img alt=\"img-onPreview\" src={onPreview.image} className={classes.imagen} />)}\r\n\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nconst RenderImagenes = ({ imagen, index }) => {\r\n\tconst classes = useStyles();\r\n\tconst preview = imagen.key_imagen ? imagen.url_imagen : URL.createObjectURL(imagen)\r\n\tconst { imagenes, setImagenes, setOnPreview, onPreview, imagenes_eliminadas, setImagenesEliminadas } = useContext(RegProductoContext);\r\n\tconst [open, setOpen] = useState(false);\r\n\tconst handleModal = () => setOpen(!open);\r\n\r\n\tconst eliminarImagen = () => {\r\n\t\t/* agregar al arrya de imagenes eliminadas */\r\n\t\tif(imagen.key_imagen){\r\n\t\t\tsetImagenesEliminadas([\r\n\t\t\t\t...imagenes_eliminadas, imagen\r\n\t\t\t])\r\n\t\t}\r\n\t\t/* quitar imagenes del array */\r\n\t\tif (onPreview.index === index) {\r\n\t\t\tsetOnPreview({ index: '', image: '' })\r\n\t\t}\r\n\t\tconst array = [...imagenes];\r\n\t\tarray.splice(index, 1);\r\n\t\tsetImagenes([\r\n\t\t\t...array,\r\n\t\t]);\r\n\t\thandleModal();\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Box my={2} mr={5}>\r\n\t\t\t<Box className={classes.formInputFlex}>\r\n\t\t\t\t<Box height={70} width={70}>\r\n\t\t\t\t\t<img alt=\"producto-img-prev\" src={preview} width=\"100%\" />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box width=\"90%\">\r\n\t\t\t\t\t<Typography noWrap>\r\n\t\t\t\t\t\t{imagen.key_imagen ? imagen.key_imagen : imagen.name}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t{imagen.key_imagen ? null : (<Typography variant=\"caption\">{imagen.size} bits</Typography>)}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"flex-end\">\r\n\t\t\t\t\t\t<Button size=\"small\" startIcon={<Visibility />} onClick={() => setOnPreview({ index, image: preview })}>\r\n\t\t\t\t\t\t\tprevisualizar\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Box mx={1} />\r\n\t\t\t\t\t\t<ModalDelete handleModal={handleModal} open={open} eliminarImagen={eliminarImagen} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t\t<Divider />\r\n\t\t</Box>\r\n\t);\r\n};\r\n\r\nconst ModalDelete = ({ handleModal, open, eliminarImagen }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button size=\"small\" color=\"secondary\" startIcon={<Delete />} onClick={() => handleModal()}>\r\n\t\t\t\teliminar\r\n\t\t\t</Button>\r\n\t\t\t<Dialog open={open} onClose={handleModal}>\r\n\t\t\t\t<DialogTitle>{'¿Seguro que quieres eliminar esto?'}</DialogTitle>\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button onClick={() => handleModal()} color=\"primary\">\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => eliminarImagen()}>\r\n\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CrearAlmacenContext = createContext();\r\n\r\nexport const AlmacenProvider = ({ children }) => {\r\n\tconst [ datosAlmacen, setDatosAlmacen ] = useState({\r\n        nombre_almacen: '',\r\n        id_usuario_encargado: '',\r\n        direccion: {\r\n            calle: '',\r\n            no_ext: '',\r\n            no_int: '',\r\n            codigo_postal: '',\r\n            colonia: '',\r\n            municipio: '',\r\n            localidad: '',\r\n            estado: '',\r\n            pais: ''\r\n        }\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CrearAlmacenContext.Provider value={\r\n            { \r\n                datosAlmacen, \r\n                setDatosAlmacen,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CrearAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const REGISTRO_ALMACEN = gql`\r\n  mutation CrearAlmacen($input: CrearAlmacen, $id: ID!, $empresa: ID!) {\r\n    crearAlmacen(input: $input, id: $id, empresa: $empresa) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_ALMACENES = gql`\r\n  query obtenerAlmacenes($id: ID!) {\r\n    obtenerAlmacenes(id: $id) {\r\n      _id\r\n      nombre_almacen\r\n      id_usuario_encargado {\r\n        _id\r\n        nombre\r\n      }\r\n      id_sucursal {\r\n        _id\r\n        nombre_sucursal\r\n        descripcion\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      default_almacen\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_ALMACEN = gql`\r\n  mutation ActualizarAlmacen($input: EditarAlmacen, $id: ID!) {\r\n    actualizarAlmacen(input: $input, id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_ALMACEN = gql`\r\n  mutation eliminarAlmacen($id: ID!) {\r\n    eliminarAlmacen(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_ALMACEN = gql`\r\n  query obtenerProductosAlmacenes(\r\n    $input: InputProductosAlmacenes \r\n    $limit: Int \r\n    $offset: Int\r\n  ) {\r\n    obtenerProductosAlmacenes(\r\n      input: $input\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          inventario {\r\n            inventario_maximo\r\n            inventario_minimo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n        }\r\n        medidas_producto {\r\n          _id\r\n          cantidad\r\n          almacen\r\n          descuento_activo\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          codigo_barras\r\n          color {\r\n            _id\r\n            nombre\r\n            hex\r\n          }\r\n          existencia\r\n          medida {\r\n            _id\r\n            talla\r\n            tipo\r\n          }\r\n          nombre_comercial\r\n          precio\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n        existencia_almacenes {\r\n          _id {\r\n            producto\r\n            almacen {\r\n              _id\r\n              nombre_almacen\r\n            }\r\n          }\r\n          unidad_inventario\r\n          cantidad_existente\r\n          unidad_maxima\r\n          cantidad_existente_maxima\r\n        }\r\n        empresa\r\n        sucursal\r\n      }\r\n      totalDocs   \r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CATEGORIAS = gql`\r\n  query obtenerCategorias($empresa: ID!, $sucursal: ID!) {\r\n    obtenerCategorias(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      categoria\r\n      subcategorias {\r\n        _id\r\n        subcategoria\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const REALIZAR_TRASPASO = gql`\r\n  mutation CrearTraspaso(\r\n    $input: CrearTraspasoInput\r\n    $usuario: ID!\r\n    $empresa: ID!\r\n  ) {\r\n    crearTraspaso(input: $input, usuario: $usuario, empresa: $empresa) {\r\n      message\r\n      resp\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRODUCTOS_EMPRESA = gql`\r\n  query obtenerProductosPorEmpresa($empresa: ID!, $filtro: String, $limit: Int, \r\n    $offset: Int) {\r\n    obtenerProductosPorEmpresa(empresa: $empresa, filtro: $filtro,  limit: $limit\r\n      offset: $offset) {\r\n      docs {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precio_plazos {\r\n          precio_cajas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_piezas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_costales {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n            ieps_precio\r\n            iva_precio\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          granel\r\n        }\r\n        sucursal\r\n        usuario\r\n        empresa\r\n      },\r\n      totalDocs  \r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_TRASPASOS = gql`\r\n  query obtenerTraspasos(\r\n    $input: ConsultaTraspasosInput\r\n    $limit: Int\r\n    $offset: Int\r\n  ) { \r\n    obtenerTraspasos(input: $input, limit: $limit, offset: $offset) {\r\n      docs {\r\n        _id\r\n        cantidad\r\n        unidad\r\n        id_traspaso {\r\n          concepto_traspaso {\r\n            nombre_concepto\r\n          }\r\n          fecha_registro\r\n          almacen_origen {\r\n            _id\r\n            nombre_almacen\r\n          }\r\n          almacen_destino {\r\n            _id\r\n            nombre_almacen\r\n          }\r\n        }\r\n        producto {\r\n          datos_generales {\r\n            nombre_comercial\r\n          }\r\n        }\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n","\r\nlet arregloVacio = {\r\n    mi_empresa:{\r\n        datos_empresa: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        informacion_fiscal: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    compras:{\r\n        abrir_compra:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_realizadas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        compras_espera:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    tesoreria:{\r\n        cuentas_empresa:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        egresos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_proveedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        abonos_clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        caja_principal: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n    },\r\n    reportes:{\r\n        reporte_historial_cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_turnos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_compras:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        rerporte_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_corte_caja:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        reporte_tesoreria:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    ventas:{\r\n        cancelar_venta:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        precios_productos: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        pre_corte:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cotizaciones:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        administrador:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        eliminar_ventas:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        producto_rapido: {\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    almacenes:{\r\n        almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        traspasos:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        inventario_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    },\r\n    catalogos: {\r\n        clientes:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        usuarios:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        productos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        marcas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        contabilidad:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        provedores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        cajas:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        departamentos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        centro_costos:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        conceptos_almacen:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        categorias:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        colores:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n        tallas_numeros:{\r\n            ver: false,\r\n            agregar: false,\r\n            eliminar: false,\r\n            editar:false\r\n        },\r\n    },\r\n    facturacion:{\r\n        generar_cdfi:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        cdfi_realizados:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        },\r\n        registro_series_cdfi:{\r\n            ver: false,\r\n            agregar: false,\r\n            editar: false,\r\n            eliminar: false\r\n        }\r\n    }\r\n} \r\n\r\nexport default arregloVacio;\r\n","import React, { createContext, useState } from \"react\";\r\nimport arregloVacio from \"../../pages/sucursales/Catalogos/Usuarios/AsingarAccesos/arregloVacioAcceso\";\r\n\r\nexport const UsuarioContext = createContext();\r\n\r\nexport const UsuarioProvider = ({ children }) => {\r\n  const [usuario, setUsuario] = useState({\r\n    direccion: {\r\n      calle: \"\",\r\n      no_ext: \"\",\r\n      no_int: \"\",\r\n      codigo_postal: \"\",\r\n      colonia: \"\",\r\n      municipio: \"\",\r\n      localidad: \"\",\r\n      estado: \"\",\r\n      pais: \"\",\r\n    },\r\n    estado_usuario: true,\r\n    accesos: arregloVacio,\r\n  });\r\n  const [toUpdate, setToUpdate] = useState(false);\r\n  const [error, setError] = useState({ error: false, message: \"\" });\r\n  const [update, setUpdate] = useState(false);\r\n  const [username, setUsername] = useState(\"\");\r\n\r\n  return (\r\n    <UsuarioContext.Provider\r\n      value={{\r\n        usuario,\r\n        setUsuario,\r\n        toUpdate,\r\n        setToUpdate,\r\n        error,\r\n        setError,\r\n        update,\r\n        setUpdate,\r\n        username,\r\n        setUsername,\r\n      }}\r\n    >\r\n      {children}\r\n    </UsuarioContext.Provider>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  CircularProgress,\r\n  InputAdornment,\r\n  makeStyles,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport { VERIFY_USER } from \"../../../../gql/Catalogos/usuarios\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { Done } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function VerifyUsername({ accion }) {\r\n  const classes = useStyles();\r\n  const { usuario, username, setUsername } = useContext(\r\n    UsuarioContext\r\n  );\r\n  const [status, setStatus] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [verifyUserName] = useMutation(VERIFY_USER);\r\n  const [value] = useDebounce(username, 800);\r\n\r\n  const verificar = async (value) => {\r\n    if (!value) return;\r\n    try {\r\n      setLoading(true);\r\n      await verifyUserName({\r\n        variables: {\r\n          username: value,\r\n        },\r\n      });\r\n      setStatus(true);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setStatus(false);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    verificar(value);\r\n  }, [value]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Typography className={classes.title}>Username</Typography>\r\n      <TextField\r\n        fullWidth\r\n        placeholder=\"Ej: Juan96\"\r\n        autoComplete=\"new-password\"\r\n        type=\"text\"\r\n        size=\"small\"\r\n        disabled={accion !== \"registrar\" && usuario.username_login}\r\n        error={status === false}\r\n        variant=\"outlined\"\r\n        value={usuario.username_login ? usuario.username_login : username}\r\n        helperText={status === false ? \"Este username ya existe\" : \"\"}\r\n        InputProps={{\r\n          endAdornment: (\r\n            <InputAdornment position=\"end\">\r\n              {loading ? (\r\n                <CircularProgress size={20} />\r\n              ) : status === true ? (\r\n                <Done color=\"primary\" />\r\n              ) : null}\r\n            </InputAdornment>\r\n          ),\r\n        }}\r\n        onChange={(e) => setUsername(e.target.value)}\r\n      />\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ACTUALIZAR_USUARIO } from \"../../../../gql/Catalogos/usuarios\";\r\nimport VerifyUsername from \"./VerifyUsername\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 150,\r\n    height: 150,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 135,\r\n    height: 135,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function FormularioUsuario({ accion }) {\r\n  const classes = useStyles();\r\n  const { usuario, setUsuario, error } = useContext(UsuarioContext);\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setUsuario({\r\n        ...usuario,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [usuario, setUsuario]\r\n  );\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const removerImagen = () => {\r\n    setUsuario({\r\n      ...usuario,\r\n      imagen: \"\",\r\n    });\r\n    setPreview(\"\");\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_usuario\") {\r\n      setUsuario({\r\n        ...usuario,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    setUsuario({\r\n      ...usuario,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    setUsuario({\r\n      ...usuario,\r\n      direccion: { ...usuario.direccion, [e.target.name]: e.target.value },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid\r\n          item\r\n          md={3}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginTop: \"8px\",\r\n          }}\r\n        >\r\n          <Box>\r\n            <Box className={classes.avatarContainer} {...getRootProps()}>\r\n              <input {...getInputProps()} />\r\n              {preview ? (\r\n                <Avatar\r\n                  variant=\"square\"\r\n                  className={classes.avatar}\r\n                  src={`${preview}`}\r\n                />\r\n              ) : (\r\n                <Avatar\r\n                  variant=\"square\"\r\n                  className={classes.avatar}\r\n                  src={`${usuario.imagen}`}\r\n                />\r\n              )}\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                color=\"secondary\"\r\n                size=\"medium\"\r\n                onClick={removerImagen}\r\n                startIcon={<DeleteOutlineIcon />}\r\n              >\r\n                Remover imagen\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={6}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Nombre usuario\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                autoComplete=\"new-password\"\r\n                type=\"text\"\r\n                size=\"small\"\r\n                error={error.error && !usuario.nombre}\r\n                name=\"nombre\"\r\n                variant=\"outlined\"\r\n                value={usuario.nombre ? usuario.nombre : \"\"}\r\n                helperText={\r\n                  error.error &&\r\n                  error.message !== \"Las contraseñas no coinciden\"\r\n                    ? error.message\r\n                    : \"\"\r\n                }\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} md={6}>\r\n              <VerifyUsername accion={accion} />\r\n            </Grid>\r\n            {accion === \"registrar\" ? (\r\n              <Fragment>\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Contraseña\r\n                  </Typography>\r\n                  <FormControl\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={\r\n                      error.error && !usuario.password\r\n                        ? true\r\n                        : error.error &&\r\n                          error.message === \"Las contraseñas no coinciden\"\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    name=\"password\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    <OutlinedInput\r\n                      autoComplete=\"new-password\"\r\n                      name=\"password\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={usuario.password ? usuario.password : \"\"}\r\n                      onChange={obtenerCampos}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            onMouseDown={() => setShowPassword(!showPassword)}\r\n                          >\r\n                            {showPassword ? (\r\n                              <Visibility color=\"primary\" />\r\n                            ) : (\r\n                              <VisibilityOff color=\"primary\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                    <FormHelperText>{error.message}</FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={12} md={6}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Repetir contraseña\r\n                  </Typography>\r\n                  <FormControl\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={\r\n                      error.error && !usuario.password\r\n                        ? true\r\n                        : error.error &&\r\n                          error.message === \"Las contraseñas no coinciden\"\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    name=\"repeatPassword\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    <OutlinedInput\r\n                      name=\"repeatPassword\"\r\n                      type={showPassword ? \"text\" : \"password\"}\r\n                      value={\r\n                        usuario.repeatPassword ? usuario.repeatPassword : \"\"\r\n                      }\r\n                      onChange={obtenerCampos}\r\n                      endAdornment={\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            aria-label=\"toggle password visibility\"\r\n                            onClick={() => setShowPassword(!showPassword)}\r\n                            onMouseDown={() => setShowPassword(!showPassword)}\r\n                          >\r\n                            {showPassword ? (\r\n                              <Visibility color=\"primary\" />\r\n                            ) : (\r\n                              <VisibilityOff color=\"primary\" />\r\n                            )}\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      }\r\n                    />\r\n                    <FormHelperText>{error.message}</FormHelperText>\r\n                  </FormControl>\r\n                </Grid>\r\n              </Fragment>\r\n            ) : (\r\n              <Grid item xs={12} md={12}>\r\n                <ActualizarPasswordModal />\r\n              </Grid>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>\r\n            <span>* </span>Email\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={error.error && !usuario.email}\r\n            name=\"email\"\r\n            variant=\"outlined\"\r\n            value={usuario.email ? usuario.email : \"\"}\r\n            helperText={\r\n              error.error && error.message !== \"Las contraseñas no coinciden\"\r\n                ? error.message\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>\r\n            <span>* </span>Num. Telefono\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={error.error && !usuario.telefono}\r\n            name=\"telefono\"\r\n            variant=\"outlined\"\r\n            value={usuario.telefono ? usuario.telefono : \"\"}\r\n            helperText={\r\n              error.error && error.message !== \"Las contraseñas no coinciden\"\r\n                ? error.message\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Typography className={classes.title}>Num. Celular</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"celular\"\r\n            variant=\"outlined\"\r\n            value={usuario.celular ? usuario.celular : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Box my={2}>\r\n        <Typography className={classes.title}>\r\n          <b>Domicilio</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Calle</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"calle\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.calle ? usuario.direccion.calle : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Colonia</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"colonia\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.colonia ? usuario.direccion.colonia : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>Num. Ext</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"no_ext\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.no_ext ? usuario.direccion.no_ext : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>Num. Int</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"no_int\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.no_int ? usuario.direccion.no_int : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={2}>\r\n          <Typography className={classes.title}>CP</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"codigo_postal\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.codigo_postal\r\n                ? usuario.direccion.codigo_postal\r\n                : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Municipio</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"municipio\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.municipio ? usuario.direccion.municipio : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Localidad</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"localidad\"\r\n            variant=\"outlined\"\r\n            value={\r\n              usuario.direccion.localidad ? usuario.direccion.localidad : \"\"\r\n            }\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Estado</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"estado\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.estado ? usuario.direccion.estado : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} md={3}>\r\n          <Typography className={classes.title}>Pais</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            fullWidth\r\n            name=\"pais\"\r\n            variant=\"outlined\"\r\n            value={usuario.direccion.pais ? usuario.direccion.pais : \"\"}\r\n            onChange={obtenerCamposDireccion}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ActualizarPasswordModal = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const classes = useStyles();\r\n  const {\r\n    usuario,\r\n    setUsuario,\r\n    error,\r\n    setError,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(UsuarioContext);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setError({ error: false, message: \"\" });\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    setUsuario({\r\n      ...usuario,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const confirmarPassowrd = async () => {\r\n    if (!usuario.password || !usuario.repeatPassword) {\r\n      setError({ error: true, message: \"Este campo es requerido\" });\r\n      return;\r\n    }\r\n    if (usuario.password !== usuario.repeatPassword) {\r\n      setError({ error: true, message: \"Las contraseñas no coinciden\" });\r\n      return;\r\n    }\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            password: usuario.password,\r\n            repeatPassword: usuario.repeatPassword,\r\n          },\r\n          id: usuario._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button color=\"primary\" variant=\"text\" onClick={handleClickOpen}>\r\n        Cambiar contraseña\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          {\"Cambiar contraseña\"}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <form autocomplete=\"off\">\r\n            <Box width=\"100%\">\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Contraseña\r\n              </Typography>\r\n              <FormControl\r\n                fullWidth\r\n                size=\"small\"\r\n                error={\r\n                  error.error && !usuario.password\r\n                    ? true\r\n                    : error.error &&\r\n                      error.message === \"Las contraseñas no coinciden\"\r\n                    ? true\r\n                    : false\r\n                }\r\n                name=\"password\"\r\n                variant=\"outlined\"\r\n              >\r\n                <OutlinedInput\r\n                  name=\"password\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={usuario.password ? usuario.password : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"toggle password visibility\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        onMouseDown={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <Visibility color=\"primary\" />\r\n                        ) : (\r\n                          <VisibilityOff color=\"primary\" />\r\n                        )}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n                <FormHelperText>{error.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Repetir contraseña\r\n              </Typography>\r\n              <FormControl\r\n                fullWidth\r\n                size=\"small\"\r\n                error={\r\n                  error.error && !usuario.password\r\n                    ? true\r\n                    : error.error &&\r\n                      error.message === \"Las contraseñas no coinciden\"\r\n                    ? true\r\n                    : false\r\n                }\r\n                name=\"repeatPassword\"\r\n                variant=\"outlined\"\r\n              >\r\n                <OutlinedInput\r\n                  name=\"repeatPassword\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  value={usuario.repeatPassword ? usuario.repeatPassword : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"toggle password visibility\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        onMouseDown={() => setShowPassword(!showPassword)}\r\n                      >\r\n                        {showPassword ? (\r\n                          <Visibility color=\"primary\" />\r\n                        ) : (\r\n                          <VisibilityOff color=\"primary\" />\r\n                        )}\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n                <FormHelperText>{error.message}</FormHelperText>\r\n              </FormControl>\r\n            </Box>\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={confirmarPassowrd}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            autoFocus\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={25} /> : null\r\n            }\r\n          >\r\n            Confirmar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { Box, Checkbox, FormControlLabel } from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\nexport default function Parametros({\r\n  arregloAccesos,\r\n  obtenerAccesos,\r\n  departamento,\r\n  subDepartamento,\r\n}) {\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={\r\n              arregloAccesos\r\n                ? arregloAccesos[departamento][subDepartamento]?.ver\r\n                : false\r\n            }\r\n            name=\"ver\"\r\n            color=\"primary\"\r\n            onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n          />\r\n        }\r\n        label={\r\n          <Box mr={2} display=\"flex\">\r\n            {departamento === \"ventas\" && subDepartamento !== \"cancelar_venta\"\r\n              ? \"Autorizar\"\r\n              : \"Ver\"}\r\n          </Box>\r\n        }\r\n      />\r\n      {subDepartamento === \"informacion_fiscal\" ||\r\n      subDepartamento === \"datos_empresa\" ||\r\n      subDepartamento === \"abrir_compra\" ||\r\n      subDepartamento === \"compras_realizadas\" ||\r\n      subDepartamento === \"compras_espera\" ||\r\n      subDepartamento === \"traspasos\" ||\r\n      subDepartamento === \"inventario_almacen\" ||\r\n      subDepartamento === \"cuentas_empresa\" ||\r\n      subDepartamento === \"generar_cdfi\" ||\r\n      subDepartamento === \"cdfi_realizados\" ||\r\n      departamento === \"reportes\" ||\r\n      departamento === \"ventas\" ||\r\n      subDepartamento === \"caja_principal\" ||\r\n      subDepartamento === \"egresos\" ? null : (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.agregar\r\n                  : false\r\n              }\r\n              name=\"agregar\"\r\n              disabled={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.ver === false\r\n                  : true\r\n              }\r\n              color=\"primary\"\r\n              onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n            />\r\n          }\r\n          label={\r\n            <Box mr={2} display=\"flex\">\r\n              Agregar\r\n            </Box>\r\n          }\r\n        />\r\n      )}\r\n      {subDepartamento === \"cajas\" ||\r\n      subDepartamento === \"abrir_compra\" ||\r\n      subDepartamento === \"compras_realizadas\" ||\r\n      subDepartamento === \"traspasos\" ||\r\n      subDepartamento === \"inventario_almacen\" ||\r\n      subDepartamento === \"abonos_proveedores\" ||\r\n      subDepartamento === \"abonos_clientes\" ||\r\n      subDepartamento === \"egresos\" ||\r\n      subDepartamento === \"caja_principal\" ||\r\n      subDepartamento === \"generar_cdfi\" ||\r\n      subDepartamento === \"cdfi_realizados\" ||\r\n      subDepartamento === \"registro_series_cdfi\" ||\r\n      departamento === \"reportes\" ? null : departamento === \"ventas\" &&\r\n        subDepartamento !== \"cancelar_venta\" ? null : (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.editar\r\n                  : false\r\n              }\r\n              name=\"editar\"\r\n              disabled={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.ver === false\r\n                  : true\r\n              }\r\n              color=\"primary\"\r\n              onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n            />\r\n          }\r\n          label={\r\n            <Box mr={2} display=\"flex\">\r\n              Editar\r\n            </Box>\r\n          }\r\n        />\r\n      )}\r\n      {subDepartamento === \"informacion_fiscal\" ||\r\n      subDepartamento === \"datos_empresa\" ||\r\n      subDepartamento === \"abrir_compra\" ||\r\n      subDepartamento === \"compras_realizadas\" ||\r\n      subDepartamento === \"traspasos\" ||\r\n      subDepartamento === \"inventario_almacen\" ||\r\n      subDepartamento === \"cuentas_empresa\" ||\r\n      subDepartamento === \"abonos_proveedores\" ||\r\n      subDepartamento === \"generar_cdfi\" ||\r\n      subDepartamento === \"cdfi_realizados\" ||\r\n      subDepartamento === \"abonos_clientes\" ||\r\n      subDepartamento === \"egresos\" ||\r\n      subDepartamento === \"caja_principal\" ||\r\n      departamento === \"reportes\" ||\r\n      departamento === \"ventas\" ? null : (\r\n        <FormControlLabel\r\n          control={\r\n            <Checkbox\r\n              checked={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.eliminar\r\n                  : false\r\n              }\r\n              name=\"eliminar\"\r\n              color=\"primary\"\r\n              disabled={\r\n                arregloAccesos\r\n                  ? arregloAccesos[departamento][subDepartamento]?.ver === false\r\n                  : true\r\n              }\r\n              onChange={(e) => obtenerAccesos(e, departamento, subDepartamento)}\r\n            />\r\n          }\r\n          label={<Box display=\"flex\">Eliminar</Box>}\r\n        />\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n","import {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n\r\nexport default function Catalogos({ obtenerAccesos, arregloAccesos }) {\r\n    \r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Clientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'clientes'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Usuarios</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'usuarios'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Marcas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'marcas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Provedores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'provedores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Contabilidad</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'contabilidad'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Departamento</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'departamentos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Centro de costos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'centro_costos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Conceptos almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'conceptos_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Categorias</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'categorias'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Colores</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'colores'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Tallas y Numeros</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'catalogos'}\r\n                                subDepartamento={'tallas_numeros'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\n","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function MiEmpresa({ obtenerAccesos, arregloAccesos }) {\r\n      return (\r\n            <Fragment>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Typography variant=\"h6\">\r\n                            Marca los permisos que deseas asignar a este usuario\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Datos de Empresa</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'datos_empresa'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n                <Box p={1}  display='flex' justifyContent= 'center'>\r\n                    <Box width='80%'>\r\n                        <Paper elevation={3}>\r\n                            <Box display='flex'>\r\n                                <Box ml={1} p={1} flexGrow={1} >\r\n                                    <Typography variant=\"h6\">\r\n                                        <b>Información Fiscal</b>\r\n                                    </Typography>\r\n                                </Box>\r\n                                <Parametros \r\n                                    arregloAccesos={arregloAccesos} \r\n                                    obtenerAccesos={obtenerAccesos}\r\n                                    departamento={'mi_empresa'}\r\n                                    subDepartamento={'informacion_fiscal'}\r\n                                />\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Box>\r\n            </Fragment>\r\n      )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Compras({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Abrir una compra</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'abrir_compra'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras realizadas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_realizadas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Compras en espera</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'compras'}\r\n                                subDepartamento={'compras_espera'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Almacenes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Almacenes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Traspasos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'traspasos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Inventario por almacen</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'almacenes'}\r\n                                subDepartamento={'inventario_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import { Box, Paper, Typography } from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n\r\nexport default function Tesoreria({ obtenerAccesos, arregloAccesos }) {\r\n  return (\r\n    <Fragment>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Typography variant=\"h6\">\r\n            Marca los permisos que deseas asignar a este usuario\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Cuentas</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"cuentas_empresa\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Abonos Proveedores</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"abonos_proveedores\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Abonos Clientes</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"abonos_clientes\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Egresos</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"egresos\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n      <Box p={1} display=\"flex\" justifyContent=\"center\">\r\n        <Box width=\"80%\">\r\n          <Paper elevation={3}>\r\n            <Box display=\"flex\">\r\n              <Box ml={1} p={1} flexGrow={1}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Caja principal</b>\r\n                </Typography>\r\n              </Box>\r\n              <Parametros\r\n                arregloAccesos={arregloAccesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n                departamento={\"tesoreria\"}\r\n                subDepartamento={\"caja_principal\"}\r\n              />\r\n            </Box>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Reportes({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes Historiales Cajas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_historial_cajas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes turnos usuarios </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_turnos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de compras </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_compras'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de ventas </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de almacenes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'rerporte_almacen'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes de cortes </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_corte_caja'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Reportes tesoreria </b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'reportes'}\r\n                                subDepartamento={'reporte_tesoreria'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    );\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Ventas({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cancelar ventas</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cancelar_venta'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Precios de productos</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'precios_productos'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Pre cortes de caja</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'pre_corte'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Cotizaciones</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'cotizaciones'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Producto Rapido</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'producto_rapido'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Panel de administrador</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'administrador'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Eliminar ventas pendientes</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'ventas'}\r\n                                subDepartamento={'eliminar_ventas'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","import {\r\n    Box,\r\n    Paper,\r\n    Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment } from \"react\";\r\nimport Parametros from \"../Parametros\";\r\n  \r\nexport default function Facturacion({ obtenerAccesos, arregloAccesos }) {\r\n    return (\r\n        <Fragment>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Typography variant=\"h6\">\r\n                        Marca los permisos que deseas asignar a este usuario\r\n                    </Typography>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Generar nuevo CDFI</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'generar_cdfi'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>CDFIs realizados</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'cdfi_realizados'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n            <Box p={1}  display='flex' justifyContent= 'center'>\r\n                <Box width='80%'>\r\n                    <Paper elevation={3}>\r\n                        <Box display='flex'>\r\n                            <Box ml={1} p={1} flexGrow={1} >\r\n                                <Typography variant=\"h6\">\r\n                                    <b>Registrar series CDFI</b>\r\n                                </Typography>\r\n                            </Box>\r\n                            <Parametros \r\n                                arregloAccesos={arregloAccesos} \r\n                                obtenerAccesos={obtenerAccesos}\r\n                                departamento={'facturacion'}\r\n                                subDepartamento={'registro_series_cdfi'}\r\n                            />\r\n                        </Box>\r\n                    </Paper>\r\n                </Box>\r\n            </Box>\r\n        </Fragment>\r\n    )\r\n}","export default __webpack_public_path__ + \"static/media/almacen.31993015.svg\";","export default __webpack_public_path__ + \"static/media/money.bce30921.svg\";","export default __webpack_public_path__ + \"static/media/factura.19f7e224.svg\";","export default __webpack_public_path__ + \"static/media/cart-add.eacbdb19.svg\";","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { AppBar, Box, Tabs } from \"@material-ui/core\";\r\nimport { Tab } from \"@material-ui/core\";\r\nimport { FcPaid, FcShop, FcSurvey, FcNews } from \"react-icons/fc\";\r\n\r\nimport Catalogos from \"./Departamentos/Catalogos\";\r\nimport MiEmpresa from \"./Departamentos/MiEmpresa\";\r\n\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport Compras from \"./Departamentos/Compras\";\r\nimport Almacenes from \"./Departamentos/Almacenes\";\r\nimport Tesoreria from \"./Departamentos/Tesoreria\";\r\nimport Reportes from \"./Departamentos/Reportes\";\r\nimport Ventas from \"./Departamentos/Ventas\";\r\nimport Facturacion from \"./Departamentos/Facturacion\";\r\nimport almancenIcon from \"../../../../../icons/almacen.svg\"\r\nimport moneyIcon from \"../../../../../icons/money.svg\"\r\nimport facturaIcon from \"../../../../../icons/factura.svg\"\r\nimport cartIcon from \"../../../../../icons/ventas/cart-add.svg\"\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={1} minHeight=\"20vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 30,\r\n  },\r\n  icon: {\r\n    fontSize: 30,\r\n  },\r\n}));\r\n\r\nexport default function AsignarPermisos({ obtenerAccesos, arregloAccesos }) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <AppBar position=\"static\" color=\"transparent\" elevation={0}>\r\n        <Tabs\r\n          value={value}\r\n          onChange={handleChange}\r\n          variant=\"scrollable\"\r\n          scrollButtons=\"on\"\r\n          indicatorColor=\"primary\"\r\n          textColor=\"primary\"\r\n          aria-label=\"scrollable force tabs example\"\r\n        >\r\n          <Tab\r\n            label=\"Mi empresa\"\r\n            icon={<FcShop className={classes.icon} />}\r\n            {...a11yProps(0)}\r\n          />\r\n          <Tab\r\n            label=\"Almacenes\"\r\n            icon={\r\n              <img\r\n                src={almancenIcon}\r\n                alt=\"icono almacen\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(1)}\r\n          />\r\n          <Tab\r\n            label=\"Compras\"\r\n            icon={<FcPaid className={classes.icon} />}\r\n            {...a11yProps(2)}\r\n          />\r\n          <Tab\r\n            label=\"Catalogos\"\r\n            icon={<FcNews className={classes.icon} />}\r\n            {...a11yProps(3)}\r\n          />\r\n          <Tab\r\n            label=\"Tesoreria\"\r\n            icon={\r\n              <img\r\n                src={moneyIcon}\r\n                alt=\"icono money\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(4)}\r\n          />\r\n          <Tab\r\n            label=\"Reportes\"\r\n            icon={<FcSurvey className={classes.icon} />}\r\n            {...a11yProps(5)}\r\n          />\r\n          <Tab\r\n            label=\"Facturación\"\r\n            icon={\r\n              <img\r\n                src={facturaIcon}\r\n                alt=\"icono factura\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(6)}\r\n          />\r\n          <Tab\r\n            label=\"Ventas\"\r\n            icon={\r\n              <img\r\n                src={cartIcon}\r\n                alt=\"icono ventas\"\r\n                className={classes.iconSvg}\r\n              />\r\n            }\r\n            {...a11yProps(7)}\r\n          />\r\n        </Tabs>\r\n      </AppBar>\r\n      <TabPanel value={value} index={0}>\r\n        <Box p={2}>\r\n          <MiEmpresa\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <Box p={2}>\r\n          <Almacenes\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <Box p={2}>\r\n          <Compras\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        <Box p={0}>\r\n          <Catalogos\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        <Box p={2}>\r\n          <Tesoreria\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        <Box p={2}>\r\n          <Reportes\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={6}>\r\n        <Box p={2}>\r\n          <Facturacion\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n      <TabPanel value={value} index={7}>\r\n        <Box p={2}>\r\n          <Ventas\r\n            obtenerAccesos={obtenerAccesos}\r\n            arregloAccesos={arregloAccesos}\r\n          />\r\n        </Box>\r\n      </TabPanel>\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/perfil.00a5b172.svg\";","export default __webpack_public_path__ + \"static/media/permisos.694c0322.svg\";","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport PropTypes from \"prop-types\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport { Button, IconButton, Tabs } from \"@material-ui/core\";\r\nimport { Dialog, DialogActions, Box } from \"@material-ui/core\";\r\nimport FormularioUsuario from \"./FormularioUsuario\";\r\nimport AsignarPermisos from \"./AsingarAccesos/AsignarPermisos\";\r\nimport { Add, Edit } from \"@material-ui/icons\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport arregloVacio from \"./AsingarAccesos/arregloVacioAcceso\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_USUARIO,\r\n  ACTUALIZAR_USUARIO,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\nimport { numerosRandom } from \"../../../../config/reuserFunctions\";\r\nimport { AppBar } from \"@material-ui/core\";\r\nimport { Tab } from \"@material-ui/core\";\r\n\r\nimport perfilIcon from \"../../../../icons/perfil.svg\";\r\nimport permisosIcon from \"../../../../icons/permisos.svg\";\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box minHeight=\"70vh\">{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  rootPrincipal: {\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 35,\r\n  },\r\n}));\r\n\r\nexport default function CrearUsuario({\r\n  accion,\r\n  datos,\r\n  fromEmergent,\r\n  refetch,\r\n  isOnline,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    usuario,\r\n    setUsuario,\r\n    setError,\r\n    update,\r\n    setUpdate,\r\n    username,\r\n    setUsername,\r\n  } = useContext(UsuarioContext);\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setUsuario({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      turno_en_caja_activo: false,\r\n      estado_usuario: true,\r\n      accesos: arregloVacio,\r\n    });\r\n    setUsername(\"\");\r\n  }, [setUsuario]);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (accion !== \"registrar\") {\r\n      setUsuario(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  const obtenerAccesos = (event, departamento, subDepartamentos) => {\r\n    const { name, checked } = event.target;\r\n    setUsuario({\r\n      ...usuario,\r\n      accesos: {\r\n        ...usuario.accesos,\r\n        [departamento]: {\r\n          ...usuario.accesos[departamento],\r\n          [subDepartamentos]: {\r\n            ...usuario.accesos[departamento][subDepartamentos],\r\n            [name]: checked,\r\n          },\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearUsuario] = useMutation(CREAR_USUARIO);\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    if (accion === \"registrar\") {\r\n      if (\r\n        !usuario.nombre ||\r\n        !usuario.password ||\r\n        !usuario.repeatPassword ||\r\n        !usuario.telefono ||\r\n        !usuario.email\r\n      ) {\r\n        setError({ error: true, message: \"Este campo es requerido\" });\r\n        return;\r\n      }\r\n      if (usuario.password !== usuario.repeatPassword) {\r\n        setError({ error: true, message: \"Las contraseñas no coinciden\" });\r\n        return;\r\n      }\r\n    } else {\r\n      if (!usuario.nombre || !usuario.telefono || !usuario.email) {\r\n        setError({ error: true, message: \"Este campo es requerido\" });\r\n        return;\r\n      }\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        usuario.numero_usuario = numerosRandom(100000, 999999);\r\n        usuario.username_login = username;\r\n        usuario.empresa = sesion.empresa._id;\r\n        usuario.sucursal = sesion.sucursal._id;\r\n        usuario.turno_en_caja_activo = false;\r\n        const input = usuario;\r\n        await crearUsuario({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n      } else {\r\n        const {\r\n          numero_usuario,\r\n          _id,\r\n          sucursal,\r\n          empresa,\r\n          turno_en_caja_activo,\r\n          estado_usuario,\r\n          ...input\r\n        } = usuario;\r\n        //input.username_login = username;\r\n        if (!input.username_login) {\r\n          input.username_login = username;\r\n        }\r\n        await actualizarUsuario({\r\n          variables: {\r\n            id: usuario._id,\r\n            input: input,\r\n            empresa : sesion.empresa._id,\r\n            sucursal :sesion.sucursal._id\r\n          },\r\n        });\r\n      }\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError({ error: false, message: \"\" });\r\n      setLoading(false);\r\n      onCloseModal();\r\n      if (fromEmergent) {\r\n        refetch();\r\n      }\r\n    } catch (error) {\r\n      console.log()\r\n      setAlert({\r\n        message: \"Hubo un error en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\r\n      {accion === \"registrar\" ? (\r\n        fromEmergent ? (\r\n          <IconButton\r\n            color=\"primary\"\r\n            onClick={toggleModal}\r\n            disabled={!isOnline}\r\n          >\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n            disabled={!isOnline}\r\n          >\r\n            AGREGAR\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton disabled={!isOnline} onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n\r\n      <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n        <Box className={classes.root}>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Tabs\r\n              value={value}\r\n              onChange={handleChange}\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"on\"\r\n              indicatorColor=\"primary\"\r\n              textColor=\"primary\"\r\n              aria-label=\"scrollable force tabs example\"\r\n            >\r\n              <Tab\r\n                label=\"Información básica\"\r\n                icon={\r\n                  <img\r\n                    src={perfilIcon}\r\n                    alt=\"icono perfil\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(0)}\r\n              />\r\n              <Tab\r\n                label=\"Permisos\"\r\n                icon={\r\n                  <img\r\n                    src={permisosIcon}\r\n                    alt=\"icono factura\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                }\r\n                {...a11yProps(1)}\r\n              />\r\n              <Box ml={58} mt={3}>\r\n                <Box>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    onClick={onCloseModal}\r\n                    size=\"large\"\r\n                  >\r\n                    <CloseIcon />\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n            </Tabs>\r\n          </AppBar>\r\n          <form id=\"form-usuario\" onSubmit={saveData} autocomplete=\"off\">\r\n            <TabPanel value={value} index={0}>\r\n              <Box p={2}>\r\n                <FormularioUsuario accion={accion} />\r\n              </Box>\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n              <AsignarPermisos\r\n                arregloAccesos={usuario.accesos}\r\n                obtenerAccesos={obtenerAccesos}\r\n              />\r\n            </TabPanel>\r\n          </form>\r\n        </Box>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            form=\"form-usuario\"\r\n            size=\"large\"\r\n            startIcon={<DoneIcon />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  TextField,\r\n  Container,\r\n  Typography,\r\n  Box,\r\n  IconButton,\r\n  DialogTitle,\r\n  Divider,\r\n  FormControl,\r\n  Select,\r\n  MenuItem,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { CrearAlmacenContext } from \"../../../../context/Almacenes/crearAlmacen\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  REGISTRO_ALMACEN,\r\n  ACTUALIZAR_ALMACEN,\r\n} from \"../../../../gql/Almacenes/Almacen\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport { OBTENER_USUARIOS } from \"../../../../gql/Catalogos/usuarios\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { UsuarioProvider } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport RegistroUsuario from \"../../Catalogos/Usuarios/CrearUsuario\";\r\nimport Add from \"@material-ui/icons/Add\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nexport default function ContainerRegistroAlmacen({\r\n  accion,\r\n  datos,\r\n  fromEmergent,\r\n}) {\r\n  const {\r\n    datosAlmacen,\r\n    setDatosAlmacen,\r\n    error,\r\n    setError,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(CrearAlmacenContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [CrearAlmacen] = useMutation(REGISTRO_ALMACEN);\r\n  const [ActualizarAlmacen] = useMutation(ACTUALIZAR_ALMACEN);\r\n  \r\n \r\n\r\n  let obtenerUsuarios = [];\r\n\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  // const empresa = '609eb3b4b995884dc49bbffa';\r\n  const [open, setOpen] = useState(false);\r\n\r\n \r\n\r\n  const { almacen_inicial, setAlmacenInicial } = useContext(RegProductoContext);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n  const  { data, refetch } = useQuery(OBTENER_USUARIOS, {\r\n    variables: {\r\n      sucursal: `${sesion.sucursal._id}`,\r\n      empresa: `${sesion.empresa._id}`,\r\n      eliminado: false,\r\n    },\r\n  });\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setDatosAlmacen({\r\n      nombre_almacen: \"\",\r\n      id_usuario_encargado: \"\",\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n    });\r\n  }, [setDatosAlmacen]);\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (datos) {\r\n      let input = {};\r\n      if (datos.id_usuario_encargado) {\r\n        const { id_usuario_encargado, ...datosNew } = datos;\r\n        input = datosNew;\r\n        input.id_usuario_encargado = id_usuario_encargado._id;\r\n      } else {\r\n        input = datos;\r\n      }\r\n      setDatosAlmacen(input);\r\n    }\r\n  };\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  const obtenerCampos = (e, child) => {\r\n    if (e.target.name === \"id_usuario_encargado\") {\r\n      setDatosAlmacen({\r\n        ...datosAlmacen,\r\n        [e.target.name]: child.props.user._id,\r\n      });\r\n      return;\r\n    }\r\n    setDatosAlmacen({\r\n      ...datosAlmacen,\r\n      [e.target.name]: e.target.value.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  const obtenerCamposDireccion = (e) => {\r\n    setDatosAlmacen({\r\n      ...datosAlmacen,\r\n      direccion: {\r\n        ...datosAlmacen.direccion,\r\n        [e.target.name]: e.target.value.toUpperCase(),\r\n      },\r\n    });\r\n  };\r\n\r\n  const saveData = async () => {\r\n    try {\r\n      if (!datosAlmacen.nombre_almacen) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        if (accion === \"registrar\") {\r\n          let input = {};\r\n          let almacen_creado;\r\n          if (datosAlmacen.id_usuario_encargado === \"\") {\r\n            const { id_usuario_encargado, ...input } = datosAlmacen;\r\n            almacen_creado = await CrearAlmacen({\r\n              variables: {\r\n                input,\r\n                id: sesion.sucursal._id,\r\n                empresa: sesion.empresa._id,\r\n              },\r\n            });\r\n          } else {\r\n            input = datosAlmacen;\r\n            almacen_creado = await CrearAlmacen({\r\n              variables: {\r\n                input,\r\n                id: sesion.sucursal._id,\r\n                empresa: sesion.empresa._id,\r\n              },\r\n            });\r\n          }\r\n\r\n          const id_almacen = almacen_creado.data.crearAlmacen._id;\r\n          if (refetch) {\r\n            setAlmacenInicial({\r\n              ...almacen_inicial,\r\n              id_almacen,\r\n              almacen: datosAlmacen.nombre_almacen,\r\n            });\r\n            refetch();\r\n          }\r\n        } else {\r\n          const { id_sucursal, _id, ...input } = datosAlmacen;\r\n         \r\n          await ActualizarAlmacen({\r\n            variables: {\r\n             \r\n              input:{\r\n                nombre_almacen: input.nombre_almacen,\r\n                id_usuario_encargado: input.id_usuario_encargado,\r\n                direccion: input.direccion,\r\n              },\r\n              id: datosAlmacen._id,\r\n            },\r\n          });\r\n        }\r\n        setUpdate(!update);\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setError(false);\r\n        setLoading(false);\r\n        onCloseModal();\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  if (data) {\r\n    obtenerUsuarios = data.obtenerUsuarios;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {accion === \"registrar\" ? (\r\n        fromEmergent ? (\r\n          <IconButton color=\"primary\" onClick={toggleModal}>\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n          >\r\n            AGREGAR\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog open={open} onClose={onCloseModal} fullWidth maxWidth=\"md\">\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <Box display=\"flex\" flexDirection=\"row\">\r\n          <Box style={{ width: \"93%\" }}>\r\n            <DialogTitle id=\"form-dialog-title\">Registro almacen</DialogTitle>\r\n          </Box>\r\n          <Box m={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={onCloseModal}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n        <Container maxWidth=\"md\">\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"80%\">\r\n              <Typography>\r\n                <span style={{ color: \"red\" }}>* </span>\r\n                <b>Nombre Almacen</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error}\r\n                name=\"nombre_almacen\"\r\n                id=\"form-producto-codigo-barras\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.nombre_almacen}\r\n                /* helperText=\"Incorrect entry.\" */\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\" display=\"flex\" flexDirection=\"row\">\r\n              <Box width=\"70%\">\r\n                <Typography>\r\n                  <b>Encargado de almacen</b>\r\n                </Typography>\r\n                <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                  <Select\r\n                    labelId=\"demo-simple-select-label\"\r\n                    id=\"demo-simple-select\"\r\n                    name=\"id_usuario_encargado\"\r\n                    /* value={\r\n                      datosAlmacen.id_usuario_encargado\r\n                        ? datosAlmacen.id_usuario_encargado\r\n                        : \"\"\r\n                    } */\r\n                    renderValue={(value) => value}\r\n                    onChange={obtenerCampos}\r\n                  >\r\n                    {obtenerUsuarios?.map((user, index) => (\r\n                      <MenuItem key={index} value={user.nombre} user={user}>\r\n                        {user.nombre}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Box>\r\n              <Box mt={2} width=\"10%\">\r\n                <UsuarioProvider>\r\n                  <RegistroUsuario\r\n                    accion=\"registrar\"\r\n                    fromEmergent={true}\r\n                    refetch={refetch}\r\n                  />\r\n                </UsuarioProvider>\r\n              </Box>\r\n              <Box width=\"35%\">\r\n                <Typography>\r\n                  <b>Sucursal</b>\r\n                </Typography>\r\n                <Typography style={{ marginTop: \"7px\" }}>\r\n                  {sesion.sucursal.nombre_sucursal}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n\r\n          <Box mt={2}>\r\n            <Typography>\r\n              <b>Domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Calle</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.calle}\r\n                name=\"calle\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.calle}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>No. exterior</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.no_ext}\r\n                name=\"no_ext\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.no_ext}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>No. interior </b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.no_int}\r\n                name=\"no_int\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.no_int}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Codigo Postal</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                type=\"number\"\r\n                // error={error && !datosAlmacen.direccion.codigo_postal}\r\n                name=\"codigo_postal\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.codigo_postal}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Colonia</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.colonia}\r\n                name=\"colonia\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.colonia}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Municipio</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.municipio}\r\n                name=\"municipio\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.municipio}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Localidad</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.localidad}\r\n                name=\"localidad\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.localidad}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Estado</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                // error={error && !datosAlmacen.direccion.estado}\r\n                name=\"estado\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.estado}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Box>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>País</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                //  error={error && !datosAlmacen.direccion.pais}\r\n                name=\"pais\"\r\n                variant=\"outlined\"\r\n                value={datosAlmacen.direccion.pais}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n          </div>\r\n          <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              onClick={saveData}\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </Box>\r\n        </Container>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\n/* import \"date-fns\";\r\nimport local from \"date-fns/locale/es\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from \"@material-ui/pickers\"; */\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport ContainerRegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function RegistroAlmacenInicial({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    selectedDate,\r\n    setSelectedDate,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n  const { almacenes } = obtenerConsultasProducto;\r\n\r\n  /*ARMAR OBJETO DE INVENTARIO  */\r\n  const obtenerInventario = (e, child) => {\r\n    if (!e.target.value) {\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: { ...precios.inventario, [e.target.name]: \"\" },\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad_de_inventario\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPrecios({\r\n        ...precios,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          [e.target.name]: unidad,\r\n          codigo_unidad,\r\n        },\r\n      });\r\n      return;\r\n    }\r\n    setPrecios({\r\n      ...precios,\r\n      inventario: {\r\n        ...precios.inventario,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      },\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenInicial = (e) => {\r\n    if (!e.target.value) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: \"\",\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"almacen\") {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        [e.target.name]: e.target.value,\r\n      });\r\n      return;\r\n    }\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [e.target.name]: parseFloat(e.target.value),\r\n    });\r\n  };\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n  };\r\n\r\n  const handleDateChange = (date) => {\r\n    setSelectedDate(date);\r\n    setAlmacenInicial({\r\n      ...almacen_inicial,\r\n      fecha_de_expiracion: date,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={2}>\r\n        <Typography>\r\n          <b>Inventario</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Inventario mínimo\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"inventario_minimo\"\r\n              id=\"form-producto-inventario_minimo\"\r\n              variant=\"outlined\"\r\n              value={precios.inventario.inventario_minimo}\r\n              onChange={obtenerInventario}\r\n              onFocus={(e) => {\r\n                const { name, value } = e.target;\r\n                if (parseFloat(value) === 0) {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: \"\" },\r\n                  });\r\n                }\r\n              }}\r\n              onBlur={(e) => {\r\n                const { name, value } = e.target;\r\n                if (value === \"\") {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: 0 },\r\n                  });\r\n                }\r\n              }}\r\n              error={precios.inventario.inventario_minimo === \"\"}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Inventario máximo\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              type=\"number\"\r\n              InputProps={{ inputProps: { min: 0 } }}\r\n              size=\"small\"\r\n              name=\"inventario_maximo\"\r\n              id=\"form-producto-inventario_maximo\"\r\n              variant=\"outlined\"\r\n              value={precios.inventario.inventario_maximo}\r\n              onChange={obtenerInventario}\r\n              onFocus={(e) => {\r\n                const { name, value } = e.target;\r\n                if (parseFloat(value) === 0) {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: \"\" },\r\n                  });\r\n                }\r\n              }}\r\n              onBlur={(e) => {\r\n                const { name, value } = e.target;\r\n                if (value === \"\") {\r\n                  setPrecios({\r\n                    ...precios,\r\n                    inventario: { ...precios.inventario, [name]: 0 },\r\n                  });\r\n                }\r\n              }}\r\n              error={precios.inventario.inventario_maximo === \"\"}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>\r\n              Unidad de inventario\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"unidad_de_inventario\"\r\n              >\r\n                {precios.granel ? (\r\n                  <Select\r\n                    name=\"unidad_de_inventario\"\r\n                    value={precios.inventario.unidad_de_inventario}\r\n                    onChange={obtenerInventario}\r\n                  >\r\n                    {unitCodes_granel.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                ) : (\r\n                  <Select\r\n                    name=\"unidad_de_inventario\"\r\n                    value={precios.inventario.unidad_de_inventario}\r\n                    onChange={obtenerInventario}\r\n                  >\r\n                    {unitCodes.map((res, index) => (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                )}\r\n              </FormControl>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      {update ? null : datos_generales.tipo_producto === \"OTROS\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography>\r\n              <b>Almacen incial</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2} style={{ alignItems: \"center\" }}>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography className={classes.titulos}>\r\n                  Cantidad inicial en <b>{precios.unidad_de_compra.unidad}</b>\r\n                </Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <TextField\r\n                    fullWidth\r\n                    type=\"number\"\r\n                    InputProps={{ inputProps: { min: 0 } }}\r\n                    size=\"small\"\r\n                    name=\"cantidad\"\r\n                    variant=\"outlined\"\r\n                    value={almacen_inicial.cantidad}\r\n                    onChange={obtenerAlmacenInicial}\r\n                    onFocus={(e) => {\r\n                      const { name, value } = e.target;\r\n                      if (parseFloat(value) === 0) {\r\n                        setAlmacenInicial({\r\n                          ...almacen_inicial,\r\n                          [name]: \"\",\r\n                        });\r\n                      }\r\n                    }}\r\n                    onBlur={(e) => {\r\n                      const { name, value } = e.target;\r\n                      if (value === \"\") {\r\n                        setAlmacenInicial({\r\n                          ...almacen_inicial,\r\n                          [name]: 0,\r\n                        });\r\n                      }\r\n                    }}\r\n                    error={almacen_inicial.cantidad === \"\"}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Box>\r\n                <Typography className={classes.titulos}>Almacen</Typography>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <FormControl\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      almacen_inicial.cantidad > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    <Select\r\n                      name=\"almacen\"\r\n                      value={almacen_inicial.almacen}\r\n                      onChange={obtenerAlmacenes}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Seleccione uno</em>\r\n                      </MenuItem>\r\n                      {almacenes ? (\r\n                        almacenes.map((res) => {\r\n                          return (\r\n                            <MenuItem\r\n                              name=\"id_almacen\"\r\n                              key={res._id}\r\n                              value={res.nombre_almacen}\r\n                              id={res._id}\r\n                            >\r\n                              {res.nombre_almacen}\r\n                            </MenuItem>\r\n                          );\r\n                        })\r\n                      ) : (\r\n                        <MenuItem value=\"\" />\r\n                      )}\r\n                    </Select>\r\n                  </FormControl>\r\n                  <AlmacenProvider>\r\n                    <ContainerRegistroAlmacen\r\n                      accion=\"registrar\"\r\n                      refetch={refetch}\r\n                      fromEmergent={true}\r\n                    />\r\n                  </AlmacenProvider>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/*  <Box width=\"100%\">\r\n              <Typography>Fecha de expiración</Typography>\r\n              <MuiPickersUtilsProvider utils={DateFnsUtils} locale={local}>\r\n                <Grid container justify=\"space-around\">\r\n                  <KeyboardDatePicker\r\n                    margin=\"dense\"\r\n                    id=\"date-picker-dialog\"\r\n                    placeholder=\"ex: DD/MM/AAAA\"\r\n                    format=\"dd/MM/yyyy\"\r\n                    value={selectedDate}\r\n                    onChange={handleDateChange}\r\n                    KeyboardButtonProps={{\r\n                      \"aria-label\": \"change date\",\r\n                    }}\r\n                  />\r\n                </Grid>\r\n              </MuiPickersUtilsProvider>\r\n            </Box> */}\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","export function validaciones(generales, precios, almacen, presentaciones) {\r\n    /* si no hay generales y datos 2 */\r\n    /* console.log(almacen); */\r\n    if (\r\n        !generales.clave_alterna ||\r\n        !generales.tipo_producto ||\r\n        !generales.nombre_generico ||\r\n        !generales.nombre_comercial\r\n    ) {\r\n        if (!precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad) {\r\n            return { error: true, message: 'Campo obligatorio', vista1: true, vista2: true };\r\n        }\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if (\r\n        /* si solo hay generales */\r\n        !precios.precio_de_compra.precio_con_impuesto || !precios.precio_de_compra.precio_sin_impuesto || !precios.unidad_de_compra.cantidad\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista2: true };\r\n    } else if (\r\n        /* si solo hay precios */\r\n        !generales.clave_alterna || !generales.tipo_producto || !generales.nombre_generico || !generales.nombre_comercial\r\n    ) {\r\n        return { error: true, message: 'Campo obligatorio', vista1: true };\r\n    } else if(\r\n        /* si hay cantidad almacen pero no hay almacen seleccionado */\r\n        almacen.cantidad > 0 && !almacen.almacen && generales.tipo_producto === \"OTROS\"\r\n    ) {\r\n        console.log(\"si hay cantidad almacen pero no hay almacen seleccionado\");\r\n        return { error: true, message: 'Campo obligatorio', vista3: true };\r\n    }/*  else if(\r\n        //si no hay almacen seleccionado\r\n        presentaciones.length > 0 && !almacen.almacen && !almacen_existente\r\n    ){\r\n        console.log(\"no hay present\");\r\n        return { error: true, message: 'Campo obligatorio', vista7: true };\r\n    } */ else {\r\n        /* si hay todos los datos */\r\n        return { error: false, message: '' };\r\n    }\r\n}","import { gql } from '@apollo/client';\r\n\r\nexport const CREAR_CUENTA = gql`\r\n\tmutation crearCuenta($input: CrearCuentasInput) {\r\n\t\tcrearCuenta(input: $input) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\nexport const CREAR_SUBCUENTA= gql`\r\n\tmutation crearSubcuenta($idCuenta: ID!, $input: CrearSubcuentasInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tcrearSubcuenta(idCuenta: $idCuenta, input: $input,  empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ACTUALIZAR_CUENTA= gql`\r\n\tmutation actualizarCuenta($idCuenta: ID!, $input: ActualizarCuentasInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tactualizarCuenta(idCuenta: $idCuenta, input: $input,  empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\nexport const ACTUALIZAR_SUBCUENTA = gql`\r\n\tmutation actualizarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!, $input: ActualizarSubcuentasInput, $empresa: ID!, $sucursal: ID!) {\r\n\t\tactualizarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta, input: $input,  empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const OBTENER_CUENTAS = gql`\r\n\tquery obtenerCuentas($empresa: ID!) {\r\n\t\tobtenerCuentas(empresa: $empresa) {\r\n\t\t\t_id\r\n\t\t\tcuenta\r\n\t\t\tsubcuentas {\r\n\t\t\t\t_id\r\n\t\t\t\tsubcuenta\r\n\t\t\t}\r\n\t\t\tempresa {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_empresa\r\n\t\t\t\tcorreo_empresa\r\n\t\t\t\tnombre_dueno\r\n\t\t\t\ttelefono_dueno\r\n\t\t\t}\r\n\t\t\tsucursal {\r\n\t\t\t\t_id\r\n\t\t\t\tnombre_sucursal\r\n\t\t\t\tdescripcion\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport const ELIMINAR_CUENTA = gql`\r\n\tmutation eliminarCuenta($id: ID!, $empresa: ID!, $sucursal: ID!) {\r\n\t\teliminarCuenta(id: $id,  empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; \r\nexport const ELIMINAR_SUBCUENTA = gql`\r\n\tmutation eliminarSubcuenta($idCuenta: ID!, $idSubcuenta: ID!, $empresa: ID!, $sucursal: ID!) {\r\n\t\teliminarSubcuenta(idCuenta: $idCuenta, idSubcuenta: $idSubcuenta,  empresa: $empresa, sucursal: $sucursal) {\r\n\t\t\tmessage\r\n\t\t}\r\n\t}\r\n`; ","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Divider,\r\n  Grid,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport {\r\n  CREAR_CUENTA,\r\n  CREAR_SUBCUENTA,\r\n} from \"../../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n  },\r\n}));\r\n\r\nexport default function CentroCostos({ obtenerConsultasProducto, refetch }) {\r\n  const classes = useStyles();\r\n  const {\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    subcostos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const { centro_costos } = obtenerConsultasProducto;\r\n\r\n  const obtenerAlmacenes = (event, child) => {\r\n    setCentroDeCostos({\r\n      ...centro_de_costos,\r\n      [event.target.name]: event.target.value,\r\n      [child.props.name]: child.props.id,\r\n    });\r\n    if (child.props.costos) {\r\n      const { subcuentas } = child.props.costos;\r\n      setSubcostos(subcuentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Typography>\r\n          <b>Centro de costos</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>Cuenta</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"cuenta\"\r\n              >\r\n                <Select\r\n                  name=\"cuenta\"\r\n                  value={centro_de_costos.cuenta ? centro_de_costos.cuenta : \"\"}\r\n                  onChange={obtenerAlmacenes}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {centro_costos ? (\r\n                    centro_costos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_cuenta\"\r\n                          key={res._id}\r\n                          value={res.cuenta}\r\n                          id={res._id}\r\n                          costos={res}\r\n                        >\r\n                          {res.cuenta}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"cuenta\"\r\n                name=\"cuenta\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box>\r\n            <Typography className={classes.titulos}>Subcuenta</Typography>\r\n            <Box display=\"flex\">\r\n              <FormControl\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"subcuenta\"\r\n              >\r\n                <Select\r\n                  name=\"subcuenta\"\r\n                  value={\r\n                    centro_de_costos.subcuenta ? centro_de_costos.subcuenta : \"\"\r\n                  }\r\n                  onChange={obtenerAlmacenes}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Seleccione uno</em>\r\n                  </MenuItem>\r\n                  {subcostos ? (\r\n                    subcostos.map((res) => {\r\n                      return (\r\n                        <MenuItem\r\n                          name=\"id_subcuenta\"\r\n                          key={res._id}\r\n                          value={res.subcuenta}\r\n                          id={res._id}\r\n                        >\r\n                          {res.subcuenta}\r\n                        </MenuItem>\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <MenuItem value=\"\" />\r\n                  )}\r\n                </Select>\r\n              </FormControl>\r\n              <RegistrarNuevoSelect\r\n                tipo=\"subcuenta\"\r\n                name=\"subcuenta\"\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RegistrarNuevoSelect = ({ tipo, name, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validacion, setValidacion] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    subcostos,\r\n    setSubcostos,\r\n  } = useContext(RegProductoContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  costos Mutation */\r\n  const [crearCuenta] = useMutation(CREAR_CUENTA);\r\n  /*  subcostos Mutation */\r\n  const [crearSubcuenta] = useMutation(CREAR_SUBCUENTA);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setValue(e.target.value);\r\n  };\r\n\r\n  const guardarDatos = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      setValidacion(true);\r\n      return;\r\n    }\r\n    let variables = {\r\n      input: {\r\n        [name]: value,\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n      },\r\n    };\r\n    if (tipo === \"subcuenta\") {\r\n      variables = {\r\n        input: {\r\n          [name]: value,\r\n        },\r\n        idCuenta: centro_de_costos.id_cuenta,\r\n      };\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      switch (tipo) {\r\n        case \"cuenta\":\r\n          const cuenta_creada = await crearCuenta({ variables });\r\n          refetch();\r\n          const id_cuenta = cuenta_creada.data.crearCuenta._id;\r\n          setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            cuenta: value,\r\n            id_cuenta,\r\n          });\r\n          break;\r\n        case \"subcuenta\":\r\n          const subcuenta_creada = await crearSubcuenta(\r\n            {   \r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id,\r\n              ...variables\r\n            });\r\n          refetch();\r\n          const id_subcuenta = subcuenta_creada.data.crearSubcuenta._id;\r\n          setSubcostos([...subcostos, { _id: id_subcuenta, subcuenta: value }]);\r\n          setCentroDeCostos({\r\n            ...centro_de_costos,\r\n            subcuenta: value,\r\n            id_subcuenta,\r\n          });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleToggle();\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"primary\"\r\n        onClick={() => handleToggle()}\r\n        disabled={tipo === \"subcuenta\" && !centro_de_costos.id_cuenta}\r\n      >\r\n        <Add />\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleToggle}\r\n        aria-labelledby={`modal-title-${tipo}`}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogTitle id={`modal-title-${tipo}`}>Registrar {tipo}</DialogTitle>\r\n        <DialogContent>\r\n          <form id={`registro-${name}`} onSubmit={(e) => guardarDatos(e)}>\r\n            <TextField\r\n              error={validacion}\r\n              name={name}\r\n              autoFocus\r\n              label={tipo}\r\n              fullWidth\r\n              variant=\"outlined\"\r\n              onChange={obtenerDatos}\r\n              helperText={validacion ? \"Campo obligatorio\" : \"\"}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleToggle()} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            /* onClick={() => guardarDatos()} */\r\n            form={`registro-${name}`}\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            endIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={18} /> : null\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  FormControl,\r\n  Grid,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport TablaPreciosPlazos from \"./tabla_precios\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { unitCodes, unitCodes_granel } from \"../unidades\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n    \"& > .precios-box\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(3)}px`,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function PrecioPlazos() {\r\n  const classes = useStyles();\r\n  const {\r\n    precios,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    unidadesVenta,\r\n    unidadVentaXDefecto,\r\n  } = useContext(RegProductoContext);\r\n  const [plazo, setPlazo] = useState({\r\n    plazo: \"1\",\r\n    unidad: precios.granel ? \"Costal\" : \"Pz\",\r\n    codigo_unidad: precios.granel ? \"KGM\" : \"H87\",\r\n    precio: 0,\r\n  });\r\n\r\n  const obtenerPlazos = (e, child) => {\r\n    if (e.target.name === \"precio\") {\r\n      setPlazo({\r\n        ...plazo,\r\n        [e.target.name]: parseFloat(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (e.target.name === \"unidad\") {\r\n      const { codigo_unidad, unidad } = child.props.unidad;\r\n      setPlazo({\r\n        ...plazo,\r\n        unidad,\r\n        codigo_unidad,\r\n      });\r\n      return;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const guardarPlazo = () => {\r\n    if (!plazo.plazo || !plazo.precio || !plazo.unidad) return;\r\n    switch (plazo.unidad) {\r\n      case \"Pz\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_piezas: [...preciosPlazos.precio_piezas, plazo],\r\n        });\r\n        break;\r\n      case \"Caja\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_cajas: [...preciosPlazos.precio_cajas, plazo],\r\n        });\r\n        break;\r\n      case \"Costal\":\r\n        setPreciosPlazos({\r\n          ...preciosPlazos,\r\n          precio_costales: [...preciosPlazos.precio_costales, plazo],\r\n        });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    setPlazo({\r\n      ...plazo,\r\n      precio: 0,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box className={classes.formInputFlex}>\r\n        <Typography className=\"precios-box\">\r\n          Precio venta de <b>{unidadVentaXDefecto.unidad}</b> con\r\n          impuestos(NETO): <b>${unidadVentaXDefecto.precio}</b>\r\n        </Typography>\r\n        {unidadesVenta.map((unidades, index) => {\r\n          if (!unidades.default)\r\n            return (\r\n              <Typography key={index} className=\"precios-box\">\r\n                Precio venta de <b>{unidades.unidad}</b> con impuestos(NETO):{\" \"}\r\n                <b>${unidades.precio}</b>\r\n              </Typography>\r\n            );\r\n          return null;\r\n        })}\r\n      </Box>\r\n      <Divider />\r\n      <Box className={classes.formInputFlex} justifyContent=\"center\">\r\n        <Box>\r\n          <Typography>Plazo</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\" name=\"plazo\">\r\n              <Select name=\"plazo\" value={plazo.plazo} onChange={obtenerPlazos}>\r\n                <MenuItem value=\"1\">1 Mes</MenuItem>\r\n                <MenuItem value=\"2\">2 Meses</MenuItem>\r\n                <MenuItem value=\"6\">6 Meses</MenuItem>\r\n                <MenuItem value=\"8\">8 Meses</MenuItem>\r\n                <MenuItem value=\"12\">12 Meses</MenuItem>\r\n                <MenuItem value=\"18\">18 Meses</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Unidad</Typography>\r\n          <Box display=\"flex\">\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"unidad\"\r\n            >\r\n              {precios.granel ? (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes_granel.map((res, index) =>\r\n                    res.unidad === \"Costal\" ? (\r\n                      <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                        {res.unidad}\r\n                      </MenuItem>\r\n                    ) : null\r\n                  )}\r\n                </Select>\r\n              ) : (\r\n                <Select\r\n                  name=\"unidad\"\r\n                  value={plazo.unidad}\r\n                  onChange={obtenerPlazos}\r\n                >\r\n                  {unitCodes.map((res, index) => (\r\n                    <MenuItem key={index} unidad={res} value={res.unidad}>\r\n                      {res.unidad}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              )}\r\n            </FormControl>\r\n          </Box>\r\n        </Box>\r\n        <Box>\r\n          <Typography>Precio</Typography>\r\n          <TextField\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0 } }}\r\n            size=\"small\"\r\n            name=\"precio\"\r\n            value={plazo.precio}\r\n            variant=\"outlined\"\r\n            onChange={obtenerPlazos}\r\n          />\r\n        </Box>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            onClick={() => guardarPlazo()}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n      <Box>\r\n        <Grid container spacing={2} justifyContent=\"center\">\r\n          {precios.granel ? (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Costal\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_costales} />\r\n              </Grid>\r\n            </Fragment>\r\n          ) : (\r\n            <Fragment>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Piezas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_piezas} />\r\n              </Grid>\r\n              <Grid item lg={3}>\r\n                <Typography variant=\"h6\" align=\"center\">\r\n                  Cajas\r\n                </Typography>\r\n                <TablaPreciosPlazos precios={preciosPlazos.precio_cajas} />\r\n              </Grid>\r\n            </Fragment>\r\n          )}\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","export const validateJsonEdit = async (data, tipo) => {\r\n    if (tipo === \"datos_generales\") {\r\n      let object_date = {\r\n        clave_alterna: data.clave_alterna,\r\n        tipo_producto: data.tipo_producto,\r\n        nombre_comercial: data.nombre_comercial,\r\n        nombre_generico: data.nombre_generico,\r\n        receta_farmacia: data.receta_farmacia,\r\n      };\r\n      if (data.codigo_barras !== null && data.codigo_barras !== \"\")\r\n        object_date = { ...object_date, codigo_barras: data.codigo_barras };\r\n      if (data.descripcion !== null && data.descripcion !== \"\")\r\n        object_date = { ...object_date, descripcion: data.descripcion };\r\n      if (data.id_categoria !== null && data.id_categoria !== \"\")\r\n        object_date = { ...object_date, id_categoria: data.id_categoria };\r\n      if (data.categoria !== null && data.categoria !== \"\")\r\n        object_date = { ...object_date, categoria: data.categoria };\r\n      if (data.subcategoria !== null && data.subcategoria !== \"\")\r\n        object_date = { ...object_date, subcategoria: data.subcategoria };\r\n      if (data.id_subcategoria !== null && data.id_subcategoria !== \"\")\r\n        object_date = { ...object_date, id_subcategoria: data.id_subcategoria };\r\n      if (data.id_departamento !== null && data.id_departamento !== \"\")\r\n        object_date = { ...object_date, id_departamento: data.id_departamento };\r\n      if (data.departamento !== null && data.departamento !== \"\")\r\n        object_date = { ...object_date, departamento: data.departamento };\r\n      if (data.id_marca !== null && data.id_marca !== \"\")\r\n        object_date = { ...object_date, id_marca: data.id_marca };\r\n      if (data.marca !== null && data.marca !== \"\")\r\n        object_date = { ...object_date, marca: data.marca };\r\n      if (data.clave_producto_sat.Name !== null)\r\n        object_date = {\r\n          ...object_date,\r\n          clave_producto_sat: data.clave_producto_sat,\r\n        };\r\n      return object_date;\r\n    } else if (tipo === \"unidades_de_venta\") {\r\n      let end_array = [];\r\n      for (var i = 0; i < data.length; i++) {\r\n        let object = {\r\n          _id: data[i]._id,\r\n          cantidad: data[i].cantidad,\r\n          id_producto: data[i].id_producto,\r\n          precio: data[i].precio,\r\n          unidad_principal: data[i].unidad_principal,\r\n          unidad: data[i].unidad,\r\n          codigo_unidad: data[i].codigo_unidad,\r\n          precio_unidad: data[i].precio_unidad\r\n        };\r\n        if (data[i].codigo_barras !== null && data[i].codigo_barras !== \"\")\r\n          object = { ...object, codigo_barras: data[i].codigo_barras };\r\n        if (data[i].default !== null && data[i].default !== \"\")\r\n          object = { ...object, default: data[i].default };\r\n        if (data[i].descuento_activo !== null && data[i].descuento_activo !== \"\")\r\n          object = { ...object, descuento_activo: data[i].descuento_activo, descuento: data[i].descuento };\r\n          \r\n          end_array.push(object);\r\n      }\r\n      return end_array;\r\n    }\r\n  };","export default __webpack_public_path__ + \"static/media/portapapeles.076ba120.svg\";","export default __webpack_public_path__ + \"static/media/etiqueta-de-precio.5aa1aed4.svg\";","export default __webpack_public_path__ + \"static/media/tarea-completada.84984eff.svg\";","export default __webpack_public_path__ + \"static/media/imagenes.7a731a8c.svg\";","export default __webpack_public_path__ + \"static/media/tallas-colores.29392f8a.svg\";","import React, { useState, Fragment, useContext, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  Button,\r\n  Badge,\r\n  Typography,\r\n  CircularProgress,\r\n  Backdrop,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n} from \"@material-ui/core\";\r\nimport RegistroInfoGenerales from \"./DatosGenerales/registrarInfoGeneral\";\r\nimport RegistroInfoAdidional from \"../Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport CargarImagenesProducto from \"./Imagenes/cargarImagenesProducto\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport RegistroAlmacenInicial from \"./Inventario&Almacen/AlmacenInicial\";\r\nimport ColoresTallas from \"./TallasColores/TallasColores\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO,\r\n  OBTENER_CONSULTAS,\r\n  ACTUALIZAR_PRODUCTO,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { validaciones } from \"./validaciones\";\r\nimport CentroCostos from \"./CentroCostos/CentroCostos\";\r\nimport PrecioPlazos from \"./PrecioPlazos/PrecioPlazos\";\r\n\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaSecundaria,\r\n  initial_state_unidadesVenta,\r\n} from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport {\r\n  Add,\r\n  Close,\r\n  Edit,\r\n  NavigateBefore,\r\n  NavigateNext,\r\n} from \"@material-ui/icons\";\r\nimport { validateJsonEdit } from \"./validateDatos\";\r\n/* import { cleanTypenames } from \"../../../../config/reuserFunctions\"; */\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\n\r\nimport detallesImg from \"../../../../icons/portapapeles.svg\";\r\nimport preciosImg from \"../../../../icons/etiqueta-de-precio.svg\";\r\nimport almacenesImg from \"../../../../icons/tarea-completada.svg\";\r\nimport imagenesImg from \"../../../../icons/imagenes.svg\";\r\nimport tallasImg from \"../../../../icons/tallas-colores.svg\";\r\n\r\nexport const initial_state_preciosP = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root_app: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n    display: \"flex\",\r\n    maxHeight: \"80vh\",\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  tabs: {\r\n    borderRight: `1px solid ${theme.palette.divider}`,\r\n  },\r\n}));\r\n\r\nexport default function CrearProducto({\r\n  accion,\r\n  datos,\r\n  productosRefetch,\r\n  fromCompra,\r\n  getProductos,\r\n  isOnline,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    setUpdate,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n    almacen_existente,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n  const [loading, setLoading] = useState(false);\r\n  const tipo = datos_generales.tipo_producto;\r\n\r\n  /* Mutations */\r\n  const [crearProducto] = useMutation(CREAR_PRODUCTO);\r\n  const [actualizarProducto] = useMutation(ACTUALIZAR_PRODUCTO);\r\n\r\n  const toggleModal = (producto) => {\r\n    setOpen(!open);\r\n    setUpdate(accion);\r\n    if (producto && accion) {\r\n      setInitialStates(producto);\r\n    } else {\r\n      resetInitialStates();\r\n    }\r\n  };\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  /* ###### GUARDAR LA INFO EN LA BD ###### */\r\n\r\n  const saveData = async () => {\r\n    const validate = validaciones(\r\n      datos_generales,\r\n      precios,\r\n      almacen_inicial,\r\n      presentaciones,\r\n      almacen_existente\r\n    );\r\n\r\n    if (validate.error) {\r\n      setValidacion(validate);\r\n      return;\r\n    }\r\n    setValidacion(validate);\r\n    if (presentaciones.length > 0) {\r\n      const pres = presentaciones.filter(\r\n        (res) => res.color._id && res.medida._id\r\n      );\r\n\r\n      if (pres.length !== presentaciones.length) {\r\n        setValidacion({\r\n          error: true,\r\n          message: \"Faltan medidas o colores a tus presentaciones\",\r\n          vista7: true,\r\n        });\r\n        setAlert({\r\n          message: `Faltan medidas o colores en tus presentaciones`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    let copy_unidadesVenta = [\r\n      { ...unidadVentaXDefecto },\r\n      { ...unidadVentaSecundaria },\r\n    ];\r\n\r\n    /* if (copy_unidadesVenta.length === 0) {\r\n      copy_unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = copy_unidadesVenta.filter(\r\n        (unidades) => unidades.default === true\r\n      );\r\n      if (unidadxdefecto.length === 0) {\r\n        copy_unidadesVenta.splice(0, 0, unidadVentaXDefecto);\r\n      }\r\n    } */\r\n\r\n    /* console.log(copy_unidadesVenta); */\r\n\r\n    precios.precios_producto = preciosP;\r\n\r\n    let imagenes_without_aws = imagenes;\r\n    if (accion) {\r\n      imagenes_without_aws = [...imagenes].filter((res) => !res.key_imagen);\r\n    }\r\n\r\n    let input = {\r\n      datos_generales: await validateJsonEdit(\r\n        datos_generales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios,\r\n      imagenes: imagenes_without_aws,\r\n      imagenes_eliminadas,\r\n      almacen_inicial,\r\n      centro_de_costos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones,\r\n      presentaciones_eliminadas,\r\n      precio_plazos: preciosPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    /* const clean_data = cleanTypenames(input); */\r\n    /* console.log(input); */\r\n\r\n    setLoading(true);\r\n    try {\r\n      if (accion) {\r\n        const result = await actualizarProducto({\r\n          variables: {\r\n            input,\r\n            id: datos._id,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.actualizarProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        const result = await crearProducto({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearProducto.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      toggleModal();\r\n      if (fromCompra) {\r\n        getProductos();\r\n      } else {\r\n        productosRefetch();\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta(initial_state_unidadesVenta);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n    setValue(0);\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    /* const producto = cleanTypenames(product); */\r\n    /* console.log(producto); */\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = producto.unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = producto.unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const { keyCode } = event;\r\n    if (keyCode === 114) {\r\n      document.getElementById(\"modal-registro-product\").click();\r\n    }\r\n  } /* CODIGO PARA PODER EJECUTAR LAS VENTANAS A BASE DE LAS TECLAS */\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (!accion && value === 3) {\r\n      return saveButton;\r\n    } else if (accion && tipo === \"OTROS\" && value === 3) {\r\n      return saveButton;\r\n    } else if (accion && tipo !== \"OTROS\" && value === 4) {\r\n      return saveButton;\r\n    } else {\r\n      return (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={() => setValue(value + 1)}\r\n          size=\"large\"\r\n          endIcon={<NavigateNext />}\r\n          disableElevation\r\n        >\r\n          Siguiente\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n\r\n      {!accion ? (\r\n        fromCompra ? (\r\n          <IconButton\r\n            disabled={!isOnline}\r\n            color=\"primary\"\r\n            onClick={() => toggleModal()}\r\n          >\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            id=\"modal-registro-product\"\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => toggleModal()}\r\n            startIcon={<Add />}\r\n            disabled={!isOnline}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton\r\n          size=\"medium\"\r\n          color=\"default\"\r\n          onClick={() => toggleModal(datos)}\r\n          disabled={!isOnline}\r\n        >\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        scroll=\"paper\"\r\n        disableEscapeKeyDown\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            toggleModal();\r\n          }\r\n        }}\r\n      >\r\n        <div className={classes.root_app}>\r\n          <Tabs\r\n            style={{ minWidth: \"200px\" }}\r\n            value={value}\r\n            onChange={handleChange}\r\n            variant=\"scrollable\"\r\n            orientation=\"vertical\"\r\n            scrollButtons=\"on\"\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            aria-label=\"scrollable force tabs example\"\r\n            className={classes.tabs}\r\n          >\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Datos generales\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista1 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src={detallesImg}\r\n                    alt=\"icono registro\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(0)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Precios de venta\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista2 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src={preciosImg}\r\n                    alt=\"icono venta\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(1)}\r\n            />\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Inventario y almacen\"\r\n              icon={\r\n                <Badge\r\n                  color=\"secondary\"\r\n                  badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                  anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\",\r\n                  }}\r\n                  invisible={\r\n                    validacion.error && validacion.vista3 ? false : true\r\n                  }\r\n                >\r\n                  <img\r\n                    src={almacenesImg}\r\n                    alt=\"icono almacen\"\r\n                    className={classes.iconSvg}\r\n                  />\r\n                </Badge>\r\n              }\r\n              {...a11yProps(2)}\r\n            />\r\n            {/* <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Centro de costos\"\r\n              icon={\r\n                <img\r\n                  src=\"costos.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(3)}\r\n            /> */}\r\n            {/* <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Precios a plazos\"\r\n              icon={\r\n                <img\r\n                  src=\"calendar.svg\"\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n            /> */}\r\n            <Tab\r\n              style={{ minWidth: \"200px\" }}\r\n              label=\"Imagenes\"\r\n              icon={\r\n                <img\r\n                  src={imagenesImg}\r\n                  alt=\"icono imagenes\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(3)}\r\n            />\r\n            {accion ? (\r\n              datos_generales.tipo_producto !== \"OTROS\" ? (\r\n                <Tab\r\n                  style={{ minWidth: \"200px\" }}\r\n                  label=\"Tallas y colores\"\r\n                  icon={\r\n                    <Badge\r\n                      color=\"secondary\"\r\n                      badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                      anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"right\",\r\n                      }}\r\n                      invisible={\r\n                        validacion.error && validacion.vista7 ? false : true\r\n                      }\r\n                    >\r\n                      <img\r\n                        src={tallasImg}\r\n                        alt=\"icono colores\"\r\n                        className={classes.iconSvg}\r\n                      />\r\n                    </Badge>\r\n                  }\r\n                  {...a11yProps(4)}\r\n                />\r\n              ) : null\r\n            ) : null}\r\n          </Tabs>\r\n          <Box width=\"100%\">\r\n            <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => toggleModal()}\r\n                size=\"large\"\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n            <DialogContent className={classes.dialogContent}>\r\n              <Backdrop className={classes.backdrop} open={loading}>\r\n                <CircularProgress color=\"inherit\" />\r\n              </Backdrop>\r\n              <ContenidoModal value={value} />\r\n            </DialogContent>\r\n          </Box>\r\n        </div>\r\n\r\n        <DialogActions\r\n          style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n        >\r\n          <Button\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value - 1)}\r\n            size=\"large\"\r\n            startIcon={<NavigateBefore />}\r\n            disabled={value === 0}\r\n          >\r\n            Anterior\r\n          </Button>\r\n          <ButtonActions />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst ContenidoModal = ({ value }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, [refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <TabPanel value={value} index={0}>\r\n        <RegistroInfoGenerales\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <RegistroInfoAdidional />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        <RegistroAlmacenInicial\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n      {/* <TabPanel value={value} index={3}>\r\n        <CentroCostos\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel> */}\r\n      {/* <TabPanel value={value} index={4}>\r\n        <PrecioPlazos />\r\n      </TabPanel> */}\r\n      <TabPanel value={value} index={3}>\r\n        <CargarImagenesProducto />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        <ColoresTallas\r\n          obtenerConsultasProducto={obtenerConsultasProducto}\r\n          refetch={refetch}\r\n        />\r\n      </TabPanel>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function PreciosDeVentaCompras() {\r\n  const { preciosVenta } = useContext(ComprasContext);\r\n\r\n  return (\r\n    <div>\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ minWidth: 150 }}>Precios de venta</TableCell>\r\n              {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                <TableCell style={{ minWidth: 100 }} key={index}>\r\n                  {numero}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {[\"Utilidad\", \"Precio de venta\"].map((tipo, index) => (\r\n              <TableRow key={index}>\r\n                <TableCell style={{ border: 0 }}>\r\n                  <b>{tipo}</b>\r\n                </TableCell>\r\n                {preciosVenta.map((data, index) => (\r\n                  <RenderPrecios\r\n                    key={index}\r\n                    data={data}\r\n                    index={index}\r\n                    tipo={tipo}\r\n                  />\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPrecios = ({ data, tipo, index }) => {\r\n  const {\r\n    preciosVenta,\r\n    setPreciosVenta,\r\n    datosProducto,\r\n    productoOriginal,\r\n  } = useContext(ComprasContext);\r\n  const { precios } = productoOriginal;\r\n\r\n  const [precio_neto, setPrecioNeto] = useState(data.precio_neto);\r\n\r\n  //creamos variables para trabajar con ellas, no causar errores y afectar las originales\r\n  let copy_preciosVenta = { ...preciosVenta[index] };\r\n  let preciosVenta_base = [...preciosVenta];\r\n\r\n  let precio_unitario_con_impuesto =\r\n    /* datosProducto.costo / datosProducto.cantidad; */\r\n    datosProducto.costo / precios.unidad_de_compra.cantidad;\r\n  let precio_unitario_sin_impuesto =\r\n    /* precios.precio_de_compra.precio_sin_impuesto / datosProducto.cantidad; */\r\n    precios.precio_de_compra.precio_sin_impuesto /\r\n    precios.unidad_de_compra.cantidad;\r\n\r\n  if (isNaN(precio_unitario_sin_impuesto)) precio_unitario_sin_impuesto = 0;\r\n  if (isNaN(precio_unitario_con_impuesto)) precio_unitario_con_impuesto = 0;\r\n\r\n  const calculosCompra = useCallback(() => {\r\n    if (copy_preciosVenta.numero_precio === data.numero_precio) {\r\n      copy_preciosVenta.precio_neto = precio_unitario_con_impuesto;\r\n      setPrecioNeto(precio_unitario_con_impuesto);\r\n\r\n      let utilidad_base = data.utilidad ? data.utilidad : 0;\r\n      let utilidad = utilidad_base / 100;\r\n\r\n      const precio_venta = parseFloat(\r\n        (\r\n          precio_unitario_sin_impuesto * utilidad +\r\n          precio_unitario_sin_impuesto\r\n        ).toFixed(2)\r\n      );\r\n\r\n      copy_preciosVenta.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n      if (precios.iva_activo || precios.ieps_activo) {\r\n        const precio_neto =\r\n          precio_unitario_con_impuesto +\r\n          precio_unitario_con_impuesto * utilidad;\r\n\r\n        copy_preciosVenta.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n        setPrecioNeto(parseFloat(precio_neto.toFixed(2)));\r\n      } else {\r\n        copy_preciosVenta.precio_neto = parseFloat(precio_venta.toFixed(2));\r\n        setPrecioNeto(parseFloat(precio_venta.toFixed(2)));\r\n      }\r\n      preciosVenta_base.splice(index, 1, copy_preciosVenta);\r\n      setPreciosVenta(preciosVenta_base);\r\n    }\r\n  }, [datosProducto.costo, datosProducto.cantidad]);\r\n\r\n  useEffect(() => {\r\n    if (data.numero_precio === 1) {\r\n      calculosCompra();\r\n    } else if (data.numero_precio > 1 && precio_neto) {\r\n      calculosCompra();\r\n    }\r\n  }, [calculosCompra]);\r\n\r\n  switch (tipo) {\r\n    case \"Utilidad\":\r\n      return <TableCell style={{ border: 0 }}>{data.utilidad}%</TableCell>;\r\n    case \"Precio de venta\":\r\n      return (\r\n        <TableCell style={{ border: 0 }}>\r\n          ${parseFloat(precio_neto.toFixed(2))}\r\n        </TableCell>\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { Box, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nexport default function DescuentosInputs() {\r\n  const { datosProducto, setDatosProducto, productoOriginal } = useContext(\r\n    ComprasContext\r\n  );\r\n  const { presentaciones } = useContext(RegProductoContext);\r\n  const { iva, ieps, precio_de_compra } = productoOriginal.precios;\r\n  const { precio_sin_impuesto, precio_con_impuesto } = precio_de_compra;\r\n  const iva_precio_actual = precio_de_compra.iva;\r\n  const ieps_precio_actual = precio_de_compra.ieps;\r\n  const impuesto_actual = iva_precio_actual + ieps_precio_actual;\r\n  const { costo } = datosProducto;\r\n  const PCSI_actual = costo - impuesto_actual;\r\n\r\n  let cantidad_total = 0;\r\n  let cantida_suma = 0;\r\n  if (presentaciones.length > 0) {\r\n    presentaciones.forEach((presentacion) => {\r\n      const { cantidad_nueva } = presentacion;\r\n      let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n      cantida_suma += nueva;\r\n    });\r\n    if (isNaN(cantida_suma)) return;\r\n    cantidad_total = cantida_suma;\r\n  } else {\r\n    cantidad_total = datosProducto.cantidad;\r\n  }\r\n\r\n  let PCSI_ACTUAL_TOTAL = PCSI_actual * cantidad_total;\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: impuesto_actual * cantidad_total,\r\n        descuento_porcentaje: 0,\r\n        descuento_precio: 0,\r\n        subtotal_descuento: precio_sin_impuesto * cantidad_total,\r\n        total_descuento: precio_con_impuesto * cantidad_total,\r\n        iva_total: iva_precio_actual * cantidad_total,\r\n        ieps_total: ieps_precio_actual * cantidad_total,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (PCSI_ACTUAL_TOTAL * porcentaje) / 100\r\n    );\r\n\r\n    let subtotal_con_descuento = PCSI_ACTUAL_TOTAL - cantidad_descontada;\r\n\r\n    const iva_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    const ieps_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    const impuestos = iva_precio + ieps_precio;\r\n\r\n    let total = subtotal_con_descuento + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: parseFloat(impuestos.toFixed(2)),\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n      iva_total: parseFloat(iva_precio.toFixed(2)),\r\n      ieps_total: parseFloat(ieps_precio.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: impuesto_actual * cantidad_total,\r\n        descuento_porcentaje: 0,\r\n        descuento_precio: 0,\r\n        subtotal_descuento: precio_sin_impuesto * cantidad_total,\r\n        total_descuento: precio_con_impuesto * cantidad_total,\r\n        iva_total: iva_precio_actual * cantidad_total,\r\n        ieps_total: ieps_precio_actual * cantidad_total,\r\n      });\r\n      return;\r\n    }\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / PCSI_ACTUAL_TOTAL) * 100\r\n    );\r\n    let subtotal_con_descuento = PCSI_ACTUAL_TOTAL - cantidad_descontada;\r\n    const iva_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    const ieps_precio =\r\n      parseFloat(subtotal_con_descuento) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    const impuestos = iva_precio + ieps_precio;\r\n    let total = subtotal_con_descuento + impuestos;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      impuestos_descuento: impuestos,\r\n      descuento_porcentaje: parseFloat(porcentaje),\r\n      descuento_precio: parseFloat(cantidad_descontada.toFixed(2)),\r\n      subtotal_descuento: parseFloat(subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(total.toFixed(2)),\r\n      iva_total: parseFloat(iva_precio.toFixed(2)),\r\n      ieps_total: parseFloat(ieps_precio.toFixed(2)),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box display=\"flex\" width={200}>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPrecio(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_precio}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\r\n          }}\r\n        />\r\n        <Box mr={1} />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputMode=\"numeric\"\r\n          onChange={(e) => obtenerPorcentaje(e.target.value)}\r\n          disabled={!datosProducto.producto.datos_generales}\r\n          value={datosProducto.descuento_porcentaje}\r\n          InputProps={{\r\n            startAdornment: <InputAdornment position=\"start\">%</InputAdornment>,\r\n          }}\r\n        />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const ClienteCtx = createContext();\r\n\r\nexport const ClienteProvider = ({ children }) => {\r\n\tconst [ cliente, setCliente ] = useState({\r\n\t\tdireccion: {\r\n\t\t\tcalle: '',\r\n\t\t\tno_ext: '',\r\n\t\t\tno_int: '',\r\n\t\t\tcodigo_postal: '',\r\n\t\t\tcolonia: '',\r\n\t\t\tmunicipio: '',\r\n\t\t\tlocalidad: '',\r\n\t\t\testado: '',\r\n\t\t\tpais: ''\r\n\t\t},\r\n\t\testado_cliente: true\r\n\t});\r\n\tconst [ toUpdate, setToUpdate ] = useState(false);\r\n\tconst [ error, setError ] = useState(false);\r\n\tconst [ update, setUpdate ] = useState(false);\r\n\tconst [ clientes, setClientes ] = useState([]);\r\n\tconst [updateClientVenta, setUpdateClientVenta] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<ClienteCtx.Provider\r\n\t\t\tvalue={{\r\n\t\t\t\tcliente,\r\n\t\t\t\tsetCliente,\r\n\t\t\t\ttoUpdate,\r\n\t\t\t\tsetToUpdate,\r\n\t\t\t\terror,\r\n\t\t\t\tsetError,\r\n\t\t\t\tupdate,\r\n\t\t\t\tsetUpdate,\r\n\t\t\t\tsetUpdateClientVenta,\r\n\t\t\t\tupdateClientVenta,\r\n\t\t\t\tclientes,\r\n\t\t\t\tsetClientes\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</ClienteCtx.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useContext, useCallback, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Box,\r\n  Divider,\r\n  Avatar,\r\n  InputAdornment,\r\n  IconButton,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { TextField, Typography, Grid } from \"@material-ui/core\";\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Cached, DeleteOutline } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatarContainer: {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    width: 150,\r\n    height: 150,\r\n    border: \"dashed 2px #000000\",\r\n  },\r\n  avatar: {\r\n    width: 135,\r\n    height: 135,\r\n    \"& > .icon\": {\r\n      fontSize: 100,\r\n    },\r\n  },\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n  title: {\r\n    fontWeight: \"500\",\r\n    \"& span\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoBasica({ tipo, accion }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente, error } = useContext(ClienteCtx);\r\n  const [preview, setPreview] = useState(\"\");\r\n\r\n  //dropzone\r\n  const onDrop = useCallback(\r\n    (acceptedFiles) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(acceptedFiles[0]);\r\n      reader.onload = function () {\r\n        let image = reader.result;\r\n        setPreview(image);\r\n      };\r\n      setCliente({\r\n        ...cliente,\r\n        imagen: acceptedFiles[0],\r\n      });\r\n    },\r\n    [cliente, setCliente]\r\n  );\r\n\r\n  const removerImagen = () => {\r\n    setCliente({\r\n      ...cliente,\r\n      imagen: \"\",\r\n    });\r\n    setPreview(\"\");\r\n  };\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: \"image/jpeg, image/png\",\r\n    noKeyboard: true,\r\n    onDrop,\r\n  });\r\n\r\n  const obtenerCampos = (e) => {\r\n    const { name, value } = e.target;\r\n    setCliente({\r\n      ...cliente,\r\n      [name]: value,\r\n    });\r\n  };\r\n  const obtenerCamposDireccion = (e) => {\r\n    const { name, value } = e.target;\r\n    setCliente({\r\n      ...cliente,\r\n      direccion: { ...cliente.direccion, [name]: value },\r\n    });\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const clave_cliente = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setCliente({\r\n      ...cliente,\r\n      clave_cliente,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container className={classes.input}>\r\n        <Grid\r\n          item\r\n          md={3}\r\n          xs={12}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginTop: \"8px\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <Box className={classes.avatarContainer} {...getRootProps()}>\r\n            <input {...getInputProps()} />\r\n            {preview ? (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${preview}`}\r\n              />\r\n            ) : (\r\n              <Avatar\r\n                variant=\"square\"\r\n                className={classes.avatar}\r\n                src={`${cliente.imagen}`}\r\n              />\r\n            )}\r\n          </Box>\r\n          <Box>\r\n            <Button\r\n              color=\"secondary\"\r\n              size=\"medium\"\r\n              onClick={removerImagen}\r\n              startIcon={<DeleteOutline />}\r\n            >\r\n              Remover imagen\r\n            </Button>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={9} xs={12}>\r\n          <Grid container spacing={2}>\r\n            {accion === \"registrar\" ? null : (\r\n              <Grid item md={3} xs={12}>\r\n                <Typography className={classes.title}>N. Cliente</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"numero_cliente\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.numero_cliente ? cliente.numero_cliente : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  disabled\r\n                  type=\"number\"\r\n                />\r\n              </Grid>\r\n            )}\r\n            <Grid item md={accion === \"registrar\" ? 12 : 9} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Nombre{\" \"}\r\n                {tipo === \"CLIENTE\" ? \"cliente\" : \"proveedor\"}\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.nombre_cliente}\r\n                name=\"nombre_cliente\"\r\n                variant=\"outlined\"\r\n                value={cliente.nombre_cliente ? cliente.nombre_cliente : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            {tipo === \"CLIENTE\" ? null : (\r\n              <Grid item md={4} xs={12}>\r\n                <Typography className={classes.title}>\r\n                  <span>* </span>Representante\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  error={error && !cliente.representante}\r\n                  name=\"representante\"\r\n                  variant=\"outlined\"\r\n                  value={cliente.representante ? cliente.representante : \"\"}\r\n                  helperText={error ? \"Campo Requerido\" : \"\"}\r\n                  onChange={obtenerCampos}\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                />\r\n              </Grid>\r\n            )}\r\n            {tipo !== \"CLIENTE\" ? null : (\r\n              <Fragment>\r\n                <Grid item md={tipo === \"CLIENTE\" ? 6 : 4} xs={12}>\r\n                  <Typography className={classes.title}>\r\n                    <span>* </span>Clave(Tarjeta de puntos)\r\n                  </Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    error={error && !cliente.clave_cliente}\r\n                    name=\"clave_cliente\"\r\n                    variant=\"outlined\"\r\n                    value={cliente.clave_cliente ? cliente.clave_cliente : \"\"}\r\n                    helperText={error ? \"Campo Requerido\" : \"\"}\r\n                    onChange={obtenerCampos}\r\n                    InputProps={{\r\n                      endAdornment: (\r\n                        <InputAdornment position=\"end\">\r\n                          <IconButton\r\n                            color=\"primary\"\r\n                            size=\"small\"\r\n                            onClick={() => GenCodigoBarras()}\r\n                          >\r\n                            <Cached />\r\n                          </IconButton>\r\n                        </InputAdornment>\r\n                      ),\r\n                    }}\r\n                    type=\"number\"\r\n                  />\r\n                </Grid>\r\n                <Grid item md={tipo === \"CLIENTE\" ? 6 : 4} xs={12}>\r\n                  <Typography className={classes.title}>\r\n                    Fecha nacimiento\r\n                  </Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"fecha_nacimiento\"\r\n                    variant=\"outlined\"\r\n                    type=\"date\"\r\n                    onChange={obtenerCampos}\r\n                    value={\r\n                      cliente.fecha_nacimiento ? cliente.fecha_nacimiento : \"\"\r\n                    }\r\n                  />\r\n                </Grid>\r\n              </Fragment>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>CURP</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"curp\"\r\n                variant=\"outlined\"\r\n                value={cliente.curp ? cliente.curp : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Email\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.email}\r\n                name=\"email\"\r\n                variant=\"outlined\"\r\n                value={cliente.email ? cliente.email : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                <span>* </span>Num. Telefono\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.telefono}\r\n                name=\"telefono\"\r\n                variant=\"outlined\"\r\n                value={cliente.telefono ? cliente.telefono : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>Num. Celular</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"celular\"\r\n                variant=\"outlined\"\r\n                value={cliente.celular ? cliente.celular : \"\"}\r\n                onChange={obtenerCampos}\r\n                type=\"number\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={12}>\r\n          <Box my={2}>\r\n            <Typography className={classes.title}>\r\n              <b>Domicilio</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Calle\r\n              </Typography>\r\n\r\n              <TextField\r\n                size=\"small\"\r\n                fullWidth\r\n                error={error && !cliente.direccion.calle}\r\n                name=\"calle\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.calle ? cliente.direccion.calle : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Num. Ext\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.no_ext}\r\n                name=\"no_ext\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_ext ? cliente.direccion.no_ext : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>Num. Int</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"no_int\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.no_int ? cliente.direccion.no_int : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Código postal\r\n              </Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                fullWidth\r\n                error={error && !cliente.direccion.codigo_postal}\r\n                name=\"codigo_postal\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.codigo_postal\r\n                    ? cliente.direccion.codigo_postal\r\n                    : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Colonia\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.colonia}\r\n                name=\"colonia\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.colonia ? cliente.direccion.colonia : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Municipio\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.municipio}\r\n                name=\"municipio\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.municipio ? cliente.direccion.municipio : \"\"\r\n                }\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>Localidad</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                name=\"localidad\"\r\n                variant=\"outlined\"\r\n                value={\r\n                  cliente.direccion.localidad ? cliente.direccion.localidad : \"\"\r\n                }\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Estado\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.estado}\r\n                name=\"estado\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.estado ? cliente.direccion.estado : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={3} xs={12}>\r\n              <Typography className={classes.title}>\r\n                {tipo === \"CLIENTE\" ? <span>* </span> : null}Pais\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={error && !cliente.direccion.pais}\r\n                name=\"pais\"\r\n                variant=\"outlined\"\r\n                value={cliente.direccion.pais ? cliente.direccion.pais : \"\"}\r\n                helperText={error ? \"Campo Requerido\" : \"\"}\r\n                onChange={obtenerCamposDireccion}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Divider, Grid, InputAdornment } from \"@material-ui/core\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { DateRange } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    fontWeight: \"500\",\r\n  },\r\n}));\r\n\r\nexport default function RegistrarInfoCredito({ tipo, cliente_base }) {\r\n  const classes = useStyles();\r\n  const { cliente, setCliente } = useContext(ClienteCtx);\r\n\r\n  const credito_disponible = cliente_base ? cliente_base.credito_disponible : 0;\r\n  const limite_credito = cliente_base ? cliente_base.limite_credito : 0;\r\n  const credito_usado = limite_credito - credito_disponible;\r\n\r\n  const obtenerCampos = (e) => {\r\n    const name = e.target.name;\r\n    if (name === \"numero_descuento\") {\r\n      setCliente({\r\n        ...cliente,\r\n        [e.target.name]: parseInt(e.target.value),\r\n      });\r\n      return;\r\n    }\r\n    if (name === \"limite_credito\") {\r\n      let disponible = parseInt(e.target.value) - credito_usado;\r\n\r\n      setCliente({\r\n        ...cliente,\r\n        [e.target.name]: parseInt(e.target.value),\r\n        credito_disponible: disponible,\r\n      });\r\n      return;\r\n    }\r\n    setCliente({\r\n      ...cliente,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {tipo === \"CLIENTE\" ? (\r\n        <Box my={3}>\r\n          <Alert severity=\"info\">\r\n            Si deseas hacer facturas a este cliente el <b>RFC</b> y la{\" \"}\r\n            <b>Razon social</b> son obligatorios.\r\n          </Alert>\r\n        </Box>\r\n      ) : null}\r\n\r\n      <Grid container spacing={2}>\r\n        <Grid item>\r\n          <Typography>\r\n            <b>Crédito utilizado:</b> ${\" \"}\r\n            {credito_usado ? formatoMexico(credito_usado) : 0.0}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>\r\n            <b>Crédito disponible:</b> ${\" \"}\r\n            {cliente.credito_disponible\r\n              ? formatoMexico(cliente.credito_disponible)\r\n              : 0.0}\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={12}>\r\n          <Typography className={classes.title}>RFC</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"rfc\"\r\n            variant=\"outlined\"\r\n            value={cliente.rfc ? cliente.rfc : \"\"}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Typography className={classes.title}>Razon social</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"razon_social\"\r\n            variant=\"outlined\"\r\n            value={cliente.razon_social ? cliente.razon_social : \"\"}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        {/* <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Descuento</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"numero_descuento\"\r\n            variant=\"outlined\"\r\n            value={cliente.numero_descuento ? cliente.numero_descuento : \"\"}\r\n            onChange={obtenerCampos}\r\n          />\r\n        </Grid> */}\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Limite de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"limite_credito\"\r\n            variant=\"outlined\"\r\n            value={cliente.limite_credito ? cliente.limite_credito : \"\"}\r\n            onChange={obtenerCampos}\r\n            error={credito_usado > cliente.limite_credito}\r\n            InputProps={{\r\n              startAdornment: <InputAdornment>$</InputAdornment>\r\n            }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Typography className={classes.title}>Días de crédito</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"dias_credito\"\r\n            variant=\"outlined\"\r\n            placeholder=\"30\"\r\n            value={cliente.dias_credito ? cliente.dias_credito : \"\"}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            InputProps={{\r\n              startAdornment: <InputAdornment><DateRange color=\"action\" /></InputAdornment>\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      {tipo !== \"CLIENTE\" ? (\r\n        <Fragment>\r\n          <Box my={3}>\r\n            <Typography className={classes.title}>Datos bancarios</Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.title}>Banco</Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"banco\"\r\n                variant=\"outlined\"\r\n                value={cliente.banco ? cliente.banco : \"\"}\r\n                onChange={obtenerCampos}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Grid>\r\n            <Grid item md={6} xs={12}>\r\n              <Typography className={classes.title}>\r\n                No. de Cuenta Bancaria\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                name=\"numero_cuenta\"\r\n                variant=\"outlined\"\r\n                value={cliente.numero_cuenta ? cliente.numero_cuenta : \"\"}\r\n                onChange={obtenerCampos}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Fragment>\r\n      ) : null}\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_CLIENTE = gql`\r\n  mutation crearCliente($input: CrearClienteInput) {\r\n    crearCliente(input: $input) {\r\n      _id\r\n      numero_cliente\r\n      clave_cliente\r\n      representante\r\n      nombre_cliente\r\n      rfc\r\n      curp\r\n      telefono\r\n      celular\r\n      email\r\n      numero_descuento\r\n      limite_credito\r\n      dias_credito\r\n      razon_social\r\n      direccion {\r\n        calle\r\n        no_ext\r\n        no_int\r\n        codigo_postal\r\n        colonia\r\n        municipio\r\n        localidad\r\n        estado\r\n        pais\r\n      }\r\n      imagen\r\n      estado_cliente\r\n      tipo_cliente\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CLIENTES = gql`\r\n  query obtenerClientes(\r\n    $tipo: String!\r\n    $filtro: String\r\n    $empresa: ID!\r\n    $eliminado: Boolean\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerClientes(\r\n      tipo: $tipo\r\n      filtro: $filtro\r\n      empresa: $empresa\r\n      eliminado: $eliminado\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        credito_disponible\r\n        dias_credito\r\n        razon_social\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        estado_cliente\r\n        tipo_cliente\r\n        banco\r\n        numero_cuenta\r\n        empresa {\r\n          _id\r\n          nombre_empresa\r\n          correo_empresa\r\n          nombre_dueno\r\n          telefono_dueno\r\n          sucursales_activas\r\n          limite_sucursales\r\n        }\r\n        sucursal {\r\n          _id\r\n          nombre_sucursal\r\n          descripcion\r\n        }\r\n        monedero_electronico\r\n        fecha_nacimiento\r\n        fecha_registro\r\n        eliminado\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_CLIENTE = gql`\r\n  mutation actualizarCliente($input: ActualizarClienteInput, $id: ID!, $empresa:ID!, $sucursal:ID!) {\r\n    actualizarCliente(id: $id, input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\nexport const ELIMINAR_CLIENTE = gql`\r\n  mutation eliminarCliente($id: ID!, $empresa:ID!, $sucursal:ID!) {\r\n    eliminarCliente(id: $id, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import React, { useState, Fragment, useContext, useCallback } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport RegistrarInfoBasica from \"./RegistrarInfoBasica\";\r\nimport RegistrarInfoCredito from \"./RegistroInfoCredito\";\r\nimport { Add, Close, Done, Edit } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_CLIENTE,\r\n  ACTUALIZAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport { Toolbar } from \"@material-ui/core\";\r\n\r\nexport default function CrearCliente({\r\n  tipo,\r\n  accion,\r\n  datos,\r\n  refetch,\r\n  fromCompras,\r\n  ventas,\r\n  handleClickOpen,\r\n  isOnline,\r\n}) {\r\n  const {\r\n    cliente,\r\n    setCliente,\r\n    setError,\r\n    updateClientVenta,\r\n    setUpdateClientVenta,\r\n    update,\r\n    setUpdate,\r\n  } = useContext(ClienteCtx);\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const limpiarCampos = useCallback(() => {\r\n    setCliente({\r\n      direccion: {\r\n        calle: \"\",\r\n        no_ext: \"\",\r\n        no_int: \"\",\r\n        codigo_postal: \"\",\r\n        colonia: \"\",\r\n        municipio: \"\",\r\n        localidad: \"\",\r\n        estado: \"\",\r\n        pais: \"\",\r\n      },\r\n      estado_cliente: true,\r\n    });\r\n  }, [setCliente]);\r\n\r\n  const toggleModal = () => {\r\n    setOpen(true);\r\n    if (datos) {\r\n      setCliente(datos);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setOpen(false);\r\n    limpiarCampos();\r\n  };\r\n\r\n  /* Mutations */\r\n  const [crearCliente] = useMutation(CREAR_CLIENTE);\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    let copy_cliente = { ...cliente };\r\n    if (\r\n      !copy_cliente.nombre_cliente ||\r\n      !copy_cliente.telefono ||\r\n      !copy_cliente.email\r\n    ) {\r\n      if (tipo !== \"CLIENTE\" && !copy_cliente.representante) {\r\n        setError(true);\r\n        return;\r\n      }\r\n      setError(true);\r\n      return;\r\n    }\r\n    if (tipo === \"CLIENTE\") {\r\n      if (\r\n        !copy_cliente.clave_cliente ||\r\n        !copy_cliente.direccion.calle ||\r\n        !copy_cliente.direccion.municipio ||\r\n        !copy_cliente.direccion.estado ||\r\n        !copy_cliente.direccion.pais\r\n      ) {\r\n        setError(true);\r\n        return;\r\n      }\r\n    }\r\n    if (\r\n      accion !== \"registrar\" &&\r\n      datos.limite_credito &&\r\n      datos.credito_disponible\r\n    ) {\r\n      let credito_usado = datos.limite_credito - datos.credito_disponible;\r\n      if (credito_usado > copy_cliente.limite_credito) {\r\n        setAlert({\r\n          message: \"Crédito utilizado es mayor al límite de crédito\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n    }\r\n    setLoading(true);\r\n    try {\r\n      if (accion === \"registrar\") {\r\n        copy_cliente.tipo_cliente = tipo;\r\n        copy_cliente.empresa = sesion.empresa._id;\r\n        copy_cliente.sucursal = sesion.sucursal._id;\r\n        if (tipo === \"CLIENTE\") {\r\n          copy_cliente.representante = \"\";\r\n        }\r\n        const input = copy_cliente;\r\n        const clienteBase = await crearCliente({\r\n          variables: {\r\n            input,\r\n          },\r\n        });\r\n\r\n        if (ventas === true) {\r\n          const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n          let venta_actual = venta === null ? {} : venta;\r\n          // console.log(venta_actual);\r\n          localStorage.setItem(\r\n            \"DatosVentas\",\r\n            JSON.stringify({\r\n              subTotal:\r\n                venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n              total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n              impuestos:\r\n                venta_actual.impuestos === undefined\r\n                  ? 0\r\n                  : venta_actual.impuestos,\r\n              iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n              ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n              descuento:\r\n                venta_actual.descuento === undefined\r\n                  ? 0\r\n                  : venta_actual.descuento,\r\n              monedero:\r\n                venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n              // tipo_cambio: venta_actual.tipo_cambio\r\n              //   ? venta_actual.tipo_cambio\r\n              //   : {},\r\n              cliente: clienteBase.data.crearCliente,\r\n              venta_cliente: true,\r\n              productos:\r\n                venta_actual.productos?.length > 0\r\n                  ? venta_actual.productos\r\n                  : [],\r\n              tipo_emision: venta_actual.tipo_emision\r\n                ? venta_actual.tipo_emision\r\n                : \"TICKET\",\r\n            })\r\n          );\r\n          setUpdateClientVenta(!updateClientVenta);\r\n          onCloseModal();\r\n          handleClickOpen();\r\n        }\r\n      } else {\r\n        const {\r\n          numero_cliente,\r\n          _id,\r\n          clave_cliente,\r\n          sucursal,\r\n          empresa,\r\n          ...input\r\n        } = copy_cliente;\r\n        await actualizarCliente({\r\n          variables: {\r\n            input: input,\r\n            id: copy_cliente._id,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        });\r\n      }\r\n      if (refetch) {\r\n        refetch();\r\n      }\r\n      setUpdate(!update);\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setError(false);\r\n      setLoading(false);\r\n      onCloseModal();\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n      setLoading(false);\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {accion === \"registrar\" ? (\r\n        fromCompras ? (\r\n          <IconButton\r\n            color=\"primary\"\r\n            disabled={!isOnline}\r\n            onClick={toggleModal}\r\n          >\r\n            <Add />\r\n          </IconButton>\r\n        ) : (\r\n          <Button\r\n            disabled={!isOnline}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            onClick={toggleModal}\r\n            startIcon={<Add />}\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )\r\n      ) : (\r\n        <IconButton disabled={!isOnline} size=\"small\" onClick={toggleModal}>\r\n          <Edit />\r\n        </IconButton>\r\n      )}\r\n      <Dialog\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            onCloseModal();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n          <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\">\r\n                {accion === \"registrar\" ? \"Registrar\" : \"Actualizar\"}\r\n              </Typography>\r\n              <Box flexGrow={1} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                size=\"large\"\r\n                onClick={() => onCloseModal()}\r\n              >\r\n                <Close />\r\n              </Button>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Container>\r\n            <form id=\"crear-cliente-form\" onSubmit={saveData}>\r\n              <Typography>\r\n                <b>Información básica</b>\r\n              </Typography>\r\n              <Divider />\r\n              <RegistrarInfoBasica tipo={tipo} accion={accion} />\r\n              <Box my={2} />\r\n              <Typography>\r\n                <b>Información de credito</b>\r\n              </Typography>\r\n              <Divider />\r\n              <RegistrarInfoCredito\r\n                tipo={tipo}\r\n                accion={accion}\r\n                cliente_base={datos}\r\n              />\r\n            </form>\r\n          </Container>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            type=\"submit\"\r\n            form=\"crear-cliente-form\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_COMPRA = gql`\r\n  mutation crearCompra(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompra(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_COMPRA_ESPERA = gql`\r\n  mutation crearCompraEnEspera(\r\n    $input: CrearCompraInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearCompraEnEspera(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CANCELAR_COMPRA = gql`\r\n  mutation cancelarCompra($empresa: ID!, $sucursal:ID!, $id_compra: ID!, $data_sesion: cancelarCompraInput){\r\n    cancelarCompra(empresa:$empresa, sucursal:$sucursal, id_compra: $id_compra, data_sesion: $data_sesion){\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_REALIZADAS = gql`\r\n  query obtenerComprasRealizadas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $fecha: String\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerComprasRealizadas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      fecha: $fecha\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n      _id\r\n      estatus_credito\r\n      usuario {\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n        estado_usuario\r\n      }\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n      proveedor {\r\n        id_proveedor {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          nombre_cliente\r\n          telefono\r\n          email\r\n        }\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n      }\r\n      productos {\r\n        _id\r\n        id_compra\r\n        id_traspaso\r\n        id_producto\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              unidad_mayoreo\r\n              utilidad\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            _id\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        cantidad_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n      }\r\n      status\r\n      almacen {\r\n        id_almacen {\r\n          _id\r\n          nombre_almacen\r\n          id_usuario_encargado {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n          }\r\n        }\r\n        nombre_almacen\r\n      }\r\n      compra_credito\r\n      credito_pagado\r\n      saldo_credito_pendiente\r\n      fecha_vencimiento_credito\r\n      subtotal\r\n      impuestos\r\n      total\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n      folio\r\n    }\r\n    totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_COMPRAS_ESPERA = gql`\r\n  query obtenerComprasEnEspera($empresa: ID!, $sucursal: ID!, $filtro: String, $limit: Int\r\n    $offset: Int) {\r\n    obtenerComprasEnEspera(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs{\r\n        _id\r\n      en_espera\r\n      proveedor {\r\n        id_proveedor\r\n        clave_cliente\r\n        numero_cliente\r\n        nombre_cliente\r\n      }\r\n      almacen {\r\n        id_almacen\r\n        nombre_almacen\r\n      }\r\n      productos {\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              ieps\r\n              iva\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            granel\r\n          }\r\n          imagenes {\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n          centro_de_costos {\r\n            cuenta\r\n            id_cuenta\r\n            id_subcuenta\r\n            subcuenta\r\n          }\r\n          precio_plazos {\r\n            precio_cajas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_costales {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n            precio_piezas {\r\n              plazo\r\n              unidad\r\n              precio\r\n            }\r\n          }\r\n          empresa\r\n          sucursal\r\n          usuario\r\n          unidades_de_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            unidad\r\n            unidad_principal\r\n            codigo_barras\r\n            id_producto\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          presentaciones {\r\n            _id\r\n            almacen\r\n            cantidad\r\n            cantidad_nueva\r\n            codigo_barras\r\n            color {\r\n              hex\r\n              nombre\r\n              _id\r\n            }\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            existencia\r\n            medida {\r\n              talla\r\n              tipo\r\n              _id\r\n            }\r\n            nombre_comercial\r\n            precio\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        id_producto\r\n        cantidad\r\n        cantidad_regalo\r\n        unidad_regalo\r\n        cantidad_total\r\n        iva_total\r\n        ieps_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        subtotal_descuento\r\n        total_descuento\r\n      }\r\n      impuestos\r\n      subtotal\r\n      total\r\n      fecha_registro\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CONSULTA_GENERAL_PRODUCTO = gql`\r\n  query obtenerConsultaGeneralCompras($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralCompras(empresa: $empresa, sucursal: $sucursal) {\r\n      productos {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            unidad_mayoreo\r\n            utilidad\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n          granel\r\n        }\r\n        imagenes {\r\n          url_imagen\r\n          location_imagen\r\n          key_imagen\r\n          extencion_imagen\r\n        }\r\n        centro_de_costos {\r\n          cuenta\r\n          id_cuenta\r\n          id_subcuenta\r\n          subcuenta\r\n        }\r\n        precio_plazos {\r\n          precio_cajas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_costales {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n          precio_piezas {\r\n            plazo\r\n            unidad\r\n            precio\r\n          }\r\n        }\r\n        unidades_de_venta {\r\n          _id\r\n          precio\r\n          cantidad\r\n          concepto\r\n          unidad\r\n          unidad_principal\r\n          codigo_barras\r\n          id_producto\r\n          empresa\r\n          sucursal\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          descuento_activo\r\n          default\r\n        }\r\n        inventario_general {\r\n          _id\r\n          cantidad_existente\r\n          unidad_inventario\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n        }\r\n        medidas_producto {\r\n          _id\r\n          cantidad\r\n          codigo_barras\r\n          color {\r\n            hex\r\n            nombre\r\n            _id\r\n          }\r\n          existencia\r\n          medida {\r\n            talla\r\n            tipo\r\n            _id\r\n          }\r\n          nombre_comercial\r\n          precio\r\n        }\r\n        medidas_registradas\r\n        empresa\r\n        sucursal\r\n        usuario\r\n      }\r\n      proveedores {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        estado_cliente\r\n        tipo_cliente\r\n        banco\r\n        numero_cuenta\r\n        empresa {\r\n          _id\r\n        }\r\n        sucursal {\r\n          _id\r\n        }\r\n      }\r\n      almacenes {\r\n        _id\r\n        nombre_almacen\r\n        default_almacen\r\n        id_usuario_encargado {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n          email\r\n          imagen\r\n          estado_usuario\r\n        }\r\n        id_sucursal {\r\n          _id\r\n          nombre_sucursal\r\n          usuario_sucursal\r\n        }\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_COMPRA_ESPERA = gql`\r\n  mutation eliminarCompraEnEspera($id: ID!) {\r\n    eliminarCompraEnEspera(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n","import { initial_state_precios } from \"../../../../context/Catalogos/initialStatesProducto\";\r\nimport moment from 'moment';\r\n\r\nexport const initial_state_datosProducto = {\r\n  producto: {},\r\n  costo: 0,\r\n  cantidad: 0,\r\n  cantidad_regalo: 0,\r\n  unidad_regalo: '',\r\n  cantidad_total: 0,\r\n  descuento_porcentaje: 0,\r\n  descuento_precio: 0,\r\n  iva_total: 0,\r\n  ieps_total: 0,\r\n  subtotal: 0,\r\n  impuestos: 0,\r\n  total: 0,\r\n  mantener_precio: true,\r\n  impuestos_descuento: 0,\r\n  subtotal_descuento: 0,\r\n  total_descuento: 0,\r\n};\r\n\r\nexport const initial_state_datosCompra = {\r\n  productos: [],\r\n    proveedor: {},\r\n    en_espera: false,\r\n    fecha_registro: moment().locale(\"es-mx\").format(),\r\n    almacen: {},\r\n    compra_credito: false,\r\n    fecha_vencimiento_credito: moment().locale(\"es-mx\").format(),\r\n    credito_pagado: false,\r\n    saldo_credito_pendiente: 0,\r\n    forma_pago: \"\",\r\n    descuento_aplicado: false,\r\n    descuento: {\r\n      porcentaje: 0,\r\n      cantidad_descontada: 0,\r\n      precio_con_descuento: 0\r\n    },\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n};\r\n\r\nexport const initial_state_precios_venta = [\r\n  {\r\n    numero_precio: 1,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 2,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 3,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 4,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 5,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n  {\r\n    numero_precio: 6,\r\n    utilidad: 0,\r\n    precio_neto: 0,\r\n    unidad_mayoreo: 0,\r\n    precio_venta: 0,\r\n    iva_precio: 0,\r\n    ieps_precio: 0,\r\n  },\r\n];\r\n\r\nexport const initial_state_productoOriginal = {\r\n  precios: initial_state_precios,\r\n};\r\nexport const initial_state_productosCompra = [];\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Grid,\r\n  IconButton,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport { AlmacenProvider } from \"../../../../../context/Almacenes/crearAlmacen\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport RegistroProvedor from \"../../../Catalogos/Cliente/CrearCliente\";\r\nimport RegistroAlmacen from \"../../../Almacenes/RegistroAlmacen/ContainerRegistroAlmacen\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CONSULTA_GENERAL_PRODUCTO } from \"../../../../../gql/Compras/compras\";\r\nimport { ErrorOutline } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\nimport moment from \"moment\";\r\n\r\nexport default function DatosProveedorAlmacen({ getProductos, status }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosCompra,\r\n    setDatosCompra,\r\n    setDatosProducto,\r\n    productosCompra,\r\n  } = useContext(ComprasContext);\r\n\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_CONSULTA_GENERAL_PRODUCTO,\r\n    {\r\n      variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n    }\r\n  );\r\n\r\n  const obtenerProveedorAlmacen = (tipo, value) => {\r\n    if (!value) {\r\n      setDatosCompra({ ...datosCompra, [tipo]: {} });\r\n      return;\r\n    }\r\n    if (tipo === \"proveedor\") {\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        proveedor: {\r\n          id_proveedor: value._id,\r\n          nombre_cliente: value.nombre_cliente,\r\n          numero_cliente: value.numero_cliente,\r\n          clave_cliente: value.clave_cliente,\r\n        },\r\n      });\r\n    } else {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      resetInitialStates();\r\n      setDatosCompra({\r\n        ...datosCompra,\r\n        almacen: {\r\n          id_almacen: value._id,\r\n          nombre_almacen: value.nombre_almacen,\r\n          default_almacen: value.default_almacen,\r\n        },\r\n      });\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: value._id,\r\n        almacen: value.nombre_almacen,\r\n        default_almacen: value.default_almacen,\r\n      });\r\n      getProductos(value._id);\r\n    }\r\n  };\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n\r\n  const errorRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          value=\"Error\"\r\n          error\r\n          disabled\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <ErrorOutline fontSize=\"default\" />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  const loadingRender = (\r\n    <Grid item xs={12} md={4}>\r\n      <Box display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          size=\"small\"\r\n          fullWidth\r\n          disabled\r\n          value=\"Cargando...\"\r\n          variant=\"outlined\"\r\n        />\r\n        <IconButton disabled>\r\n          <CircularProgress size={24} />\r\n        </IconButton>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        {loadingRender}\r\n        {loadingRender}\r\n        {loadingRender}\r\n      </Grid>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <Grid container spacing={2} alignItems=\"center\">\r\n          {errorRender}\r\n          {errorRender}\r\n          {errorRender}\r\n        </Grid>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  const { almacenes, proveedores } = data.obtenerConsultaGeneralCompras;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-proveedor\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={proveedores}\r\n              getOptionLabel={(option) => option.nombre_cliente}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Proveedor\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) =>\r\n                obtenerProveedorAlmacen(\"proveedor\", value)\r\n              }\r\n              getOptionSelected={(option) => option.nombre_cliente}\r\n              value={\r\n                datosCompra.proveedor.nombre_cliente\r\n                  ? datosCompra.proveedor\r\n                  : null\r\n              }\r\n            />\r\n            <RegistroProvedor\r\n              accion=\"registrar\"\r\n              tipo=\"PROVEEDOR\"\r\n              refetch={refetch}\r\n              fromCompras={true}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Autocomplete\r\n              disabled={productosCompra.length > 0}\r\n              id=\"combo-box-almacen\"\r\n              size=\"small\"\r\n              fullWidth\r\n              options={almacenes}\r\n              getOptionLabel={(option) => option.nombre_almacen}\r\n              renderInput={(params) => (\r\n                <TextField {...params} label=\"Almacen\" variant=\"outlined\" />\r\n              )}\r\n              onChange={(_, value) => obtenerProveedorAlmacen(\"almacen\", value)}\r\n              getOptionSelected={(option) => option.nombre_almacen}\r\n              value={\r\n                datosCompra.almacen.nombre_almacen ? datosCompra.almacen : null\r\n              }\r\n            />\r\n            <AlmacenProvider>\r\n              <RegistroAlmacen accion=\"registrar\" fromEmergent={true} refetch={refetch} />\r\n            </AlmacenProvider>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item xs={12} md={4}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => {\r\n                setDatosCompra({\r\n                  ...datosCompra,\r\n                  fecha_registro: e.target.value,\r\n                });\r\n              }}\r\n              InputProps={{\r\n                inputProps: {\r\n                  max: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n                },\r\n              }}\r\n              value={datosCompra.fecha_registro}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { Grid, Typography } from \"@material-ui/core\";\r\nimport React, { useContext } from \"react\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\n\r\nexport default function MostrarPrecios() {\r\n  const { datosProducto } = useContext(ComprasContext);\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      <Grid item>\r\n        <Typography style={{ fontSize: 16 }}>Subtotal:</Typography>\r\n        <Typography style={{ fontSize: 18 }}>\r\n          <b>${formatoMexico(datosProducto.subtotal_descuento)}</b>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <Typography style={{ fontSize: 16 }}>Impuestos:</Typography>\r\n        <Typography style={{ fontSize: 18 }}>\r\n          <b>${formatoMexico(datosProducto.impuestos_descuento)}</b>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <Typography style={{ fontSize: 16 }}>Descuento:</Typography>\r\n        <Typography style={{ fontSize: 18 }}>\r\n          <b>{datosProducto.descuento_porcentaje}%</b>\r\n        </Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <Typography style={{ fontSize: 16 }}>Total:</Typography>\r\n        <Typography style={{ fontSize: 18 }}>\r\n          <b>\r\n            $\r\n            {formatoMexico(\r\n              datosProducto.total_descuento\r\n            )}\r\n          </b>\r\n        </Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","export const calculos_precios = ({\r\n  productoOriginal,\r\n  porcentaje,\r\n  cantidad,\r\n  costo,\r\n}) => {\r\n  const { iva, ieps, precio_de_compra } = productoOriginal.precios;\r\n  const { /* precio_sin_impuesto, */ precio_con_impuesto } = precio_de_compra;\r\n\r\n  let total_impuesto = 0;\r\n  let precio_sin_impuesto = 0;\r\n\r\n  total_impuesto =\r\n    parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva) +\r\n    parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n  precio_sin_impuesto = precio_con_impuesto / parseFloat(total_impuesto + 1);\r\n  let iva_precio_actual =\r\n    precio_sin_impuesto * parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n  let ieps_precio_actual =\r\n    precio_sin_impuesto * parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n\r\n  const impuesto_actual = iva_precio_actual + ieps_precio_actual;\r\n  const PCSI_actual = costo - impuesto_actual;\r\n  const PCSI_ACTUAL_TOTAL = PCSI_actual * cantidad;\r\n\r\n  let cantidad_descontada = Math.round((PCSI_ACTUAL_TOTAL * porcentaje) / 100);\r\n  let subtotal_con_descuento = PCSI_ACTUAL_TOTAL - cantidad_descontada;\r\n\r\n  const iva_precio =\r\n    parseFloat(subtotal_con_descuento) *\r\n    parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n  const ieps_precio =\r\n    parseFloat(subtotal_con_descuento) *\r\n    parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n  const impuestos = iva_precio + ieps_precio;\r\n\r\n  let total = subtotal_con_descuento + impuestos;\r\n  return {\r\n    result: {\r\n      iva_precio,\r\n      ieps_precio,\r\n      impuestos,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      subtotal_con_descuento,\r\n      total,\r\n    },\r\n    anterior: {\r\n      impuesto_actual,\r\n      precio_sin_impuesto,\r\n      precio_con_impuesto,\r\n      cantidad,\r\n      iva_precio_actual,\r\n      ieps_precio_actual,\r\n    },\r\n  };\r\n};\r\n","import React, {\r\n  Fragment,\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n} from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n\r\nimport PreciosProductos from \"./PreciosProductos\";\r\nimport TallasProductos from \"./TallasProducto\";\r\nimport Add from \"@material-ui/icons/Add\";\r\n\r\nimport {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport CrearProducto, {\r\n  initial_state_preciosP,\r\n} from \"../../../Catalogos/Producto/crearProducto\";\r\nimport { ComprasContext } from \"../../../../../context/Compras/comprasContext\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../../gql/Catalogos/productos\";\r\nimport PreciosDeVentaCompras from \"./PreciosVenta\";\r\nimport { validateJsonEdit } from \"../../../Catalogos/Producto/validateDatos\";\r\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\r\nimport { InfoOutlined } from \"@material-ui/icons\";\r\nimport DescuentosInputs from \"./Descuentos\";\r\nimport DatosProveedorAlmacen from \"./DatosProveedorAlmacen\";\r\nimport { initial_state_datosProducto } from \"../initial_states\";\r\nimport MostrarPrecios from \"./mostrar_precios\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport { calculos_precios } from \"./calculos_compra\";\r\n\r\nexport default function DatosProducto({ status }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    datosProducto,\r\n    setDatosProducto,\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    productoOriginal,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    setDatosCompra,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setEditFinish,\r\n    costo,\r\n    setCosto,\r\n    cantidad,\r\n    setCantidad,\r\n    loadingProductos,\r\n    setLoadingProductos,\r\n  } = useContext(ComprasContext);\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    setValidacion,\r\n    preciosP,\r\n    setPreciosP,\r\n    imagenes,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    centro_de_costos,\r\n    setCentroDeCostos,\r\n    preciosPlazos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    imagenes_eliminadas,\r\n    setImagenesEliminadas,\r\n    presentaciones,\r\n    setPresentaciones,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n    setAlmacenExistente,\r\n  } = useContext(RegProductoContext);\r\n  const [verificate, setVerificate] = useState(false);\r\n\r\n  let count = 0;\r\n  if (status === \"enEspera\" && datosCompra) count = 1;\r\n\r\n  const [cargando, setCargando] = useState(false);\r\n  const [pageLoaded, setPageLoaded] = useState(false);\r\n  const [page, setPage] = useState(0);\r\n  const [textValue, setTextValue] = useState(\"\");\r\n  const client = useApolloClient();\r\n  const [dataDocs, setDataDocs] = useState([]);\r\n  const [totalDocs, setTotalDocs] = useState(0);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const limit = 15;\r\n\r\n  /* Queries */\r\n  const getProductos = async (id_almacen, filtro = \"\", page = 0) => {\r\n    setPageLoaded(true);\r\n    try {\r\n      let almacen = id_almacen ? id_almacen : datosCompra.almacen._id;\r\n      setLoadingProductos(true);\r\n      const response = await client.query({\r\n        query: OBTENER_PRODUCTOS,\r\n        variables: {\r\n          almacen,\r\n          filtro,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          limit,\r\n          offset: page,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoadingProductos(false);\r\n      if (response.data) {\r\n        setDataDocs(\r\n          filtro\r\n            ? response.data.obtenerProductos.docs\r\n            : [...dataDocs, ...response.data.obtenerProductos.docs]\r\n        );\r\n        setTotalDocs(response.data.obtenerProductos.totalDocs);\r\n      }\r\n    } catch (error) {\r\n      setLoadingProductos(false);\r\n      setAlert({\r\n        message: \"Hubo un error al cargar los productos\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const [COSTO] = useDebounce(costo, 500);\r\n  const [CANTIDAD] = useDebounce(cantidad, 500);\r\n  const [VALUE] = useDebounce(textValue, 500);\r\n\r\n  /* useEffect(() => {\r\n    if (loadingProductos) {\r\n      setLoadingProductos(true);\r\n    } else {\r\n      setLoadingProductos(false);\r\n    }\r\n  }, [loadingProductos]); */\r\n\r\n  useEffect(() => {\r\n    if (dataDocs) obtenerCosto(COSTO);\r\n  }, [COSTO]);\r\n\r\n  useEffect(() => {\r\n    if (dataDocs) {\r\n      obtenerCantidad(CANTIDAD);\r\n    }\r\n  }, [CANTIDAD]);\r\n\r\n  useEffect(() => {\r\n    if (presentaciones.length > 0) {\r\n      let cantida_suma = 0;\r\n      let cantidad_total = 0;\r\n      presentaciones.forEach((presentacion) => {\r\n        const { cantidad_nueva } = presentacion;\r\n        let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n        cantida_suma += nueva;\r\n        if (isNaN(cantida_suma)) cantidad_total = 0;\r\n        cantidad_total = cantida_suma;\r\n      });\r\n      if (cantidad_total) {\r\n        obtenerCantidad(cantidad_total);\r\n      }\r\n    }\r\n  }, [presentaciones]);\r\n\r\n  useEffect(() => {\r\n    if (count === 1) {\r\n      getProductos(datosCompra.almacen._id);\r\n    }\r\n  }, [count]);\r\n\r\n  useEffect(() => {\r\n    if (pageLoaded) {\r\n      getProductos(datosCompra.almacen._id, VALUE);\r\n    }\r\n  }, [VALUE]);\r\n\r\n  const obtenerSelectsProducto = (producto) => {\r\n    if (!producto) {\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      resetInitialStates();\r\n      getProductos(datosCompra.almacen._id);\r\n      return;\r\n    }\r\n\r\n    const {\r\n      ieps,\r\n      iva,\r\n      precio_con_impuesto,\r\n      precio_sin_impuesto,\r\n    } = producto.precios.precio_de_compra;\r\n\r\n    const impuestos = iva + ieps;\r\n\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      producto,\r\n      id_producto: producto._id,\r\n      costo: precio_con_impuesto,\r\n      cantidad: producto.datos_generales.tipo_producto === \"OTROS\" ? 1 : 0,\r\n      unidad_regalo: producto.precios.unidad_de_compra.unidad,\r\n      descuento_porcentaje: 0,\r\n      descuento_precio: 0,\r\n      subtotal: precio_sin_impuesto,\r\n      impuestos: parseFloat(impuestos.toFixed(2)),\r\n      total: precio_con_impuesto,\r\n      subtotal_descuento: precio_sin_impuesto,\r\n      total_descuento: precio_con_impuesto,\r\n    });\r\n    setInitialStates(producto);\r\n    setCosto(precio_con_impuesto);\r\n    setCantidad(producto.datos_generales.tipo_producto === \"OTROS\" ? 1 : 0);\r\n    setProductoOriginal(producto);\r\n    setPreciosVenta(producto.precios.precios_producto);\r\n  };\r\n\r\n  function obtenerCantidad(value) {\r\n    const resultado = calculos_precios({\r\n      productoOriginal,\r\n      porcentaje: datosProducto.descuento_porcentaje,\r\n      cantidad: value,\r\n      costo: datosProducto.costo,\r\n    });\r\n    const { result, anterior } = resultado;\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad: \"\",\r\n        impuestos_descuento: anterior.impuesto_actual * anterior.cantidad,\r\n        subtotal_descuento: anterior.precio_sin_impuesto * anterior.cantidad,\r\n        total_descuento: anterior.precio_con_impuesto * anterior.cantidad,\r\n        iva_total: anterior.iva_precio_actual * anterior.cantidad,\r\n        ieps_total: anterior.ieps_precio_actual * anterior.cantidad,\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad: parseFloat(value),\r\n      iva_total: parseFloat(result.iva_precio.toFixed(2)),\r\n      ieps_total: parseFloat(result.ieps_precio.toFixed(2)),\r\n      impuestos_descuento: parseFloat(result.impuestos.toFixed(2)),\r\n      descuento_porcentaje: result.porcentaje\r\n        ? parseFloat(result.porcentaje)\r\n        : 0,\r\n      descuento_precio: result.cantidad_descontada\r\n        ? parseFloat(result.cantidad_descontada.toFixed(2))\r\n        : 0,\r\n      subtotal_descuento: parseFloat(result.subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(result.total.toFixed(2)),\r\n    });\r\n  }\r\n\r\n  const obtenerCantidadRegalo = (value) => {\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        cantidad_regalo: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      cantidad_regalo: parseFloat(value),\r\n    });\r\n  };\r\n\r\n  const obtenerUnidadRegalo = (e) => {\r\n    const { value, name } = e.target;\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  function obtenerCosto(value) {\r\n    /* const { name, value } = e.target; */\r\n    const resultado = calculos_precios({\r\n      productoOriginal,\r\n      porcentaje: datosProducto.descuento_porcentaje,\r\n      cantidad: datosProducto.cantidad,\r\n      costo: parseFloat(value),\r\n    });\r\n    const { result, anterior } = resultado;\r\n    if (!value) {\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        costo: 0,\r\n        impuestos_descuento: anterior.impuesto_actual * anterior.cantidad,\r\n        subtotal_descuento: anterior.precio_sin_impuesto * anterior.cantidad,\r\n        total_descuento: anterior.precio_con_impuesto * anterior.cantidad,\r\n        iva_total: anterior.iva_precio_actual * anterior.cantidad,\r\n        ieps_total: anterior.ieps_precio_actual * anterior.cantidad,\r\n      });\r\n      return;\r\n    }\r\n\r\n    /* const { iva, ieps, precio_de_compra } = datosProducto.producto.precios;\r\n    const iva_precio = precio_de_compra.iva;\r\n    const ieps_precio = precio_de_compra.ieps; \r\n\r\n    let precio_neto = parseFloat(value);\r\n    let subtotal = 0;\r\n    let total = 0;\r\n    let cantidad_descontada = 0;\r\n    let impuesto_actual = iva_precio + ieps_precio;\r\n\r\n    let precio_sin_impuesto = precio_neto - impuesto_actual;\r\n    let nuevo_iva =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n    let nuevo_ieps =\r\n      parseFloat(precio_sin_impuesto) *\r\n      parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n    let nuevo_impuesto = nuevo_ieps + nuevo_iva;\r\n\r\n    if (datosProducto.descuento_porcentaje > 0) {\r\n      cantidad_descontada = Math.round(\r\n        (precio_sin_impuesto * datosProducto.descuento_porcentaje) / 100\r\n      );\r\n      subtotal = precio_sin_impuesto - cantidad_descontada;\r\n      total = subtotal + nuevo_impuesto;\r\n\r\n      setDatosProducto({\r\n        ...datosProducto,\r\n        impuestos_descuento: parseFloat(nuevo_impuesto.toFixed(2)),\r\n        costo: parseFloat(precio_neto),\r\n        descuento_precio: parseFloat(cantidad_descontada),\r\n        subtotal_descuento: parseFloat(subtotal),\r\n        total_descuento: parseFloat(total),\r\n      });\r\n      return;\r\n    }*/\r\n    setDatosProducto({\r\n      ...datosProducto,\r\n      /* impuestos_descuento: parseFloat(nuevo_impuesto.toFixed(2)), */\r\n      costo: parseFloat(value),\r\n      iva_total: parseFloat(result.iva_precio.toFixed(2)),\r\n      ieps_total: parseFloat(result.ieps_precio.toFixed(2)),\r\n      /* subtotal_descuento: parseFloat(precio_sin_impuesto), */\r\n      /*  total_descuento: parseFloat(precio_sin_impuesto + nuevo_impuesto), */\r\n\r\n      impuestos_descuento: parseFloat(result.impuestos.toFixed(2)),\r\n      descuento_porcentaje: result.porcentaje\r\n        ? parseFloat(result.porcentaje.toFixed(2))\r\n        : 0,\r\n      descuento_precio: result.cantidad_descontada\r\n        ? parseFloat(result.cantidad_descontada.toFixed(2))\r\n        : 0,\r\n      subtotal_descuento: parseFloat(result.subtotal_con_descuento.toFixed(2)),\r\n      total_descuento: parseFloat(result.total.toFixed(2)),\r\n    });\r\n  }\r\n\r\n  const agregarCompra = async (actualizar_Precios) => {\r\n    let copy_datosCompra = { ...datosCompra };\r\n    let copy_datosProducto = { ...datosProducto };\r\n    let copy_datosGenerales = { ...datos_generales };\r\n    let copy_presentaciones = [...presentaciones];\r\n    let copy_precios = { ...precios };\r\n    let copy_preciosP = [...preciosP];\r\n    let copy_almacenInicial = { ...almacen_inicial };\r\n    let copy_centroCostos = { ...centro_de_costos };\r\n    let copy_presentacionesEliminadas = [...presentaciones_eliminadas];\r\n    let copy_precioPlazos = { ...preciosPlazos };\r\n\r\n    /* Validaciones */\r\n    setCargando(true);\r\n    if (\r\n      !copy_datosProducto.producto.datos_generales ||\r\n      !copy_datosCompra.proveedor.nombre_cliente ||\r\n      !copy_datosCompra.almacen.nombre_almacen\r\n    ) {\r\n      setCargando(false);\r\n      return;\r\n    }\r\n\r\n    if (copy_datosGenerales.tipo_producto !== \"OTROS\") {\r\n      if (copy_presentaciones.length > 0) {\r\n        const pres = copy_presentaciones.filter(\r\n          (res) => res.color._id && res.medida._id && res.existencia\r\n        );\r\n        if (pres.length !== copy_presentaciones.length) {\r\n          setVerificate(true);\r\n          setCargando(false);\r\n          return;\r\n        }\r\n      } else {\r\n        setVerificate(true);\r\n        setCargando(false);\r\n        return;\r\n      }\r\n    }\r\n\r\n    let copy_unidadesVenta = [\r\n      { ...unidadVentaXDefecto },\r\n      { ...unidadVentaSecundaria },\r\n    ];\r\n\r\n    if (actualizar_Precios) {\r\n      copy_datosProducto.mantener_precio = false;\r\n    } else {\r\n      copy_datosProducto.mantener_precio = true;\r\n    }\r\n    copy_precios.precios_producto = copy_preciosP;\r\n\r\n    let producto = {\r\n      datos_generales: await validateJsonEdit(\r\n        copy_datosGenerales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios: copy_precios,\r\n      imagenes,\r\n      imagenes_eliminadas,\r\n      almacen_inicial: copy_almacenInicial,\r\n      centro_de_costos: copy_centroCostos,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones: copy_presentaciones,\r\n      presentaciones_eliminadas: copy_presentacionesEliminadas,\r\n      precio_plazos: copy_precioPlazos,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    copy_datosProducto.producto = producto;\r\n\r\n    if (copy_datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n      //si son medidas sumas las cantidades de las presetnaciones\r\n      /* if (copy_datosProducto.producto.presentaciones.length > 0) {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n          const { cantidad, cantidad_nueva } = presentacion;\r\n          let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n          copy_datosProducto.cantidad += nueva;\r\n        });\r\n        if (isNaN(copy_datosProducto.cantidad)) copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      } else {\r\n        copy_datosProducto.cantidad = 0;\r\n        copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n      }\r\n      if (copy_datosProducto.cantidad === 0 || !copy_datosProducto.cantidad) {\r\n        setVerificate(true);\r\n        setCargando(false);\r\n        return;\r\n      } */\r\n      copy_datosProducto.cantidad_total = copy_datosProducto.cantidad;\r\n    } else {\r\n      //Si hay cantidad regalo y es diferente unidad hacer las converciones\r\n      const { cantidad_regalo, cantidad, unidad_regalo } = copy_datosProducto;\r\n      //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n      const factor =\r\n        copy_datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n      const cantiad_media = cantidad * factor;\r\n      let cantidad_regalo_media =\r\n        unidad_regalo === \"Pz\" ||\r\n        unidad_regalo === \"Kg\" ||\r\n        unidad_regalo === \"Lt\"\r\n          ? cantidad_regalo\r\n          : cantidad_regalo * factor;\r\n      let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n      //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n      if (factor > 1) {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media / factor;\r\n      } else {\r\n        copy_datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n        copy_datosProducto.cantidad_total = cantidad_total_media;\r\n      }\r\n    }\r\n    copy_datosProducto.impuestos = copy_datosProducto.impuestos_descuento;\r\n    copy_datosProducto.subtotal = copy_datosProducto.subtotal_descuento;\r\n    copy_datosProducto.total = copy_datosProducto.total_descuento;\r\n\r\n    if (isEditing.producto) {\r\n      //se tiene que actualizar el producto en la fila y sumar el subtotal\r\n      let productosCompra_ordenados = [...productosCompra];\r\n      //calculos de totales, subtotales e impuestos de compra general\r\n      /* const {\r\n        iva,\r\n        ieps,\r\n      } = copy_datosProducto.producto.precios.precio_de_compra; */\r\n\r\n      //restar datos anteriores\r\n      copy_datosCompra.impuestos -= isEditing.producto.impuestos;\r\n      copy_datosCompra.subtotal -= isEditing.producto.subtotal;\r\n      copy_datosCompra.total -= isEditing.producto.total;\r\n\r\n      /* copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.ieps_total = ieps * copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.subtotal =\r\n        copy_datosProducto.subtotal_descuento *\r\n        copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.impuestos =\r\n        copy_datosProducto.impuestos_descuento *\r\n        copy_datosProducto.cantidad_total;\r\n      copy_datosProducto.total =\r\n        copy_datosProducto.total_descuento * copy_datosProducto.cantidad_total; */\r\n\r\n      let subtotal = parseFloat(\r\n        (copy_datosCompra.subtotal += copy_datosProducto.subtotal).toFixed(2)\r\n      );\r\n      let impuestos = parseFloat(\r\n        (copy_datosCompra.impuestos += copy_datosProducto.impuestos)\r\n      );\r\n      let total = parseFloat(\r\n        (copy_datosCompra.total += copy_datosProducto.total).toFixed(2)\r\n      );\r\n\r\n      productosCompra_ordenados.splice(isEditing.index, 1, copy_datosProducto);\r\n\r\n      setProductosCompra(productosCompra_ordenados);\r\n      setDatosCompra({\r\n        ...copy_datosCompra,\r\n        subtotal,\r\n        impuestos,\r\n        total,\r\n      });\r\n      setIsEditing({});\r\n      setEditFinish(!editFinish);\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    } else {\r\n      // se agregar el producto normal y verificar si ya esta el producto en la lista\r\n      const existente = productosCompra\r\n        .map((prod_exist, index) => {\r\n          if (prod_exist.id_producto === copy_datosProducto.id_producto) {\r\n            return { prod_exist, index };\r\n          } else {\r\n            return \"\";\r\n          }\r\n        })\r\n        .filter(Boolean);\r\n\r\n      if (existente.length > 0) {\r\n        let productosCompra_ordenados = [...productosCompra];\r\n        const { index, prod_exist } = existente[0];\r\n        /* const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra; */\r\n\r\n        copy_datosCompra.subtotal -= prod_exist.subtotal;\r\n        copy_datosCompra.impuestos -= prod_exist.impuestos;\r\n        copy_datosCompra.total -= prod_exist.total;\r\n\r\n        /* copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total; */\r\n\r\n        let subtotal = parseFloat(\r\n          (copy_datosCompra.subtotal += copy_datosProducto.subtotal).toFixed(2)\r\n        );\r\n        let impuestos = parseFloat(\r\n          (copy_datosCompra.impuestos += copy_datosProducto.impuestos).toFixed(\r\n            2\r\n          )\r\n        );\r\n        let total = parseFloat(\r\n          (copy_datosCompra.total += copy_datosProducto.total).toFixed(2)\r\n        );\r\n\r\n        productosCompra_ordenados.splice(index, 1, copy_datosProducto);\r\n        setProductosCompra(productosCompra_ordenados);\r\n        setDatosCompra({\r\n          ...copy_datosCompra,\r\n          subtotal,\r\n          impuestos,\r\n          total,\r\n        });\r\n      } else {\r\n        let array_ordenado = [...productosCompra];\r\n        /* const {\r\n          iva,\r\n          ieps,\r\n        } = copy_datosProducto.producto.precios.precio_de_compra; */\r\n\r\n        /* copy_datosProducto.iva_total = iva * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.ieps_total =\r\n          ieps * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.subtotal =\r\n          copy_datosProducto.subtotal * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.impuestos =\r\n          copy_datosProducto.impuestos * copy_datosProducto.cantidad_total;\r\n        copy_datosProducto.total =\r\n          copy_datosProducto.total * copy_datosProducto.cantidad_total; */\r\n\r\n        let subtotal = parseFloat(\r\n          (copy_datosCompra.subtotal += copy_datosProducto.subtotal).toFixed(2)\r\n        );\r\n        let impuestos = parseFloat(\r\n          (copy_datosCompra.impuestos += copy_datosProducto.impuestos).toFixed(\r\n            2\r\n          )\r\n        );\r\n        let total = parseFloat(\r\n          (copy_datosCompra.total += copy_datosProducto.total).toFixed(2)\r\n        );\r\n\r\n        array_ordenado.splice(0, 0, copy_datosProducto);\r\n        setProductosCompra(array_ordenado);\r\n        setDatosCompra({\r\n          ...copy_datosCompra,\r\n          subtotal,\r\n          impuestos,\r\n          total,\r\n        });\r\n      }\r\n      setProductoOriginal({ precios: initial_state_precios });\r\n      setDatosProducto(initial_state_datosProducto);\r\n      setCosto(0);\r\n      setCantidad(0);\r\n      setCargando(false);\r\n    }\r\n  };\r\n\r\n  /* SET STATES WHEN UPDATING */\r\n  const setInitialStates = (producto) => {\r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.medidas_producto ? producto.medidas_producto : []\r\n    );\r\n    if (\r\n      datosCompra.almacen.id_almacen &&\r\n      producto.medidas_producto.length === 0\r\n    ) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n\r\n    if (producto.inventario_general.length > 0) {\r\n      setAlmacenExistente(true);\r\n    } else {\r\n      setAlmacenExistente(false);\r\n    }\r\n  };\r\n\r\n  /* ###### RESET STATES ###### */\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  };\r\n  const loadMoreItems = (e) => {\r\n    const { scrollHeight, scrollTop, clientHeight } = e.target;\r\n    if (scrollHeight - parseInt(scrollTop + 1) === clientHeight) {\r\n      if (dataDocs.length < totalDocs) {\r\n        let newPage = page + 1;\r\n        setPage(newPage);\r\n        getProductos(datosCompra.almacen._id, \"\", newPage);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <DatosProveedorAlmacen status={status} getProductos={getProductos} />\r\n      <Box my={1} />\r\n      <Grid container spacing={1} alignItems=\"center\">\r\n        <Grid item>\r\n          <Typography>Código de barras</Typography>\r\n          <Box width={200}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-codigo\"\r\n              size=\"small\"\r\n              fullWidth\r\n              loading={loadingProductos}\r\n              options={dataDocs}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.codigo_barras\r\n                  ? option.datos_generales.codigo_barras\r\n                  : \"N/A\"\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField\r\n                  {...params}\r\n                  variant=\"outlined\"\r\n                  onChange={(e) => setTextValue(e.target.value)}\r\n                  InputProps={{\r\n                    ...params.InputProps,\r\n                    endAdornment: (\r\n                      <React.Fragment>\r\n                        {loadingProductos ? (\r\n                          <CircularProgress color=\"primary\" size={20} />\r\n                        ) : null}\r\n                        {params.InputProps.endAdornment}\r\n                      </React.Fragment>\r\n                    ),\r\n                  }}\r\n                />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor ||\r\n                loadingProductos\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Producto</Typography>\r\n          <Box display=\"flex\" width={250} alignItems=\"center\">\r\n            <Autocomplete\r\n              id=\"combo-box-producto-nombre\"\r\n              size=\"small\"\r\n              fullWidth\r\n              loading={loadingProductos}\r\n              options={dataDocs}\r\n              getOptionLabel={(option) =>\r\n                option.datos_generales.nombre_comercial\r\n              }\r\n              renderInput={(params) => (\r\n                <TextField\r\n                  {...params}\r\n                  onChange={(e) => setTextValue(e.target.value)}\r\n                  variant=\"outlined\"\r\n                  InputProps={{\r\n                    ...params.InputProps,\r\n                    endAdornment: (\r\n                      <React.Fragment>\r\n                        {loadingProductos ? (\r\n                          <CircularProgress color=\"primary\" size={20} />\r\n                        ) : null}\r\n                        {params.InputProps.endAdornment}\r\n                      </React.Fragment>\r\n                    ),\r\n                  }}\r\n                />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              ListboxProps={{\r\n                styles: {\r\n                  height: 300,\r\n                },\r\n                onScroll: loadMoreItems,\r\n              }}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor ||\r\n                loadingProductos\r\n              }\r\n            />\r\n            {!datosCompra.almacen.id_almacen ||\r\n            !datosCompra.proveedor.id_proveedor ? (\r\n              <IconButton disabled>\r\n                <Add />\r\n              </IconButton>\r\n            ) : (\r\n              <CrearProducto\r\n                accion={false}\r\n                /* productosRefetch={refetch} */\r\n                getProductos={getProductos}\r\n                fromCompra={true}\r\n              />\r\n            )}\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Clave</Typography>\r\n          <Box width={140}>\r\n            <Autocomplete\r\n              id=\"combo-box-producto-clave\"\r\n              size=\"small\"\r\n              fullWidth\r\n              loading={loadingProductos}\r\n              options={dataDocs}\r\n              getOptionLabel={(option) => option.datos_generales.clave_alterna}\r\n              renderInput={(params) => (\r\n                <TextField\r\n                  {...params}\r\n                  variant=\"outlined\"\r\n                  onChange={(e) => setTextValue(e.target.value)}\r\n                  InputProps={{\r\n                    ...params.InputProps,\r\n                    endAdornment: (\r\n                      <React.Fragment>\r\n                        {loadingProductos ? (\r\n                          <CircularProgress color=\"primary\" size={20} />\r\n                        ) : null}\r\n                        {params.InputProps.endAdornment}\r\n                      </React.Fragment>\r\n                    ),\r\n                  }}\r\n                />\r\n              )}\r\n              onChange={(_, value) => obtenerSelectsProducto(value)}\r\n              getOptionSelected={(option, value) => option._id === value._id}\r\n              value={\r\n                datosProducto.producto.datos_generales\r\n                  ? datosProducto.producto\r\n                  : null\r\n              }\r\n              disabled={\r\n                !datosCompra.almacen.id_almacen ||\r\n                !datosCompra.proveedor.id_proveedor ||\r\n                loadingProductos\r\n              }\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography>Costo</Typography>\r\n          <Box width={100}>\r\n            <TextField\r\n              inputMode=\"decimal\"\r\n              name=\"costo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              disabled={!datosProducto.producto.datos_generales}\r\n              value={costo}\r\n              onChange={(e) => setCosto(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        {datosProducto.producto.datos_generales &&\r\n        datosProducto.producto.datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <Fragment>\r\n            <Grid item>\r\n              <Typography>Unidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  aria-readonly=\"true\"\r\n                  value={datosProducto.producto.precios.unidad_de_compra.unidad}\r\n                  disabled\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cantidad</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  type=\"number\"\r\n                  InputProps={{\r\n                    inputProps: { min: 1 },\r\n                  }}\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={cantidad}\r\n                  onChange={(e) => setCantidad(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Cant. regalo</Typography>\r\n              <Box width={100}>\r\n                <TextField\r\n                  name=\"cantidad_regalo\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  inputMode=\"numeric\"\r\n                  disabled={!datosProducto.producto.datos_generales}\r\n                  value={datosProducto.cantidad_regalo}\r\n                  onChange={(e) => obtenerCantidadRegalo(e.target.value)}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography>Unidad. regalo</Typography>\r\n              <Box width={100}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  name=\"unidad_regalo\"\r\n                  fullWidth\r\n                >\r\n                  {datosProducto.producto.precios.granel ? (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Kg\">Kg</MenuItem>\r\n                      <MenuItem value=\"Costal\">Costal</MenuItem>\r\n                      <MenuItem value=\"Lt\">Lt</MenuItem>\r\n                    </Select>\r\n                  ) : (\r\n                    <Select\r\n                      id=\"select-unidad-regalo\"\r\n                      disabled={!datosProducto.producto.datos_generales}\r\n                      name=\"unidad_regalo\"\r\n                      value={datosProducto.unidad_regalo}\r\n                      onChange={obtenerUnidadRegalo}\r\n                    >\r\n                      <MenuItem value=\"Caja\">Caja</MenuItem>\r\n                      <MenuItem value=\"Pz\">Pz</MenuItem>\r\n                    </Select>\r\n                  )}\r\n                </FormControl>\r\n              </Box>\r\n            </Grid>\r\n          </Fragment>\r\n        ) : (\r\n          <Grid item>\r\n            <Typography>Cantidad total</Typography>\r\n            <Box width={110}>\r\n              <TextField\r\n                name=\"cantidad\"\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                fullWidth\r\n                type=\"number\"\r\n                disabled\r\n                value={datosProducto.cantidad}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        )}\r\n\r\n        <Grid item>\r\n          <Typography>Descuento</Typography>\r\n          <DescuentosInputs />\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={1}>\r\n        <Grid container>\r\n          <Grid item xs={12} md={7} padding=\"checkbox\">\r\n            <PreciosDeVentaCompras />\r\n          </Grid>\r\n          <Grid\r\n            item\r\n            xs={12}\r\n            md={5}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              flexDirection: \"column\",\r\n            }}\r\n          >\r\n            <Box m={1}>\r\n              <MostrarPrecios />\r\n            </Box>\r\n            <Box display=\"flex\">\r\n              {datosProducto.producto.datos_generales &&\r\n              datosProducto.producto.datos_generales.tipo_producto !==\r\n                \"OTROS\" ? (\r\n                <TallasProductos\r\n                  verificate={verificate}\r\n                  setVerificate={setVerificate}\r\n                />\r\n              ) : null}\r\n\r\n              <Box mx={1} />\r\n              {datosProducto.costo !==\r\n              productoOriginal.precios.precio_de_compra.precio_con_impuesto ? (\r\n                <ModalAgregarCompra\r\n                  agregarCompra={agregarCompra}\r\n                  cargando={cargando}\r\n                />\r\n              ) : (\r\n                <Button\r\n                  style={\r\n                    loadingProductos\r\n                      ? {\r\n                          pointerEvents: \"none\",\r\n                          opacity: 0.4,\r\n                        }\r\n                      : null\r\n                  }\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={\r\n                    cargando ? (\r\n                      <CircularProgress color=\"inherit\" size={20} />\r\n                    ) : (\r\n                      <Add />\r\n                    )\r\n                  }\r\n                  disableElevation\r\n                  disabled={\r\n                    datosProducto.producto.datos_generales\r\n                      ? datosProducto.producto.datos_generales.tipo_producto ===\r\n                        \"OTROS\"\r\n                        ? !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo ||\r\n                          !datosProducto.cantidad\r\n                          ? true\r\n                          : false\r\n                        : !datosCompra.proveedor.nombre_cliente ||\r\n                          !datosCompra.almacen.nombre_almacen ||\r\n                          !datosProducto.costo\r\n                        ? true\r\n                        : false\r\n                      : true\r\n                  }\r\n                  onClick={() => agregarCompra()}\r\n                >\r\n                  {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n                </Button>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalAgregarCompra = ({ agregarCompra, cargando }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const {\r\n    datosProducto,\r\n    datosCompra,\r\n    isEditing,\r\n    loadingProductos,\r\n  } = useContext(ComprasContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        startIcon={<Add />}\r\n        disableElevation\r\n        disabled={\r\n          datosProducto.producto.datos_generales\r\n            ? datosProducto.producto.datos_generales.tipo_producto === \"OTROS\"\r\n              ? !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo ||\r\n                !datosProducto.cantidad\r\n                ? true\r\n                : false\r\n              : !datosCompra.proveedor.nombre_cliente ||\r\n                !datosCompra.almacen.nombre_almacen ||\r\n                !datosProducto.costo\r\n              ? true\r\n              : false\r\n            : true\r\n        }\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        {isEditing.producto ? \"Actualizar \" : \"Agregar a compra\"}\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"modal-agregar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-agregar-compra\" style={{ padding: 0 }}>\r\n          <Alert\r\n            severity=\"info\"\r\n            icon={<InfoOutlined style={{ fontSize: 30 }} />}\r\n            style={{ padding: 16 }}\r\n          >\r\n            <AlertTitle style={{ fontSize: 20 }}>\r\n              El costo es diferente al precio de compra actual\r\n            </AlertTitle>\r\n            <Typography style={{ fontSize: 18 }}>\r\n              ¿Desea actualizar los precios o mantenerlos?\r\n            </Typography>\r\n          </Alert>\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"default\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => {\r\n              agregarCompra();\r\n              handleClose();\r\n            }}\r\n            color=\"primary\"\r\n          >\r\n            Mantener\r\n          </Button>\r\n          <PreciosProductos\r\n            cargando={cargando}\r\n            handleClose={handleClose}\r\n            agregarCompra={agregarCompra}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import {\r\n  initial_state_almacen_inicial,\r\n  initial_state_centro_de_costos,\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosPlazos,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../../../context/Catalogos/initialStatesProducto\";\r\n\r\nimport { initial_state_preciosP } from \"../../../Catalogos/Producto/crearProducto\";\r\n\r\nexport const SetOrResetData = (accion,setStates, producto) => {\r\n  const {\r\n    setDatosGenerales,\r\n    setPrecios,\r\n    setValidacion,\r\n    setPreciosP,\r\n    setImagenes,\r\n    setUnidadesVenta,\r\n    almacen_inicial,\r\n    setAlmacenInicial,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    setPreciosPlazos,\r\n    setSubcategorias,\r\n    setOnPreview,\r\n    setSubcostos,\r\n    setImagenesEliminadas,\r\n    setPresentaciones,\r\n    setPresentacionesEliminadas,\r\n    datosCompra\r\n  } = setStates\r\n\r\n  if (accion === \"SET\") {\r\n    \r\n    const { precios_producto, ...new_precios } = producto.precios;\r\n    const { unidades_de_venta } = producto;\r\n    let unidades_secundaria = unidades_de_venta.filter(\r\n      (res) => res.default === false\r\n    );\r\n    let unidadxdefecto = unidades_de_venta.filter(\r\n      (res) => res.default === true\r\n    );\r\n\r\n    setDatosGenerales(producto.datos_generales);\r\n    setPrecios(new_precios);\r\n    setCentroDeCostos(\r\n      producto.centro_de_costos\r\n        ? producto.centro_de_costos\r\n        : initial_state_centro_de_costos\r\n    );\r\n    setImagenes(producto.imagenes);\r\n    setPreciosPlazos(producto.precio_plazos);\r\n    setUnidadesVenta(unidades_de_venta);\r\n    setPreciosP(producto.precios.precios_producto);\r\n    setUnidadVentaXDefecto(unidadxdefecto[0]);\r\n    setUnidadVentaSecundaria(unidades_secundaria[0]);\r\n    setPresentaciones(\r\n      producto.presentaciones ? producto.presentaciones : []\r\n    );\r\n    /* if (datosCompra.almacen.id_almacen && !producto.medidas_registradas) */\r\n    if (datosCompra.almacen.id_almacen && producto.presentaciones.length === 0) {\r\n      setAlmacenInicial({\r\n        ...almacen_inicial,\r\n        id_almacen: datosCompra.almacen.id_almacen,\r\n        almacen: datosCompra.almacen.nombre_almacen,\r\n      });\r\n    }\r\n  } else {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setAlmacenInicial(initial_state_almacen_inicial);\r\n    setCentroDeCostos({});\r\n    setPreciosPlazos(initial_state_preciosPlazos);\r\n    setSubcategorias([]);\r\n    setImagenes([]);\r\n    setOnPreview({ index: \"\", image: \"\" });\r\n    setValidacion({ error: false, message: \"\" });\r\n    setSubcostos([]);\r\n    setImagenesEliminadas([]);\r\n    setPresentaciones([]);\r\n    setPresentacionesEliminadas([]);\r\n  }\r\n};\r\n","import React, {\r\n  useContext,\r\n  useState,\r\n  forwardRef,\r\n  useEffect,\r\n  Fragment,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { Close, Edit, Error } from \"@material-ui/icons\";\r\nimport { initial_state_datosProducto } from \"./initial_states\";\r\nimport { SetOrResetData } from \"./productos/setOrResetData\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Grid, Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"40vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaCompras() {\r\n  const classes = useStyles();\r\n  const { productosCompra, loadingProductos, datosCompra } = useContext(\r\n    ComprasContext\r\n  );\r\n\r\n  const productos_ordernados = [...productosCompra];\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer\r\n        className={classes.container}\r\n        style={\r\n          loadingProductos\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.4,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Table stickyHeader size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Código de barras</TableCell>\r\n              <TableCell>Producto</TableCell>\r\n              <TableCell>Precio de compra</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad regalo</TableCell>\r\n              <TableCell padding=\"checkbox\">Cantidad total</TableCell>\r\n              <TableCell padding=\"checkbox\">Presentaciones</TableCell>\r\n              <TableCell>IVA Total</TableCell>\r\n              <TableCell>IEPS Total</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Remover</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos_ordernados.map((producto, index) => {\r\n              return (\r\n                <RenderProductosCompra\r\n                  key={index}\r\n                  producto={producto}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Grid container spacing={2} justifyContent=\"flex-end\">\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            Subtotal:{\" \"}\r\n            <b>\r\n              ${datosCompra.subtotal ? formatoMexico(datosCompra.subtotal) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            Impuestos:{\" \"}\r\n            <b>\r\n              $\r\n              {datosCompra.impuestos ? formatoMexico(datosCompra.impuestos) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography style={{ fontSize: 18 }}>\r\n            <b>\r\n              Total: ${datosCompra.total ? formatoMexico(datosCompra.total) : 0}\r\n            </b>\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderProductosCompra = ({ producto, index }) => {\r\n  const {\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n    isEditing,\r\n    setIsEditing,\r\n    editFinish,\r\n    setCosto,\r\n    setCantidad,\r\n    setIssue,\r\n  } = useContext(ComprasContext);\r\n  const [isSelected, setIsSelected] = useState(false);\r\n  const productoCTX = useContext(RegProductoContext);\r\n\r\n  const seStates = {\r\n    setDatosGenerales: productoCTX.setDatosGenerales,\r\n    setPrecios: productoCTX.setPrecios,\r\n    setValidacion: productoCTX.setValidacion,\r\n    setPreciosP: productoCTX.setPreciosP,\r\n    setImagenes: productoCTX.setImagenes,\r\n    setUnidadesVenta: productoCTX.setUnidadesVenta,\r\n    almacen_inicial: productoCTX.almacen_inicial,\r\n    setAlmacenInicial: productoCTX.setAlmacenInicial,\r\n    setUnidadVentaXDefecto: productoCTX.setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria: productoCTX.setUnidadVentaSecundaria,\r\n    setCentroDeCostos: productoCTX.setCentroDeCostos,\r\n    setPreciosPlazos: productoCTX.setPreciosPlazos,\r\n    setSubcategorias: productoCTX.setSubcategorias,\r\n    setOnPreview: productoCTX.setOnPreview,\r\n    setSubcostos: productoCTX.setSubcostos,\r\n    setImagenesEliminadas: productoCTX.setImagenesEliminadas,\r\n    setPresentaciones: productoCTX.setPresentaciones,\r\n    setPresentacionesEliminadas: productoCTX.setPresentacionesEliminadas,\r\n    datosCompra,\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIsSelected(true);\r\n    setIsEditing({ producto, index, finish: false });\r\n    setDatosProducto(producto);\r\n    SetOrResetData(\"SET\", seStates, producto.producto);\r\n    setProductoOriginal(producto.producto);\r\n    setPreciosVenta(producto.producto.precios.precios_producto);\r\n    setCosto(producto.costo);\r\n    setCantidad(producto.cantidad);\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    setIsSelected(false);\r\n    setIsEditing({});\r\n    setDatosProducto(initial_state_datosProducto);\r\n    SetOrResetData(\"RESET\", seStates);\r\n    setCosto(0);\r\n    setCantidad(1);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsSelected(false);\r\n  }, [editFinish]);\r\n\r\n  useEffect(() => {\r\n    if (!producto.cantidad) {\r\n    } else {\r\n      setIssue(false);\r\n    }\r\n  }, [producto.cantidad]);\r\n\r\n  const unidad_producto = producto.producto.precios.unidad_de_compra.unidad;\r\n  const { cantidad, cantidad_regalo, cantidad_total } = producto;\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={isSelected || !cantidad}\r\n      style={\r\n        isEditing.producto && !isSelected\r\n          ? {\r\n              pointerEvents: \"none\",\r\n              opacity: 0.4,\r\n            }\r\n          : null\r\n      }\r\n    >\r\n      <TableCell>\r\n        {producto.producto.datos_generales\r\n          ? producto.producto.datos_generales.codigo_barras\r\n            ? producto.producto.datos_generales.codigo_barras\r\n            : \"-\"\r\n          : \"-\"}\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.datos_generales.nombre_comercial}\r\n      </TableCell>\r\n      <TableCell width={180}>\r\n        {!cantidad ? (\r\n          <Error color=\"error\" />\r\n        ) : (\r\n          <b>$ {formatoMexico(producto.total)}</b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_regalo}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {cantidad_total}\r\n        <b>({unidad_producto})</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        {producto.producto.presentaciones.length > 0\r\n          ? producto.producto.presentaciones.length\r\n          : \"N/A\"}\r\n      </TableCell>\r\n      <TableCell width={140}>{`${producto.producto.precios.iva}% - $${producto.iva_total ? formatoMexico(producto.iva_total) : 0}`}</TableCell>\r\n      <TableCell width={140}>{`${producto.producto.precios.ieps}% - $${producto.ieps_total ? formatoMexico(producto.ieps_total) : 0}`}</TableCell>\r\n      <TableCell width={50}>\r\n        {isSelected ? (\r\n          <IconButton\r\n            color=\"inherit\"\r\n            size=\"small\"\r\n            onClick={() => handleCancelEdit()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton color=\"primary\" size=\"small\" onClick={() => handleEdit()}>\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n      </TableCell>\r\n      <TableCell width={50}>\r\n        <ModalDeleteProducto index={index} isSelected={isSelected} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalDeleteProducto = ({ index, isSelected }) => {\r\n  const {\r\n    productosCompra,\r\n    setProductosCompra,\r\n    datosCompra,\r\n    setDatosCompra,\r\n  } = useContext(ComprasContext);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarCompra = () => {\r\n    let copy_compras = [...productosCompra];\r\n    let objeto_eliminado = copy_compras.splice(index, 1);\r\n\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      subtotal: datosCompra.subtotal - objeto_eliminado[0].subtotal,\r\n      impuestos: datosCompra.impuestos - objeto_eliminado[0].impuestos,\r\n      total: datosCompra.total - objeto_eliminado[0].total,\r\n    });\r\n    setProductosCompra([...copy_compras]);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        size=\"small\"\r\n        onClick={handleClickOpen}\r\n        disabled={isSelected}\r\n      >\r\n        <RemoveCircleOutlineIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          Seguro que quiere eliminar esto de la lista?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={eliminarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { ComprasContext } from \"../../../../context/Compras/comprasContext\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { Done, Close } from \"@material-ui/icons\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConfirmarCompra({ realizarCompraBD }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading_modal, setLoadingModal] = useState(false);\r\n  const [credito, setCredito] = useState(false);\r\n  const [productos_recalculados, setProductosRecalculados] = useState([]);\r\n  const { productosCompra, datosCompra, setDatosCompra, issue } = useContext(\r\n    ComprasContext\r\n  );\r\n  const initial_state_descuento = {\r\n    subtotal: 0,\r\n    impuestos: 0,\r\n    total: 0,\r\n    descuento_aplicado: false,\r\n    porcentaje: 0,\r\n    cantidad_descontada: 0,\r\n    precio_con_descuento: 0,\r\n  };\r\n  const [descuento_base, setDescuentoBase] = useState(initial_state_descuento);\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const [descuento_debounce, setDescuentoDebounce] = useState(0);\r\n  const [porcentaje_debounce, setPorcentajeDebounce] = useState(0);\r\n\r\n  const cleanStates = () => {\r\n    setCredito(false);\r\n    setProductosRecalculados([]);\r\n    setDescuentoBase(initial_state_descuento);\r\n  };\r\n\r\n  const obtenerFormaPago = (forma_pago) => {\r\n    setDatosCompra({\r\n      ...datosCompra,\r\n      forma_pago,\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = (descuento_aplicado) => {\r\n    if (!descuento_aplicado) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        subtotal: datosCompra.subtotal,\r\n        total: datosCompra.total,\r\n        descuento_aplicado,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n        precio_con_descuento: 0,\r\n      });\r\n      return;\r\n    }\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      descuento_aplicado,\r\n    });\r\n  };\r\n\r\n  const obtenerPorcentaje = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n      });\r\n      return;\r\n    }\r\n    let porcentaje = parseFloat(value);\r\n    let cantidad_descontada = Math.round(\r\n      (datosCompra.subtotal * porcentaje) / 100\r\n    );\r\n\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n    });\r\n  };\r\n\r\n  const obtenerPrecio = (value) => {\r\n    if (!value || parseFloat(value) === 0) {\r\n      setDescuentoBase({\r\n        ...descuento_base,\r\n        porcentaje: 0,\r\n        cantidad_descontada: 0,\r\n      });\r\n      return;\r\n    }\r\n\r\n    let cantidad_descontada = parseFloat(value);\r\n    let porcentaje = Math.round(\r\n      (cantidad_descontada / datosCompra.subtotal) * 100\r\n    );\r\n\r\n    setDescuentoBase({\r\n      ...descuento_base,\r\n      porcentaje,\r\n      cantidad_descontada,\r\n    });\r\n  };\r\n\r\n  const [DESCUENTO] = useDebounce(descuento_debounce, 700);\r\n  const [PORCENTAJE] = useDebounce(porcentaje_debounce, 700);\r\n\r\n  const recalcularPrecios = () => {\r\n    //aplicar descuento a los productos y actualizar precios\r\n    const productos = [...productosCompra];\r\n    const datos_descuento = { ...initial_state_descuento };\r\n    const {\r\n      porcentaje,\r\n      cantidad_descontada,\r\n      descuento_aplicado,\r\n    } = descuento_base;\r\n    let productos_array = [];\r\n\r\n    for (let index = 0; index < productos.length; index++) {\r\n      const producto = productos[index];\r\n      const copy_producto = { ...producto };\r\n      const { precios } = copy_producto.producto;\r\n      const { iva, ieps } = precios;\r\n      const subtotal_actual = copy_producto.subtotal;\r\n\r\n      const cantidad_descontada_product = Math.round(\r\n        (subtotal_actual * porcentaje) / 100\r\n      );\r\n      const subtotal_con_descuento =\r\n        subtotal_actual - cantidad_descontada_product;\r\n\r\n      const iva_precio =\r\n        parseFloat(subtotal_con_descuento) *\r\n        parseFloat(iva < 10 ? \".0\" + iva : \".\" + iva);\r\n      const ieps_precio =\r\n        parseFloat(subtotal_con_descuento) *\r\n        parseFloat(ieps < 10 ? \".0\" + ieps : \".\" + ieps);\r\n\r\n      const impuestos = iva_precio + ieps_precio;\r\n      const total = subtotal_con_descuento + impuestos;\r\n\r\n      copy_producto.iva_total = iva_precio;\r\n      copy_producto.ieps_total = ieps_precio;\r\n      copy_producto.descuento_porcentaje = porcentaje;\r\n      copy_producto.descuento_precio = cantidad_descontada_product;\r\n      copy_producto.impuestos = impuestos;\r\n      copy_producto.subtotal = subtotal_con_descuento;\r\n      copy_producto.total = total;\r\n\r\n      //sumar los totales a datosCompra\r\n      datos_descuento.impuestos += impuestos;\r\n      datos_descuento.subtotal += subtotal_con_descuento;\r\n      datos_descuento.total += total;\r\n\r\n      //meterlo al nuevo array\r\n      productos_array.push(copy_producto);\r\n    }\r\n    //poner los nuevos productos\r\n    setProductosRecalculados(productos_array);\r\n    datos_descuento.porcentaje = porcentaje;\r\n    datos_descuento.cantidad_descontada = cantidad_descontada;\r\n    datos_descuento.descuento_aplicado = descuento_aplicado;\r\n    setDescuentoBase(datos_descuento);\r\n  };\r\n\r\n  useEffect(() => {\r\n    recalcularPrecios();\r\n  }, [DESCUENTO, PORCENTAJE]);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        autoFocus\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!productosCompra.length || issue}\r\n        startIcon={<Done />}\r\n      >\r\n        Guardar\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-confirmacion-compra\"\r\n        aria-describedby=\"dialog-confirmacion-compra-description\"\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle style={{ padding: 0 }}>\r\n          <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClose()}\r\n              size=\"small\"\r\n              disabled={loading_modal}\r\n            >\r\n              <Close style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box my={2}>\r\n            <Grid container spacing={2}>\r\n              <Grid item md={12}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={credito}\r\n                      onChange={(e) => setCredito(e.target.checked)}\r\n                    />\r\n                  }\r\n                  label=\"Compra a crédito\"\r\n                />\r\n                <Typography>Fecha de vencimiento del crédito</Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  type=\"date\"\r\n                  onChange={(e) => {\r\n                    setDatosCompra({\r\n                      ...datosCompra,\r\n                      fecha_vencimiento_credito: e.target.value,\r\n                    });\r\n                  }}\r\n                  disabled={!credito}\r\n                  value={datosCompra.fecha_vencimiento_credito}\r\n                />\r\n              </Grid>\r\n              <Grid item md={12}>\r\n                <FormControl\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"forma_pago\"\r\n                >\r\n                  <InputLabel id=\"forma_pago\">Forma de pago</InputLabel>\r\n                  <Select\r\n                    labelId=\"forma_pago\"\r\n                    value={datosCompra.forma_pago}\r\n                    name=\"forma_pago\"\r\n                    onChange={(e) => obtenerFormaPago(e.target.value)}\r\n                    label=\"Forma de pago\"\r\n                  >\r\n                    {formaPago.map((res, index) => (\r\n                      <MenuItem\r\n                        key={index}\r\n                        value={res.Value}\r\n                      >{res.Name}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item md={12}>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={descuento_base.descuento_aplicado}\r\n                      onChange={(e) => aplicarDescuento(e.target.checked)}\r\n                      name=\"descuento_aplicado\"\r\n                    />\r\n                  }\r\n                  label=\"Aplicar descuento\"\r\n                />\r\n              </Grid>\r\n              <Grid item md={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => {\r\n                    obtenerPrecio(e.target.value);\r\n                    setDescuentoDebounce(e.target.value);\r\n                  }}\r\n                  disabled={!descuento_base.descuento_aplicado}\r\n                  value={descuento_base.cantidad_descontada}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">$</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={6}>\r\n                <TextField\r\n                  variant=\"outlined\"\r\n                  type=\"number\"\r\n                  size=\"small\"\r\n                  fullWidth\r\n                  onChange={(e) => {\r\n                    obtenerPorcentaje(e.target.value);\r\n                    setPorcentajeDebounce(e.target.value);\r\n                  }}\r\n                  disabled={!descuento_base.descuento_aplicado}\r\n                  value={descuento_base.porcentaje}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">%</InputAdornment>\r\n                    ),\r\n                  }}\r\n                />\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Subtotal:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.subtotal\r\n                        ? datosCompra.subtotal\r\n                        : descuento_base.subtotal\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Impuestos:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.impuestos\r\n                        ? datosCompra.impuestos\r\n                        : descuento_base.impuestos\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={4}>\r\n                <Typography>\r\n                  <b>Total:</b>\r\n                  {\" $\" +\r\n                    formatoMexico(\r\n                      !descuento_base.total\r\n                        ? datosCompra.total\r\n                        : descuento_base.total\r\n                    )}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => {\r\n              cleanStates();\r\n              realizarCompraBD(\r\n                false,\r\n                credito,\r\n                handleClose,\r\n                setLoadingModal,\r\n                descuento_base,\r\n                productos_recalculados\r\n              );\r\n            }}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading_modal ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading_modal || !datosCompra.forma_pago}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport const formaPago = [\r\n  {\r\n    Name: \"Efectivo\",\r\n    Value: \"01\",\r\n  },\r\n  {\r\n    Name: \"Cheque nominativo\",\r\n    Value: \"02\",\r\n  },\r\n  {\r\n    Name: \"Transferencia electrónica de fondos\",\r\n    Value: \"03\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de crédito\",\r\n    Value: \"04\",\r\n  },\r\n  {\r\n    Name: \"Monedero electrónico\",\r\n    Value: \"05\",\r\n  },\r\n  {\r\n    Name: \"Vales de despensa\",\r\n    Value: \"08\",\r\n  },\r\n  {\r\n    Name: \"Tarjeta de débito\",\r\n    Value: \"28\",\r\n  },\r\n  {\r\n    Name: \"Por definir\",\r\n    Value: \"99\",\r\n  },\r\n];","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport DatosProducto from \"./productos/DatosProducto\";\r\nimport { FcPlus } from \"react-icons/fc\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport ListaCompras from \"./TablaCompras\";\r\nimport {\r\n  ComprasContext,\r\n  ComprasProvider,\r\n} from \"../../../../context/Compras/comprasContext\";\r\nimport \"date-fns\";\r\nimport { Done, Timer } from \"@material-ui/icons\";\r\nimport {\r\n  initial_state_datosCompra,\r\n  initial_state_datosProducto,\r\n  initial_state_precios_venta,\r\n  initial_state_productoOriginal,\r\n  initial_state_productosCompra,\r\n} from \"./initial_states\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  CREAR_COMPRA,\r\n  CREAR_COMPRA_ESPERA,\r\n} from \"../../../../gql/Compras/compras\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport ConfirmarCompra from \"./ConfirmarCompra\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbrirCompra({\r\n  compra,\r\n  status,\r\n  handleOpenDetalles,\r\n  refetchEspera,\r\n}) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    if (status === \"enEspera\") {\r\n      handleOpenDetalles();\r\n      refetchEspera();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {status === \"enEspera\" ? (\r\n        <Button\r\n          fullWidth\r\n          onClick={handleClickOpen}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Done />}\r\n        >\r\n          continuar compra\r\n        </Button>\r\n      ) : (\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcPlus className={classes.icon} />\r\n            </Box>\r\n            Abrir una compra\r\n          </Box>\r\n        </Button>\r\n      )}\r\n      <ComprasProvider>\r\n        <ModalCompra\r\n          open={open}\r\n          handleClose={handleClose}\r\n          status={status}\r\n          compra={compra}\r\n        />\r\n      </ComprasProvider>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalCompra = ({ open, handleClose, compra, status }) => {\r\n  const classes = useStyles();\r\n  const {\r\n    productosCompra,\r\n    datosCompra,\r\n    setDatosProducto,\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setProductoOriginal,\r\n    setPreciosVenta,\r\n  } = useContext(ComprasContext);\r\n  const [openDelete, setOpenDelete] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearCompra] = useMutation(CREAR_COMPRA);\r\n  const [crearCompraEnEspera] = useMutation(CREAR_COMPRA_ESPERA);\r\n\r\n  const isAdmin = sesion ? sesion.accesos.tesoreria.caja_principal.ver : false;\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (status === \"enEspera\" && compra && open === true) {\r\n      setDatosCompra(compra);\r\n      setProductosCompra(compra.productos);\r\n    }\r\n  }, [open]);\r\n\r\n  const realizarCompraBD = async (\r\n    compra_en_espera,\r\n    credito,\r\n    handleClose,\r\n    setLoadingModal,\r\n    descuento_compra,\r\n    productos_con_descuento\r\n  ) => {\r\n    let datos = { ...datosCompra };\r\n    let copy_datosProducto = [...productosCompra];\r\n    let productos = copy_datosProducto;\r\n    if (status === \"enEspera\") {\r\n      productos = copy_datosProducto.map((res) => {\r\n        delete res.conflicto;\r\n        return res;\r\n      });\r\n      delete datos.empresa;\r\n      delete datos.sucursal;\r\n      delete datos.usuario;\r\n    }\r\n\r\n    setLoading(true);\r\n    if(setLoadingModal){\r\n      setLoadingModal(true);\r\n    }\r\n    try {\r\n      datos.productos = productos;\r\n\r\n      if (compra_en_espera) {\r\n        datos.en_espera = true;\r\n        const result = await crearCompraEnEspera({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompraEnEspera.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        if (credito) {\r\n          datos.compra_credito = true;\r\n          datos.saldo_credito_pendiente = datos.total;\r\n        }\r\n        if (descuento_compra.descuento_aplicado) {\r\n          const {\r\n            descuento_aplicado,\r\n            subtotal,\r\n            total,\r\n            impuestos,\r\n            ...descuento\r\n          } = descuento_compra;\r\n          datos.productos = productos_con_descuento;\r\n          datos.descuento_aplicado = descuento_compra.descuento_aplicado;\r\n          datos.subtotal = descuento_compra.subtotal;\r\n          datos.impuestos = descuento_compra.impuestos;\r\n          datos.total = descuento_compra.total;\r\n          datos.descuento = descuento;\r\n        }\r\n\r\n        //mandar datos extras para realizar los retiros a cajas o cuentas\r\n        //turno\r\n        let turno = null;\r\n        if (turnoEnCurso) {\r\n          turno = {\r\n            horario_en_turno: turnoEnCurso.horario_en_turno,\r\n            numero_caja: turnoEnCurso\r\n              ? parseInt(turnoEnCurso.numero_caja)\r\n              : null,\r\n            id_caja: turnoEnCurso.id_caja,\r\n            id_usuario: sesion._id,\r\n            token_turno_user: turnoEnCurso.token_turno_user,\r\n            numero_usuario_creador: turnoEnCurso\r\n              ? parseFloat(turnoEnCurso.usuario_en_turno.numero_usuario)\r\n              : null,\r\n            nombre_usuario_creador: turnoEnCurso.usuario_en_turno.nombre,\r\n          };\r\n        }\r\n        datos.turnoEnCurso = turno;\r\n        datos.admin = isAdmin;\r\n        datos.sesion = {\r\n          id_usuario: sesion._id,\r\n          nombre_usuario: sesion.nombre,\r\n          numero_usuario: sesion.numero_usuario,\r\n        };\r\n\r\n        const result = await crearCompra({\r\n          variables: {\r\n            input: datos,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `¡Listo! ${result.data.crearCompra.message}`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setLoading(false);\r\n      limpiarCampos();\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (handleClose) {\r\n        handleClose();\r\n        setLoadingModal(false);\r\n      }\r\n      console.log(error);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      }\r\n      setAlert({\r\n        message: `Error de servidor`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleToggleDelete = () => {\r\n    if (productosCompra.length > 0) {\r\n      setOpenDelete(!openDelete);\r\n    } else {\r\n      limpiarCampos();\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen\r\n      open={open}\r\n      onClose={handleClose}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <DialogTitle style={{ padding: 0 }}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Nueva compra\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleToggleDelete}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n              <CancelarCompra\r\n                handleClose={handleClose}\r\n                handleToggleDelete={handleToggleDelete}\r\n                openDelete={openDelete}\r\n              />\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <DatosProducto status={status} />\r\n        <Box my={2} />\r\n        <ListaCompras />\r\n      </DialogContent>\r\n\r\n      <DialogActions\r\n        style={{\r\n          justifyContent: status === \"enEspera\" ? \"flex-end\" : \"space-between\",\r\n        }}\r\n      >\r\n        {status === \"enEspera\" ? null : (\r\n          <Button\r\n            autoFocus\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            onClick={() => realizarCompraBD(true)} //realiza la compra en espera en la funcion\r\n            disabled={!productosCompra.length}\r\n            startIcon={<Timer />}\r\n          >\r\n            Compra en espera\r\n          </Button>\r\n        )}\r\n        <ConfirmarCompra realizarCompraBD={realizarCompraBD} />\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nconst CancelarCompra = ({ handleClose, handleToggleDelete, openDelete }) => {\r\n  const {\r\n    setProductosCompra,\r\n    setDatosCompra,\r\n    setPreciosVenta,\r\n    setProductoOriginal,\r\n    setDatosProducto,\r\n  } = useContext(ComprasContext);\r\n\r\n  const cancelarCompra = () => {\r\n    /* reset states */\r\n    setDatosProducto(initial_state_datosProducto);\r\n    setDatosCompra(initial_state_datosCompra);\r\n    setPreciosVenta(initial_state_precios_venta);\r\n    setProductoOriginal(initial_state_productoOriginal);\r\n    setProductosCompra(initial_state_productosCompra);\r\n    /* cerrar modales */\r\n    handleToggleDelete();\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={openDelete}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleToggleDelete}\r\n        aria-labelledby=\"modal-eliminar-compra\"\r\n      >\r\n        <DialogTitle id=\"modal-eliminar-compra\">\r\n          ¿Quieres cancelar esta compra?\r\n        </DialogTitle>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleToggleDelete} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={cancelarCompra} color=\"secondary\">\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport { CloudDownloadOutlined } from \"@material-ui/icons\";\r\nimport { Grid, Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarProductosComprasExcel({ compra }) {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n    productos,\r\n  } = compra;\r\n\r\n  const compra_realizada = [\r\n    {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    },\r\n  ];\r\n\r\n  const productos_detalles = productos.map((productos) => {\r\n    const {\r\n      producto,\r\n      medida,\r\n      color,\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = productos;\r\n    const detalle_producto = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      medida: medida ? medida.medida : \"N/A\",\r\n      color: color ? color.color : \"N/A\",\r\n      unidad,\r\n      cantidad,\r\n      Cantidad_regalo,\r\n      cantidad_total,\r\n      descuento_precio,\r\n      descuento_porcentaje,\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return detalle_producto;\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <ExcelFile\r\n        element={\r\n          <Box display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              startIcon={<CloudDownloadOutlined />}\r\n            >\r\n              Exportar a Excel\r\n            </Button>\r\n          </Box>\r\n        }\r\n        filename={\"Detalle de compra\"}\r\n      >\r\n        <ExcelSheet data={compra_realizada} name=\"Detalle compra\">\r\n          <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n          <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n          <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n          <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n          <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n          <ExcelColumn label=\"Total\" value=\"total\" />\r\n        </ExcelSheet>\r\n        <ExcelSheet data={productos_detalles} name=\"Productos de la compra\">\r\n          <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n          <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n          <ExcelColumn label=\"Color\" value=\"color\" />\r\n          <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n          <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n          <ExcelColumn label=\"Cantidad de regalo\" value=\"cantidad_regalo\" />\r\n          <ExcelColumn label=\"Cantidad total\" value=\"cantidad_total\" />\r\n          <ExcelColumn label=\"Precio de descuento\" value=\"descuento_precio\" />\r\n          <ExcelColumn\r\n            label=\"Porcentaje de descuento\"\r\n            value=\"descuento_porcentaje\"\r\n          />\r\n          <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n          <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n          <ExcelColumn label=\"Total\" value=\"total\" />\r\n        </ExcelSheet>\r\n      </ExcelFile>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport ExportarProductosComprasExcel from \"./ExportarProductosCompra\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({ compra }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const { productos } = compra;\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${compra.subtotal}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${compra.impuestos}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Total: ${compra.total}</b>\r\n        </Typography>\r\n        {compra.status && compra.status === \"CANCELADO\" ? (\r\n          <Chip label=\"Compra Cancelada\" color=\"secondary\" variant=\"outlined\" />\r\n        ) : compra.compra_credito === true ? (\r\n          <Chip\r\n            label={\r\n              compra.credito_pagado === true\r\n                ? \"Credito pagado\"\r\n                : `Saldo pendiente: $${formatoMexico(\r\n                    compra.saldo_credito_pendiente\r\n                  )}`\r\n            }\r\n            style={{\r\n              color:\r\n                compra.compra_credito === true\r\n                  ? theme.palette.primary.main\r\n                  : theme.palette.warning.main,\r\n              borderColor:\r\n                compra.compra_credito === true\r\n                  ? theme.palette.primary.main\r\n                  : theme.palette.warning.main,\r\n            }}\r\n            variant=\"outlined\"\r\n          />\r\n        ) : (\r\n          <Chip label=\"CONTADO\" color=\"inherit\" variant=\"outlined\" />\r\n        )}\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar un producto en esta compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              <ExportarProductosComprasExcel compra={compra} />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                return (\r\n                  <TableRow hover tabIndex={-1} key={index}>\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida\r\n                        ? datos.medida.medida\r\n                        : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CANCELAR_COMPRA } from \"../../../../gql/Compras/compras\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport CircularProgres from \"@material-ui/core/CircularProgress\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelCompraConfirm({ compra, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const isAdmin = sesion ? sesion.accesos.tesoreria.caja_principal.ver : false;\r\n\r\n  const [cancelarCompra] = useMutation(CANCELAR_COMPRA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const cancelarCompraBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      let turno = null;\r\n      if (turnoEnCurso) {\r\n        turno = {\r\n          horario_en_turno: turnoEnCurso.horario_en_turno,\r\n          numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : null,\r\n          id_caja: turnoEnCurso.id_caja,\r\n          id_usuario: sesion._id,\r\n          token_turno_user: turnoEnCurso.token_turno_user,\r\n          numero_usuario_creador: turnoEnCurso\r\n            ? parseFloat(turnoEnCurso.usuario_en_turno.numero_usuario)\r\n            : null,\r\n          nombre_usuario_creador: turnoEnCurso.usuario_en_turno.nombre,\r\n        };\r\n      }\r\n\r\n      const result = await cancelarCompra({\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          id_compra: compra._id,\r\n          data_sesion: {\r\n            turno,\r\n            admin: isAdmin,\r\n            sesion: {\r\n              id_usuario: sesion._id,\r\n              nombre_usuario: sesion.nombre,\r\n              numero_usuario: sesion.numero_usuario,\r\n            },\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.cancelarCompra.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        size=\"small\" \r\n        onClick={handleClickOpen}\r\n        disabled={compra.status && compra.status === \"CANCELADO\" ? true : false}\r\n      >\r\n        <Close />\r\n      </IconButton>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-cancel-compra\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-cancel-compra\">\r\n          {\"¿Está seguro que desea cancelar esta compra?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cerrar\r\n          </Button>\r\n          <Button\r\n            onClick={() => cancelarCompraBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgres color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Cancelar Compra\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n  Chip,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport DatosDeCompra from \"./DatosDeCompra\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, Done } from \"@material-ui/icons\";\r\nimport CancelCompraConfirm from \"./CancelarCompra\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"68vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({\r\n  obtenerComprasRealizadas,\r\n  refetch,\r\n  limit,\r\n  page,\r\n  setPage,\r\n  filtro,\r\n  filtroFecha,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      offset: nextPage,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Compra a credito</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell padding=\"checkbox\">Detalles</TableCell>\r\n              <TableCell padding=\"checkbox\">Cancelar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasRealizadas.docs.map((compra, index) => (\r\n              <RenderRowsCompras\r\n                key={index}\r\n                compra={compra}\r\n                refetch={refetch}\r\n                theme={theme}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerComprasRealizadas.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsCompras = ({ compra, refetch, theme }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    compra_credito,\r\n    credito_pagado,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFechaCorta(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        {compra.status && compra.status === \"CANCELADO\" ? (\r\n          <Chip label=\"CANCELADO\" color=\"secondary\" variant=\"outlined\" />\r\n        ) : compra_credito === true ? (\r\n          <Chip\r\n            label={credito_pagado === true ? \"PAGADO\" : \"PENDIENTE\"}\r\n            style={{\r\n              color:\r\n                credito_pagado === true\r\n                  ? theme.palette.primary.main\r\n                  : theme.palette.warning.main,\r\n              borderColor:\r\n                credito_pagado === true\r\n                  ? theme.palette.primary.main\r\n                  : theme.palette.warning.main,\r\n            }}\r\n            variant=\"outlined\"\r\n          />\r\n        ) : (\r\n          <Chip label=\"CONTADO\" color=\"default\" variant=\"outlined\" />\r\n        )}\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <DetallesCompra compra={compra} />\r\n      </TableCell>\r\n      <TableCell>\r\n        <CancelCompraConfirm compra={compra} refetch={refetch} />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst DetallesCompra = ({ compra }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton size=\"small\" onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de venta\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompra compra={compra} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={<Done />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { Button, Box } from \"@material-ui/core\";\r\nimport ReactExport from \"react-export-excel\";\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarComprasExcel({\r\n  obtenerComprasRealizadas,\r\n  filtro,\r\n  filtroFecha,\r\n  refetch,\r\n}) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setValue(value);\r\n\r\n    if (!value) {\r\n      refetch({\r\n        limit: 20,\r\n        offset: 0,\r\n      });\r\n    } else {\r\n      refetch({\r\n        limit: 0,\r\n        offset: 0,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<RiFileExcel2Line />}\r\n        onClick={handleClickOpen}\r\n      >\r\n        Exportar Excel\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\r\n        <DialogTitle>{\"Exportar Reportes de compras\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            -Exportar pagina actual: exportará la pagina actual\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            -Exportar todo: exportará todos los registros filtrados\r\n          </DialogContentText>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => handleChange(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Contenido Actual</MenuItem>\r\n              <MenuItem value={1}>Todos los registros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <ExportarExcelAction\r\n            datosExcel={obtenerComprasRealizadas.docs}\r\n            filtro={filtro}\r\n            filtroFecha={filtroFecha}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ datosExcel, filtro, filtroFecha }) => {\r\n  const compras = datosExcel.map((compra) => {\r\n    const {\r\n      almacen,\r\n      proveedor,\r\n      fecha_registro,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const compra_realizada = {\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      fecha_registro: formatoFecha(fecha_registro),\r\n      subtotal: formatoMexico(subtotal),\r\n      impuestos: formatoMexico(impuestos),\r\n      total: formatoMexico(total),\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  let nombre_documento = \"\";\r\n  if (filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since} y filtradas por ${filtro}`;\r\n  } else if (filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas filtradas por ${filtro}`;\r\n  } else if (!filtro && filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas desde hace ${filtroFecha.since}`;\r\n  } else if (!filtro && !filtroFecha.fecha) {\r\n    nombre_documento = `Lista de compras realizadas`;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <ExcelFile\r\n        element={\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<RiFileExcel2Line />}\r\n            disableElevation\r\n          >\r\n            Exportar\r\n          </Button>\r\n        }\r\n        filename={nombre_documento}\r\n      >\r\n        <ExcelSheet data={compras} name={nombre_documento}>\r\n          <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n          <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n          <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n          <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n          <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n          <ExcelColumn label=\"Total\" value=\"total\" />\r\n        </ExcelSheet>\r\n      </ExcelFile>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { FcInspection } from \"react-icons/fc\";\r\nimport ListaCompras from \"./ListaCompras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_COMPRAS_REALIZADAS } from \"../../../../gql/Compras/compras\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport ExportarComprasExcel from \"./ExportarComprasExcel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcInspection className={classes.icon} />\r\n          </Box>\r\n          Compras realizadas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras realizadas\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [filtroFecha, setFiltroFecha] = useState({ fecha: \"\", since: \"todos\" });\r\n  const [page, setPage] = useState(0);\r\n  const searchfilter = useRef(null);\r\n  const filterDate = useRef(null);\r\n  const limit = 20;\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_COMPRAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        fecha: filtroFecha.fecha,\r\n        limit,\r\n        offset: 0,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasRealizadas = [];\r\n  if (data) obtenerComprasRealizadas = data.obtenerComprasRealizadas;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value, fecha: filtroFecha.fecha, offset: 0 });\r\n    setFiltro(value);\r\n    setPage(0);\r\n  };\r\n\r\n  const handleDeleteFiltro = () => {\r\n    refetch({ filtro: \"\", fecha: filtroFecha.fecha, offset: 0 });\r\n    setFiltro(\"\");\r\n    setPage(0);\r\n    searchfilter.current.value = \"\";\r\n  };\r\n  const handleDeleteFecha = () => {\r\n    setPage(0);\r\n    refetch({ filtro, fecha: \"\", offset: 0 });\r\n    setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n    filterDate.current.value = \"todos\";\r\n  };\r\n\r\n  const obtenerFecha = (value) => {\r\n    switch (value) {\r\n      case \"7 dias\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n        });\r\n        refetch({\r\n          filtro,\r\n          fecha: moment().subtract(7, \"d\").format(),\r\n          offset: 0,\r\n        });\r\n        setPage(0);\r\n        break;\r\n      case \"2 semanas\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n        });\r\n        refetch({\r\n          filtro,\r\n          fecha: moment().subtract(2, \"w\").format(),\r\n          offset: 0,\r\n        });\r\n        setPage(0);\r\n        break;\r\n      case \"1 mes\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n        });\r\n        refetch({\r\n          filtro,\r\n          fecha: moment().subtract(1, \"M\").format(),\r\n          offset: 0,\r\n        });\r\n        setPage(0);\r\n        break;\r\n      case \"3 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n        });\r\n        refetch({\r\n          filtro,\r\n          fecha: moment().subtract(3, \"M\").format(),\r\n          offset: 0,\r\n        });\r\n        setPage(0);\r\n        break;\r\n      case \"6 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n        });\r\n        refetch({\r\n          filtro,\r\n          fecha: moment().subtract(6, \"M\").format(),\r\n          offset: 0,\r\n        });\r\n        setPage(0);\r\n        break;\r\n      case \"8 meses\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n        });\r\n        refetch({\r\n          filtro,\r\n          fecha: moment().subtract(8, \"M\").format(),\r\n          offset: 0,\r\n        });\r\n        setPage(0);\r\n        break;\r\n      case \"1 año\":\r\n        setFiltroFecha({\r\n          since: value,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n        });\r\n        refetch({\r\n          filtro,\r\n          fecha: moment().subtract(1, \"y\").format(),\r\n          offset: 0,\r\n        });\r\n        setPage(0);\r\n        break;\r\n      default:\r\n        setFiltroFecha({ since: \"todos\", fecha: \"\" });\r\n        refetch({ filtro, fecha: \"\", offset: 0 });\r\n        setPage(0);\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={4} xs={12}>\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <InputLabel id=\"label-select-fecha-filter\">\r\n                Filtrar desde...\r\n              </InputLabel>\r\n              <Select\r\n                inputRef={filterDate}\r\n                labelId=\"label-select-fecha-filter\"\r\n                value={filtroFecha.since}\r\n                onChange={(e) => obtenerFecha(e.target.value)}\r\n                label=\"Filtrar desde...\"\r\n              >\r\n                <MenuItem value=\"todos\">\r\n                  <em>Todos los registros</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"7 dias\">hace 7 días</MenuItem>\r\n                <MenuItem value=\"2 semanas\">hace 2 semanas</MenuItem>\r\n                <MenuItem value=\"1 mes\">hace 1 mes</MenuItem>\r\n                <MenuItem value=\"3 meses\">hace 3 meses</MenuItem>\r\n                <MenuItem value=\"6 meses\">hace 6 meses</MenuItem>\r\n                <MenuItem value=\"8 meses\">hace 8 meses</MenuItem>\r\n                <MenuItem value=\"1 año\">hace 1 año</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              <ExportarComprasExcel\r\n                obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n                filtro={filtro}\r\n                filtroFecha={filtroFecha}\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {filtro || filtroFecha.fecha ? (\r\n        <Box display=\"flex\" mb={1}>\r\n          <Typography variant=\"h6\">Resultados de:</Typography>\r\n          <Box mr={1} />\r\n          {filtro ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={filtro}\r\n              onDelete={handleDeleteFiltro}\r\n            />\r\n          ) : null}\r\n          <Box mx={1} />\r\n          {filtroFecha.fecha ? (\r\n            <Chip\r\n              variant=\"outlined\"\r\n              size=\"medium\"\r\n              label={`Desde hace ${filtroFecha.since}`}\r\n              onDelete={handleDeleteFecha}\r\n            />\r\n          ) : null}\r\n        </Box>\r\n      ) : null}\r\n\r\n      <ListaCompras\r\n        obtenerComprasRealizadas={obtenerComprasRealizadas}\r\n        refetch={refetch}\r\n        page={page}\r\n        setPage={setPage}\r\n        limit={limit}\r\n        filtro={filtro}\r\n        filtroFecha={filtroFecha}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useCallback, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CheckCircle, Done, VerifiedUser } from \"@material-ui/icons\";\r\nimport { Box, CircularProgress } from \"@material-ui/core\";\r\n\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VerificarProductosCompras({\r\n  compra,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setVerificado,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (success) {\r\n      setVerificado(true);\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => handleClickOpen()}\r\n        startIcon={<VerifiedUser />}\r\n      >\r\n        Continuar compra\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        /* onClose={() => handleClose()} */\r\n        onClose={(event, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-verificarcompra-title\"\r\n        aria-describedby=\"dialog-verificarcompra-description\"\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n      >\r\n        <ModalVerificacion\r\n          handleClose={handleClose}\r\n          compra={compra}\r\n          handleClickOpen={handleClickOpen}\r\n          open={open}\r\n          nuevoArray={nuevoArray}\r\n          setNuevoArray={setNuevoArray}\r\n          setSuccess={setSuccess}\r\n        />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ModalVerificacion = ({\r\n  handleClose,\r\n  compra,\r\n  handleClickOpen,\r\n  open,\r\n  nuevoArray,\r\n  setNuevoArray,\r\n  setSuccess,\r\n}) => {\r\n  const [loadingVerificacion, setLoadingVerificacion] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let count = 0;\r\n\r\n  /* Queries */\r\n  const [getQuery, { loading, data, error }] = useLazyQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      almacen: compra.almacen.id_almacen,\r\n      limit: 0,\r\n      offset: 0\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (data) count = 1;\r\n\r\n  useEffect(() => {\r\n    if (open && count === 0) {\r\n      getQuery();\r\n      count = 1;\r\n    }\r\n  }, [handleClickOpen]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      verificarProductos();\r\n    }\r\n  }, [data]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent\r\n          style={{\r\n            height: 150,\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            flexDirection: \"column\",\r\n          }}\r\n        >\r\n          <DialogContentText id=\"dialog-verificarcompra-description\">\r\n            Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n            quitaran al retomar la compra para no causar conflictos, podras\r\n            editar tu compra mas adelante\r\n          </DialogContentText>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Obteniendo productos de la Base de datos...\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <ErrorPage error={error} altura={130} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  let obtenerProductos = [];\r\n  if (data) obtenerProductos = data.obtenerProductos.docs;\r\n\r\n  /* console.log(compra); */\r\n\r\n  function verificarProductos() {\r\n    setLoadingVerificacion(true);\r\n    const { productos } = compra;\r\n    let productos_nuevos = [...productos];\r\n    let conflicto = false;\r\n\r\n    for (let i = 0; i < productos.length; i++) {\r\n      const productosCompra = productos[i];\r\n      let copy_producto_compra = { ...productosCompra };\r\n      let copy_producto = { ...productosCompra.producto };\r\n\r\n      //Filtrar los productos\r\n      const productos_filtrados = obtenerProductos.filter(\r\n        (res) => res._id === copy_producto_compra.id_producto\r\n      );\r\n\r\n      const { precios, unidades_de_venta, presentaciones } = copy_producto;\r\n\r\n      const precios_base = productos_filtrados[0].precios;\r\n      const unidades_base = productos_filtrados[0].unidades_de_venta;\r\n      const presentaciones_base = productos_filtrados[0].medidas_producto;\r\n\r\n      //verificacion de Precios\r\n      if (\r\n        precios.unidad_de_compra.cantidad !==\r\n          precios_base.unidad_de_compra.cantidad ||\r\n        precios.unidad_de_compra.precio_unitario_con_impuesto !==\r\n          precios_base.unidad_de_compra.precio_unitario_con_impuesto ||\r\n        precios.unidad_de_compra.unidad !== precios_base.unidad_de_compra.unidad\r\n      ) {\r\n        /* console.log(\"conflicto precios\"); */\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.precios = precios_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n      }\r\n      //verificacion de Unidades de venta\r\n      const u_default = unidades_de_venta.filter((res) => res.default === true);\r\n      const u_default_base = unidades_base.filter(\r\n        (res) => res.default === true\r\n      );\r\n      if (\r\n        u_default[0].cantidad !== u_default_base[0].cantidad ||\r\n        u_default[0].precio !== u_default_base[0].precio ||\r\n        u_default[0].unidad !== u_default_base[0].unidad\r\n      ) {\r\n        //si son diferentes se agrega los precios_base al compra_nueva\r\n        copy_producto.unidades_de_venta = unidades_base;\r\n        copy_producto_compra.producto = copy_producto;\r\n        copy_producto_compra.conflicto = true;\r\n        productos_nuevos[i] = copy_producto_compra;\r\n        conflicto = true;\r\n        /* console.log(\"conflicto unidades\"); */\r\n      }\r\n\r\n      //verificacion de Presentaciones si hay presentaciones\r\n\r\n      if (presentaciones.length > 0) {\r\n        /* console.log(presentaciones, presentaciones_base); */\r\n        if (presentaciones_base.length > 0) {\r\n          if (presentaciones.length === presentaciones_base.length) {\r\n            for (let x = 0; x < presentaciones.length; x++) {\r\n              const present = presentaciones[x];\r\n              for (let y = 0; y < presentaciones_base.length; y++) {\r\n                const present_base = presentaciones_base[y];\r\n\r\n                if (\r\n                  present.medida._id === present_base.medida._id &&\r\n                  present.color._id === present_base.color._id &&\r\n                  present.almacen === present_base.almacen\r\n                ) {\r\n                  if (\r\n                    present.cantidad !== present_base.cantidad ||\r\n                    present.precio !== present_base.precio\r\n                  ) {\r\n                    //si son diferentes se agrega las presentaciones_base al compra_nueva\r\n                    copy_producto.presentaciones = presentaciones_base;\r\n                    copy_producto_compra.producto = copy_producto;\r\n                    copy_producto_compra.conflicto = true;\r\n                    productos_nuevos[i] = copy_producto_compra;\r\n                    conflicto = true;\r\n                    /* console.log(\"conflicto presentaciones\"); */\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            //si son diferentes se agrega las presentaciones al compra_nueva\r\n            copy_producto.presentaciones = presentaciones_base;\r\n            copy_producto_compra.producto = copy_producto;\r\n            copy_producto_compra.conflicto = true;\r\n            productos_nuevos[i] = copy_producto_compra;\r\n            conflicto = true;\r\n            /* console.log(\"conflicto diferentes presentaciones \"); */\r\n          }\r\n        } else {\r\n          //si no hay se agrega las presentaciones al compra_nueva\r\n          copy_producto_compra.conflicto = true;\r\n          productos_nuevos[i] = copy_producto_compra;\r\n          conflicto = true;\r\n          /* console.log(\"conflicto sin presentaciones \"); */\r\n        }\r\n      }\r\n    }\r\n\r\n    const nuevo_producto_compra = [];\r\n    let subtotal = 0;\r\n    let impuestos = 0;\r\n    let total = 0;\r\n    if (conflicto) {\r\n      for (let k = 0; k < productos_nuevos.length; k++) {\r\n        const datosProducto = { ...productos_nuevos[k] };\r\n\r\n        if (datosProducto.producto.datos_generales.tipo_producto !== \"OTROS\") {\r\n          //si es calzado o ropa\r\n          //CANTIDADES\r\n          if (datosProducto.producto.presentaciones.length > 0) {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.producto.presentaciones.forEach((presentacion) => {\r\n              const { cantidad, cantidad_nueva } = presentacion;\r\n              let nueva = cantidad_nueva ? cantidad_nueva : 0;\r\n              datosProducto.cantidad += cantidad + nueva;\r\n            });\r\n            if (isNaN(datosProducto.cantidad)) datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          } else {\r\n            datosProducto.cantidad = 0;\r\n            datosProducto.cantidad_total = datosProducto.cantidad;\r\n          }\r\n        } else {\r\n          //Si es una unidad normal\r\n\r\n          //CANTIDADES\r\n          const { cantidad_regalo, cantidad, unidad_regalo } = datosProducto;\r\n          //convertir todo a la unidad media y sumar (Pz, Kg, Lt)\r\n          const factor =\r\n            datosProducto.producto.precios.unidad_de_compra.cantidad;\r\n          const cantiad_media = cantidad * factor;\r\n          let cantidad_regalo_media =\r\n            unidad_regalo === \"Pz\" ||\r\n            unidad_regalo === \"Kg\" ||\r\n            unidad_regalo === \"Lt\"\r\n              ? cantidad_regalo\r\n              : cantidad_regalo * factor;\r\n          let cantidad_total_media = cantiad_media + cantidad_regalo_media;\r\n\r\n          //si factor es > 1 es caja o costal y dividir unidad media entre factor y si no mandar la cantidad total media;\r\n          if (factor > 1) {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media / factor;\r\n            datosProducto.cantidad_total = cantidad_total_media / factor;\r\n          } else {\r\n            datosProducto.cantidad_regalo = cantidad_regalo_media;\r\n            datosProducto.cantidad_total = cantidad_total_media;\r\n          }\r\n        }\r\n\r\n        //PRECIOS\r\n        const {\r\n          iva,\r\n          ieps,\r\n          precio_con_impuesto,\r\n          precio_sin_impuesto,\r\n        } = datosProducto.producto.precios.precio_de_compra;\r\n\r\n        datosProducto.total_con_descuento = precio_con_impuesto;\r\n        datosProducto.costo = precio_con_impuesto;\r\n        datosProducto.iva_total = iva * datosProducto.cantidad_total;\r\n        datosProducto.ieps_total = ieps * datosProducto.cantidad_total;\r\n        datosProducto.impuestos = (iva + ieps) * datosProducto.cantidad_total;\r\n        datosProducto.subtotal =\r\n          precio_sin_impuesto * datosProducto.cantidad_total;\r\n        datosProducto.total =\r\n          precio_con_impuesto * datosProducto.cantidad_total;\r\n\r\n        if (datosProducto.descuento_porcentaje > 0) {\r\n          datosProducto.descuento_precio = Math.round(\r\n            (precio_con_impuesto * datosProducto.descuento_porcentaje) / 100\r\n          );\r\n          datosProducto.total_con_descuento =\r\n            precio_con_impuesto - datosProducto.descuento_precio;\r\n        }\r\n\r\n        subtotal += datosProducto.subtotal;\r\n        impuestos += datosProducto.impuestos;\r\n        total +=\r\n          datosProducto.total_con_descuento * datosProducto.cantidad_total;\r\n\r\n        nuevo_producto_compra.push(datosProducto);\r\n      }\r\n      setNuevoArray({\r\n        _id: compra._id,\r\n        almacen: compra.almacen,\r\n        proveedor: compra.proveedor,\r\n        productos: nuevo_producto_compra,\r\n        en_espera: compra.en_espera,\r\n        fecha_registro: compra.fecha_registro,\r\n        impuestos,\r\n        subtotal,\r\n        total,\r\n      });\r\n    } else {\r\n      setNuevoArray(compra);\r\n    }\r\n\r\n    setTimeout(() => {\r\n      setLoadingVerificacion(false);\r\n      setSuccess(true);\r\n    }, 1500);\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent\r\n        style={{\r\n          height: 150,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n        }}\r\n      >\r\n        <DialogContentText id=\"dialog-verificarcompra-description\">\r\n          Si ya no hay existencias en tu producto se marcaran en la tabla y se\r\n          quitaran al retomar la compra para no causar conflictos, podras editar\r\n          tu compra mas adelante\r\n        </DialogContentText>\r\n        {loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CircularProgress\r\n              size={18}\r\n              color=\"primary\"\r\n              style={{ marginRight: 8 }}\r\n            />\r\n            Verificando existencias en tus productos...\r\n          </Box>\r\n        ) : null}\r\n        {!loadingVerificacion ? (\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <CheckCircle color=\"primary\" style={{ marginRight: 8 }} />\r\n            Listo, producto verificados\r\n          </Box>\r\n        ) : null}\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {loadingVerificacion ? (\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n        ) : (\r\n          <Button onClick={handleClose} color=\"primary\" startIcon={<Done />}>\r\n            Aceptar\r\n          </Button>\r\n        )}\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Button, useTheme } from \"@material-ui/core\";\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport AbrirCompra from \"../AbrirCompra/AbrirCompra\";\r\nimport VerificarProductosCompras from \"./VerificarProductos\";\r\n\r\nimport {\r\n  Dialog,\r\n  CircularProgress,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { CheckCircle, DeleteOutlined, Done, Error } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n});\r\n\r\nexport default function DatosDeCompra({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  /* let compra_temp = {...compra} */\r\n  const [compra_temp, setCompraTemp] = useState({ ...compra });\r\n  const { productos } = compra_temp;\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n\r\n  const [nuevoArray, setNuevoArray] = useState();\r\n  const [verificado, setVerificado] = useState(false);\r\n\r\n  const obtenerBusqueda = (value) => setBusqueda(value);\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      productos.filter((datos) => {\r\n        return datos.producto.datos_generales.nombre_comercial\r\n          .toLowerCase()\r\n          .includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, productos]);\r\n\r\n  useEffect(() => {\r\n    if (verificado && nuevoArray) {\r\n      setCompraTemp(nuevoArray);\r\n    }\r\n  }, [verificado]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={1} display=\"flex\">\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Proveedor: </b>\r\n          {compra_temp.proveedor.nombre_cliente}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Almacen: </b>\r\n          {compra_temp.almacen.nombre_almacen}\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Subtotal: ${parseFloat(compra_temp.subtotal.toFixed(2))}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>Impuestos: ${parseFloat(compra_temp.impuestos.toFixed(2))}</b>\r\n        </Typography>\r\n        <Typography style={{ marginRight: 16 }}>\r\n          <b>\r\n            Total: ${formatoMexico(parseFloat(compra_temp.total.toFixed(2)))}\r\n          </b>\r\n        </Typography>\r\n      </Box>\r\n      <Box mb={2} display=\"flex\">\r\n        <Grid container>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar una compra...\"\r\n              onChange={(e) => obtenerBusqueda(e.target.value)}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <SearchOutlinedIcon color=\"action\" />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={6} xs={12}>\r\n            <Box display=\"flex\" justifyContent=\"flex-end\">\r\n              {permisosUsuario.accesos.compras.compras_espera.eliminar ===\r\n              false ? null : (\r\n                <ModalEliminarCompra\r\n                  compra={compra_temp}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                  handleOpenDetalles={handleOpenDetalles}\r\n                />\r\n              )}\r\n              <Box mx={1} />\r\n\r\n              {permisosUsuario.accesos.compras.compras_espera.editar ===\r\n              false ? null : verificado ? (\r\n                <AbrirCompra\r\n                  compra={compra_temp}\r\n                  status=\"enEspera\"\r\n                  handleOpenDetalles={handleOpenDetalles}\r\n                  refetchEspera={refetch}\r\n                />\r\n              ) : (\r\n                <VerificarProductosCompras\r\n                  compra={compra_temp}\r\n                  nuevoArray={nuevoArray}\r\n                  setNuevoArray={setNuevoArray}\r\n                  setVerificado={setVerificado}\r\n                />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {verificado ? <TableCell /> : null}\r\n                <TableCell>Producto</TableCell>\r\n                <TableCell>Medida</TableCell>\r\n                <TableCell>Color</TableCell>\r\n                <TableCell>Unidad</TableCell>\r\n                <TableCell>Cantidad</TableCell>\r\n                <TableCell>C. regalo</TableCell>\r\n                <TableCell>C. total</TableCell>\r\n                <TableCell>Descuento</TableCell>\r\n                <TableCell>Subtotal</TableCell>\r\n                <TableCell>Impuestos</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((datos, index) => {\r\n                /* console.log(datos); */\r\n                return (\r\n                  <TableRow\r\n                    tabIndex={-1}\r\n                    key={index}\r\n                    selected={datos.conflicto}\r\n                  >\r\n                    {verificado ? (\r\n                      <TableCell\r\n                        style={{\r\n                          paddingTop: 0,\r\n                          paddingBottom: 0,\r\n                        }}\r\n                      >\r\n                        {datos.conflicto ? (\r\n                          <Error color=\"primary\" />\r\n                        ) : (\r\n                          <CheckCircle\r\n                            style={{\r\n                              color: theme.palette.success.main,\r\n                            }}\r\n                          />\r\n                        )}\r\n                      </TableCell>\r\n                    ) : null}\r\n                    <TableCell>\r\n                      {datos.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.medida && datos.medida.medida\r\n                        ? datos.medida.medida\r\n                        : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell padding=\"checkbox\">\r\n                      {datos.color && datos.color.hex ? (\r\n                        <Chip\r\n                          label={datos.color.color}\r\n                          size=\"small\"\r\n                          style={{\r\n                            backgroundColor: datos.color.hex,\r\n                            color: theme.palette.getContrastText(\r\n                              datos.color.hex\r\n                            ),\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        \"N/A\"\r\n                      )}\r\n                    </TableCell>\r\n                    <TableCell>{datos.unidad}</TableCell>\r\n                    <TableCell>{datos.cantidad}</TableCell>\r\n                    <TableCell>{datos.cantidad_regalo}</TableCell>\r\n                    <TableCell>{datos.cantidad_total}</TableCell>\r\n                    <TableCell>{`$${datos.descuento_precio} - %${datos.descuento_porcentaje}`}</TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.subtotal)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.impuestos)}</b>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <b>${formatoMexico(datos.total)}</b>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalEliminarCompra = ({\r\n  compra,\r\n  setAlert,\r\n  refetch,\r\n  handleOpenDetalles,\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n      handleOpenDetalles();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        color=\"secondary\"\r\n        startIcon={<DeleteOutlined />}\r\n        onClick={() => handleOpen()}\r\n      >\r\n        Eliminar compra\r\n      </Button>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  IconButton,\r\n  CircularProgress,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DatosDeCompraEspera from \"./DatosDeCompraEspera\";\r\nimport {\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\n\r\nimport {\r\n  formatoFecha,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { AssignmentOutlined, DeleteOutlined, Done } from \"@material-ui/icons\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ELIMINAR_COMPRA_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"68vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaEnEspera({\r\n  obtenerComprasEnEspera,\r\n  refetch,\r\n  page,\r\n  setPage,\r\n  limit,\r\n  filtro,\r\n}) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n    refetch({\r\n      empresa: permisosUsuario.empresa._id,\r\n      sucursal: permisosUsuario.sucursal._id,\r\n      offset: nextPage,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Almacen</TableCell>\r\n              <TableCell>Proveedor</TableCell>\r\n              <TableCell>Fecha de compra</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Detalles</TableCell>\r\n              {permisosUsuario.accesos.compras.compras_espera.elimina ===\r\n              false ? null : (\r\n                <TableCell>Eliminar</TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerComprasEnEspera.docs.map((compra, index) => (\r\n              <RenderRowsComprasEspera\r\n                key={index}\r\n                compra={compra}\r\n                refetch={refetch}\r\n                setAlert={setAlert}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerComprasEnEspera.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RenderRowsComprasEspera = ({ compra, refetch, setAlert }) => {\r\n  const {\r\n    almacen,\r\n    proveedor,\r\n    fecha_registro,\r\n    subtotal,\r\n    impuestos,\r\n    total,\r\n  } = compra;\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  return (\r\n    <TableRow hover tabIndex={-1}>\r\n      <TableCell>{almacen.nombre_almacen}</TableCell>\r\n      <TableCell>{proveedor.nombre_cliente}</TableCell>\r\n      <TableCell>{formatoFecha(fecha_registro)}</TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(subtotal)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(impuestos)}</b>\r\n      </TableCell>\r\n      <TableCell>\r\n        <b>${formatoMexico(total)}</b>\r\n      </TableCell>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <ModalContinuarCompra\r\n          compra={compra}\r\n          refetch={refetch}\r\n          setAlert={setAlert}\r\n        />\r\n      </TableCell>\r\n      {permisosUsuario.accesos.compras.compras_espera.eliminar ===\r\n      false ? null : (\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <ModalEliminarCompra\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ModalContinuarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton size=\"small\" onClick={() => handleOpen()}>\r\n        <AssignmentOutlined />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleOpen}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\">\r\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Datos de compra en espera\r\n            </Typography>\r\n            <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DatosDeCompraEspera\r\n            compra={compra}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n            handleOpenDetalles={handleOpen}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalEliminarCompra = ({ compra, setAlert, refetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCompraEnEspera] = useMutation(ELIMINAR_COMPRA_ESPERA);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const eliminarCompra = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCompraEnEspera({\r\n        variables: {\r\n          id: compra._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarCompraEnEspera.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <IconButton size=\"small\" onClick={() => handleOpen()}>\r\n        <DeleteOutlined color=\"error\" />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleOpen} TransitionComponent={Transition}>\r\n        <DialogTitle>¿Desea eliminar esta compra?</DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"inherit\"\r\n            size=\"large\"\r\n            startIcon={<Close />}\r\n            onClick={() => handleOpen()}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"secondary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={18} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => eliminarCompra()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useRef, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { FcOvertime } from \"react-icons/fc\";\r\nimport { SearchOutlined } from \"@material-ui/icons\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\n\r\nimport ListaEnEspera from \"./ListaEnEspera\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { OBTENER_COMPRAS_ESPERA } from \"../../../../gql/Compras/compras\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasEnEspera() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcOvertime className={classes.icon} />\r\n          </Box>\r\n          Compras en espera\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Compras en espera\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container maxWidth=\"xl\">\r\n          <ContentDialogCompras />\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentDialogCompras = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const searchfilter = useRef(null);\r\n  const [page, setPage] = useState(0);\r\n  const limit = 20;\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_COMPRAS_ESPERA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtro,\r\n      limit,\r\n      offset: 0,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  let obtenerComprasEnEspera = [];\r\n  if (data) obtenerComprasEnEspera = data.obtenerComprasEnEspera;\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    refetch({ filtro: value });\r\n    setFiltro(value);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box my={3} maxWidth={500}>\r\n        <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n          <TextField\r\n            inputRef={searchfilter}\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Buscar una compra...\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                    <SearchOutlined />\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </form>\r\n      </Box>\r\n      <ListaEnEspera\r\n        obtenerComprasEnEspera={obtenerComprasEnEspera}\r\n        refetch={refetch}\r\n        page={page}\r\n        setPage={setPage}\r\n        limit={limit}\r\n        filtro={filtro}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Box, Container, Grid } from \"@material-ui/core\";\r\nimport AbrirCompra from \"./AbrirCompra/AbrirCompra\";\r\nimport ComprasRealizadas from \"./ComprasRealizadas/ComprasRealizadas\";\r\n/* import CargaMasiva from './CargaMasiva/CargaMasiva'; */\r\nimport ComprasEnEspera from \"./ComprasEnEspera/ComprasEnEspera\";\r\n\r\nexport default function Compras() {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Grid container spacing={3} justifyContent=\"center\">\r\n        {permisosUsuario.accesos.compras.abrir_compra.ver === false ? null : (\r\n          <Grid item md={4}>\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <AbrirCompra />\r\n            </Box>\r\n          </Grid>\r\n        )}\r\n        {permisosUsuario.accesos.compras.compras_realizadas.ver ===\r\n        false ? null : (\r\n          <Grid item md={4}>\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <ComprasRealizadas />\r\n            </Box>\r\n          </Grid>\r\n        )}\r\n        {permisosUsuario.accesos.compras.compras_espera.ver === false ? null : (\r\n          <Grid item md={4}>\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <ComprasEnEspera />\r\n            </Box>\r\n          </Grid>\r\n        )}\r\n        {/* <Grid item md={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<CargaMasiva />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useContext, useState, Fragment, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CrearCliente from \"./CrearCliente\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CLIENTES,\r\n  ACTUALIZAR_CLIENTE,\r\n  ELIMINAR_CLIENTE,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { TablePagination } from \"@material-ui/core\";\r\n// import { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"63vh\",\r\n  },\r\n});\r\n\r\nexport default function ListaClientes({\r\n  user,\r\n  tipo,\r\n  filtro,\r\n  ventas,\r\n  handleClickOpen,\r\n  isOnline,\r\n}) {\r\n  const classes = useStyles();\r\n  const { setUpdateClientVenta, updateClientVenta, update } =\r\n    useContext(ClienteCtx);\r\n  const [value] = useDebounce(filtro, 1000);\r\n  const [page, setPage] = useState(0);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const limit = 20;\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: {\r\n      tipo,\r\n      filtro: value,\r\n      empresa: sesion.empresa._id,\r\n      eliminado: false,\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  //show modal accept client\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [dataSelectRowClient, setDataSelectRowClient] = useState({});\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpenModal = (data, e) => {\r\n    if (ventas) {\r\n      setShowModal(true);\r\n      setDataSelectRowClient(data);\r\n    }\r\n  };\r\n\r\n  const handleClickSelectClient = () => {\r\n    //clear object\r\n    const {\r\n      representante,\r\n      estado_cliente,\r\n      tipo_cliente,\r\n      empresa,\r\n      sucursal,\r\n      fecha_nacimiento,\r\n      fecha_registro,\r\n      eliminado,\r\n      ...clean_cliente\r\n    } = dataSelectRowClient;\r\n    try {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...venta_actual,\r\n          subTotal:\r\n            venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n          total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n          impuestos:\r\n            venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n          iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n          ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n          descuento:\r\n            venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n          monedero:\r\n            venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n          // tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n          cliente: clean_cliente ? clean_cliente : {},\r\n          venta_cliente: true,\r\n          productos:\r\n            venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n          tipo_emision: venta_actual.tipo_emision\r\n            ? venta_actual.tipo_emision\r\n            : \"TICKET\",\r\n        })\r\n      );\r\n      setUpdateClientVenta(!updateClientVenta);\r\n      setShowModal(!showModal);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n        width=\"120vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.root} variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell width=\"110\">No. Cliente</TableCell>\r\n                <TableCell width=\"100\">Clave</TableCell>\r\n                <TableCell width=\"200\">Nombre</TableCell>\r\n                <TableCell width=\"150\">Correo</TableCell>\r\n                <TableCell width=\"200\">Fecha Registro</TableCell>\r\n                {user === \"EMPLEADO\" ? null : (\r\n                  <TableCell width=\"100\">Estado</TableCell>\r\n                )}\r\n                <TableCell width=\"50\">Editar</TableCell>\r\n                {user === \"EMPLEADO\" ? null : (\r\n                  <TableCell width=\"50\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerClientes.docs.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    isOnline={isOnline}\r\n                    user={user}\r\n                    key={index}\r\n                    datos={row}\r\n                    handleClickOpenModal={handleClickOpenModal}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                    ventas={ventas}\r\n                    dataSelectRowClient={dataSelectRowClient}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={obtenerClientes.totalDocs}\r\n          rowsPerPage={limit}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n        <Dialog\r\n          open={showModal}\r\n          onClose={() => setShowModal(false)}\r\n          aria-labelledby=\"select-dialog-cliente-venta\"\r\n          aria-describedby=\"select-cliente-venta-description\"\r\n        >\r\n          <DialogTitle id=\"select-dialog-cliente-venta\">\r\n            {\"¿Estas seguro que desea seleccionar este cliente?\"}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <Typography>\r\n              {`Cliente: ${dataSelectRowClient.nombre_cliente}`}\r\n            </Typography>\r\n            <Typography>\r\n              {`Número de clave: ${dataSelectRowClient.clave_cliente}`}\r\n            </Typography>\r\n            <DialogContentText id=\"select-cliente-venta-description\">\r\n              Al seleccionar el cliente se colocara en la venta.\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={() => setShowModal(false)}\r\n              color=\"primary\"\r\n              autoFocus\r\n            >\r\n              cancelar\r\n            </Button>\r\n            <Button onClick={() => handleClickSelectClient()} color=\"primary\">\r\n              Aceptar\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  datos,\r\n  user,\r\n  handleClickOpenModal,\r\n  setAlert,\r\n  refetch,\r\n  ventas,\r\n  dataSelectRowClient,\r\n  isOnline,\r\n}) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { update, setUpdate } = useContext(ClienteCtx);\r\n  const [loading, setLoading] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* console.log(datos); */\r\n\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarCliente({\r\n        variables: {\r\n          input: {\r\n            estado_cliente: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        onClick={(e) => handleClickOpenModal(datos, e)}\r\n        hover={ventas}\r\n        style={ventas ? { cursor: \"pointer\" } : null}\r\n        selected={\r\n          ventas && dataSelectRowClient.numero_cliente === datos.numero_cliente\r\n        }\r\n      >\r\n        <TableCell>\r\n          <Typography>{datos.numero_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.clave_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{formatoFechaCorta(datos.fecha_registro)}</Typography>\r\n        </TableCell>\r\n        {user === \"EMPLEADO\" ? null : (\r\n          <TableCell>\r\n            {loading ? (\r\n              <CircularProgress size={30} />\r\n            ) : (\r\n              <Switch\r\n                checked={datos.estado_cliente}\r\n                disabled={!isOnline}\r\n                onChange={cambiarEstado}\r\n                color=\"primary\"\r\n                size=\"small\"\r\n              />\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.editar ===\r\n          false ? null : (\r\n            <CrearCliente\r\n              tipo=\"CLIENTE\"\r\n              accion=\"actualizar\"\r\n              datos={datos}\r\n              refetch={refetch}\r\n              isOnline={isOnline}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell width={50}>\r\n          {permisosUsuario.accesos.catalogos.clientes.eliminar ===\r\n          false ? null : (\r\n            <EliminarCliente\r\n              isOnline={isOnline}\r\n              datos={datos}\r\n              setAlert={setAlert}\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst EliminarCliente = ({ datos, setAlert, refetch, isOnline }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE);\r\n  const [loading, setLoading] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update, setUpdate } = useContext(ClienteCtx);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarClienteBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCliente({\r\n        variables: {\r\n          id: datos._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.eliminarCliente;\r\n        setAlert({ message, status: \"success\", open: true });\r\n        refetch();\r\n      }\r\n      setLoading(false);\r\n      setUpdate(!update);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        disabled={!isOnline}\r\n        size=\"small\"\r\n        color=\"secondary\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-cliente\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-cliente\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarClienteBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  RestoreFromTrash,\r\n  Close,\r\n  Search,\r\n  DeleteOutline,\r\n} from \"@material-ui/icons\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Typography,\r\n  TextField,\r\n  InputAdornment,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport { Fragment } from \"react\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport {\r\n  ACTUALIZAR_CLIENTE,\r\n  OBTENER_CLIENTES,\r\n} from \"../../../../gql/Catalogos/clientes\";\r\nimport moment from \"moment\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ClientesInactivosComponent({\r\n  tipo,\r\n  refetchProveedores,\r\n  isOnline,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [filter, setFilter] = useState(\"\");\r\n\r\n  const handleModalToggle = () => setOpen(!open);\r\n  console.log(isOnline);\r\n  return (\r\n    <div>\r\n      <Button\r\n        disableElevation\r\n        color=\"inherit\"\r\n        onClick={handleModalToggle}\r\n        startIcon={<DeleteOutline />}\r\n        disabled={!isOnline}\r\n      >\r\n        {tipo === \"CLIENTE\" ? \"Clientes\" : \"Proveedores \"} eliminados\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleModalToggle();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-clientes-eliminados\"\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle id=\"dialog-clientes-eliminados\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              {tipo === \"CLIENTE\" ? \"Clientes\" : \"Proveedores \"} eliminados\r\n            </Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleModalToggle}\r\n              color=\"secondary\"\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              placeholder=\"Buscar cliente: No. cliente, clave o nombre...\"\r\n              onChange={(e) => setFilter(e.target.value)}\r\n              value={filter}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n          <ClientesInactivos\r\n            tipo={tipo}\r\n            filter={filter}\r\n            refetchProveedores={refetchProveedores}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ClientesInactivos = ({ tipo, filter, refetchProveedores }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update } = useContext(ClienteCtx);\r\n  const [page, setPage] = useState(0);\r\n  const limit = 20;\r\n\r\n  const [value] = useDebounce(filter, 800);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: {\r\n      tipo,\r\n      filtro: value ? value : \"\",\r\n      empresa: sesion.empresa._id,\r\n      eliminado: true,\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <ErrorPage error={error} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (!loading && !error && !data) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <Typography variant=\"h6\">No hay clientes eliminados</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Box height=\"60vh\">\r\n      <TableContainer style={{ height: \"50vh\" }}>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>No. Cliente</TableCell>\r\n              <TableCell>Clave</TableCell>\r\n              <TableCell>Nombre</TableCell>\r\n              <TableCell>Correo</TableCell>\r\n              <TableCell>Fecha Registro</TableCell>\r\n              <TableCell align=\"right\">Reactivar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.docs.map((row, index) => (\r\n              <RenderClientes\r\n                key={index}\r\n                datos={row}\r\n                refetchProveedores={refetchProveedores}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerClientes.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst RenderClientes = ({ datos, refetchProveedores }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { setUpdate, update } = useContext(ClienteCtx);\r\n\r\n  const [actualizarCliente] = useMutation(ACTUALIZAR_CLIENTE);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n    try {\r\n      await actualizarCliente({\r\n        variables: {\r\n          input: {\r\n            eliminado: false,\r\n          },\r\n          id: datos._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setUpdate(!update);\r\n      if (refetchProveedores) refetchProveedores();\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell>\r\n          <Typography>{datos.numero_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.clave_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre_cliente}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>\r\n            {moment(datos.fecha_registro).format(\"DD/MM/YYYY\")}\r\n          </Typography>\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          <IconButton color=\"primary\" size=\"small\" onClick={handleDeleteToggle}>\r\n            <RestoreFromTrash style={{ fontSize: 30 }} />\r\n          </IconButton>\r\n        </TableCell>\r\n      </TableRow>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleDeleteToggle}\r\n        aria-labelledby=\"reactivar-cliente-dialog\"\r\n      >\r\n        <DialogTitle id=\"reactivar-cliente-dialog\">\r\n          {\"Se reactivará este cliente\"}\r\n        </DialogTitle>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteToggle} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => cambiarEstado()}\r\n            color=\"primary\"\r\n            autoFocus\r\n            startIcon={loading ? <CircularProgress size={20} /> : null}\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FcManager } from \"react-icons/fc\";\r\nimport { Box, Grid, IconButton, InputBase, Paper } from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaClientes from \"./ListaClientes\";\r\nimport CrearCliente from \"./CrearCliente\";\r\nimport ClientesInactivosComponent from \"./ClientesInactivos\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cliente() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setValues(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcManager className={classes.icon} />\r\n          </Box>\r\n          Cliente\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Cliente\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Box mx={4} my={3}>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={8}>\r\n              <Paper className={classes.root}>\r\n                <InputBase\r\n                  fullWidth\r\n                  placeholder=\"Buscar cliente...\"\r\n                  onChange={(e) => setValues(e.target.value)}\r\n                  onKeyPress={pressEnter}\r\n                  value={values}\r\n                />\r\n                <IconButton onClick={() => setValues(values)}>\r\n                  <Search />\r\n                </IconButton>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              md={6}\r\n              xs={4}\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"flex-end\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              {permisosUsuario.accesos.catalogos.clientes.agregar ===\r\n              false ? null : (\r\n                <ClientesInactivosComponent\r\n                  isOnline={isOnline}\r\n                  tipo=\"CLIENTE\"\r\n                />\r\n              )}\r\n              <Box mx={1} />\r\n              {permisosUsuario.accesos.catalogos.clientes.agregar ===\r\n              false ? null : (\r\n                <CrearCliente\r\n                  isOnline={isOnline}\r\n                  tipo=\"CLIENTE\"\r\n                  accion=\"registrar\"\r\n                />\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n        <Box mx={4}>\r\n          <ListaClientes isOnline={isOnline} tipo=\"CLIENTE\" filtro={values} />\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const REGISTRAR_DESCUENTOS = gql`\r\n\tmutation CrearDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        crearDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_DESCUENTOS = gql`\r\n\tmutation ActualizarDescuentoUnidad($input: ObjetoDescuentoUnidadesInput!){\r\n        actualizarDescuentoUnidad(input: $input){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const DESACTIVAR_DESCUENTOS = gql`\r\n\tmutation DesactivarDescuentoUnidad($input: ActivarDescuentoUnidades , $id: ID!){\r\n        desactivarDescuentoUnidad(input: $input, id: $id){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_DESCUENTOS = gql`\r\n\tmutation ELiminarDescuentoUnidad( $id: ID!){\r\n        eliminarDescuentoUnidad( id: $id){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { useContext, useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  Switch,\r\n  Tooltip,\r\n} from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport {\r\n  DESACTIVAR_DESCUENTOS,\r\n  ELIMINAR_DESCUENTOS,\r\n} from \"../../../../../gql/Catalogos/descuentos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport BackdropComponent from \"../../../../../components/Layouts/BackDrop\";\r\n\r\nconst headCells = [\r\n  { id: \"cantidad\", label: \"Cantidad\" },\r\n  { id: \"tipo\", label: \"Tipo\" },\r\n  { id: \"precio\", label: \"Precio U.\" },\r\n  { id: \"precioDes\", label: \"Precio Desc.\" },\r\n  { id: \"descuento\", label: \"% Desc.\" },\r\n  { id: \"eliminar\", label: \"Eliminar\" },\r\n  { id: \"activo\", label: \"Activo\" },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  const { onSelectAllClick, numSelected, rowCount, datosPrecios } = props;\r\n  let variable = false;\r\n  datosPrecios?.forEach((element) => {\r\n    if (element.medida) {\r\n      return (variable = true);\r\n    }\r\n  });\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            indeterminate={numSelected > 0 && numSelected < rowCount}\r\n            checked={rowCount > 0 && numSelected === rowCount}\r\n            onChange={onSelectAllClick}\r\n            inputProps={{ \"aria-label\": \"select all desserts\" }}\r\n          />\r\n        </TableCell>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n            padding={headCell.disablePadding ? \"none\" : \"default\"}\r\n          >\r\n            {headCell.label}\r\n          </TableCell>\r\n        ))}\r\n        {variable === true ? (\r\n          <>\r\n            <TableCell>Talla</TableCell>\r\n            <TableCell>Color</TableCell>\r\n          </>\r\n        ) : null}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    height: 300,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 30,\r\n    width: 30,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPreciosDescuentos({\r\n  value,\r\n  datos,\r\n  setCleanList,\r\n  cleanList,\r\n  verificarDatos,\r\n  setPrecioPrueba,\r\n  productosRefetch,\r\n  setLoading,\r\n  loading,\r\n}) {\r\n  const classes = useStyles();\r\n  const {\r\n    //es este\r\n    datosPreciosProducto,\r\n    setPreciosProductos,\r\n    setDatosPreciosProducto,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  var porcentaje = parseFloat((100 - value).toFixed(2));\r\n  const [selected, setSelected] = useState([]);\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(5);\r\n\r\n  if (datos) {\r\n    if (datos.medidas_producto.length > 0) {\r\n      setDatosPreciosProducto(datos.medidas_producto);\r\n    } else {\r\n      setDatosPreciosProducto(datos.unidades_de_venta);\r\n    }\r\n  }\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = datosPreciosProducto.map((n) => n);\r\n      setSelected(newSelecteds);\r\n      verificarDatos(newSelecteds);\r\n      setPreciosProductos(newSelecteds);\r\n      return;\r\n    }\r\n    setPreciosProductos([]);\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleClick = (event, _id) => {\r\n    const selectedIndex = selected.indexOf(_id);\r\n    let newSelected = [];\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, _id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1)\r\n      );\r\n    }\r\n    setPrecioPrueba(newSelected.length === 0 ? 0 : newSelected);\r\n    setPreciosProductos(newSelected);\r\n    verificarDatos(newSelected);\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setSelected([]);\r\n    setCleanList(false);\r\n  }, [cleanList]);\r\n\r\n  const isSelected = (_id) => selected.indexOf(_id) !== -1;\r\n\r\n  const emptyRows =\r\n    rowsPerPage -\r\n    Math.min(rowsPerPage, datosPreciosProducto.length - page * rowsPerPage);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.paper}>\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <TableContainer className={classes.table}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              rowCount={datosPreciosProducto.length}\r\n              datosPrecios={datosPreciosProducto}\r\n            />\r\n            <TableBody>\r\n              {datosPreciosProducto.map((row, index) => {\r\n                const isItemSelected = isSelected(row);\r\n                const labelId = `enhanced-table-checkbox-${index}`;\r\n                return (\r\n                  <RowsRender\r\n                    key={row._id}\r\n                    setLoading={setLoading}\r\n                    productosRefetch={productosRefetch}\r\n                    handleClick={handleClick}\r\n                    selected={selected}\r\n                    row={row}\r\n                    setAlert={setAlert}\r\n                    porcentaje={porcentaje}\r\n                    value={value}\r\n                    datos={datos}\r\n                    isItemSelected={isItemSelected}\r\n                    labelId={labelId}\r\n                  />\r\n                );\r\n              })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 53 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction RowsRender({\r\n  row,\r\n  value,\r\n  isItemSelected,\r\n  setLoading,\r\n  datos,\r\n  labelId,\r\n  setAlert,\r\n  porcentaje,\r\n  productosRefetch,\r\n  handleClick,\r\n  selected,\r\n}) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const { setDatosPreciosProducto } = useContext(RegProductoContext);\r\n  const [DesactivarDescuentoUnidad] = useMutation(DESACTIVAR_DESCUENTOS);\r\n  const [ELiminarDescuentoUnidad] = useMutation(ELIMINAR_DESCUENTOS);\r\n\r\n  const handleChangeActivo = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await DesactivarDescuentoUnidad({\r\n        variables: {\r\n          input: {\r\n            descuento_activo: !row.descuento_activo,\r\n          },\r\n          id: row._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      productosRefetch();\r\n      setAlert({\r\n        message: \"Estado de descuento actualizado\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    } catch (error) {\r\n      setAlert({\r\n        message: \"Ocurrio un problema en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleModal = () => {\r\n    setOpenModal(!openModal);\r\n    editarDatos();\r\n  };\r\n\r\n  const editarDatos = () => {\r\n    if (datos.medidas_producto.length > 0) {\r\n      setDatosPreciosProducto(datos.medidas_producto);\r\n      setLoading(false);\r\n    } else {\r\n      setDatosPreciosProducto(datos.unidades_de_venta);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    setLoading(true);\r\n    try {\r\n      productosRefetch();\r\n      const resultado = await ELiminarDescuentoUnidad({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      handleModal();\r\n      editarDatos();\r\n      setAlert({\r\n        message: resultado.data.eliminarDescuentoUnidad.message,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      aria-checked={isItemSelected}\r\n      tabIndex={-1}\r\n      key={row._id}\r\n      selected={isItemSelected}\r\n    >\r\n      <TableCell padding=\"checkbox\">\r\n        <Checkbox\r\n          onClick={(event) => {\r\n            handleClick(event, row);\r\n          }}\r\n          checked={isItemSelected}\r\n          inputProps={{ \"aria-labelledby\": labelId }}\r\n        />\r\n      </TableCell>\r\n      <TableCell align=\"center\">{row.cantidad}</TableCell>\r\n      <TableCell align=\"center\">{row?.unidad}</TableCell>\r\n      <TableCell align=\"center\">{row.precio}</TableCell>\r\n      <TableCell align=\"center\">\r\n        {isItemSelected === true && selected.length > 1 ? (\r\n          <b style={{ color: \"green\" }}>\r\n            {\" \"}\r\n            ${parseFloat(((row.precio * porcentaje) / 100).toFixed(2))}{\" \"}\r\n          </b>\r\n        ) : row.descuento === null ? (\r\n          0\r\n        ) : (\r\n          <b style={{ color: \"green\" }}> ${row.descuento.precio_neto} </b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell align=\"center\">\r\n        {isItemSelected === true && selected.length > 1 ? (\r\n          <b style={{ color: \"red\" }}> {value}% </b>\r\n        ) : !row.descuento || row.descuento === null ? (\r\n          0\r\n        ) : (\r\n          <b style={{ color: \"red\" }}> {row.descuento.porciento}% </b>\r\n        )}\r\n      </TableCell>\r\n      <TableCell align=\"center\">\r\n        <Modal\r\n          row={row}\r\n          handleModal={handleModal}\r\n          openModal={openModal}\r\n          handleDelete={handleDelete}\r\n        />\r\n      </TableCell>\r\n      <TableCell key={row._id} align=\"center\">\r\n        <Switch\r\n          key={row._id}\r\n          onChange={handleChangeActivo}\r\n          color=\"primary\"\r\n          disabled={\r\n            !row.descuento ? true : row.descuento.porciento === 0 ? true : false\r\n          }\r\n          defaultChecked={row.descuento_activo ? row.descuento_activo : false}\r\n          name=\"descuento_activo\"\r\n          inputProps={{ \"aria-label\": \"secondary checkbox\" }}\r\n        />\r\n      </TableCell>\r\n      {row.medida ? (\r\n        <TableCell align=\"center\">{row?.medida?.talla}</TableCell>\r\n      ) : null}\r\n\r\n      {row.color ? (\r\n        <TableCell align=\"center\">\r\n          <Tooltip\r\n            title={row?.color?.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: row?.color?.hex,\r\n                color: theme.palette.getContrastText(row?.color?.hex),\r\n              }}\r\n            ></div>\r\n          </Tooltip>\r\n        </TableCell>\r\n      ) : null}\r\n    </TableRow>\r\n  );\r\n}\r\n\r\n// MODAL PARA ELIMINAR EL DESCUENTO DE LOS PRODUCTOS\r\nconst Modal = ({ row, handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        onClick={handleModal}\r\n        disabled={\r\n          !row.descuento ? true : row.descuento.porciento === 0 ? true : false\r\n        }\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useState } from \"react\";\r\n\r\nimport LocalOfferIcon from \"@material-ui/icons/LocalOffer\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  makeStyles,\r\n  DialogTitle,\r\n  DialogContent,\r\n  Grid,\r\n  Box,\r\n  Typography,\r\n  TextField,\r\n  Slider,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nimport TablaPreciosDescuentos from \"./ListaPrecios\";\r\n\r\nimport { REGISTRAR_DESCUENTOS } from \"../../../../../gql/Catalogos/descuentos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../../components/Layouts/BackDrop\";\r\nimport { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  avatarGroup: {\r\n    \"& > .MuiAvatarGroup-avatar\": {\r\n      width: theme.spacing(8),\r\n      height: theme.spacing(8),\r\n    },\r\n  },\r\n  root: {\r\n    width: 400,\r\n  },\r\n  rootSlice: {\r\n    width: 350,\r\n  },\r\n  margin: {\r\n    height: theme.spacing(3),\r\n  },\r\n  rootTable: {\r\n    height: 300,\r\n  },\r\n}));\r\n\r\nexport default function DescuentoProductos({\r\n  datos,\r\n  productosRefetch,\r\n  isOnline,\r\n}) {\r\n  const [CrearDescuentoUnidad] = useMutation(REGISTRAR_DESCUENTOS);\r\n  const {\r\n    setDatosPreciosProducto,\r\n    preciosDescuentos,\r\n    setPreciosDescuentos,\r\n    preciosProductos,\r\n    setPreciosProductos,\r\n  } = useContext(RegProductoContext);\r\n\r\n  let iva = datos.precios.iva;\r\n  let ieps = datos.precios.ieps;\r\n  // Precio compra sin impuestos y sin utilidad\r\n  let PCSI = datos.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [openDescuento, setOpenDescuento] = useState(false);\r\n  const [cleanList, setCleanList] = useState(false);\r\n  const [validate] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [precioPrueba, setPrecioPrueba] = useState(0);\r\n  const [value, setValue] = useState(0);\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleCloseDescuentos = () => {\r\n    if (datos.medidas_producto.length > 0) {\r\n      setDatosPreciosProducto(datos.medidas_producto);\r\n      setLoading(false);\r\n    } else {\r\n      setDatosPreciosProducto(datos.unidades_de_venta);\r\n      setLoading(false);\r\n    }\r\n    setPrecioPrueba(0);\r\n    setValue(0);\r\n    preciosDescuentos.splice(0, preciosDescuentos.length);\r\n  };\r\n\r\n  const cerrarModal = () => {\r\n    setOpenDescuento(!openDescuento);\r\n    handleCloseDescuentos();\r\n  };\r\n\r\n  const verificarDatos = useCallback(\r\n    (datos) => {\r\n      for (let i = 0; i < datos.length; i++) {\r\n        if (datos[i].descuento) {\r\n          if (datos[i].descuento.porciento !== 0) {\r\n            setValue(datos[i].descuento.porciento);\r\n            if (datos.length === 1) {\r\n              setPrecioPrueba(datos[i].descuento.precio_neto);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [datos]\r\n  );\r\n\r\n  let arrayDescuento = [];\r\n\r\n  const obtenerPorcientoSlide = (event, newValue) => {\r\n    setValue(newValue);\r\n    preciosDescuentos.splice(0, preciosDescuentos.length);\r\n\r\n    for (let i = 0; i < preciosProductos.length; i++) {\r\n      let porcentaje = parseFloat(100 - newValue /* .toFixed(2) */); //Porcentaje para calculos de descuento\r\n      let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n      let dineroDescontado = 0;\r\n      let cantidad_unidad = preciosProductos[i].precio_unidad.cantidad_unidad;\r\n\r\n      PVCDSI = parseFloat(\r\n        (preciosProductos[i].precio_unidad.precio_venta * porcentaje) / 100\r\n      );\r\n      dineroDescontado = parseFloat(\r\n        preciosProductos[i].precio_unidad.precio_venta - PVCDSI\r\n      );\r\n\r\n      let iva_precio = parseFloat(\r\n        PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n      );\r\n\r\n      let ieps_precio = parseFloat(\r\n        PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n      );\r\n      let utilidad = parseFloat(((PVCDSI - PCSI) / PCSI) * 100);\r\n      let precio_neto = parseFloat(PVCDSI + iva_precio + ieps_precio);\r\n      let precio_general = parseFloat(precio_neto * cantidad_unidad);\r\n\r\n      arrayDescuento = {\r\n        _id: preciosProductos[i]._id,\r\n        descuento_activo: true,\r\n        descuento: {\r\n          cantidad_unidad: cantidad_unidad,\r\n          numero_precio: preciosProductos[i].precio_unidad.numero_precio,\r\n          unidad_maxima: preciosProductos[i].precio_unidad.unidad_maxima,\r\n          precio_general: parseFloat(precio_general.toFixed(2)),\r\n          precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n          precio_venta: parseFloat(PVCDSI.toFixed(2)),\r\n          iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n          ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n          utilidad: parseFloat(utilidad.toFixed(2)),\r\n          porciento: newValue,\r\n          dinero_descontado: parseFloat(dineroDescontado.toFixed(2)),\r\n        },\r\n      };\r\n\r\n      setPrecioPrueba(parseFloat(precio_neto.toFixed(2)));\r\n      if (preciosProductos.length !== 1) {\r\n        preciosDescuentos.push(arrayDescuento);\r\n      } else {\r\n        setPreciosDescuentos([arrayDescuento]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const obtenerPrecioText = (e) => {\r\n    let valorText = parseFloat(e.target.value);\r\n    if (preciosProductos.length === 1) {\r\n      setPrecioPrueba(valorText);\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let PVSI = parseFloat(valorText / (suma_impuestos + 1));\r\n\r\n      let cantidad_unidad = preciosProductos[0].precio_unidad.cantidad_unidad;\r\n      let dineroDescontado = 0;\r\n      let PVCDSI = 0; // Precio venta con descuento sin impuestos\r\n      let porcentaje = parseFloat(\r\n        (PVSI / preciosProductos[0].precio_unidad.precio_venta) * 100\r\n      );\r\n      let descuento = parseFloat(100 - porcentaje);\r\n\r\n      PVCDSI = parseFloat(\r\n        (preciosProductos[0].precio_unidad.precio_venta * porcentaje) / 100\r\n      );\r\n      dineroDescontado = parseFloat(\r\n        preciosProductos[0].precio_unidad.precio_venta - PVCDSI\r\n      );\r\n\r\n      let iva_precio = parseFloat(\r\n        PVCDSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        PVCDSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n      );\r\n      let utilidad = parseFloat(((PVCDSI - PCSI) / PCSI) * 100);\r\n      let precio_neto = parseFloat(PVCDSI + iva_precio + ieps_precio);\r\n      let precio_general = parseFloat(precio_neto * cantidad_unidad);\r\n\r\n      arrayDescuento = {\r\n        _id: preciosProductos[0]._id,\r\n        descuento_activo: true,\r\n        descuento: {\r\n          cantidad_unidad: cantidad_unidad,\r\n          numero_precio: preciosProductos[0].precio_unidad.numero_precio,\r\n          unidad_maxima: preciosProductos[0].precio_unidad.unidad_maxima,\r\n          precio_general: parseFloat(precio_general.toFixed(2)),\r\n          precio_neto: parseFloat(precio_neto.toFixed(2)),\r\n          precio_venta: parseFloat(PVCDSI.toFixed(2)),\r\n          iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n          ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n          utilidad: parseFloat(utilidad.toFixed(2)),\r\n          porciento: parseFloat(descuento.toFixed(2)),\r\n          dinero_descontado: parseFloat(dineroDescontado.toFixed(2)),\r\n        },\r\n      };\r\n\r\n      setValue(parseFloat(descuento.toFixed(2)));\r\n      setPreciosDescuentos([arrayDescuento]);\r\n    }\r\n  };\r\n\r\n  function valuetext(e) {\r\n    return `${e}`;\r\n  }\r\n\r\n  const saveData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await CrearDescuentoUnidad({\r\n        variables: {\r\n          input: {\r\n            descuentos: preciosDescuentos,\r\n          },\r\n        },\r\n      });\r\n      handleCloseDescuentos();\r\n      productosRefetch();\r\n      setValue(0);\r\n      setPreciosProductos([]);\r\n      setPreciosDescuentos([]);\r\n      setCleanList(!cleanList);\r\n      setAlert({\r\n        message: \"¡Listo descuentos realizados!\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    } catch (error) {\r\n      setAlert({\r\n        message: \"¡Oh no, ocurrio un problema con el servidor!\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const validacion = () => {\r\n    if (datos.medidas_producto.length > 0) {\r\n      for (let i = 0; i < datos.medidas_producto.length; i++) {\r\n        if (datos.medidas_producto[i]?.descuento_activo === true) {\r\n          return \"primary\";\r\n        } else {\r\n          return \"default\";\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < datos.unidades_de_venta.length; i++) {\r\n        if (datos.unidades_de_venta[i]?.descuento_activo === true) {\r\n          return \"primary\";\r\n        } else {\r\n          return \"default\";\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <IconButton\r\n        color={validacion()}\r\n        onClick={cerrarModal}\r\n        size=\"medium\"\r\n        disabled={\r\n          !isOnline ||\r\n          (datos.inventario_general &&\r\n            datos.inventario_general.length > 0 &&\r\n            datos.inventario_general[0].eliminado === true)\r\n        }\r\n      >\r\n        <LocalOfferIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={openDescuento}\r\n        onClose={handleCloseDescuentos}\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n      >\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <DialogTitle>\r\n          <Grid container>\r\n            <Box flexGrow={1} display=\"flex\" alignItems=\"center\">\r\n              {\"Descuento de Producto\"}\r\n            </Box>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={cerrarModal}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box textAlign=\"center\">\r\n            <Typography>\r\n              <b>Nombre comercial: </b>\r\n              {datos.datos_generales.nombre_comercial\r\n                ? datos.datos_generales.nombre_comercial\r\n                : \"-\"}\r\n            </Typography>\r\n          </Box>\r\n          <Box textAlign=\"center\">\r\n            <Typography>\r\n              <b>Nombre genérico: </b>\r\n              {datos.datos_generales.nombre_generico\r\n                ? datos.datos_generales.nombre_generico\r\n                : \"-\"}\r\n            </Typography>\r\n          </Box>\r\n          <Grid container>\r\n            <Grid item lg={8} md={6} xs={12}>\r\n              <Box p={1}>\r\n                <TablaPreciosDescuentos\r\n                  verificarDatos={verificarDatos}\r\n                  productosRefetch={productosRefetch}\r\n                  datos={datos}\r\n                  value={value}\r\n                  cleanList={cleanList}\r\n                  setCleanList={setCleanList}\r\n                  setPrecioPrueba={setPrecioPrueba}\r\n                  setLoading={setLoading}\r\n                  loading={loading}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={4} md={6} xs={12}>\r\n              <Box mt={5} dislay=\"flex\" justifyContent=\"center\">\r\n                <div className={classes.root}>\r\n                  <Box textAlign=\"center\">\r\n                    <Typography id=\"discrete-slider-always\" gutterBottom>\r\n                      <b>Porcentaje de descuento</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box my={5} />\r\n                  <Box\r\n                    display=\"flex\"\r\n                    justifyContent=\"center\"\r\n                    justifyItems=\"center\"\r\n                    className={classes.rootSlice}\r\n                  >\r\n                    <Slider\r\n                      disabled={preciosProductos.length === 0 ? true : false}\r\n                      getAriaValueText={valuetext}\r\n                      value={value}\r\n                      aria-labelledby=\"discrete-slider-small-steps\"\r\n                      valueLabelDisplay=\"auto\"\r\n                      onChange={obtenerPorcientoSlide}\r\n                    />\r\n                  </Box>\r\n                </div>\r\n              </Box>\r\n              <Box mt={5} display=\"flex\" justifyContent=\"center\">\r\n                {preciosProductos.length === 1 ? (\r\n                  <div>\r\n                    <Typography>Precio con Descuento</Typography>\r\n                    <TextField\r\n                      type=\"number\"\r\n                      InputProps={{ inputProps: { min: 0 } }}\r\n                      size=\"small\"\r\n                      variant=\"outlined\"\r\n                      value={precioPrueba}\r\n                      onChange={(e) => obtenerPrecioText(e)}\r\n                    />\r\n                  </div>\r\n                ) : null}\r\n              </Box>\r\n              <Box mt={2} display=\"flex\" justifyContent=\"center\">\r\n                <Button\r\n                  disabled={\r\n                    preciosProductos.length === 0 || validate === true\r\n                      ? true\r\n                      : false\r\n                  }\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  size=\"large\"\r\n                  onClick={saveData}\r\n                >\r\n                  Guardar\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport { CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_PRODUCTO } from \"../../../../gql/Catalogos/productos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({\r\n  datos,\r\n  productosRefetch,\r\n  isOnline,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { actualizarLista, setActualizarLista, setAlert } =\r\n    useContext(RegProductoContext);\r\n\r\n  const [eliminarProducto] = useMutation(ELIMINAR_PRODUCTO);\r\n\r\n  const handleToggleModal = () => setOpen(!open);\r\n\r\n  const eliminarProductoBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      setActualizarLista(!actualizarLista);\r\n      productosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleToggleModal();\r\n    }\r\n  };\r\n\r\n  console.log(isOnline);\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <Tooltip\r\n        title=\"Solo se puede eliminar un producto si este tiene 0 en inventarios\"\r\n        arrow\r\n      >\r\n        <IconButton\r\n          onClick={() => handleToggleModal()}\r\n          disabled={!isOnline}\r\n          color=\"secondary\"\r\n          /* disabled={\r\n            datos.inventario_general && datos.inventario_general.length === 0\r\n              ? true\r\n              : datos.inventario_general[0].eliminado === true\r\n              ? true\r\n              : false\r\n          } */\r\n        >\r\n          <Delete\r\n          /* color={\r\n              datos.inventario_general && datos.inventario_general.length === 0\r\n                ? \"disabled\"\r\n                : datos.inventario_general[0].eliminado === true\r\n                ? \"disabled\"\r\n                : \"error\"\r\n            } */\r\n          />\r\n        </IconButton>\r\n      </Tooltip>\r\n\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarProductoBD()}\r\n            color=\"secondary\"\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { Print } from \"@material-ui/icons\";\r\nimport Barcode from \"react-barcode\";\r\n\r\nexport default function GenerarEtiquetaBarcode({ barcode }) {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const options = {\r\n    width: 2,\r\n    height: 50,\r\n    format: \"CODE128\",\r\n    displayValue: true,\r\n    fontOptions: \"\",\r\n    font: \"monospace\",\r\n    textAlign: \"center\",\r\n    textPosition: \"bottom\",\r\n    textMargin: 2,\r\n    fontSize: 20,\r\n    background: \"#ffffff\",\r\n    lineColor: \"#000000\",\r\n    margin: 10,\r\n    marginTop: undefined,\r\n    marginBottom: undefined,\r\n    marginLeft: undefined,\r\n    marginRight: undefined\r\n  }\r\n\r\n  return (\r\n    <Box display=\"flex\" alignItems=\"center\">\r\n      {/* <IconButton\r\n        size=\"small\"\r\n        disabled={!barcode}\r\n        variant=\"outlined\"\r\n        color=\"default\"\r\n        onClick={handleClickOpen}\r\n      >\r\n        <Print />\r\n      </IconButton>\r\n      <Box mx={1} /> */}\r\n      <Typography>{barcode}</Typography>\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogContent>\r\n          <Barcode value={barcode} {...options} />,\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={handleClose} color=\"primary\" startIcon={<Print />}>\r\n            Imprimir\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport DescuentoProductos from \"./Descuentos/Descuento\";\r\nimport EliminarProducto from \"./EliminarProducto\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport GenerarEtiquetaBarcode from \"./GenerarEtiquetaBarcode\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"65vh\",\r\n    \"& ::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({\r\n  obtenerProductos,\r\n  productosRefetch,\r\n  page,\r\n  setPage,\r\n  limit,\r\n  isOnline,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Codigo barras</TableCell>\r\n              <TableCell>Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell>Existencia</TableCell>\r\n              <TableCell>Tipo</TableCell>\r\n              <TableCell>Editar</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody className=\"hide-scroll\">\r\n            {obtenerProductos.docs.map((producto, index) => {\r\n              return (\r\n                <RenderTableRows\r\n                  key={index}\r\n                  producto={producto}\r\n                  productosRefetch={productosRefetch}\r\n                  isOnline={isOnline}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerProductos.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ producto, productosRefetch, isOnline }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell>\r\n          <GenerarEtiquetaBarcode\r\n            barcode={producto.datos_generales.codigo_barras}\r\n          />\r\n        </TableCell>\r\n        <TableCell>{producto.datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{producto.datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell>\r\n          {producto.inventario_general.map(\r\n            (existencia) =>\r\n              `${existencia.cantidad_existente} ${existencia.unidad_inventario}`\r\n          )}\r\n        </TableCell>\r\n        <TableCell>{producto.datos_generales.tipo_producto}</TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {sesion.accesos.catalogos.productos.editar === false ? null : (\r\n            <CrearProducto\r\n              isOnline={isOnline}\r\n              accion={true}\r\n              datos={producto}\r\n              productosRefetch={productosRefetch}\r\n            />\r\n          )}\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          <DescuentoProductos\r\n            isOnline={isOnline}\r\n            datos={producto}\r\n            productosRefetch={productosRefetch}\r\n          />\r\n        </TableCell>\r\n        <TableCell align=\"center\" padding=\"checkbox\">\r\n          {sesion.accesos.catalogos.productos.eliminar === false ? null : (\r\n            <Tooltip\r\n              title=\"Solo se puede eliminar un producto si este tiene 0 en inventarios\"\r\n              arrow\r\n            >\r\n              <EliminarProducto\r\n                isOnline={isOnline}\r\n                datos={producto}\r\n                productosRefetch={productosRefetch}\r\n              />\r\n            </Tooltip>\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { RestoreFromTrash, Publish, Close } from \"@material-ui/icons\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Fragment } from \"react\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport {\r\n  ACTIVAR_PRODUCTOS,\r\n  PRODUCTOS_ELIMINADOS,\r\n} from \"../../../../gql/Catalogos/productos\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\n/* import SnackBarMessages from '../../../../components/SnackBarMessages'; */\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProdcutosEliminados({\r\n  productosActivosRefetch,\r\n  isOnline,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleModalToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        disableElevation\r\n        color=\"primary\"\r\n        onClick={handleModalToggle}\r\n        size=\"large\"\r\n        startIcon={<RestoreFromTrash />}\r\n        disabled={!isOnline}\r\n      >\r\n        Productos inactivos\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleModalToggle();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-productos-eliminados\"\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle id=\"dialog-productos-eliminados\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">Productos inactivos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleModalToggle}\r\n              color=\"secondary\"\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <TablaProductosEliminados\r\n            productosActivosRefetch={productosActivosRefetch}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst TablaProductosEliminados = ({ productosActivosRefetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { actualizarLista } = useContext(RegProductoContext);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(PRODUCTOS_ELIMINADOS, {\r\n    variables: { sucursal: sesion.sucursal._id, empresa: sesion.empresa._id },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch, actualizarLista]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (!loading && !error && !data) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <Typography variant=\"h6\">No hay productos inactivos</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { obtenerProductosInactivos } = data;\r\n\r\n  return (\r\n    <Box height=\"60vh\">\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"left\">Código de barras</TableCell>\r\n              <TableCell align=\"left\">Clave alterna</TableCell>\r\n              <TableCell>Nombre comercial</TableCell>\r\n              <TableCell align=\"right\">Reactivar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerProductosInactivos.map((producto, index) => (\r\n              <RenderProductosTabla\r\n                key={index}\r\n                datos={producto}\r\n                refetch={refetch}\r\n                productosActivosRefetch={productosActivosRefetch}\r\n              />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst RenderProductosTabla = ({ datos, refetch, productosActivosRefetch }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { datos_generales } = datos.producto;\r\n  /* const [ alert, setAlert ] = useState({ message: '', status: '', open: false }); */\r\n  const { setAlert } = useContext(RegProductoContext);\r\n\r\n  const [activarProducto] = useMutation(ACTIVAR_PRODUCTOS);\r\n\r\n  const handleDeleteToggle = () => setOpen(!open);\r\n\r\n  const reactivarProducto = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await activarProducto({\r\n        variables: {\r\n          id: datos._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      productosActivosRefetch();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.activarProducto.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleDeleteToggle();\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell align=\"left\">{datos_generales.codigo_barras}</TableCell>\r\n        <TableCell align=\"left\">{datos_generales.clave_alterna}</TableCell>\r\n        <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n        <TableCell align=\"right\">\r\n          {loading ? (\r\n            <IconButton color=\"primary\" disabled onClick={handleDeleteToggle}>\r\n              <CircularProgress size={26} />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton color=\"primary\" onClick={handleDeleteToggle}>\r\n              <Publish />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      </TableRow>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleDeleteToggle}\r\n        aria-labelledby=\"reactivar-producto-dialog\"\r\n      >\r\n        <DialogTitle id=\"reactivar-producto-dialog\">\r\n          {\"Se reactivará este producto\"}\r\n        </DialogTitle>\r\n        {/* <SnackBarMessages alert={alert} setAlert={setAlert} />        */}\r\n        <DialogActions>\r\n          <Button onClick={handleDeleteToggle} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => reactivarProducto()} color=\"primary\" autoFocus>\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/productos.c55f4823.svg\";","import React, { useContext, useState } from \"react\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport OutlinedInput from \"@material-ui/core/OutlinedInput\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CrearProducto from \"./crearProducto\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Search, Close, ArrowBack } from \"@material-ui/icons\";\r\nimport ProductosEliminados from \"./ProductosEliminados\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport ProductosIcon from \"../../../../icons/productos.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Productos() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const { alert, setAlert } = useContext(RegProductoContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={() => handleClickOpen()}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={ProductosIcon}\r\n              alt=\"icono ropa\"\r\n              className={classes.iconSvg}\r\n            />\r\n          </Box>\r\n          Productos\r\n        </Box>\r\n      </Button>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Productos\r\n            </Typography>\r\n\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <RegistroComponent isOnline={isOnline} />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RegistroComponent = ({ isOnline }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [existencias, setExistencias] = useState(true);\r\n  const [value, setValue] = useState(0);\r\n  const [page, setPage] = useState(0);\r\n  const classes = useStyles();\r\n  const limit = 20;\r\n\r\n  const handleChange = (event, value) => {\r\n    setValue(value);\r\n    if (value === 0) {\r\n      setExistencias(true);\r\n    } else {\r\n      setExistencias(false);\r\n    }\r\n  };\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_PRODUCTOS, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n      filtro,\r\n      existencias,\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerProductos } = data;\r\n\r\n  const filtrarProductos = (event) => {\r\n    event.preventDefault();\r\n    if (busqueda === \"\") {\r\n      setFiltro(\"\");\r\n      refetch({ filtro: \"\" });\r\n      return;\r\n    }\r\n    setFiltro(busqueda);\r\n  };\r\n\r\n  const reload = () => {\r\n    setBusqueda(\"\");\r\n    setFiltro(\"\");\r\n    refetch({ filtro: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Box mx={4} mt={3} display=\"flex\">\r\n        <Box style={{ width: \"500px\" }}>\r\n          <form\r\n            onSubmit={filtrarProductos}\r\n            style={{ display: \"flex\", alignItems: \"center\" }}\r\n          >\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <OutlinedInput\r\n                id=\"search-producto\"\r\n                type=\"text\"\r\n                value={busqueda}\r\n                onChange={(e) => setBusqueda(e.target.value)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      type=\"submit\"\r\n                      aria-label=\"search producto\"\r\n                      edge=\"end\"\r\n                    >\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n            {filtro !== \"\" ? (\r\n              <IconButton color=\"primary\" onClick={() => reload()}>\r\n                <ArrowBack />\r\n              </IconButton>\r\n            ) : null}\r\n          </form>\r\n        </Box>\r\n\r\n        <Box flexGrow={1} />\r\n        <Box display=\"flex\">\r\n          <ProductosEliminados\r\n            isOnline={isOnline}\r\n            productosActivosRefetch={refetch}\r\n          />\r\n          <Box mx={1} />\r\n          {sesion.accesos.catalogos.productos.agregar === false ? null : (\r\n            <CrearProducto\r\n              accion={false}\r\n              productosRefetch={refetch}\r\n              isOnline={isOnline}\r\n            />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n      <Box mx={4}>\r\n        <div className={classes.root}>\r\n          <Tabs\r\n            indicatorColor=\"primary\"\r\n            value={value}\r\n            onChange={handleChange}\r\n            aria-label=\"simple tabs example\"\r\n          >\r\n            <Tab label=\"Productos de Sucursal\" />\r\n            <Tab label=\"Todos los productos\" />\r\n          </Tabs>\r\n        </div>\r\n        <ListaProductos\r\n          obtenerProductos={obtenerProductos}\r\n          productosRefetch={refetch}\r\n          setPage={setPage}\r\n          page={page}\r\n          limit={limit}\r\n          isOnline={isOnline}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../../context/Catalogos/CtxRegProducto'\r\nimport Productos from './Productos'\r\n \r\nexport default function ProductoIndex(){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <Productos />\r\n        </RegProductoProvider>\r\n    )\r\n}","import React, { useEffect, useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close, Delete, Edit } from \"@material-ui/icons\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_TALLA } from \"../../../../gql/Catalogos/tallas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaTallas({\r\n  tipo,\r\n  datos,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValue,\r\n  refetch,\r\n  isOnline,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      datos.filter((datos) => {\r\n        return datos.talla.toLowerCase().includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, datos]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" mb={1}>\r\n        <TextField\r\n          fullWidth\r\n          placeholder=\"Buscar...\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onChange={(e) => setBusqueda(e.target.value)}\r\n        />\r\n      </Box>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>{tipo === \"ROPA\" ? \"Talla\" : \"Número\"}</TableCell>\r\n                {sesion.accesos.catalogos.tallas_numeros.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"normal\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.tallas_numeros.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"normal\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((row, index) => (\r\n                <RowsRender\r\n                  key={index}\r\n                  row={row}\r\n                  setAlert={setAlert}\r\n                  tipo={tipo}\r\n                  toUpdate={toUpdate}\r\n                  setToUpdate={setToUpdate}\r\n                  setValue={setValue}\r\n                  refetch={refetch}\r\n                  isOnline={isOnline}\r\n                />\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  row,\r\n  setAlert,\r\n  tipo,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValue,\r\n  refetch,\r\n  isOnline,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n  const [eliminarTalla] = useMutation(ELIMINAR_TALLA);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const resp = await eliminarTalla({\r\n        variables: {\r\n          id: row._id,\r\n          input: {\r\n            tipo: tipo,\r\n            talla: \"\",\r\n          },\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n\r\n      let msgAlert = {\r\n        message: resp.data.eliminarTalla.message,\r\n        status: \"success\",\r\n        open: true,\r\n      };\r\n      setAlert(msgAlert);\r\n      refetch();\r\n      handleModal();\r\n    } catch (error) {\r\n      handleModal();\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (dato) => {\r\n    if (!dato) {\r\n      setToUpdate(\"\");\r\n      setValue(\"\");\r\n      return;\r\n    }\r\n    setToUpdate(dato._id);\r\n    setValue(dato.talla);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        selected={toUpdate === row._id ? true : false}\r\n      >\r\n        <TableCell>\r\n          <Typography>\r\n            <b>{row.talla}</b>\r\n          </Typography>\r\n        </TableCell>\r\n        {sesion.accesos.catalogos.tallas_numeros.editar === false ? null : (\r\n          <TableCell padding=\"checkbox\">\r\n            {toUpdate === row._id ? (\r\n              <IconButton onClick={() => onUpdate()}>\r\n                <Close />\r\n              </IconButton>\r\n            ) : (\r\n              <IconButton disabled={!isOnline} onClick={() => onUpdate(row)}>\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n          </TableCell>\r\n        )}\r\n        {sesion.accesos.catalogos.tallas_numeros.eliminar === false ? null : (\r\n          <TableCell padding=\"checkbox\">\r\n            <Modal\r\n              handleModal={handleModal}\r\n              openModal={openModal}\r\n              handleDelete={handleDelete}\r\n              isOnline={isOnline}\r\n            />\r\n          </TableCell>\r\n        )}\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete, isOnline }) => {\r\n  return (\r\n    <div>\r\n      <IconButton disabled={!isOnline} color=\"secondary\" onClick={handleModal}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/shirt.e9a5af44.svg\";","export default __webpack_public_path__ + \"static/media/shoes.cec0fb6e.svg\";","import React, { useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  CircularProgress,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaTallas from \"./ListaTallas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_TALLAS,\r\n  CREAR_TALLAS,\r\n  ACTUALIZAR_TALLA,\r\n} from \"../../../../gql/Catalogos/tallas\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\nimport shirtIcon from \"../../../../icons/shirt.svg\";\r\nimport shoesIcon from \"../../../../icons/shoes.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nexport default function RegistroTallas({ tipo }) {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const [value, setValue] = useState(\"\");\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading_bd, setLoadingBD] = useState({ loading: false, tipo: \"\" });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_TALLAS, {\r\n    variables: { empresa: sesion.empresa._id, tipo },\r\n    fetchPolicy: \"network-only\"\r\n  });\r\n  /* Mutations */\r\n  const [crearTalla] = useMutation(CREAR_TALLAS);\r\n  const [actualizarTalla] = useMutation(ACTUALIZAR_TALLA);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerTallas } = data;\r\n\r\n  const guardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!value) {\r\n      return;\r\n    }\r\n    setLoadingBD({ loading: true, tipo });\r\n    let resp;\r\n    try {\r\n      const nueva_talla = value;\r\n      if (toUpdate) {\r\n        if (sesion.accesos.catalogos.tallas_numeros.editar === false) {\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const talla_actualizada = cleanTypenames(nueva_talla);\r\n          resp = await actualizarTalla({\r\n            variables: {\r\n              input: {\r\n                talla: talla_actualizada,\r\n                tipo,\r\n              },\r\n              id: toUpdate,\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id,\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.tallas_numeros.agregar === false) {\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          resp = await crearTalla({\r\n            variables: {\r\n              input: {\r\n                talla: nueva_talla,\r\n                tipo,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setValue(\"\");\r\n      setToUpdate(\"\");\r\n      setLoadingBD({ loading: false, tipo: \"\" });\r\n      let msgAlert = toUpdate\r\n        ? {\r\n            message: resp.data.actualizarTalla.message,\r\n            status: \"success\",\r\n            open: true,\r\n          }\r\n        : {\r\n            message: resp.data.crearTalla.message,\r\n            status: \"success\",\r\n            open: true,\r\n          };\r\n      setAlert(msgAlert);\r\n    } catch (error) {\r\n      setLoadingBD({ loading: false, tipo: \"\" });\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\r\n      <Box my={2}>\r\n        <Grid container spacing={2} justifyContent=\"center\">\r\n          <Grid item>\r\n            {tipo === \"ROPA\" ? (\r\n              <img src={shirtIcon} alt=\"icono tallas\" style={{ width: 40 }} />\r\n            ) : (\r\n              <img src={shoesIcon} alt=\"icono numeros\" style={{ width: 40 }} />\r\n            )}\r\n          </Grid>\r\n          <Grid item>\r\n            <form id=\"form-talla\" onSubmit={guardarDatosBD}>\r\n              <TextField\r\n                id=\"outlined-error-helper-text\"\r\n                label={tipo === \"ROPA\" ? \"Talla\" : \"Número\"}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                value={value}\r\n                onChange={(e) => setValue(e.target.value)}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                disabled={loading_bd.loading}\r\n              />\r\n            </form>\r\n          </Grid>\r\n          <Grid item>\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              disableElevation\r\n              type=\"submit\"\r\n              onClick={guardarDatosBD}\r\n              form=\"form-talla\"\r\n              disabled={\r\n                !isOnline || (loading_bd.loading && loading_bd.tipo === tipo)\r\n              }\r\n              startIcon={\r\n                loading_bd.loading && loading_bd.tipo === tipo ? (\r\n                  <CircularProgress color=\"inherit\" size={20} />\r\n                ) : (\r\n                  <Add />\r\n                )\r\n              }\r\n            >\r\n              Guardar\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <TablaTallas\r\n        isOnline={isOnline}\r\n        datos={obtenerTallas}\r\n        tipo={tipo}\r\n        toUpdate={toUpdate}\r\n        setToUpdate={setToUpdate}\r\n        setValue={setValue}\r\n        refetch={refetch}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\r\nimport { Typography, Box, Snackbar } from \"@material-ui/core\";\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nexport default function DescripcionCatalogo({ texto, width }) {\r\n  const [active, setActive] = useState(false);\r\n  const handleClose = () => {\r\n    setActive(false);\r\n  };\r\n  return (\r\n    /*    <Box width={'100%'} flexDirection=\"column\" display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box   p={2} mt={3} borderRadius={3} boxShadow={0.5}  width={width} style={{backgroundColor:'rgba(161, 236, 248, 0.8)'}}>\r\n                <Typography align=\"center\"  style={{ fontSize: 18, color: 'rgba(38, 78, 84, 0.8)' }}>\r\n                    {texto}\r\n                </Typography>\r\n            </Box>\r\n        </Box> */\r\n\r\n    <Box mx={1}>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"secondary\"\r\n        onClick={() => setActive(true)}\r\n        size=\"large\"\r\n      >\r\n        <HelpOutlineIcon style={{ fontSize: 35, color: \"white\" }} />\r\n      </Button>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={active}\r\n        onClose={handleClose}\r\n        autoHideDuration={10000}\r\n        message={\r\n          <Box display=\"flex\">\r\n            <Box mr={1} />\r\n            <Typography>{texto}</Typography>\r\n          </Box>\r\n        }\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/tallas.80f41ac8.svg\";","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container, Grid } from \"@material-ui/core\";\r\nimport RegistroTallas from \"./RegistroTallas\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport tallasImg from \"../../../../icons/tallas.svg\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Tallas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpen(!open);\r\n  const descripcion =\r\n    \"En este apartado se registran las  tallas y/o números que se asignarán a un producto tipo Ropa o Calzado según sea el caso .\";\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img src={tallasImg} alt=\"icono ropa\" className={classes.iconSvg} />\r\n          </Box>\r\n          Tallas y numeros\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Tallas y números\r\n            </Typography>\r\n            <Box m={1} flexDirection=\"row\" display=\"flex\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Container>\r\n          <Box>\r\n            <Grid container spacing={5}>\r\n              <Grid item md={6} xs={12}>\r\n                <RegistroTallas tipo=\"ROPA\" />\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n                <RegistroTallas tipo=\"CALZADO\" />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Container>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CrearCliente from \"../Cliente/CrearCliente\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_CLIENTE } from \"../../../../gql/Catalogos/clientes\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  Slide,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport { DialogTitle, IconButton, Typography } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { ClienteCtx } from \"../../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst columns = [\r\n  { id: 1, label: \"No. Cliente\", minWidth: 100 },\r\n  { id: 2, label: \"Clave\", minWidth: 100 },\r\n  { id: 3, label: \"Nombre\", minWidth: 150 },\r\n  { id: 4, label: \"Razon Social\", minWidth: 150 },\r\n  { id: 5, label: \"Correo\", minWidth: 150 },\r\n  { id: 6, label: \"Fecha registro\", minWidth: 100 },\r\n  { id: 7, label: \"Estado\", minWidth: 100 },\r\n];\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"68vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function TablaProveedores({\r\n  obtenerClientes,\r\n  refetch,\r\n  page,\r\n  setPage,\r\n  limit,\r\n  isOnline,\r\n}) {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const classes = useStyles();\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader aria-label=\"sticky table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              {permisosUsuario.accesos.catalogos.provedores.editar ===\r\n              false ? null : (\r\n                <TableCell key={9} align={\"right\"}>\r\n                  Editar\r\n                </TableCell>\r\n              )}\r\n              {permisosUsuario.accesos.catalogos.provedores.eliminar ===\r\n              false ? null : (\r\n                <TableCell key={10} align={\"right\"}>\r\n                  Eliminar\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.docs.map((row, index) => {\r\n              return (\r\n                <RowsRender\r\n                  key={index}\r\n                  datos={row}\r\n                  setAlert={setAlert}\r\n                  refetch={refetch}\r\n                  isOnline={isOnline}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerClientes.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos, setAlert, refetch, isOnline }) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.numero_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.clave_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.nombre_cliente}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.razon_social}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.email}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{formatoFechaCorta(datos.fecha_registro)}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.estado_cliente ? \"Activo\" : \"Inactivo\"}</Typography>\r\n      </TableCell>\r\n      {permisosUsuario.accesos.catalogos.provedores.editar === false ? null : (\r\n        <TableCell width={50}>\r\n          <CrearCliente\r\n            tipo=\"PRROVEEDOR\"\r\n            accion=\"actualizar\"\r\n            datos={datos}\r\n            refetch={refetch}\r\n            isOnline={isOnline}\r\n          />\r\n        </TableCell>\r\n      )}\r\n      {permisosUsuario.accesos.catalogos.provedores.eliminar ===\r\n      false ? null : (\r\n        <TableCell width={50}>\r\n          <EliminarCliente\r\n            datos={datos}\r\n            setAlert={setAlert}\r\n            refetch={refetch}\r\n            isOnline={isOnline}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarCliente = ({ datos, setAlert, refetch, isOnline }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE);\r\n  const [loading, setLoading] = useState(false);\r\n  const { setUpdate, update } = useContext(ClienteCtx);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const eliminarClienteBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarCliente({\r\n        variables: {\r\n          id: datos._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.eliminarCliente;\r\n        setAlert({ message, status: \"success\", open: true });\r\n        refetch();\r\n      }\r\n      setLoading(false);\r\n      setUpdate(!update);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        disabled={!isOnline}\r\n        size=\"small\"\r\n        color=\"secondary\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-cliente\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-cliente\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => eliminarClienteBD()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  DialogContent,\r\n  Grid,\r\n  IconButton,\r\n  InputBase,\r\n  Paper,\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport TablaProovedores from \"./ListaProveedores\";\r\nimport CrearCliente from \"../Cliente/CrearCliente\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../gql/Catalogos/clientes\";\r\nimport ClientesInactivosComponent from \"../Cliente/ClientesInactivos\";\r\nimport { FcInTransit } from \"react-icons/fc\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n    fontSize: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Proveedores() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const descripcion =\r\n    \"En este apartado se registran los proveedores que se podrán seleccionar en la compra de un producto.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            {/* <img\r\n              src=\"distribution.svg\"\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            /> */}\r\n            <FcInTransit className={classes.icon} />\r\n          </Box>\r\n          Proveedores\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Proveedores\r\n            </Typography>\r\n            <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          <ProveedoresComponent isOnline={isOnline} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ProveedoresComponent = ({ isOnline }) => {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n  const [page, setPage] = useState(0);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const limit = 20;\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.defaultValue);\r\n  };\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CLIENTES, {\r\n    variables: {\r\n      tipo: \"PROVEEDOR\",\r\n      filtro,\r\n      empresa: sesion.empresa._id,\r\n      eliminado: false,\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  return (\r\n    <Box mt={2}>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={6} xs={8}>\r\n          <Paper className={classes.root}>\r\n            <InputBase\r\n              fullWidth\r\n              placeholder=\"Buscar proveedor...\"\r\n              onChange={(e) => setValues(e.target.value)}\r\n              onKeyPress={pressEnter}\r\n              value={values}\r\n            />\r\n            <IconButton onClick={() => setFiltro(values)}>\r\n              <Search />\r\n            </IconButton>\r\n          </Paper>\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={6}\r\n          xs={4}\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          {permisosUsuario.accesos.catalogos.clientes.agregar ===\r\n          false ? null : (\r\n            <ClientesInactivosComponent\r\n              isOnline={isOnline}\r\n              tipo=\"PROVEEDOR\"\r\n              refetchProveedores={refetch}\r\n            />\r\n          )}\r\n          <Box mx={1} />\r\n          {permisosUsuario.accesos.catalogos.provedores.ver === false ? null : (\r\n            <CrearCliente\r\n              isOnline={isOnline}\r\n              tipo=\"PROVEEDOR\"\r\n              accion=\"registrar\"\r\n              refetch={refetch}\r\n            />\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n      <Box mt={2}>\r\n        <TablaProovedores\r\n          obtenerClientes={obtenerClientes}\r\n          isOnline={isOnline}\r\n          refetch={refetch}\r\n          page={page}\r\n          setPage={setPage}\r\n          limit={limit}\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CREAR_CAJA = gql`\r\n  mutation CrearCaja($input: CrearCajasInput!, $empresa: ID!, $sucursal: ID!) {\r\n    crearCaja(input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CAJAS = gql`\r\n  query ObtenerCajasSucursales($empresa: ID!, $sucursal: ID!) {\r\n    obtenerCajasSucursal(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      numero_caja\r\n      activa\r\n      usuario_creador {\r\n        numero_usuario\r\n        nombre\r\n        email\r\n      }\r\n      cantidad_efectivo_actual\r\n      usuario_en_caja {\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n        email\r\n      }\r\n      principal\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_HISTORIAL_CAJA = gql`\r\n  mutation CrearHistorialCaja(\r\n    $input: CrearHistorialCajasInput!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n  ) {\r\n    crearHistorialCaja(input: $input, empresa: $empresa, sucursal: $sucursal) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_CAJA = gql`\r\n  query ObtenerHistorialCaja(\r\n    $input: HistorialCajasInput\r\n    $id_Caja: ID!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerHistorialCaja(\r\n      input: $input\r\n      id_Caja: $id_Caja\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        tipo_movimiento\r\n        concepto\r\n        horario_turno\r\n        numero_caja\r\n        numero_usuario_creador\r\n        nombre_usuario_creador\r\n        hora_moviento {\r\n          hora\r\n          minutos\r\n          segundos\r\n          completa\r\n        }\r\n        fecha_movimiento {\r\n          year\r\n          mes\r\n          dia\r\n          no_dia_year\r\n          no_semana_year\r\n          completa\r\n        }\r\n        montos_en_caja {\r\n          monto_efectivo {\r\n            monto\r\n          }\r\n          monto_tarjeta_credito {\r\n            monto\r\n          }\r\n          monto_tarjeta_debito {\r\n            monto\r\n          }\r\n          monto_creditos {\r\n            monto\r\n          }\r\n          monto_monedero {\r\n            monto\r\n          }\r\n          monto_transferencia {\r\n            monto\r\n          }\r\n          monto_cheques {\r\n            monto\r\n          }\r\n          monto_vales_despensa {\r\n            monto\r\n          }\r\n        }\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ELIMINAR_CAJA = gql`\r\n  mutation eliminarCaja($id: ID!) {\r\n    eliminarCaja(id: $id) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_CAJA = gql`\r\n  mutation ActualizarCaja($input: EditarCaja, $id: ID!) {\r\n    actualizarCaja(id: $id, input: $input) {\r\n      _id\r\n      numero_caja\r\n      activa\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_PRE_CORTE_CAJA = gql`\r\n  query ObtenerPreCorteCaja(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: PreCortesDeCajaInput\r\n    $cajaPrincipal: Boolean\r\n  ) {\r\n    obtenerPreCorteCaja(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n      cajaPrincipal: $cajaPrincipal\r\n    ) {\r\n      monto_efectivo_precorte\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CORTES_CAJA = gql`\r\n  query ObtenerCortesDeCaja(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: FiltroCorteDeCajaInput\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerCortesDeCaja(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        concepto\r\n        token_turno_user\r\n        numero_caja\r\n        horario_en_turno\r\n        id_caja\r\n        hora_salida {\r\n          completa\r\n        }\r\n        fecha_salida {\r\n          completa\r\n        }\r\n        fecha_movimiento\r\n        usuario_en_turno {\r\n          nombre\r\n          telefono\r\n          email\r\n          numero_usuario\r\n        }\r\n        montos_en_caja {\r\n          monto_efectivo {\r\n            monto\r\n          }\r\n          monto_tarjeta_credito {\r\n            monto\r\n          }\r\n          monto_tarjeta_debito {\r\n            monto\r\n          }\r\n          monto_creditos {\r\n            monto\r\n          }\r\n          monto_monedero {\r\n            monto\r\n          }\r\n          monto_transferencia {\r\n            monto\r\n          }\r\n          monto_cheques {\r\n            monto\r\n          }\r\n          monto_vales_despensa {\r\n            monto\r\n          }\r\n        }\r\n        sucursal {\r\n          nombre_sucursal\r\n        }\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CORTE_CAJA = gql`\r\n  query ObtenerCorteCaja(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: CorteDeCajaInput\r\n  ) {\r\n    obtenerCorteCaja(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      montos_en_sistema {\r\n        monto_efectivo\r\n        monto_tarjeta_debito\r\n        monto_tarjeta_credito\r\n        monto_creditos\r\n        monto_monedero\r\n        monto_transferencia\r\n        monto_cheques\r\n        monto_vales_despensa\r\n      }\r\n      fecha_inicio\r\n      fecha_fin\r\n    }\r\n  }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { Badge, Box, CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ELIMINAR_CAJA } from \"../../../../gql/Cajas/cajas\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { withStyles } from \"@material-ui/styles\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaCajas({\r\n  obtenerCajasSucursal,\r\n  setAlert,\r\n  refetch,\r\n  isOnline,\r\n}) {\r\n  const permisos = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Cajas</TableCell>\r\n                {permisos.accesos.catalogos.cajas.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerCajasSucursal.map((row) => {\r\n                return (\r\n                  <RowCajasRender\r\n                    key={row.numero_caja}\r\n                    row={row}\r\n                    permisos={permisos}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                    isOnline={isOnline}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst StyledBadge = withStyles((theme) => ({\r\n  badge: {\r\n    color: ({ props }) => props.color,\r\n    background: ({ props }) => props.color,\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    \"&::after\": {\r\n      position: \"absolute\",\r\n      top: 0,\r\n      left: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      borderRadius: \"50%\",\r\n      animation: \"$ripple 1.2s infinite ease-in-out\",\r\n      border: \"1px solid currentColor\",\r\n      content: '\"\"',\r\n    },\r\n  },\r\n  \"@keyframes ripple\": {\r\n    \"0%\": {\r\n      transform: \"scale(.8)\",\r\n      opacity: 1,\r\n    },\r\n    \"100%\": {\r\n      transform: \"scale(2.4)\",\r\n      opacity: 0,\r\n    },\r\n  },\r\n}))(Badge);\r\n\r\nconst RowCajasRender = ({ row, permisos, setAlert, refetch, isOnline }) => {\r\n  const styleProps = {\r\n    color: row.activa ? \"#44b700\" : \"red\",\r\n  };\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Box display=\"flex\">\r\n          <StyledBadge\r\n            overlap=\"circular\"\r\n            props={styleProps}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"left\",\r\n            }}\r\n            variant=\"dot\"\r\n          />\r\n          <Box mx={1} />\r\n          <Box>\r\n            CAJA {row.numero_caja} {row.principal ? \"PRINCIPAL\" : \"\"}\r\n          </Box>\r\n        </Box>\r\n      </TableCell>\r\n      {permisos.accesos.catalogos.cajas.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <EliminarCajasModal\r\n            isOnline={isOnline}\r\n            data={row}\r\n            setAlert={setAlert}\r\n            refetch={refetch}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarCajasModal = ({ data, setAlert, refetch, isOnline }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const [eliminarCaja] = useMutation(ELIMINAR_CAJA);\r\n\r\n  const deleteCaja = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await eliminarCaja({\r\n        variables: {\r\n          id: data._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      handleClose();\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        onClick={() => handleClickOpen()}\r\n        color=\"secondary\"\r\n        disabled={(!isOnline && data.activa) || (isOnline && data.principal)}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={() => deleteCaja()}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Box, Button, CircularProgress } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport TablaCajas from \"./ListaCajas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_CAJA, OBTENER_CAJAS } from \"../../../../gql/Cajas/cajas\";\r\n\r\nexport default function RegistroCajas({ isOnline }) {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  let obtenerCajasSucursal = [];\r\n  /* Mutation */\r\n  const [crearCaja] = useMutation(CREAR_CAJA);\r\n\r\n  /* Queries */\r\n  const { data, refetch } = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n  const nuevaCaja = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await crearCaja({\r\n        variables: {\r\n          input: {\r\n            usuario_creador: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n          },\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (data) {\r\n    obtenerCajasSucursal = data.obtenerCajasSucursal;\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\" my={2}>\r\n        {sesion.accesos.catalogos.cajas.agregar === false ? null : (\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            disableElevation\r\n            onClick={() => nuevaCaja()}\r\n            disabled={loading || !isOnline}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n            }\r\n          >\r\n            Agregar\r\n          </Button>\r\n        )}\r\n      </Box>\r\n      <TablaCajas\r\n        obtenerCajasSucursal={obtenerCajasSucursal}\r\n        setAlert={setAlert}\r\n        refetch={refetch}\r\n        isOnline={isOnline}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/cajas.239d1825.svg\";","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroCajas from \"./RegistrarCajas\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport CajasImg from \"../../../../icons/cajas.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion =\r\n    \"En este apartado se registran las cajas necesarias para realizar los movimientos operativos de ventas.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={CajasImg}\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Cajas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Cajas\r\n            </Typography>\r\n            <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <Box>\r\n          <Container maxWidth=\"sm\">\r\n            <RegistroCajas isOnline={isOnline} />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Box,\r\n  CircularProgress,\r\n  IconButton,\r\n  Typography,\r\n  Switch,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport CrearUsario from \"./CrearUsuario\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_USUARIOS,\r\n  ACTUALIZAR_USUARIO,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst columns = [\r\n  { id: 1, label: \"No. Usuario\", minWidth: 100 },\r\n  { id: 3, label: \"Nombre\", minWidth: 150 },\r\n  { id: 5, label: \"Correo\", minWidth: 150 },\r\n  { id: 7, label: \"Estado\", minWidth: 100, align: \"right\" },\r\n];\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"75vh\",\r\n  },\r\n  avatar: {\r\n    width: 130,\r\n    height: 130,\r\n  },\r\n});\r\n\r\nexport default function ListaUsuarios({ empresa, sucursal, filtro, isOnline }) {\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update } = useContext(UsuarioContext);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_USUARIOS, {\r\n    variables: { empresa, sucursal, filtro, eliminado: false },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerUsuarios } = data;\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"outlined\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"sticky table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              {permisosUsuario.accesos.catalogos.usuarios.editar ===\r\n              false ? null : (\r\n                <TableCell key={9} align={\"right\"}>\r\n                  Editar\r\n                </TableCell>\r\n              )}\r\n              {permisosUsuario.accesos.catalogos.usuarios.eliminar ===\r\n              false ? null : (\r\n                <TableCell key={10} align={\"right\"}>\r\n                  Eliminar\r\n                </TableCell>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerUsuarios.map((row, index) => {\r\n              return (\r\n                <RowsRender\r\n                  key={index}\r\n                  datos={row}\r\n                  setAlert={setAlert}\r\n                  isOnline={isOnline}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos, setAlert, isOnline }) => {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update, setUpdate } = useContext(UsuarioContext);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            estado_usuario: e.target.checked,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.numero_usuario}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.nombre}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.email}</Typography>\r\n      </TableCell>\r\n      <TableCell align={\"right\"}>\r\n        {loading ? (\r\n          <CircularProgress size={30} />\r\n        ) : (\r\n          <Switch\r\n            checked={datos.estado_usuario}\r\n            onChange={cambiarEstado}\r\n            color=\"primary\"\r\n            disabled={!isOnline}\r\n          />\r\n        )}\r\n      </TableCell>\r\n      {permisosUsuario.accesos.catalogos.usuarios.editar === false ? null : (\r\n        <TableCell width={50}>\r\n          <CrearUsario accion=\"actualizar\" datos={datos} isOnline={isOnline} />\r\n        </TableCell>\r\n      )}\r\n      {permisosUsuario.accesos.catalogos.usuarios.eliminar === false ? null : (\r\n        <TableCell width={50}>\r\n          <EliminarUsuario\r\n            datos={datos}\r\n            setAlert={setAlert}\r\n            isOnline={isOnline}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst EliminarUsuario = ({ datos, setAlert, isOnline }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n  const [loading, setLoading] = useState(false);\r\n  const { update, setUpdate } = useContext(UsuarioContext);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const deleteUsuario = async (e) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const result = await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            eliminado: true,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      if (result) {\r\n        const { message } = result.data.actualizarUsuario;\r\n        setAlert({ message, status: \"success\", open: true });\r\n      }\r\n      setUpdate(!update);\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      handleClose();\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        disabled={!isOnline}\r\n        color=\"secondary\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"alert-eliminar-usuario\"\r\n      >\r\n        <DialogTitle id=\"alert-eliminar-usuario\">\r\n          {\"¿Está seguro de eliminar esto?\"}\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => deleteUsuario()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, forwardRef, useEffect, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { RestoreFromTrash, Close, Search } from \"@material-ui/icons\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  IconButton,\r\n  CircularProgress,\r\n  Typography,\r\n  TextField,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { Fragment } from \"react\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport {\r\n  ACTUALIZAR_USUARIO,\r\n  OBTENER_USUARIOS,\r\n} from \"../../../../gql/Catalogos/usuarios\";\r\nimport { UsuarioContext } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function UsuariosInactivosComponent({ isOnline }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [filter, setFilter] = useState(\"\");\r\n\r\n  const handleModalToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        disableElevation\r\n        color=\"inherit\"\r\n        onClick={handleModalToggle}\r\n        startIcon={<RestoreFromTrash />}\r\n        disabled={!isOnline}\r\n      >\r\n        Usuarios inactivos\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleModalToggle();\r\n          }\r\n        }}\r\n        aria-labelledby=\"dialog-usuarios-eliminados\"\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle id=\"dialog-usuarios-eliminados\">\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">Usuarios inactivos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleModalToggle}\r\n              color=\"secondary\"\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              placeholder=\"Buscar usuario: No. usuario, email o nombre...\"\r\n              onChange={(e) => setFilter(e.target.value)}\r\n              value={filter}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n          <UsuariosInactivos filter={filter} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst UsuariosInactivos = ({ filter }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { update } = useContext(UsuarioContext);\r\n\r\n  const [value] = useDebounce(filter, 800);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_USUARIOS, {\r\n    variables: {\r\n      filtro: value ? value : \"\",\r\n      empresa: sesion.empresa._id,\r\n      eliminado: true,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <ErrorPage error={error} />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (!loading && !error && !data) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"60vh\"\r\n      >\r\n        <Typography variant=\"h6\">No hay usuarios inactivos</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const { obtenerUsuarios } = data;\r\n\r\n  return (\r\n    <Box height=\"60vh\">\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>No. Usuario</TableCell>\r\n              <TableCell>Nombre</TableCell>\r\n              <TableCell>Correo</TableCell>\r\n              <TableCell align=\"right\">Restaurar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerUsuarios.map((row, index) => (\r\n              <RenderClientes key={index} datos={row} />\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst RenderClientes = ({ datos }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const { setUpdate, update } = useContext(UsuarioContext);\r\n\r\n  const [actualizarUsuario] = useMutation(ACTUALIZAR_USUARIO);\r\n\r\n  const cambiarEstado = async (e) => {\r\n    setLoading(true);\r\n    try {\r\n      await actualizarUsuario({\r\n        variables: {\r\n          input: {\r\n            eliminado: false,\r\n          },\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setUpdate(!update);\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteToggle = () => setOpen(!open);\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow>\r\n        <TableCell>\r\n          <Typography>{datos.numero_usuario}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.nombre}</Typography>\r\n        </TableCell>\r\n        <TableCell>\r\n          <Typography>{datos.email}</Typography>\r\n        </TableCell>\r\n        <TableCell align=\"right\">\r\n          <IconButton color=\"primary\" onClick={handleDeleteToggle}>\r\n            <RestoreFromTrash style={{ fontSize: 30 }} />\r\n          </IconButton>\r\n        </TableCell>\r\n      </TableRow>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleDeleteToggle}\r\n        aria-labelledby=\"reactivar-usuario-dialog\"\r\n      >\r\n        <DialogTitle id=\"reactivar-usuario-dialog\">\r\n          {\"Se reactivará este usuario\"}\r\n        </DialogTitle>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <DialogActions>\r\n          <Button\r\n            onClick={handleDeleteToggle}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => cambiarEstado()}\r\n            color=\"primary\"\r\n            autoFocus\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Restaurar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/usuarios.4b684e29.svg\";","import React, { useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  Box,\r\n  Paper,\r\n  InputBase,\r\n  IconButton,\r\n  Grid,\r\n  Container,\r\n} from \"@material-ui/core\";\r\nimport ListaUsuarios from \"./ListaUsuario\";\r\nimport CrearUsuario from \"./CrearUsuario\";\r\nimport { UsuarioProvider } from \"../../../../context/Catalogos/usuarioContext\";\r\nimport UsuariosInactivosComponent from \"./UsuariosInactivos\";\r\nimport UsuariosIcon from \"../../../../icons/usuarios.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  root: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Usuarios() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [open, setOpen] = React.useState(false);\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [values, setValues] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setFiltro(e.target.defaultValue);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <UsuarioProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src={UsuariosIcon}\r\n                alt=\"icono numero calzado\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Usuarios\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Usuarios\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box mt={3} display=\"flex\" justifyContent=\"space-between\">\r\n            <Container>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={8} md={6}>\r\n                  <Paper className={classes.root}>\r\n                    <InputBase\r\n                      fullWidth\r\n                      placeholder=\"Buscar cliente...\"\r\n                      onChange={(e) => setValues(e.target.value)}\r\n                      onKeyPress={pressEnter}\r\n                      value={values}\r\n                    />\r\n                    <IconButton onClick={() => setFiltro(values)}>\r\n                      <Search />\r\n                    </IconButton>\r\n                  </Paper>\r\n                </Grid>\r\n                <Grid item xs={4} md={6}>\r\n                  <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                    {permisosUsuario.accesos.catalogos.usuarios.agregar ===\r\n                    false ? null : (\r\n                      <UsuariosInactivosComponent isOnline={isOnline} />\r\n                    )}\r\n                    <Box mx={1} />\r\n                    {permisosUsuario.accesos.catalogos.usuarios.agregar ===\r\n                    false ? null : (\r\n                      <CrearUsuario\r\n                        isOnline={isOnline}\r\n                        accion=\"registrar\"\r\n                        datos={undefined}\r\n                      />\r\n                    )}\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n              <Box my={3}>\r\n                <ListaUsuarios\r\n                  isOnline={isOnline}\r\n                  sucursal={sesion.sucursal._id}\r\n                  empresa={sesion.empresa._id}\r\n                  filtro={filtro}\r\n                />\r\n              </Box>\r\n            </Container>\r\n          </Box>\r\n        </Dialog>\r\n      </UsuarioProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateDepartamentosContext = createContext();\r\n\r\nexport const DepartamentosProvider = ({ children }) => {\r\n    const [data, setData] = useState({\r\n\t\tnombre_departamentos:''\r\n\t});\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ accion, setAccion ] = useState(true);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ idDepartamento, setIdDepartamento ] = useState(\"\");\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [  loading, setLoading ] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<CreateDepartamentosContext.Provider value={\r\n            { \r\n                data, \r\n                setData,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                accion,\r\n                setAccion,\r\n                idDepartamento, \r\n                setIdDepartamento,\r\n                alert,\r\n                setAlert,\r\n                loading,\r\n                setLoading\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateDepartamentosContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  IconButton,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Button,\r\n  Box,\r\n} from \"@material-ui/core/\";\r\n\r\nimport { Delete, Edit, Close } from \"@material-ui/icons\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_DEPARTAMENTOS,\r\n  ELIMINAR_DEPARTAMENTO,\r\n} from \"../../../../gql/Catalogos/departamentos\";\r\n// import ContainerRegistroAlmacen from './RegistroDepartamento';\r\nimport { CreateDepartamentosContext } from \"../../../../context/Catalogos/Departamentos\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaDepartamentos({ isOnline }) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let obtenerDepartamentos = [];\r\n  const { update, setData } = useContext(CreateDepartamentosContext);\r\n\r\n  /* Queries */\r\n  const { data, loading, error, refetch } = useQuery(OBTENER_DEPARTAMENTOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (data) {\r\n    obtenerDepartamentos = data.obtenerDepartamentos;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Departamentos</TableCell>\r\n                {sesion.accesos.catalogos.departamentos.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.departamentos.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerDepartamentos.map((row, index) => {\r\n                return (\r\n                  <ListaDepartamentosRender\r\n                    key={index}\r\n                    row={row}\r\n                    setData={setData}\r\n                    refetch={refetch}\r\n                    isOnline={isOnline}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ListaDepartamentosRender = ({ row, setData, refetch, isOnline }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { setAccion, setIdDepartamento, idDepartamento } = useContext(\r\n    CreateDepartamentosContext\r\n  );\r\n\r\n  const handleCancel = () => {\r\n    setIdDepartamento(\"\");\r\n    setAccion(true);\r\n    setData({\r\n      nombre_departamentos: \"\",\r\n    });\r\n  };\r\n\r\n  const handleEdit = () => {\r\n    setIdDepartamento(row._id);\r\n    setAccion(false);\r\n    setData({\r\n      nombre_departamentos: row.nombre_departamentos,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={idDepartamento === row._id}\r\n    >\r\n      <TableCell>{row.nombre_departamentos}</TableCell>\r\n      {sesion.accesos.catalogos.departamentos.editar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          {idDepartamento === row._id ? (\r\n            <IconButton onClick={() => handleCancel()}>\r\n              <Close />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton disabled={!isOnline} onClick={() => handleEdit()}>\r\n              <Edit />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n      {sesion.accesos.catalogos.departamentos.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <DeleteDepartamento\r\n            isOnline={isOnline}\r\n            data={row}\r\n            refetch={refetch}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst DeleteDepartamento = ({ data, refetch, isOnline }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState();\r\n  const handleModal = () => setOpen(!open);\r\n  const { setAlert } = useContext(CreateDepartamentosContext);\r\n\r\n  const [eliminarDepartamento] = useMutation(ELIMINAR_DEPARTAMENTO);\r\n\r\n  const handleDelete = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const resultado = await eliminarDepartamento({\r\n        variables: {\r\n          id: data._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n\r\n      if (resultado.data.eliminarDepartamento.message === \"false\") {\r\n        setAlert({\r\n          message: \"Departamento eliminado\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setAlert({\r\n          message: resultado.data.eliminarDepartamento.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n\r\n      refetch();\r\n      setLoading(false);\r\n      setOpen(false);\r\n    } catch (error) {\r\n      console.log(error);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoading(false);\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        disabled={!isOnline}\r\n        onClick={() => {\r\n          handleModal();\r\n        }}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Box, Button, CircularProgress, TextField } from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaDepartamentos from \"./ListaDepartamentos\";\r\nimport {\r\n  REGISTRAR_DEPARTAMENTO,\r\n  ACTUALIZAR_DEPARTAMENTO,\r\n} from \"../../../../gql/Catalogos/departamentos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CreateDepartamentosContext } from \"../../../../context/Catalogos/Departamentos\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nexport default function RegistroDepartamentos({ isOnline }) {\r\n  const {\r\n    data,\r\n    setData,\r\n    update,\r\n    setUpdate,\r\n    error,\r\n    setError,\r\n    accion,\r\n    setAccion,\r\n    idDepartamento,\r\n    setIdDepartamento,\r\n    setAlert,\r\n    alert,\r\n  } = useContext(CreateDepartamentosContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const [CrearDepartamentos] = useMutation(REGISTRAR_DEPARTAMENTO);\r\n  const [ActualzarDepartamentos] = useMutation(ACTUALIZAR_DEPARTAMENTO);\r\n\r\n  const saveData = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (!data.nombre_departamentos) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        setLoading(true);\r\n        const input = data;\r\n        if (accion) {\r\n          if (sesion.accesos.catalogos.departamentos.agregar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            await CrearDepartamentos({\r\n              variables: {\r\n                input,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            });\r\n          }\r\n        } else {\r\n          if (sesion.accesos.catalogos.departamentos.editar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            /* const inputActualizado = cleanTypenames(input); */\r\n            await ActualzarDepartamentos({\r\n              variables: {\r\n                input,\r\n                id: idDepartamento,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            });\r\n          }\r\n        }\r\n        setUpdate(!update);\r\n        setAccion(true);\r\n        setIdDepartamento(\"\");\r\n        setData({\r\n          nombre_departamentos: \"\",\r\n        });\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setError(false);\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <form onSubmit={saveData}>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n          <TextField\r\n            id=\"outlined-error-helper-text\"\r\n            label=\"Nombre departamento\"\r\n            value={data.nombre_departamentos}\r\n            name=\"nombre_departamentos\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            fullWidth\r\n            onChange={obtenerDatos}\r\n            error={error}\r\n            disabled={loading}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n          <Box ml={1} />\r\n          <Button\r\n            disabled={!isOnline || loading}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            disableElevation\r\n            type=\"submit\"\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : <Add />\r\n            }\r\n          >\r\n            Agregar\r\n          </Button>\r\n        </Box>\r\n      </form>\r\n      <TablaDepartamentos isOnline={isOnline} />\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/departamentos.ec6a6954.svg\";","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroDepartamentos from \"./RegistroDepartamento\";\r\nimport { DepartamentosProvider } from \"../../../../context/Catalogos/Departamentos\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport DepartamentosImg from \"../../../../icons/departamentos.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Departamentos() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion =\r\n    \"En este apartado se registran los departamentos que se le podrá asignar a un producto.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DepartamentosProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src={DepartamentosImg}\r\n                alt=\"icono numero calzado\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Departamentos\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Departamentos\r\n              </Typography>\r\n              <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n                <DescripcionCatalogo texto={descripcion} />\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box>\r\n            <Container maxWidth=\"sm\">\r\n              <RegistroDepartamentos isOnline={isOnline} accion=\"registrar\" />\r\n            </Container>\r\n          </Box>\r\n        </Dialog>\r\n      </DepartamentosProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  fade,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  IconButton,\r\n  TextField,\r\n  CircularProgress,\r\n  Typography,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add, Delete, Edit, ExpandMore, Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CATEGORIAS,\r\n  CREAR_CATEGORIA,\r\n  CREAR_SUBCATEGORIA,\r\n  ACTUALIZAR_SUBCATEGORIA,\r\n  ACTUALIZAR_CATEGORIA,\r\n  ELIMINAR_CATEGORIA,\r\n  ELIMINAR_SUBCATEGORIA,\r\n} from \"../../../../gql/Catalogos/categorias\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  flexGrow: {\r\n    flexGrow: 1,\r\n  },\r\n  selected: {\r\n    background: fade(theme.palette.secondary.main, 0.1),\r\n  },\r\n}));\r\n\r\nexport default function RegistroCategorias({ isOnline }) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [categoria, setCategoria] = useState(\"\");\r\n  const [toUpdateID, setToUpdateID] = useState(\"\");\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CATEGORIAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n    fetchPolicy: \"network-only\"\r\n  });\r\n  /*  Categorias Mutations */\r\n  const [crearCategoria] = useMutation(CREAR_CATEGORIA);\r\n  const [actualizarCategoria] = useMutation(ACTUALIZAR_CATEGORIA);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setCategoria(e.target.value);\r\n  };\r\n\r\n  const guardarCategoria = async (e) => {\r\n    e.preventDefault();\r\n    if (!categoria) return;\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.categorias.agregar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearCategoria({\r\n            variables: {\r\n              input: {\r\n                categoria,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.categorias.editar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const categoriaActualizada = cleanTypenames(categoria);\r\n          await actualizarCategoria({\r\n            variables: {\r\n              input: {\r\n                categoria: categoriaActualizada,\r\n              },\r\n              idCategoria: toUpdateID,\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id,\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setCategoria(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setLoadingBackDrop(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerCategorias } = data;\r\n  const render_categorias = obtenerCategorias.map((categoria, index) => (\r\n    <RenderCategorias\r\n      isOnline={isOnline}\r\n      key={index}\r\n      categoria={categoria}\r\n      setToUpdateID={setToUpdateID}\r\n      setCategoria={setCategoria}\r\n      refetch={refetch}\r\n      toUpdateID={toUpdateID}\r\n    />\r\n  ));\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box>\r\n        <Typography>\r\n          <b>Categoria</b>\r\n        </Typography>\r\n        <form onSubmit={guardarCategoria}>\r\n          <Grid container spacing={2}>\r\n            <Grid item sm={6} xs={12}>\r\n              <TextField\r\n                value={categoria}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                onChange={obtenerDatos}\r\n                fullWidth\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                disabled={loadingBackDrop}\r\n              />\r\n            </Grid>\r\n            <Grid item sm={6} xs={12}>\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                disableElevation\r\n                type=\"submit\"\r\n                disabled={loadingBackDrop || !isOnline}\r\n                startIcon={\r\n                  loadingBackDrop ? (\r\n                    <CircularProgress color=\"inherit\" size={20} />\r\n                  ) : (\r\n                    <Add />\r\n                  )\r\n                }\r\n              >\r\n                Guardar\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography variant=\"h6\">Categorias</Typography>\r\n      </Box>\r\n      <Box mb={5}>{render_categorias}</Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderCategorias = ({\r\n  categoria,\r\n  setToUpdateID,\r\n  setCategoria,\r\n  refetch,\r\n  toUpdateID,\r\n  isOnline,\r\n}) => {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [subcategoria, setSubcategoria] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Subcategorias Mutations */\r\n  const [crearSubcategoria] = useMutation(CREAR_SUBCATEGORIA);\r\n  const [actualizarSubcategoria] = useMutation(ACTUALIZAR_SUBCATEGORIA);\r\n\r\n  const render_subcategorias = categoria.subcategorias.map((subcategoria) => (\r\n    <RenderSubcategorias\r\n      key={subcategoria._id}\r\n      idCategoria={categoria._id}\r\n      subcategoria={subcategoria}\r\n      setToUpdateID={setToUpdateID}\r\n      toUpdateID={toUpdateID}\r\n      setSubcategoria={setSubcategoria}\r\n      setAlert={setAlert}\r\n      refetch={refetch}\r\n      isOnline={isOnline}\r\n    />\r\n  ));\r\n\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    window.scrollTo(0, 0);\r\n    event.stopPropagation();\r\n    setToUpdateID(categoria._id);\r\n    setCategoria(categoria.categoria);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setCategoria(\"\");\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setSubcategoria(e.target.value);\r\n  };\r\n\r\n  const guardarSubcategoria = async (e) => {\r\n    e.preventDefault();\r\n    if (!subcategoria) return;\r\n    setLoading(true);\r\n    let msgAlert = \"\";\r\n    let resp;\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.categorias.agregar === false) {\r\n          setLoading(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          resp = await crearSubcategoria({\r\n            variables: {\r\n              input: {\r\n                subcategoria,\r\n              },\r\n              idCategoria: categoria._id,\r\n              empresa : sesion.empresa._id,\r\n              sucursal :sesion.sucursal._id\r\n            },\r\n          });\r\n          msgAlert =\r\n            resp.data.crearSubcategoria.message === \"false\"\r\n              ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n              : {\r\n                  message: resp.data.crearSubcategoria.message,\r\n                  status: \"error\",\r\n                  open: true,\r\n                };\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.categorias.editar === false) {\r\n          setLoading(false);\r\n          return setAlert({\r\n            message: \"Lo sentimos no tienes autorización para esta acción\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const subCategoriaActualizada = cleanTypenames(subcategoria);\r\n          resp = await actualizarSubcategoria({\r\n            variables: {\r\n              input: {\r\n                subcategoria: subCategoriaActualizada,\r\n              },\r\n              idCategoria: categoria._id,\r\n              idSubcategoria: toUpdateID,\r\n              empresa : sesion.empresa._id,\r\n              sucursal :sesion.sucursal._id\r\n            },\r\n          });\r\n          msgAlert =\r\n            resp.data.actualizarSubcategoria.message === \"false\"\r\n              ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n              : {\r\n                  message: resp.data.actualizarSubcategoria.message,\r\n                  status: \"error\",\r\n                  open: true,\r\n                };\r\n        }\r\n      }\r\n      refetch();\r\n\r\n      setAlert(msgAlert);\r\n      setLoading(false);\r\n      setSubcategoria(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Accordion>\r\n        <AccordionSummary\r\n          style={{ height: 32 }}\r\n          className={\r\n            toUpdateID && toUpdateID === categoria._id ? classes.selected : \"\"\r\n          }\r\n          expandIcon={<ExpandMore />}\r\n          aria-label=\"Expand\"\r\n          aria-controls={`categoria-action-${categoria._id}`}\r\n          id={`categoria-${categoria._id}`}\r\n        >\r\n          <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n            <Typography>{categoria.categoria}</Typography>\r\n            <div className={classes.flexGrow} />\r\n            {sesion.accesos.catalogos.categorias.editar ===\r\n            false ? null : toUpdateID && toUpdateID === categoria._id ? (\r\n              <IconButton\r\n                onClick={cancelarUpdate}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Close />\r\n              </IconButton>\r\n            ) : (\r\n              <IconButton\r\n                onClick={obtenerCamposParaActualizar}\r\n                onFocus={(event) => event.stopPropagation()}\r\n                disabled={!isOnline}\r\n              >\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n            {sesion.accesos.catalogos.categorias.eliminar === false ? null : (\r\n              <ModalEliminar\r\n                idCategoria={categoria._id}\r\n                refetch={refetch}\r\n                tipo=\"categoria\"\r\n                setAlert={setAlert}\r\n                isOnline={isOnline}\r\n                sesion={sesion}\r\n              />\r\n            )}\r\n          </Box>\r\n        </AccordionSummary>\r\n        <AccordionDetails>\r\n          <Box width=\"100%\">\r\n            <Divider />\r\n            <Box mb={2} />\r\n            <form onSubmit={guardarSubcategoria}>\r\n              <Grid container spacing={2}>\r\n                <Grid item sm={6}>\r\n                  <Typography>\r\n                    <b>Subcategorias</b>\r\n                  </Typography>\r\n                  <TextField\r\n                    value={subcategoria}\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    onChange={obtenerDatos}\r\n                    fullWidth\r\n                    inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                    disabled={loading}\r\n                  />\r\n                </Grid>\r\n                <Grid\r\n                  item\r\n                  sm={6}\r\n                  style={{ display: \"flex\", alignItems: \"flex-end\" }}\r\n                >\r\n                  <Button\r\n                    color=\"primary\"\r\n                    variant=\"contained\"\r\n                    size=\"large\"\r\n                    disableElevation\r\n                    onClick={guardarSubcategoria}\r\n                    disabled={loading || !isOnline}\r\n                    startIcon={\r\n                      loading ? (\r\n                        <CircularProgress color=\"inherit\" size={20} />\r\n                      ) : (\r\n                        <Add />\r\n                      )\r\n                    }\r\n                  >\r\n                    Guardar\r\n                  </Button>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n\r\n            <Box my={1}>\r\n              <Typography variant=\"h6\">Subcategorias</Typography>\r\n            </Box>\r\n            {render_subcategorias}\r\n          </Box>\r\n        </AccordionDetails>\r\n      </Accordion>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderSubcategorias = ({\r\n  subcategoria,\r\n  idCategoria,\r\n  toUpdateID,\r\n  setToUpdateID,\r\n  setSubcategoria,\r\n  setAlert,\r\n  refetch,\r\n  isOnline,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(subcategoria._id);\r\n    setSubcategoria(subcategoria.subcategoria);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setSubcategoria(\"\");\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Box\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        borderRadius={3}\r\n        px={1}\r\n        className={\r\n          toUpdateID && toUpdateID === subcategoria._id ? classes.selected : \"\"\r\n        }\r\n      >\r\n        <Typography>{subcategoria.subcategoria}</Typography>\r\n        <div className={classes.flexGrow} />\r\n        {sesion.accesos.catalogos.categorias.editar ===\r\n        false ? null : toUpdateID && toUpdateID === subcategoria._id ? (\r\n          <IconButton\r\n            onClick={cancelarUpdate}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton\r\n            onClick={obtenerCamposParaActualizar}\r\n            onFocus={(event) => event.stopPropagation()}\r\n            disabled={!isOnline}\r\n          >\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n        {sesion.accesos.catalogos.categorias.eliminar === false ? null : (\r\n          <ModalEliminar\r\n            idCategoria={idCategoria}\r\n            subcategoria={subcategoria}\r\n            refetch={refetch}\r\n            tipo=\"subcategoria\"\r\n            setAlert={setAlert}\r\n            isOnline={isOnline}\r\n            sesion={sesion}\r\n          />\r\n        )}\r\n      </Box>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst ModalEliminar = ({\r\n  idCategoria,\r\n  subcategoria,\r\n  refetch,\r\n  tipo,\r\n  setAlert,\r\n  isOnline,\r\n\r\n  sesion\r\n}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarCategoria] = useMutation(ELIMINAR_CATEGORIA);\r\n  const [eliminarSubcategoria] = useMutation(ELIMINAR_SUBCATEGORIA);\r\n\r\n  const handleOpen = (event) => {\r\n    console.log(event);\r\n    event.stopPropagation();\r\n    setOpen(true);\r\n  };\r\n  const handleClose = (event) => {\r\n    event.stopPropagation();\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDelete = async (event) => {\r\n    event.stopPropagation();\r\n    setLoading(true);\r\n    let msgAlert = {};\r\n    try {\r\n      if (tipo !== \"categoria\") {\r\n        const resp = await eliminarSubcategoria({\r\n          variables: {\r\n            idCategoria: idCategoria,\r\n            idSubcategoria: subcategoria._id,\r\n            empresa : sesion.empresa._id,\r\n            sucursal :sesion.sucursal._id,\r\n          },\r\n        });\r\n\r\n        msgAlert =\r\n          resp.data.eliminarSubcategoria.message === \"false\"\r\n            ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n            : {\r\n                message: resp.data.eliminarSubcategoria.message,\r\n                status: \"error\",\r\n                open: true,\r\n              };\r\n      } else {\r\n        const resp = await eliminarCategoria({\r\n          variables: {\r\n            idCategoria: idCategoria,\r\n            empresa : sesion.empresa._id,\r\n              sucursal :sesion.sucursal._id,\r\n          },\r\n        });\r\n\r\n        msgAlert =\r\n          resp.data.eliminarCategoria.message === \"false\"\r\n            ? { message: \"¡Listo!\", status: \"success\", open: true }\r\n            : {\r\n                message: resp.data.eliminarCategoria.message,\r\n                status: \"error\",\r\n                open: true,\r\n              };\r\n      }\r\n      setOpen(false);\r\n      setLoading(false);\r\n      setAlert(msgAlert);\r\n      refetch();\r\n    } catch (error) {\r\n      \r\n      setOpen(false);\r\n      setLoading(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n  // console.log(isOnline);\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        disabled={!isOnline}\r\n        color=\"secondary\"\r\n        onClick={(e) => handleOpen(e)}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={(e) => handleClose(e)}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={(e) => handleClose(e)} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={(e) => handleDelete(e)}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : <></>\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/categorias.762c7c94.svg\";","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroCategorias from \"./RegistroCategorias\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport CategoriasImg from \"../../../../icons/categorias.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Categorias() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const descripcion =\r\n    \"En este apartado se registran las categorias que se podrán asignar a un producto.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={CategoriasImg}\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Categorias\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Categorias\r\n            </Typography>\r\n            <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <Box>\r\n          <Container maxWidth=\"md\">\r\n            <RegistroCategorias isOnline={isOnline} />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogTitle,\r\n  IconButton,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close, Delete, Edit } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { ELIMINAR_COLOR } from \"../../../../gql/Catalogos/colores\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"60vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaColores({\r\n  datos,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValues,\r\n  refetch,\r\n  isOnline,\r\n}) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [busqueda, setBusqueda] = useState(\"\");\r\n  const [productosFiltrados, setProductosFiltrados] = useState([]);\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    setProductosFiltrados(\r\n      datos.filter((datos) => {\r\n        return datos.nombre.toLowerCase().includes(busqueda.toLowerCase());\r\n      })\r\n    );\r\n  }, [busqueda, datos]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.paper}>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <TextField\r\n            fullWidth\r\n            placeholder=\"Buscar...\"\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            onChange={(e) => setBusqueda(e.target.value)}\r\n          />\r\n        </Box>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell>Nombre</TableCell>\r\n                {sesion.accesos.catalogos.colores.editar === false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.colores.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {productosFiltrados.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    key={index}\r\n                    row={row}\r\n                    setAlert={setAlert}\r\n                    toUpdate={toUpdate}\r\n                    setToUpdate={setToUpdate}\r\n                    setValues={setValues}\r\n                    refetch={refetch}\r\n                    isOnline={isOnline}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  row,\r\n  setAlert,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setValues,\r\n  refetch,\r\n  isOnline,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleModal = () => setOpenModal(!openModal);\r\n\r\n  const [eliminarColor] = useMutation(\r\n    ELIMINAR_COLOR /* , {\r\n    update(cache, { data: { eliminarColor } }) {\r\n      try {\r\n        const { obtenerColores } = cache.readQuery({\r\n          query: OBTENER_COLORES,\r\n          variables: { empresa: row.empresa._id },\r\n        });\r\n\r\n        cache.writeQuery({\r\n          query: OBTENER_COLORES,\r\n          variables: { empresa: row.empresa._id },\r\n          data: {\r\n            obtenerColores: {\r\n              ...obtenerColores,\r\n              eliminarColor,\r\n            },\r\n          },\r\n        });\r\n      } catch (error) {}\r\n    },\r\n  } */\r\n  );\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const resp = await eliminarColor({\r\n        variables: {\r\n          id: row._id,\r\n          empresa:  sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id\r\n        },\r\n      });\r\n      refetch(refetch);\r\n      setAlert({\r\n        message: resp.data.eliminarColor.message,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleModal();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (row) => {\r\n    if (!row) {\r\n      setToUpdate(\"\");\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      return;\r\n    }\r\n    setToUpdate(row._id);\r\n    setValues({ nombre: row.nombre, hex: row.hex });\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={toUpdate === row._id ? true : false}\r\n    >\r\n      <TableCell padding=\"checkbox\">\r\n        <Box width={30} height={25} bgcolor={row.hex} borderRadius=\"10%\" />\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>\r\n          <b>{row.nombre}</b>\r\n        </Typography>\r\n      </TableCell>\r\n      {sesion.accesos.catalogos.colores.editar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          {toUpdate === row._id ? (\r\n            <IconButton onClick={() => onUpdate()}>\r\n              <Close />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton disabled={!isOnline} onClick={() => onUpdate(row)}>\r\n              <Edit />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n      {sesion.accesos.catalogos.colores.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <Modal\r\n            handleModal={handleModal}\r\n            openModal={openModal}\r\n            handleDelete={handleDelete}\r\n            loading={loading}\r\n            isOnline={isOnline}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete, loading, isOnline }) => {\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleModal} disabled={!isOnline}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Delete />\r\n              )\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Grid,\r\n  CircularProgress,\r\n  TextField,\r\n  InputAdornment,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport TablaColores from \"./ListaColores\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_COLORES,\r\n  CREAR_COLOR,\r\n  ACTUALIZAR_COLOR,\r\n} from \"../../../../gql/Catalogos/colores\";\r\n\r\nexport default function RegistroColores({ isOnline }) {\r\n  const [color, setColor] = useState({});\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [values, setValues] = useState({ nombre: \"\", hex: \"\" });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [error_data, setError] = useState(false);\r\n  const [loading_data, setLoading] = useState(false);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_COLORES, {\r\n    variables: { empresa: sesion.empresa._id },\r\n  });\r\n\r\n  /* Mutations */\r\n  const [crearColor] = useMutation(CREAR_COLOR);\r\n  const [actualizarColor] = useMutation(ACTUALIZAR_COLOR);\r\n\r\n  const handleChangeComplete = (color) => {\r\n    setColor(color);\r\n    setValues({\r\n      ...values,\r\n      hex: color.hex.toUpperCase(),\r\n    });\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerColores } = data;\r\n\r\n  const GuardarDatosBD = async (e) => {\r\n    e.preventDefault();\r\n    if (!values.nombre || !values.hex) {\r\n      setError(true);\r\n      return;\r\n    }\r\n    setError(false);\r\n    setLoading(true);\r\n    try {\r\n      const colores = values;\r\n      let msg;\r\n      if (toUpdate) {\r\n        if (sesion.accesos.catalogos.colores.editar === false) {\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          /* const colorActualizado = cleanTypenames(colores); */\r\n          const resp = await actualizarColor({\r\n            variables: {\r\n              input: {\r\n                nombre: colores.nombre,\r\n                hex: colores.hex,\r\n              },\r\n              id: toUpdate,\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id,\r\n            },\r\n          });\r\n          msg = resp.data.actualizarColor.message;\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.colores.agregar === false) {\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearColor({\r\n            variables: {\r\n              input: {\r\n                nombre: colores.nombre,\r\n                hex: colores.hex,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n          msg = \"¡Listo!. Color creado.\";\r\n        }\r\n      }\r\n      refetch();\r\n      setValues({ nombre: \"\", hex: \"\" });\r\n      setToUpdate(\"\");\r\n      setLoading(false);\r\n      setAlert({ message: msg, status: \"success\", open: true });\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"center\">\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Grid container spacing={2}>\r\n        <Grid\r\n          item\r\n          sm={5}\r\n          xs={12}\r\n          style={{ display: \"flex\", justifyContent: \"center\" }}\r\n        >\r\n          <Box>\r\n            <SketchPicker\r\n              color={color}\r\n              onChangeComplete={handleChangeComplete}\r\n            />\r\n            <Box my={5}>\r\n              <form id=\"form-colores\" onSubmit={GuardarDatosBD}>\r\n                <TextField\r\n                  label=\"Nombre del color\"\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  value={values.nombre}\r\n                  onChange={(e) =>\r\n                    setValues({ ...values, nombre: e.target.value })\r\n                  }\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">\r\n                        {!values.hex ? (\r\n                          <Box\r\n                            border={1}\r\n                            style={\r\n                              error_data && !values.hex\r\n                                ? { borderColor: \"red\" }\r\n                                : { borderColor: \"black\" }\r\n                            }\r\n                            borderRadius={2}\r\n                            height={20}\r\n                            width={20}\r\n                          />\r\n                        ) : (\r\n                          <Box\r\n                            border={1}\r\n                            borderRadius={2}\r\n                            bgcolor={values.hex}\r\n                            height={20}\r\n                            width={20}\r\n                          />\r\n                        )}\r\n                      </InputAdornment>\r\n                    ),\r\n                  }}\r\n                  fullWidth\r\n                  error={error_data ? (!values.nombre ? true : false) : false}\r\n                  disabled={loading_data}\r\n                  helperText={\r\n                    error_data\r\n                      ? !values.nombre\r\n                        ? \"Campo obligatorio\"\r\n                        : \"\"\r\n                      : \"\"\r\n                  }\r\n                />\r\n              </form>\r\n\r\n              <Box my={1} />\r\n              <Button\r\n                disabled={!isOnline || loading_data}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                size=\"large\"\r\n                fullWidth\r\n                type=\"submit\"\r\n                form=\"form-colores\"\r\n                startIcon={\r\n                  loading_data ? (\r\n                    <CircularProgress color=\"inherit\" size={20} />\r\n                  ) : (\r\n                    <Add />\r\n                  )\r\n                }\r\n              >\r\n                {toUpdate ? \"Actualizar\" : \"Guardar\"}\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item sm={7} xs={12}>\r\n          <TablaColores\r\n            datos={obtenerColores}\r\n            toUpdate={toUpdate}\r\n            setToUpdate={setToUpdate}\r\n            setValues={setValues}\r\n            refetch={refetch}\r\n            isOnline={isOnline}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/colores.cf4ac382.svg\";","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroColores from \"./RegistroColores\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport ColoresImg from \"../../../../icons/colores.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Colores() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion =\r\n    \"En este apartado se registran los colores que se le podrán asignar a un producto.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={ColoresImg}\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Colores\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Colores\r\n            </Typography>\r\n            <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <Box mt={4}>\r\n          <Container maxWidth=\"md\">\r\n            <RegistroColores isOnline={isOnline} />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Button,\r\n  Box,\r\n  CircularProgress,\r\n} from \"@material-ui/core/\";\r\nimport { Delete, Edit, Close } from \"@material-ui/icons\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_MARCAS,\r\n  ELIMINAR_MARCAS,\r\n} from \"../../../../gql/Catalogos/marcas\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function ListaMarcas({\r\n  updateData,\r\n  toUpdate,\r\n  setToUpdate,\r\n  setData,\r\n  isOnline,\r\n}) {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({\r\n    status: \"\",\r\n    message: \"\",\r\n    open: false,\r\n  });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let obtenerMarcas = [];\r\n\r\n  const { loading, data, refetch, error } = useQuery(OBTENER_MARCAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch, updateData]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (data) {\r\n    obtenerMarcas = data.obtenerMarcas;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Paper className={classes.paper}>\r\n        <TableContainer style={{ height: \"72vh\" }}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Marca</TableCell>\r\n                {sesion.accesos.catalogos.marcas.editar === false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.marcas.eliminar === false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerMarcas.map((row, index) => {\r\n                return (\r\n                  <RowsRender\r\n                    key={index}\r\n                    setAlert={setAlert}\r\n                    refetch={refetch}\r\n                    datos={row}\r\n                    toUpdate={toUpdate}\r\n                    setToUpdate={setToUpdate}\r\n                    setData={setData}\r\n                    isOnline={isOnline}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({\r\n  datos,\r\n  updateData,\r\n  toUpdate,\r\n  setAlert,\r\n  setToUpdate,\r\n  setData,\r\n  refetch,\r\n  isOnline,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n\r\n  const [eliminarMarca] = useMutation(ELIMINAR_MARCAS);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const resultado = await eliminarMarca({\r\n        variables: {\r\n          id: datos._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      if (resultado.data.eliminarMarca.message === \"false\") {\r\n        setAlert({\r\n          message: \"Marca eliminada\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setAlert({\r\n          message: resultado.data.eliminarMarca.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      refetch();\r\n      handleModal();\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const onUpdate = (dato) => {\r\n    if (!dato) {\r\n      setToUpdate(\"\");\r\n      setData(\"\");\r\n      refetch();\r\n      return;\r\n    }\r\n    refetch();\r\n    setToUpdate(dato._id);\r\n    setData(dato);\r\n  };\r\n\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={toUpdate === datos._id ? true : false}\r\n    >\r\n      <TableCell>{datos.nombre_marca}</TableCell>\r\n      {sesion.accesos.catalogos.marcas.editar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          {toUpdate === datos._id ? (\r\n            <IconButton onClick={() => onUpdate()}>\r\n              <Close />\r\n            </IconButton>\r\n          ) : (\r\n            <IconButton onClick={() => onUpdate(datos)} disabled={!isOnline}>\r\n              <Edit />\r\n            </IconButton>\r\n          )}\r\n        </TableCell>\r\n      )}\r\n      {sesion.accesos.catalogos.marcas.eliminar === false ? null : (\r\n        <TableCell padding=\"checkbox\">\r\n          <Modal\r\n            handleModal={handleModal}\r\n            openModal={openModal}\r\n            handleDelete={handleDelete}\r\n            isOnline={isOnline}\r\n          />\r\n        </TableCell>\r\n      )}\r\n    </TableRow>\r\n  );\r\n};\r\n\r\n//ELIMINAR DATOS DE LA TABLA\r\nconst Modal = ({ handleModal, openModal, handleDelete, isOnline }) => {\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleModal} disabled={!isOnline}>\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>{\"¿Seguro que quieres eliminar esto?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const CreateMarcasContext = createContext();\r\n\r\nexport const MarcasProvider = ({ children }) => {\r\n\tconst [ datosMarcas, setDatosMarcas ] = useState({\r\n        nombre_marca: \"\"\r\n    });\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n\r\n\treturn (\r\n\t\t<CreateMarcasContext.Provider value={\r\n            { \r\n                datosMarcas, \r\n                setDatosMarcas,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</CreateMarcasContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { Button, Box, TextField } from \"@material-ui/core\";\r\nimport ListaMarcas from \"./ListaMarcas\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport {\r\n  /* OBTENER_MARCAS, */ REGISTRAR_MARCAS,\r\n  ACTUALIZAR_MARCAS,\r\n} from \"../../../../gql/Catalogos/marcas\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CreateMarcasContext } from \"../../../../context/Catalogos/Marcas\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\n\r\nexport default function VistaMarcas({ isOnline }) {\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [data, setData] = useState({\r\n    nombre_marca: \"\",\r\n  });\r\n  const [toUpdate, setToUpdate] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [updateData, setUpdateData] = useState(false);\r\n  const { /* datosMarcas, setDatosMarcas, */ error, setError } =\r\n    useContext(CreateMarcasContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [CrearMarca] = useMutation(REGISTRAR_MARCAS);\r\n  const [actualzarMarcas] = useMutation(ACTUALIZAR_MARCAS);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const saveData = async () => {\r\n    try {\r\n      if (!data.nombre_marca) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        if (toUpdate) {\r\n          if (sesion.accesos.catalogos.marcas.editar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción !\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            const input = cleanTypenames(data);\r\n            await actualzarMarcas({\r\n              variables: {\r\n                input: {\r\n                  nombre_marca: input.nombre_marca,\r\n                },\r\n                id: toUpdate,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            });\r\n            setData(\"\");\r\n          }\r\n        } else {\r\n          if (sesion.accesos.catalogos.marcas.agregar === false) {\r\n            return setAlert({\r\n              message: \"¡Lo sentimos no tienes autorización para esta acción !\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            const input = data;\r\n            await CrearMarca({\r\n              variables: {\r\n                input,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            });\r\n            setData(\"\");\r\n          }\r\n        }\r\n        setToUpdate(\"\");\r\n        setUpdateData(!updateData);\r\n        setLoading(false);\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setError(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") saveData();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <BackdropComponent loading={loading} />\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" my={2}>\r\n        <TextField\r\n          id=\"outlined-error-helper-text\"\r\n          label=\"Nombre de marca\"\r\n          value={data.nombre_marca ? data.nombre_marca : \"\"}\r\n          name=\"nombre_marca\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          fullWidth\r\n          inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          onChange={obtenerDatos}\r\n          error={error}\r\n          onKeyPress={pressEnter}\r\n        />\r\n        <Box ml={1} />\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          disableElevation\r\n          onClick={saveData}\r\n          disabled={!isOnline}\r\n        >\r\n          <Add />\r\n          Guardar\r\n        </Button>\r\n      </Box>\r\n      <ListaMarcas\r\n        toUpdate={toUpdate}\r\n        setToUpdate={setToUpdate}\r\n        updateData={updateData}\r\n        setData={setData}\r\n        isOnline={isOnline}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport {\r\n  Button,\r\n  Box,\r\n  Dialog,\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Container,\r\n  makeStyles,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { FcRating } from \"react-icons/fc\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport VistaMarcas from \"./VistaMarcas\";\r\nimport { MarcasProvider } from \"../../../../context/Catalogos/Marcas\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nexport default function Marcas() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion =\r\n    \"En este apartado se registran las marcas que se asignarán a un producto.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <MarcasProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcRating className={classes.icon} />\r\n            </Box>\r\n            Marcas\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Marcas\r\n              </Typography>\r\n              <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n                <DescripcionCatalogo texto={descripcion} />\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n\r\n          <Box mt={4}>\r\n            <Container maxWidth=\"md\">\r\n              <VistaMarcas isOnline={isOnline} />\r\n            </Container>\r\n          </Box>\r\n        </Dialog>\r\n      </MarcasProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ELIMINAR_CUENTA } from \"../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function EliminarCuenta({\r\n  cuenta,\r\n  refetch,\r\n  setAlert,\r\n  isOnline,\r\n}) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [eliminarCuenta] = useMutation(ELIMINAR_CUENTA);\r\n\r\n  const handleClickOpen = (e) => {\r\n    e.stopPropagation();\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const deleteCuenta = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await eliminarCuenta({\r\n        variables: {\r\n          id: cuenta._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        onClick={handleClickOpen}\r\n        onFocus={(event) => event.stopPropagation()}\r\n        disabled={!isOnline}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogTitle>Se eliminará esta cuenta</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => deleteCuenta()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { ELIMINAR_SUBCUENTA } from \"../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nexport default function EliminarSubcuenta({\r\n  idCuenta,\r\n  subcuenta,\r\n  refetch,\r\n  setAlert,\r\n  isOnline,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  const [eliminarSubcuenta] = useMutation(ELIMINAR_SUBCUENTA);\r\n \r\n  const handleClickOpen = (e) => {\r\n    e.stopPropagation();\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const deleteSubCuenta = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await eliminarSubcuenta({\r\n        variables: {\r\n          idCuenta,\r\n          idSubcuenta: subcuenta._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        color=\"secondary\"\r\n        onClick={handleClickOpen}\r\n        onFocus={(event) => event.stopPropagation()}\r\n        disabled={!isOnline}\r\n      >\r\n        <Delete />\r\n      </IconButton>\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogTitle>Se eliminará esta cuenta</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={() => deleteSubCuenta()}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  fade,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  IconButton,\r\n  TextField,\r\n  CircularProgress,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Add, Edit, ExpandMore, Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../components/Layouts/BackDrop\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CUENTAS,\r\n  CREAR_CUENTA,\r\n  CREAR_SUBCUENTA,\r\n  ACTUALIZAR_SUBCUENTA,\r\n  ACTUALIZAR_CUENTA,\r\n} from \"../../../../gql/Catalogos/centroCostos\";\r\nimport { cleanTypenames } from \"../../../../config/reuserFunctions\";\r\nimport EliminarCuenta from \"./eliminarCuenta\";\r\nimport EliminarSubcuenta from \"./eliminarSubcuenta\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  flexGrow: {\r\n    flexGrow: 1,\r\n  },\r\n  selected: {\r\n    background: fade(theme.palette.secondary.main, 0.1),\r\n  },\r\n}));\r\n\r\nexport default function RegistroCentroCostos({ isOnline }) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [cuenta, setCuenta] = useState(\"\");\r\n  const [toUpdateID, setToUpdateID] = useState(\"\");\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CUENTAS, {\r\n    variables: { empresa: sesion.empresa._id },\r\n  });\r\n  /*  Categorias Mutations */\r\n  const [crearCuenta] = useMutation(CREAR_CUENTA);\r\n  const [actualizarCuenta] = useMutation(ACTUALIZAR_CUENTA);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerCuentas } = data;\r\n  const render_cuentas = obtenerCuentas.map((cuenta, index) => (\r\n    <RenderCuentas\r\n      key={index}\r\n      cuenta={cuenta}\r\n      setToUpdateID={setToUpdateID}\r\n      setCuenta={setCuenta}\r\n      refetch={refetch}\r\n      toUpdateID={toUpdateID}\r\n      isOnline={isOnline}\r\n    />\r\n  ));\r\n\r\n  const obtenerDatos = (e) => {\r\n    setCuenta(e.target.value);\r\n  };\r\n\r\n  const guardarCuenta = async () => {\r\n    if (!cuenta) return;\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearCuenta({\r\n            variables: {\r\n              input: {\r\n                cuenta,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const cuentaActualizada = cleanTypenames(cuenta);\r\n          await actualizarCuenta({\r\n            variables: {\r\n              input: {\r\n                cuenta: cuentaActualizada,\r\n              },\r\n              idCuenta: toUpdateID,\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setCuenta(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingBackDrop(false);\r\n    }\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    try {\r\n      if (e.key === \"Enter\") {\r\n        guardarCuenta();\r\n      }\r\n    } catch (error) {}\r\n  };\r\n  return (\r\n    <div className={classes.root}>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent\r\n        loading={loadingBackDrop}\r\n        setLoading={setLoadingBackDrop}\r\n      />\r\n      <Typography variant=\"h6\">Cuentas</Typography>\r\n      <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n        <TextField\r\n          value={cuenta}\r\n          variant=\"outlined\"\r\n          inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          size=\"small\"\r\n          style={{ width: \"35%\" }}\r\n          onKeyPress={pressEnter}\r\n          onChange={obtenerDatos}\r\n        />\r\n        <Box ml={1} />\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          disableElevation\r\n          onClick={guardarCuenta}\r\n          disabled={!isOnline}\r\n        >\r\n          <Add />\r\n          Guardar\r\n        </Button>\r\n      </Box>\r\n      {render_cuentas}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderCuentas = ({\r\n  cuenta,\r\n  setToUpdateID,\r\n  setCuenta,\r\n  refetch,\r\n  toUpdateID,\r\n  isOnline,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n  const [subcuenta, setSubcuenta] = useState(\"\");\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  /*  Subcategorias Mutations */\r\n  const [crearSubcuenta] = useMutation(CREAR_SUBCUENTA);\r\n  const [actualizarSubcuenta] = useMutation(ACTUALIZAR_SUBCUENTA);\r\n\r\n  const render_subcuentas =\r\n    cuenta.subcuentas !== null ? (\r\n      cuenta.subcuentas.map((subcuenta) => (\r\n        <RenderSubcuentas\r\n          key={subcuenta._id}\r\n          idCuenta={cuenta._id}\r\n          subcuenta={subcuenta}\r\n          setToUpdateID={setToUpdateID}\r\n          toUpdateID={toUpdateID}\r\n          setSubcuenta={setSubcuenta}\r\n          refetch={refetch}\r\n          isOnline={isOnline}\r\n        />\r\n      ))\r\n    ) : (\r\n      <div />\r\n    );\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(cuenta._id);\r\n    setCuenta(cuenta.cuenta);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setCuenta(\"\");\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setSubcuenta(e.target.value);\r\n  };\r\n\r\n  const guardarSubcuenta = async () => {\r\n    if (!subcuenta) return;\r\n    setLoadingBackDrop(true);\r\n    try {\r\n      if (!toUpdateID) {\r\n        if (sesion.accesos.catalogos.centro_costos.agregar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          await crearSubcuenta({\r\n            variables: {\r\n              input: {\r\n                subcuenta,\r\n              },\r\n              idCuenta: cuenta._id,\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id\r\n            },\r\n          });\r\n        }\r\n      } else {\r\n        if (sesion.accesos.catalogos.centro_costos.editar === false) {\r\n          setLoadingBackDrop(false);\r\n          return setAlert({\r\n            message: \"¡Lo sentimos no tienes autorización para esta acción!\",\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          const subCuentaActualizada = cleanTypenames(subcuenta);\r\n          await actualizarSubcuenta({\r\n            variables: {\r\n              input: {\r\n                subcuenta: subCuentaActualizada,\r\n              },\r\n              idCuenta: cuenta._id,\r\n              idSubcuenta: toUpdateID,\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id,\r\n            },\r\n          });\r\n        }\r\n      }\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      setLoadingBackDrop(false);\r\n      setSubcuenta(\"\");\r\n      setToUpdateID(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      setLoadingBackDrop(false);\r\n    }\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    try {\r\n      if (e.key === \"Enter\") {\r\n        guardarSubcuenta();\r\n      }\r\n    } catch (error) {}\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent\r\n        loading={loadingBackDrop}\r\n        setLoading={setLoadingBackDrop}\r\n      />\r\n      <Accordion>\r\n        <AccordionSummary\r\n          className={\r\n            toUpdateID && toUpdateID === cuenta._id ? classes.selected : \"\"\r\n          }\r\n          expandIcon={<ExpandMore />}\r\n          aria-label=\"Expand\"\r\n          aria-controls={`cuenta-action-${cuenta._id}`}\r\n          id={`cuenta-${cuenta._id}`}\r\n        >\r\n          <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n            <Typography style={{ fontSize: 15 }}>{cuenta.cuenta}</Typography>\r\n            <div className={classes.flexGrow} />\r\n            {toUpdateID && toUpdateID === cuenta._id ? (\r\n              <IconButton\r\n                onClick={cancelarUpdate}\r\n                onFocus={(event) => event.stopPropagation()}\r\n              >\r\n                <Close />\r\n              </IconButton>\r\n            ) : sesion.accesos.catalogos.centro_costos.editar ===\r\n              false ? null : (\r\n              <IconButton\r\n                onClick={obtenerCamposParaActualizar}\r\n                onFocus={(event) => event.stopPropagation()}\r\n                disabled={!isOnline}\r\n              >\r\n                <Edit />\r\n              </IconButton>\r\n            )}\r\n            {sesion.accesos.catalogos.centro_costos.eliminar ===\r\n            false ? null : (\r\n              <EliminarCuenta\r\n                cuenta={cuenta}\r\n                refetch={refetch}\r\n                setAlert={setAlert}\r\n                isOnline={isOnline}\r\n              />\r\n            )}\r\n          </Box>\r\n        </AccordionSummary>\r\n        <AccordionDetails>\r\n          <Box width=\"100%\">\r\n            <Divider />\r\n            <Box mb={2} />\r\n            <Box ml={5} width=\"100%\" display=\"flex\">\r\n              <Typography variant=\"h6\" style={{ fontSize: 20 }}>\r\n                Subcuenta\r\n              </Typography>\r\n              <Box mr={2} />\r\n              <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                <TextField\r\n                  value={subcuenta}\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                  onChange={obtenerDatos}\r\n                  onKeyPress={pressEnter}\r\n                  inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n                />\r\n                <Box ml={1} />\r\n                <Button\r\n                  color=\"primary\"\r\n                  variant=\"contained\"\r\n                  size=\"large\"\r\n                  disableElevation\r\n                  onClick={guardarSubcuenta}\r\n                  disabled={!isOnline}\r\n                >\r\n                  <Add />\r\n                  Guardar\r\n                </Button>\r\n              </Box>\r\n            </Box>\r\n            {cuenta.subcuentas !== null ? (\r\n              <Box ml={5}>{render_subcuentas}</Box>\r\n            ) : (\r\n              <div />\r\n            )}\r\n            {/* <Box ml={5}>{render_subcostos}</Box> */}\r\n          </Box>\r\n        </AccordionDetails>\r\n      </Accordion>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderSubcuentas = ({\r\n  idCuenta,\r\n  subcuenta,\r\n  toUpdateID,\r\n  setToUpdateID,\r\n  setSubcuenta,\r\n  refetch,\r\n  isOnline,\r\n}) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n  const [loadingBackDrop, setLoadingBackDrop] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const obtenerCamposParaActualizar = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(subcuenta._id);\r\n    setSubcuenta(subcuenta.subcuenta);\r\n  };\r\n\r\n  const cancelarUpdate = (event) => {\r\n    event.stopPropagation();\r\n    setToUpdateID(\"\");\r\n    setSubcuenta(\"\");\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BackdropComponent\r\n        loading={loadingBackDrop}\r\n        setLoading={setLoadingBackDrop}\r\n      />\r\n      <Box\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        borderRadius={3}\r\n        px={1}\r\n        className={\r\n          toUpdateID && toUpdateID === subcuenta._id ? classes.selected : \"\"\r\n        }\r\n      >\r\n        <Typography>{subcuenta.subcuenta}</Typography>\r\n        <div className={classes.flexGrow} />\r\n        {sesion.accesos.catalogos.centro_costos.editar ===\r\n        false ? null : toUpdateID && toUpdateID === subcuenta._id ? (\r\n          <IconButton\r\n            onClick={cancelarUpdate}\r\n            onFocus={(event) => event.stopPropagation()}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        ) : (\r\n          <IconButton\r\n            onClick={obtenerCamposParaActualizar}\r\n            onFocus={(event) => event.stopPropagation()}\r\n            disabled={!isOnline}\r\n          >\r\n            <Edit />\r\n          </IconButton>\r\n        )}\r\n        {sesion.accesos.catalogos.centro_costos.eliminar === false ? null : (\r\n          <EliminarSubcuenta\r\n            idCuenta={idCuenta}\r\n            subcuenta={subcuenta}\r\n            refetch={refetch}\r\n            setAlert={setAlert}\r\n            isOnline={isOnline}\r\n          />\r\n        )}\r\n      </Box>\r\n      <Divider />\r\n    </Fragment>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/costos.c06d434a.svg\";","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroCentroCostos from \"./RegistroCentroCostos\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport CostosImg from \"../../../../icons/costos.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CentroCostos() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion =\r\n    \"En este apartado podrás registrar tus cuentas y subcuentas que utilizarás al momento de llevar tu control financiero. Por ejemplo: Compras, Ventas.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={CostosImg}\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Centro de costos\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Centro de costos\r\n            </Typography>\r\n            <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <Box>\r\n          <Container maxWidth=\"md\">\r\n            <RegistroCentroCostos isOnline={isOnline} />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_CONCEPTOS_ALMACEN = gql`\r\n  query ObtenerConceptosAlmacen($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConceptosAlmacen(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      nombre_concepto\r\n      destino\r\n      origen\r\n      editable\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const REGISTRAR_CONCEPTO_ALMACEN = gql`\r\n  mutation CrearConceptoAlmacen(\r\n    $input: ConceptoAlmacenInput\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n  ) {\r\n    crearConceptoAlmacen(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ACTUALIZAR_CONCEPTO_ALMACEN = gql`\r\n    mutation ActualizarConceptoAlmacen($input: ConceptoAlmacenInput, $id: ID!, $empresa:ID!, $sucursal:ID!){\r\n        actualizarConceptoAlmacen(input: $input, id: $id, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n\r\nexport const ELIMINAR_CONCEPTO_ALMACEN = gql`\r\n    mutation EliminarConceptoAlmacen($id: ID!, $empresa:ID!, $sucursal:ID!){\r\n        eliminarConceptoAlmacen(id: $id, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  makeStyles,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n  Button,\r\n} from \"@material-ui/core\";\r\n\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Delete, Edit } from \"@material-ui/icons\";\r\n\r\nimport { useQuery, useMutation } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CONCEPTOS_ALMACEN,\r\n  ELIMINAR_CONCEPTO_ALMACEN,\r\n} from \"../../../../gql/Catalogos/conceptosAlmacen\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function TablaConceptos({\r\n  setData,\r\n  setIdConcepto,\r\n  idConcepto,\r\n  setAccion,\r\n  updateData,\r\n  setAlert,\r\n  isOnline,\r\n}) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n\r\n  let obtenerConcepto = [];\r\n\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_CONCEPTOS_ALMACEN,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n      },\r\n    }\r\n  );\r\n  const [EliminarConceptoAlmacen] = useMutation(ELIMINAR_CONCEPTO_ALMACEN);\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [updateData, refetch]);\r\n\r\n  if (data) {\r\n    obtenerConcepto = data.obtenerConceptosAlmacen;\r\n  }\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await EliminarConceptoAlmacen({\r\n        variables: {\r\n          id: idConcepto,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n      handleModal();\r\n      setIdConcepto(\"\");\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"medium\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Concepto almacén</TableCell>\r\n                <TableCell padding=\"default\">Origen</TableCell>\r\n                <TableCell padding=\"default\">Destino</TableCell>\r\n                {sesion.accesos.catalogos.conceptos_almacen.editar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Editar</TableCell>\r\n                )}\r\n                {sesion.accesos.catalogos.conceptos_almacen.eliminar ===\r\n                false ? null : (\r\n                  <TableCell padding=\"default\">Eliminar</TableCell>\r\n                )}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {obtenerConcepto.map((row, index) => {\r\n                return (\r\n                  <TableRow hover role=\"checkbox\" tabIndex={-1} key={row._id}>\r\n                    <TableCell>{row.nombre_concepto}</TableCell>\r\n                    <TableCell>{row.origen}</TableCell>\r\n                    <TableCell>{row.destino}</TableCell>\r\n                    {sesion.accesos.catalogos.conceptos_almacen.editar ===\r\n                    false ? null : (\r\n                      <TableCell padding=\"checkbox\">\r\n                        <IconButton\r\n                          onClick={() => {\r\n                            setAccion(false);\r\n                            setIdConcepto(row._id);\r\n                            setData({\r\n                              nombre_concepto: row.nombre_concepto,\r\n                              origen: row.origen,\r\n                              destino: row.destino,\r\n                            });\r\n                          }}\r\n                          disabled={!row.editable || !isOnline}\r\n                        >\r\n                          <Edit />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    )}\r\n                    {sesion.accesos.catalogos.conceptos_almacen.eliminar ===\r\n                    false ? null : (\r\n                      <TableCell padding=\"checkbox\">\r\n                        <IconButton\r\n                          color=\"secondary\"\r\n                          onClick={() => {\r\n                            setIdConcepto(row._id);\r\n                            handleModal();\r\n                          }}\r\n                          disabled={!row.editable || !isOnline}\r\n                        >\r\n                          <Delete />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    )}\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        {/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={obtenerConcepto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n      </Paper>\r\n      <Modal\r\n        handleModal={handleModal}\r\n        openModal={openModal}\r\n        handleDelete={handleDelete}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Modal = ({ handleModal, openModal, handleDelete }) => {\r\n  return (\r\n    <div>\r\n      <Dialog open={openModal} onClose={handleModal}>\r\n        <DialogTitle>\r\n          {\r\n            \"Eliminar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres eliminar esto?\"\r\n          }\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleModal} color=\"primary\">\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            autoFocus\r\n            variant=\"contained\"\r\n            onClick={handleDelete}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  TextField,\r\n  FormControl,\r\n  Input,\r\n  Grid,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  useTheme,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport ListaConceptos from \"./ListaConceptos\";\r\nimport {\r\n  REGISTRAR_CONCEPTO_ALMACEN,\r\n  ACTUALIZAR_CONCEPTO_ALMACEN,\r\n} from \"../../../../gql/Catalogos/conceptosAlmacen\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  flexGrow: {\r\n    flexGrow: 1,\r\n  },\r\n  formControl: {\r\n    marginLeft: theme.spacing(5),\r\n    marginBottom: theme.spacing(3),\r\n    minWidth: 200,\r\n    maxWidth: 200,\r\n  },\r\n}));\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\nconst tipos = [\"SUMA\", \"RESTA\", \"N/A\"];\r\n\r\nfunction getStyles(tipo, tipoName, theme) {\r\n  console.log(tipoName);\r\n  return {\r\n    fontWeight:\r\n      tipoName.indexOf(tipo) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\nexport default function RegistroServicios({ isOnline }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [updateData, setUpdateData] = useState(false);\r\n  const [data, setData] = useState({\r\n    nombre_concepto: \"\",\r\n    destino: \"\",\r\n    origen: \"\",\r\n  });\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [error, setError] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [accion, setAccion] = useState(true);\r\n  const [idConcepto, setIdConcepto] = useState(\"\");\r\n\r\n  const [crearConceptoAlmacen] = useMutation(REGISTRAR_CONCEPTO_ALMACEN);\r\n  const [actualizarConceptoAlmacen] = useMutation(ACTUALIZAR_CONCEPTO_ALMACEN);\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const handleModal = () => setOpenModal(!openModal);\r\n  const handleChangeInput = (e) => {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n  const handleChangeDestino = (event) => {\r\n    setData({ ...data, destino: event.target.value });\r\n  };\r\n  const handleChangeOrigen = (event) => {\r\n    setData({ ...data, origen: event.target.value });\r\n  };\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setOpenModal(false);\r\n      if (!data.nombre_concepto || !data.origen || !data.destino) {\r\n        setError(true);\r\n        return;\r\n      } else {\r\n        const input = data;\r\n        if (accion) {\r\n          if (sesion.accesos.catalogos.conceptos_almacen.agregar === false) {\r\n            return setAlert({\r\n              message: \"Lo sentimos no tienes los permisos autorizados\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            await crearConceptoAlmacen({\r\n              variables: {\r\n                input,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                usuario: sesion._id,\r\n              },\r\n            });\r\n          }\r\n        } else {\r\n          if (sesion.accesos.catalogos.conceptos_almacen.editar === false) {\r\n            return setAlert({\r\n              message: \"Lo sentimos no tienes los permisos autorizados\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else {\r\n            await actualizarConceptoAlmacen({\r\n              variables: {\r\n                input,\r\n                id: idConcepto,\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n              },\r\n            });\r\n            setAccion(true);\r\n          }\r\n        }\r\n        setAlert({ message: \"¡Listo!\", status: \"success\", open: true });\r\n        setData({ nombre_concepto: \"\", origen: \"\", destino: \"\" });\r\n        setError(false);\r\n        setUpdateData(!updateData);\r\n        setIdConcepto(\"\");\r\n      }\r\n    } catch (error) {\r\n      setAlert({ message: error.message, status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") handleSubmit();\r\n  };\r\n\r\n  const Modal = ({ handleModal, openModal, handleSubmit, isOnline }) => {\r\n    return (\r\n      <div>\r\n        <Dialog open={openModal} onClose={handleModal}>\r\n          <DialogTitle>\r\n            {\r\n              \"Editar este concepto afectará cálculos de estados de resultado ,¿Seguro que quieres editar esto?\"\r\n            }\r\n          </DialogTitle>\r\n          <DialogActions>\r\n            <Button onClick={handleModal} color=\"primary\">\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              color=\"secondary\"\r\n              autoFocus\r\n              variant=\"contained\"\r\n              onClick={handleSubmit}\r\n              disabled={!isOnline}\r\n            >\r\n              Editar\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Box flexDirection=\"row\">\r\n        <Grid container>\r\n          <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\r\n          <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n            <Typography>Concepto </Typography>\r\n            <TextField\r\n              error={error}\r\n              id=\"outlined-error-helper-text\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              name=\"nombre_concepto\"\r\n              style={{ marginLeft: 2 }}\r\n              value={data.nombre_concepto}\r\n              onChange={handleChangeInput}\r\n              onKeyPress={pressEnter}\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </Box>\r\n          <FormControl className={classes.formControl}>\r\n            <InputLabel id=\"origen-label\">Origen</InputLabel>\r\n            <Select\r\n              error={error}\r\n              labelId=\"origen-label\"\r\n              id=\"origen-name\"\r\n              value={data.origen}\r\n              onChange={handleChangeOrigen}\r\n              input={<Input />}\r\n              MenuProps={MenuProps}\r\n            >\r\n              {tipos.map((tipo) => (\r\n                <MenuItem\r\n                  key={tipo}\r\n                  value={tipo}\r\n                  style={getStyles(tipo, data.origen, theme)}\r\n                >\r\n                  {tipo}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          <FormControl className={classes.formControl}>\r\n            <InputLabel id=\"destino-label\">Destino</InputLabel>\r\n            <Select\r\n              error={error}\r\n              labelId=\"destino-label\"\r\n              id=\"destino-name\"\r\n              value={data.destino}\r\n              onChange={handleChangeDestino}\r\n              input={<Input />}\r\n              MenuProps={MenuProps}\r\n            >\r\n              {tipos.map((tipo) => (\r\n                <MenuItem\r\n                  key={tipo}\r\n                  value={tipo}\r\n                  style={getStyles(tipo, data.destino, theme)}\r\n                >\r\n                  {tipo}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n            <Box ml={5} />\r\n            <Button\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              onClick={() => (accion ? handleSubmit() : setOpenModal(true))}\r\n              disableElevation\r\n              disabled={!isOnline}\r\n            >\r\n              <Add />\r\n              Guardar\r\n            </Button>\r\n          </Box>\r\n        </Grid>\r\n      </Box>\r\n      <ListaConceptos\r\n        setData={setData}\r\n        idConcepto={idConcepto}\r\n        setIdConcepto={setIdConcepto}\r\n        setAccion={setAccion}\r\n        updateData={updateData}\r\n        setAlert={setAlert}\r\n        isOnline={isOnline}\r\n      />\r\n      <Modal\r\n        handleModal={handleModal}\r\n        openModal={openModal}\r\n        handleSubmit={handleSubmit}\r\n        isOnline={isOnline}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/conceptosAlmacen.209417b5.svg\";","import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, Container } from \"@material-ui/core\";\r\nimport RegistroConcepto from \"./RegistroConcepto\";\r\nimport DescripcionCatalogo from \"../../../../components/DescripcionCatalogo\";\r\nimport ConceptosAlmacenImg from \"../../../../icons/conceptosAlmacen.svg\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ConceptosAlmacen() {\r\n  const { isOnline } = useContext(AccesosContext);\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const descripcion =\r\n    \"En este apartado podrás registrar los conceptos que definirán la acción para los traspasos entre almacenes.\";\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={ConceptosAlmacenImg}\r\n              alt=\"icono numero calzado\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Conceptos Almacén\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Conceptos almacén\r\n            </Typography>\r\n            <Box m={1} display=\"flex\" flexDirection=\"row\">\r\n              <DescripcionCatalogo texto={descripcion} />\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n        <Box mt={4} alignSelf=\"center\">\r\n          <Container>\r\n            <RegistroConcepto isOnline={isOnline} />\r\n          </Container>\r\n        </Box>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport Cliente from './Cliente/Cliente';\r\nimport Productos from './Producto/';\r\nimport Tallas from './Tallas/Tallas';\r\n/* import UnidadMedida from './UnidadMedida/UnidadMedida'; */\r\n/* import Contabilidad from './Contabilidad/Contabilidad'; */\r\nimport Proveedores from './Proveedores/Proovedores';\r\nimport Cajas from './Cajas/Cajas'; \r\nimport Usuarios from './Usuarios/Usuarios';\r\nimport Departamentos from './Departamentos/Departamentos';\r\nimport Categorias from './Categorias/Categorias';\r\nimport Colores from './Colores/Colores';\r\nimport Marcas from './Marcas/Marcas';\r\nimport CentroCostos from './CentroCostos/CentroCostos';\r\nimport ConceptosAlmacen from './ConceptosAlmacen/ConceptosAlmacen';\r\n\r\nexport default function Catalogos() {\r\n\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\t\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={5} justifyContent=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.clientes.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cliente />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.productos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Productos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.tallas_numeros.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Tallas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<UnidadMedida />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t\t{/* {permisosUsuario.accesos.catalogos.contabilidad.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Contabilidad />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)} */}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.provedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Proveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.cajas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.usuarios.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Usuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.departamentos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Departamentos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.categorias.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Categorias />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.colores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Colores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.marcas.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Marcas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.centro_costos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CentroCostos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.catalogos.conceptos_almacen.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ConceptosAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const TesoreriaCtx = createContext();\r\n\r\nexport const TesoreriaProvider = ({ children }) => {\r\n\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [cuentas, setCuentas] = useState([]);\r\n    const [cuenta, setCuenta] = useState([]);\r\n    const [reload, setReload] = useState(false);\r\n    \r\n    return (\r\n        <TesoreriaCtx.Provider\r\n            value={{\r\n                alert, \r\n                setAlert,\r\n                cuentas, \r\n                setCuentas,\r\n                reload, \r\n                setReload,\r\n                cuenta, \r\n                setCuenta\r\n            }}\r\n        >\r\n            {children}\r\n        </TesoreriaCtx.Provider>\r\n    );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/retiro-de-dinero.5d8be2e9.svg\";","import { Box, Button, Dialog, DialogActions,\r\n        DialogContent, makeStyles, \r\n        MenuItem, Select, Slide, TextField, Typography,\r\n        Input, FormControl, InputLabel\r\n} from '@material-ui/core';\r\nimport React, { Fragment, useState } from 'react';\r\nimport moment from 'moment';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport { CREAR_MOVIMIENTO_CUENTA } from '../../../../gql/Empresa/sucursales';\r\nimport {\r\n    OBTENER_USUARIOS,\r\n  } from \"../../../../gql/Catalogos/usuarios\";\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport RetirosIcon from \"../../../../icons/retiro-de-dinero.svg\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    formComboBox:{\r\n        height: '50%'\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(0),\r\n        minWidth: '96%',\r\n        maxWidth: '96%',\r\n    },\r\n  \r\n    icon: {\r\n\t\twidth: 40\r\n\t},\r\n}));\r\n\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\n\r\nconst conceptos = ['CORTE DE CAJA','TRANSFERENCIA DE EFECTIVO','APORTACION SOCIOS'];\r\n\r\nexport default function RetiroDeposito({cuenta, setReload, tipo }) {\r\n\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem('turnoEnCurso'));\r\n    const [ CrearMovimientoCuenta ] = useMutation(CREAR_MOVIMIENTO_CUENTA);\r\n\r\n    const classes = useStyles();\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [datosMovimiento, setDatosMovimiento] = useState({});\r\n    const [concepto, setConcepto] = useState(\"\");\r\n    const [usuarioEntrega, setUsuarioEntrega] = useState({});\r\n    const [origen, setOrigen] = useState({});\r\n    const [destino, setDestino] = useState({});\r\n    const [open, setOpen] = useState(false);\r\n    const [fechaMovimientoEntrega, setFechaMovimientoEntrega] = useState(\"\");\r\n    let cajasArray = []; \r\n    let usuarios = [];\r\n   \r\n\r\n    \r\n    const queryObtenerUsuarios =  useQuery(OBTENER_USUARIOS,{\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`,\r\n            empresa: `${sesion.empresa._id}`,\r\n            eliminado: false,\r\n        },\r\n        \r\n         fetchPolicy: \"network-only\"\r\n    });\r\n\r\n    const queryObtenerCajas =  useQuery(OBTENER_CAJAS,{\r\n        variables: {\r\n            sucursal: `${sesion.sucursal._id}`,\r\n            empresa: `${sesion.empresa._id}`,\r\n\t\t},\r\n        \r\n         fetchPolicy: \"network-only\"\r\n    });\r\n\r\n    const handleClickOpen =()=>{\r\n        setOpen(!open);\r\n    };\r\n\r\n    const onChangeDatos = (e) => {\r\n    \r\n            setDatosMovimiento({...datosMovimiento, [e.target.name]: e.target.value })\r\n        \r\n       \r\n    };\r\n\r\n    const input ={\r\n        tipo_movimiento: datosMovimiento.tipo_movimiento === 'RETIRO' ? 'CUENTA_RETIRO' : 'CUENTA_DEPOSITO',\r\n        id_usuario: sesion._id,\r\n        //rol_movimiento: tipo === true ? \"CUENTA-EMPRESA\" : \"CUENTA\",\r\n        rol_movimiento:  \"CAJA_PRINCIPAL\",\r\n        //numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        //id_Caja: turnoEnCurso ? turnoEnCurso.id_caja : null,\r\n        numero_usuario_creador: sesion.numero_usuario.toString(),\r\n        nombre_usuario_creador: sesion.nombre,\r\n        horario_turno: turnoEnCurso ? turnoEnCurso.horario_turno : '',\r\n        concepto: concepto,\r\n        usuario_entrega: usuarioEntrega._id,\r\n        origen_entrega: origen._id,\r\n        fecha_movimiento_entrega: fechaMovimientoEntrega,\r\n        \r\n        hora_moviento: {\r\n            hora: moment().locale(\"es-mx\").format('hh'),\r\n            minutos: moment().locale(\"es-mx\").format('mm'),\r\n            segundos: moment().locale(\"es-mx\").format('ss'),\r\n            completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n        },\r\n        fecha_movimiento: {\r\n            year: moment().locale(\"es-mx\").format('YYYY'),\r\n            mes: moment().locale(\"es-mx\").format('MM'),\r\n            dia: moment().locale(\"es-mx\").format('DD'),\r\n            no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n            no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n            completa: moment().locale('es-mx').format()\r\n        },\r\n        montos_en_caja: {\r\n            monto_efectivo: {\r\n                monto: (datosMovimiento.tipo_movimiento === 'RETIRO') ? parseFloat(datosMovimiento.cantidad * -1) : parseFloat(datosMovimiento.cantidad),\r\n                metodo_pago: \"01\"\r\n            },\r\n            monto_tarjeta_debito: {\r\n                monto: 0,\r\n                metodo_pago: \"28\"\r\n            },\r\n            monto_tarjeta_credito: {\r\n                monto: 0,\r\n                metodo_pago: \"04\"\r\n            },\r\n            monto_creditos: {\r\n                monto: 0,\r\n                metodo_pago: \"99\"\r\n            },\r\n            monto_monedero: {\r\n                monto: 0,\r\n                metodo_pago: \"05\"\r\n            },\r\n            monto_transferencia: {\r\n                monto: 0,\r\n                metodo_pago: \"03\"\r\n            },\r\n            monto_cheques: {\r\n                monto: 0,\r\n                metodo_pago: \"02\"\r\n            },\r\n            monto_vales_despensa: {\r\n                monto: 0,\r\n                metodo_pago: \"08\"\r\n            },\r\n        },\r\n        comentarios: datosMovimiento.comentarios,\r\n    };\r\n\r\n    const enviarDatos = async () => { \r\n        try {\r\n\r\n            if(datosMovimiento.tipo_movimiento !== 'RETIRO'){\r\n                if (concepto  === ''|| !usuarioEntrega || fechaMovimientoEntrega === '' || !origen || !datosMovimiento.tipo_movimiento || !datosMovimiento.cantidad ) {\r\n                \r\n                   \r\n                    setAlert({\r\n                        message: 'Por favor complete los datos',\r\n                        status: \"error\",\r\n                        open: true,\r\n                    });\r\n                    return null;\r\n                }\r\n            }else{\r\n                if (concepto  === ''|| !usuarioEntrega ||   !datosMovimiento.tipo_movimiento || !datosMovimiento.cantidad ) {\r\n            \r\n                    \r\n                    setAlert({\r\n                        message: 'Por favor complete los datos',\r\n                        status: \"error\",\r\n                        open: true,\r\n                    });\r\n                    return null;\r\n                } \r\n            }\r\n           \r\n            const movimiento = await CrearMovimientoCuenta({\r\n                variables: {\r\n                    input,\r\n                    empresa: sesion.empresa._id,\r\n                    sucursal: sesion.sucursal._id,\r\n                    tipo: tipo\r\n                }\r\n            });\r\n            //refetch();\r\n            \r\n            setDatosMovimiento({}); \r\n            handleClickOpen();\r\n            setAlert({\r\n                message: movimiento.data.crearMovimientoCuenta.message,\r\n                status: \"success\",\r\n                open: true,\r\n            });\r\n            setReload(true);\r\n        } catch (error) {\r\n            console.log(error)\r\n            setAlert({\r\n                message: error.message,\r\n                status: \"error\",\r\n                open: true,\r\n            });\r\n            setDatosMovimiento({}); \r\n            handleClickOpen();\r\n             /*  if (error.networkError.result) {\r\n                console.log(error.networkError.result.errors);\r\n              } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors.message);\r\n              } */\r\n        }\r\n    }\r\n\r\n    const handleChangeConcepto = (event) => {\r\n        try {    \r\n            let con = event.target.value;  \r\n            setConcepto(con);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    const handleChangeUsuarioEntrega = (event) => {\r\n        try {    \r\n            let usu = event.target.value;  \r\n            setUsuarioEntrega(usu);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    const handleChangeOrigen = (event) => {\r\n        try {    \r\n            let ori = event.target.value;  \r\n            setOrigen(ori);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    const handleChangeDestino = (event) => {\r\n        try {    \r\n            let des = event.target.value;  \r\n            setDestino(des);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    const handleChangeFechaMovimiento = (event) => {\r\n        try {    \r\n            let fecMov = event.target.value;  \r\n            setFechaMovimientoEntrega(fecMov);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n\r\n    \r\n    if(queryObtenerUsuarios.data){\r\n        try {\r\n             usuarios = queryObtenerUsuarios.data.obtenerUsuarios;\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n       \r\n    }\r\n\r\n    if(queryObtenerCajas.data){\r\n        try {\r\n           \r\n            cajasArray = queryObtenerCajas.data.obtenerCajasSucursal;\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n       \r\n    }\r\n   \r\n\r\n    \r\n    return (\r\n        <Fragment>\r\n          <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n            <Button  onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"row\">\r\n                    Realizar movimiento\r\n                    <Box display=\"flex\" alignItems=\"flex-end\">\r\n                        \r\n                        <img src={RetirosIcon} alt=\"icono retiro\" className={classes.icon} />\r\n                    </Box>\r\n                </Box>    \r\n\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t</Button>\r\n            <Dialog\r\n                open={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\tfullWidth\r\n            >\r\n                <DialogContent>\r\n                  \r\n                    <Box textAlign={'center'} p={1}>\r\n                        <Typography variant='h5'>\r\n                            Movimiento en caja principal\r\n                        </Typography>\r\n                    </Box>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"100%\">\r\n                            <Typography>Recibe</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"usuario\"\r\n                                variant=\"outlined\"\r\n                                disabled={true}\r\n                                value={sesion?.nombre}\r\n                            />\r\n                        </Box>\r\n                        <Box width=\"100%\" >\r\n                            <Typography>Fecha y hora</Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                disabled={true}\r\n                                size=\"small\"\r\n                                value={moment().locale(\"es-mx\").format('D MMMM YYYY, h:mm:ss')}\r\n                                name=\"fecha_movimiento\"\r\n                                variant=\"outlined\"\r\n\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    <div className={classes.formInputFlex}>\r\n                        <Box width=\"50%\">\r\n                            <Typography>Movimiento a Realizar</Typography>\r\n                            <Select\r\n                                className={classes.formComboBox}    \r\n                                size=\"small\"\r\n                                variant=\"outlined\"\r\n                                name=\"tipo_movimiento\"\r\n                                onChange={onChangeDatos}\r\n                                fullWidth\r\n                            >\r\n                                <MenuItem value='DEPOSITO'>Depósito</MenuItem>\r\n                                <MenuItem value='RETIRO'>Retiro</MenuItem>\r\n                            </Select>\r\n                        </Box>\r\n                        <Box width=\"50%\">\r\n                            <Typography>Cantidad</Typography>\r\n                            <TextField\r\n                              \r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                \r\n                                InputProps={{type:'number'}}\r\n                                name=\"cantidad\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                    {\r\n                        (datosMovimiento.tipo_movimiento) ? \r\n                              \r\n                            (datosMovimiento.tipo_movimiento === 'DEPOSITO') ? \r\n                                <div>\r\n                                    <div className={classes.formInputFlex}>\r\n                                        <Box style={{width:'50%'}}>\r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"concepto-label\">Concepto</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"concepto-label\"\r\n                                                id=\"concepto-name\"\r\n                                                value={(concepto) ? concepto : \"\"}\r\n                                                onChange={handleChangeConcepto}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {conceptos.map((concepto, index) => {\r\n                                                \r\n                                                    return(\r\n                                                    <MenuItem key={index} value={concepto} >\r\n                                                        {concepto}\r\n                                                    </MenuItem>\r\n                                                    )})\r\n                                                }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Box>\r\n                                        <Box style={{width:'50%'}}>\r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"entrega-label\">Quién entrega</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"entrega-label\"\r\n                                                id=\"entrega-name\"\r\n                                                value={(usuarioEntrega) ? usuarioEntrega : \"\"}\r\n                                                onChange={handleChangeUsuarioEntrega}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {usuarios.map((usuario) => {\r\n                                                \r\n                                                    return(\r\n                                                    <MenuItem key={usuario._id} value={usuario} >\r\n                                                        {usuario.nombre}\r\n                                                    </MenuItem>\r\n                                                    )})\r\n                                                }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Box>\r\n                                        </div>\r\n                                        <div className={classes.formInputFlex}>\r\n                                        <Box style={{width:'50%'}}>\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <InputLabel id=\"origen-label\">Origen</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"origen-label\"\r\n                                            id=\"origen-name\"\r\n                                            value={(origen) ? origen : \"\"}\r\n                                            onChange={handleChangeOrigen}\r\n                                            input={<Input />}\r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {\r\n                                                cajasArray.map((caja) => {\r\n                                                    \r\n                                                    return(\r\n                                                        <MenuItem key={caja._id} value={caja} >\r\n                                                        Caja {(caja.principal) ? 'principal': caja.numero_caja}\r\n                                                        </MenuItem>\r\n                                                    )})\r\n                                            }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                        </Box>\r\n                                        <Box style={{width:'50%'}}>\r\n                                        <Typography>\r\n                                            <b>Fecha Movimiento :</b>\r\n                                        </Typography>\r\n                                        <Box display=\"flex\">\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                type=\"date\"\r\n                                                onChange={handleChangeFechaMovimiento}\r\n                                                size=\"small\"\r\n                                                name=\"fecha_movimiento\"\r\n                                                variant=\"outlined\"\r\n                                            />\r\n                                        </Box>\r\n                                        </Box>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                            :\r\n                                <div className={classes.formInputFlex}>\r\n                                    <Box style={{width:'50%'}}>\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <InputLabel id=\"concepto-label\">Concepto</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"concepto-label\"\r\n                                            id=\"concepto-name\"\r\n                                            value={(concepto) ? concepto : \"\"}\r\n                                            onChange={handleChangeConcepto}\r\n                                            input={<Input />}\r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {conceptos.map((concepto, index) => {\r\n                                            \r\n                                                return(\r\n                                                <MenuItem key={index} value={concepto} >\r\n                                                    {concepto}\r\n                                                </MenuItem>\r\n                                                )})\r\n                                            }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </Box>\r\n                                    <Box style={{width:'50%'}}>\r\n                                        <FormControl className={classes.formControl}>\r\n                                            <InputLabel id=\"origen-label\">Destino</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"origen-label\"\r\n                                            id=\"origen-name\"\r\n                                            value={(destino) ? destino : \"\"}\r\n                                            onChange={handleChangeDestino}\r\n                                            input={<Input />}\r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            <MenuItem key='cuentaEfectivoEmpresa' value=\"Cuenta efectivo empresa\">\r\n                                               Cuenta efectivo empresa\r\n                                            </MenuItem>\r\n                                            {\r\n                                                cajasArray.map((caja) => {\r\n                                                    \r\n                                                    return(\r\n                                                        <MenuItem key={caja._id} value={caja} >\r\n                                                        Caja {caja.numero_caja}\r\n                                                        </MenuItem>\r\n                                                    )})\r\n                                            }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </Box>\r\n                                </div>                    \r\n                        :\r\n                        <div/>\r\n                    }\r\n                    \r\n                    <div className={classes.formInputFlex}>\r\n\r\n                        \r\n                        <Box width=\"100%\">\r\n                            <Typography>Comentarios</Typography>\r\n                            <TextField\r\n                                className={classes.input}\r\n                                fullWidth\r\n                                onChange={onChangeDatos}\r\n                                size=\"small\"\r\n                                multiline\r\n                                rows={2}\r\n                                name=\"monto_movimiento\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </Box>\r\n                    </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button\r\n                        color=\"secondary\"\r\n                        variant='outlined'\r\n                        onClick={handleClickOpen}\r\n                        size=\"large\"\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button\r\n                        color=\"primary\"\r\n                        variant='outlined'\r\n                        onClick={enviarDatos}\r\n                        size=\"large\"\r\n                    >\r\n                        Realizar\r\n                    </Button>\r\n                   \r\n                </DialogActions>\r\n            </Dialog>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, { Fragment, useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_HISTORIAL_CUENTAS } from \"../../../../gql/Empresa/sucursales\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\n\r\nconst columns = [\r\n  { id: \"fecha\", label: \"Fecha\", minWidth: 100 },\r\n  { id: \"tipo\", label: \"Tipo Movimiento\", minWidth: 100 },\r\n  { id: \"concepto\", label: \"Concepto\", minWidth: 150 },\r\n  { id: \"cantidad\", label: \"Cantidad\", minWidth: 150 },\r\n  { id: \"name\", label: \"Usuario\", minWidth: 150 },\r\n  { id: \"movimiento\", label: \"Origen Movimiento\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    height: \"50vh\",\r\n  },\r\n  container: {\r\n    minHeight: \"40vh\",\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  formComboBox: {\r\n    height: \"50%\",\r\n  },\r\n  rootBusqueda: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n  },\r\n}));\r\n\r\nexport default function HistorialCuentas({\r\n  cuenta,\r\n  tipo,\r\n  reload,\r\n  setSaldoCaja,\r\n}) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  moment.locale(\"es\");\r\n  const classes = useStyles();\r\n  /* const [open, setOpen] = useState(false); */\r\n  const [datosFiltro, setDatosFiltro] = useState([]);\r\n  const [value] = useDebounce(datosFiltro, 500);\r\n  const [page, setPage] = useState(0);\r\n  const limit = 10;\r\n\r\n  /* const handleClickOpen = () => {\r\n        setOpen(!open);\r\n        setDatosFiltro([]);\r\n        refetch();\r\n    }; */\r\n\r\n  const { data, loading, refetch, error } = useQuery(OBTENER_HISTORIAL_CUENTAS, {\r\n    variables: {\r\n      input: {\r\n        fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n        fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n        usuario: value.usuario ? value.usuario : \"\",\r\n        tipo_movimiento: datosFiltro.tipo_movimiento\r\n          ? datosFiltro.tipo_movimiento\r\n          : \"\",\r\n      },\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      tipo: tipo,\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  let historialCuenta = [];\r\n  if (data) {\r\n    setSaldoCaja(data.obtenerHistorialCuenta.saldo_en_caja);\r\n    historialCuenta = data.obtenerHistorialCuenta;\r\n  }\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatosFiltro({ ...datosFiltro, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch]);\r\n\r\n  useEffect(() => {\r\n    if (reload) {\r\n      refetch();\r\n    }\r\n  }, [reload]);\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      offset: nextPage,\r\n    });\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"65vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h5\">Cargando</Typography>\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} altura={300} />;\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box>\r\n        <div className={classes.formInputFlex}>\r\n          <Box width=\"25%\">\r\n            <Typography>Fecha:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              type=\"date\"\r\n              name=\"fecha_inicio\"\r\n              onChange={obtenerDatos}\r\n              variant=\"outlined\"\r\n            />\r\n          </Box>\r\n          {/*    <Box width=\"100%\">\r\n                        <Typography>Fecha fin:</Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            type='date'\r\n                            onChange={obtenerDatos}\r\n                            name=\"fecha_fin\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </Box>\r\n                    <Box width=\"100%\">\r\n                        <Typography>Usuario:</Typography>\r\n                        <TextField \r\n                            fullWidth\r\n                            size=\"small\"\r\n                            onChange={obtenerDatos}\r\n                            name=\"usuario\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </Box> */}\r\n          <Box width=\"25%\">\r\n            <Typography>Tipo Movimiento:</Typography>\r\n            <Select\r\n              className={classes.formComboBox}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              name=\"tipo_movimiento\"\r\n              onChange={obtenerDatos}\r\n              fullWidth\r\n            >\r\n              <MenuItem value=\"TODOS\">Ninguno</MenuItem>\r\n              <MenuItem value=\"CUENTA_DEPOSITO\">Deposito</MenuItem>\r\n              <MenuItem value=\"CUENTA_RETIRO\">Retiro</MenuItem>\r\n            </Select>\r\n          </Box>\r\n        </div>\r\n      </Box>\r\n      <Box p={2}>\r\n        <Paper>\r\n          <TableContainer className={classes.container}>\r\n            <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  {columns.map((column) => (\r\n                    <TableCell\r\n                      key={column.id}\r\n                      align={column.align}\r\n                      style={{ minWidth: column.minWidth }}\r\n                    >\r\n                      {column.label}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {historialCuenta?.docs?.map((row, index) => {\r\n                  return (\r\n                    <RowsHistorial key={index} row={row} loading={loading} />\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          <TablePagination\r\n            rowsPerPageOptions={[]}\r\n            component=\"div\"\r\n            count={historialCuenta.totalDocs}\r\n            rowsPerPage={limit}\r\n            page={page}\r\n            onPageChange={handleChangePage}\r\n          />\r\n        </Paper>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nfunction RowsHistorial({ row, loading }) {\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  return (\r\n    <TableRow hover role=\"checkbox\" handleClickOpen tabIndex={-1}>\r\n      <TableCell>\r\n        {moment(row?.fecha_movimiento.completa).format(\"D MMMM YYYY\")}\r\n      </TableCell>\r\n      <TableCell>\r\n        {row?.tipo_movimiento === \"CUENTA_DEPOSITO\" ||\r\n        row?.tipo_movimiento === \"ABONO_CLIENTE\" ||\r\n        row?.tipo_movimiento === \"CANCELACION_ABONO_PROVEEDOR\"\r\n          ? \"DEPOSITO\"\r\n          : \"RETIRO\"}\r\n      </TableCell>\r\n      <TableCell>{row?.concepto}</TableCell>\r\n      <TableCell>\r\n        <b style={{ fontSize: 17 }}>\r\n          ${formatoMexico(row.montos_en_caja.monto_efectivo.monto)}\r\n        </b>\r\n      </TableCell>\r\n      <TableCell>{row?.nombre_usuario_creador}</TableCell>\r\n      <TableCell>\r\n        Caja {row.numero_caja !== \"\" ? row.numero_caja : \"\"}\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n}\r\n","import React, {useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, DialogContent } from '@material-ui/core';\r\nimport RetiroDeposito from './RetiroDeposito';\r\nimport HistorialCuentas from './HistorialCuentas';\r\nimport RetirosIcon from \"../../../../icons/retiro-de-dinero.svg\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n\tbuttons: {\r\n\t\t'& > *': {\r\n\t\t\tmargin: `0px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t}\r\n\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CajaPrincipal() {\r\n\tconst classes = useStyles();\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n\t/* const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\")); */\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\tconst [reload, setReload ] = useState(false);\r\n\tconst [saldoCaja, setSaldoCaja ] = useState(0);\r\n\t\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <img src={RetirosIcon} alt=\"icono retiro\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tCaja principal\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\r\n\t\t\t{/* <RetiroDeposito cuenta={cuenta} tipo={false} open={open} setOpen={setOpen} /> */}\r\n\t\t\t<Dialog \r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tmaxWidth=\"lg\"\r\n\t\t\t\tfullWidth\r\n\t\t\t>\r\n\t\t\t\t<Box m={1} display=\"flex\" >\r\n\t\t\t\t\t<Box width='100%' >\r\n\t\t\t\t\t\t<Typography variant='h5'>\r\n\t\t\t\t\t\t\tCaja principal\r\n\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Button variant=\"contained\" display=\"flex\" justifyContent=\"flex-end\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t\t\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Box display='flex' mt={2}>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t<Box  display='flex' width='80%'  >\r\n\t\t\t\t\t\t\t<Typography variant='h5'>\r\n\t\t\t\t\t\t\t\tEfectivo actual\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Box ml={2}>\r\n\t\t\t\t\t\t\t\t<Typography variant='h5' >\r\n\t\t\t\t\t\t\t\t\t${saldoCaja}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box >\r\n\t\t\t\t\t\t\t<RetiroDeposito tipo={false}  setReload={setReload} /> \r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t<HistorialCuentas tipo={false} reload={reload} setSaldoCaja={setSaldoCaja} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\n\r\nconst columns = [\r\n\t{ id: 'cantidad', label: 'Cantidad', minWidth: 80},\r\n\t{ id: 'cantidadR', label: 'Cant. Regalo', minWidth: 80},\r\n\t{ id: 'nombre', label: 'Producto', minWidth: 80},\r\n\t{ id: 'precio', label: 'Precio', minWidth: 80},\r\n\t{ id: 'total', label: 'Total', minWidth: 80},\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nexport default function TablaCompras({productos}) {\r\n\tconst classes = useStyles();\r\n\r\n\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{productos?.map((producto, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<TableRow key={index} hover role=\"checkbox\" tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.cantidad_regalo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.producto.datos_generales.nombre_comercial}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.costo}</TableCell>\r\n\t\t\t\t\t\t\t\t\t<TableCell>{producto.total}</TableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t</Paper>\r\n\t);\r\n}","import {gql} from \"@apollo/client\";\r\n\r\nexport const OBTENER_ABONOS_PROVEEDORES = gql`\r\n  query obtenerAbonosProveedores(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtro: String\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerAbonosProveedores(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtro: $filtro\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n      _id\r\n      estatus_credito\r\n      usuario {\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n        estado_usuario\r\n      }\r\n      empresa {\r\n        _id\r\n        nombre_empresa\r\n      }\r\n      sucursal {\r\n        _id\r\n        nombre_sucursal\r\n      }\r\n      proveedor {\r\n        id_proveedor {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          nombre_cliente\r\n          telefono\r\n          email\r\n        }\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n      }\r\n      productos {\r\n        _id\r\n        id_compra\r\n        id_traspaso\r\n        id_producto\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              unidad_mayoreo\r\n              utilidad\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            _id\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        cantidad_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n      }\r\n      status\r\n      almacen {\r\n        id_almacen {\r\n          _id\r\n          nombre_almacen\r\n          id_usuario_encargado {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n          }\r\n        }\r\n        nombre_almacen\r\n      }\r\n      compra_credito\r\n      credito_pagado\r\n      saldo_credito_pendiente\r\n      fecha_vencimiento_credito\r\n      subtotal\r\n      impuestos\r\n      total\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n      folio\r\n    }\r\n    totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\n\r\nexport const OBTENER_HISTORIAL_ABONOS = gql `\r\n  query ObtenerHistorialAbonos(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: ObtenerHistorialAbonosInput,\r\n  ) {\r\n    obtenerHistorialAbonos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n    ) {\r\n      _id\r\n      numero_caja\r\n      id_Caja\r\n      horario_turno\r\n      tipo_movimiento\r\n      rol_movimiento\r\n      fecha_movimiento {\r\n        completa\r\n      }\r\n      numero_usuario_creador\r\n      status\r\n      nombre_usuario_creador\r\n      monto_total_abonado\r\n      numero_cliente\r\n      nombre_cliente\r\n      telefono_cliente\r\n      email_cliente\r\n      montos_en_caja {\r\n        monto_efectivo {\r\n          monto\r\n        }\r\n        monto_tarjeta_credito {\r\n          monto\r\n        }\r\n        monto_tarjeta_debito {\r\n          monto\r\n        }\r\n        monto_creditos {\r\n          monto\r\n        }\r\n        monto_monedero {\r\n          monto\r\n        }\r\n        monto_transferencia {\r\n          monto\r\n        }\r\n        monto_cheques {\r\n          monto\r\n        }\r\n        monto_vales_despensa {\r\n          monto\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_HISTORIAL_ABONOS_CLIENTE = gql `\r\n  query historialVentasACredito(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $idCliente: ID\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    historialVentasACredito(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      idCliente: $idCliente\r\n      limit: $limit\r\n      offset:  $offset\r\n    ) {\r\n      docs {  \r\n        _id\r\n        folio\r\n        facturacion\r\n        estatus_credito\r\n        cliente {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          representante\r\n          nombre_cliente\r\n          rfc\r\n          curp\r\n          telefono\r\n          celular\r\n          email\r\n          numero_descuento\r\n          limite_credito\r\n          dias_credito\r\n          razon_social\r\n          direccion {\r\n            calle\r\n            no_ext\r\n            no_int\r\n            codigo_postal\r\n            colonia\r\n            municipio\r\n            localidad\r\n            estado\r\n            pais\r\n          }\r\n          imagen\r\n          estado_cliente\r\n          tipo_cliente\r\n          eliminado\r\n          banco\r\n          numero_cuenta\r\n          monedero_electronico\r\n          credito_disponible\r\n          empresa {\r\n            _id\r\n          }\r\n          sucursal {\r\n            _id\r\n          }\r\n        }\r\n        descuento\r\n        ieps\r\n        impuestos\r\n        iva\r\n        monedero\r\n        subTotal\r\n        total\r\n        venta_cliente\r\n        credito\r\n        descuento_general_activo\r\n        id_caja {\r\n          _id\r\n          numero_caja\r\n          activa\r\n        }\r\n        fecha_de_vencimiento_credito\r\n        dias_de_credito_venta\r\n        saldo_credito_pendiente\r\n        credito_pagado\r\n        empresa\r\n        sucursal\r\n        usuario {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n        }\r\n        productos {\r\n          _id\r\n          producto {\r\n            _id\r\n            datos_generales {\r\n              codigo_barras\r\n              clave_alterna\r\n              tipo_producto\r\n              nombre_comercial\r\n              nombre_generico\r\n              descripcion\r\n              id_categoria\r\n              categoria\r\n              subcategoria\r\n              id_subcategoria\r\n              id_departamento\r\n              departamento\r\n              id_marca\r\n              marca\r\n              clave_producto_sat {\r\n                Name\r\n                Value\r\n              }\r\n              receta_farmacia\r\n            }\r\n            precios {\r\n              ieps\r\n              ieps_activo\r\n              inventario {\r\n                inventario_minimo\r\n                inventario_maximo\r\n                unidad_de_inventario\r\n                codigo_unidad\r\n              }\r\n              iva\r\n              iva_activo\r\n              monedero\r\n              monedero_electronico\r\n              precio_de_compra {\r\n                precio_con_impuesto\r\n                precio_sin_impuesto\r\n                iva\r\n                ieps\r\n              }\r\n              precios_producto {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n              unidad_de_compra {\r\n                cantidad\r\n                precio_unitario_con_impuesto\r\n                precio_unitario_sin_impuesto\r\n                unidad\r\n                codigo_unidad\r\n              }\r\n              granel\r\n              litros\r\n            }\r\n            imagenes {\r\n              url_imagen\r\n              location_imagen\r\n              key_imagen\r\n              extencion_imagen\r\n            }\r\n            centro_de_costos {\r\n              cuenta\r\n              id_cuenta\r\n              id_subcuenta\r\n              subcuenta\r\n            }\r\n            precio_plazos {\r\n              precio_cajas {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n              precio_costales {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n              precio_piezas {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n            }\r\n            unidades_de_venta {\r\n              _id\r\n              precio\r\n              cantidad\r\n              concepto\r\n              unidad\r\n              codigo_unidad\r\n              unidad_principal\r\n              codigo_barras\r\n              codigo_barras\r\n              id_producto\r\n              empresa\r\n              sucursal\r\n              descuento {\r\n                cantidad_unidad\r\n                numero_precio\r\n                unidad_maxima\r\n                precio_general\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                utilidad\r\n                porciento\r\n                dinero_descontado\r\n              }\r\n              descuento_activo\r\n              default\r\n              precio_unidad {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n            }\r\n            inventario_general {\r\n              _id\r\n              cantidad_existente\r\n              unidad_inventario\r\n              codigo_unidad\r\n              cantidad_existente_maxima\r\n              unidad_maxima\r\n              id_almacen_general\r\n              eliminado\r\n            }\r\n            medidas_producto {\r\n              _id\r\n              cantidad\r\n              cantidad_nueva\r\n              almacen\r\n              codigo_barras\r\n              color {\r\n                hex\r\n                nombre\r\n                _id\r\n              }\r\n              descuento {\r\n                cantidad_unidad\r\n                numero_precio\r\n                unidad_maxima\r\n                precio_general\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                utilidad\r\n                porciento\r\n                dinero_descontado\r\n              }\r\n              descuento_activo\r\n              existencia\r\n              medida {\r\n                talla\r\n                tipo\r\n                _id\r\n              }\r\n              nombre_comercial\r\n              precio\r\n              precio_unidad {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n            }\r\n            empresa\r\n            sucursal\r\n          }\r\n          concepto\r\n          cantidad\r\n          iva_total\r\n          ieps_total\r\n          subtotal\r\n          impuestos\r\n          total\r\n          medida {\r\n            id_medida\r\n            medida\r\n            tipo\r\n          }\r\n          color {\r\n            id_color\r\n            color\r\n            hex\r\n          }\r\n          cantidad_venta\r\n          granel_producto {\r\n            granel\r\n            valor\r\n          }\r\n          precio\r\n          precio_a_vender\r\n          precio_actual_producto\r\n          default\r\n          unidad\r\n          codigo_unidad\r\n          id_unidad_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            unidad_activa\r\n            codigo_barras\r\n            id_producto\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          inventario_general {\r\n            _id\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n            eliminado\r\n          }\r\n          year_registro\r\n          fecha_registro\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          precio_actual_object {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            unidad_mayoreo\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n        }\r\n        fecha_registro\r\n        factura {\r\n          id_cfdi\r\n          serie\r\n          currency\r\n          expedition_place\r\n          folio\r\n          cfdi_type\r\n          payment_form\r\n          payment_method\r\n          logo_url\r\n          date\r\n          issuer {\r\n            FiscalRegime\r\n            Rfc\r\n            TaxName\r\n          }\r\n          receiver {\r\n            Rfc\r\n            Name\r\n            CfdiUse\r\n          }\r\n          items {\r\n            ProductCode\r\n            IdentificationNumber\r\n            Description\r\n            Unit\r\n            UnitCode\r\n            UnitPrice\r\n            Quantity\r\n            Subtotal\r\n            Discount\r\n            Taxes {\r\n              Total\r\n              Name\r\n              Base\r\n              Rate\r\n              IsRetention\r\n            }\r\n            Total\r\n          }\r\n          original_string\r\n          sub_total\r\n          total\r\n          discount\r\n          fecha_registro\r\n          empresa\r\n          sucursal\r\n        }\r\n        montos_en_caja {\r\n          monto_efectivo {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_tarjeta_debito {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_tarjeta_credito {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_creditos {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_monedero {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_transferencia {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_cheques {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_vales_despensa {\r\n            monto\r\n            metodo_pago\r\n          }\r\n        }\r\n        status\r\n        abonos {\r\n          _id\r\n          numero_caja\r\n          status\r\n          id_Caja\r\n          horario_turno\r\n          tipo_movimiento\r\n          rol_movimiento\r\n          fecha_movimiento {\r\n            completa\r\n          }\r\n          numero_usuario_creador\r\n          nombre_usuario_creador\r\n          monto_total_abonado\r\n          numero_cliente\r\n          nombre_cliente\r\n          telefono_cliente\r\n          email_cliente\r\n          montos_en_caja {\r\n            monto_efectivo {\r\n              monto\r\n            }\r\n            monto_tarjeta_credito {\r\n              monto\r\n            }\r\n            monto_tarjeta_debito {\r\n              monto\r\n            }\r\n            monto_creditos {\r\n              monto\r\n            }\r\n            monto_monedero {\r\n              monto\r\n            }\r\n            monto_transferencia {\r\n              monto\r\n            }\r\n            monto_cheques {\r\n              monto\r\n            }\r\n            monto_vales_despensa {\r\n              monto\r\n            }\r\n          }\r\n          \r\n        }\r\n      }\r\n      totalDocs   \r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_ABONO = gql `\r\n  mutation CrearAbono($empresa: ID!, $sucursal: ID!, $input: CrearAbonoInput) {\r\n    crearAbono(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_ABONO_CLIENTE = gql `\r\n  mutation crearAbonoVentaCredito($empresa: ID!, $sucursal: ID!, $input: AbonoVentasCreditoInput) {\r\n    crearAbonoVentaCredito(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      message\r\n      pdf\r\n      xml\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CANCELAR_ABONO_CLIENTE = gql `\r\n  mutation cancelarAbonoCliente($empresa: ID!, $sucursal: ID!, $input: CancelarAbonoInput) {\r\n    cancelarAbonoCliente(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CANCELAR_ABONO_PROVEEDOR = gql `\r\n  mutation cancelarAbonoProveedor($empresa: ID!, $sucursal: ID!, $input: CancelarAbonoProveedorInput) {\r\n    cancelarAbonoProveedor(empresa: $empresa, sucursal: $sucursal, input: $input) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\n","import React, { Fragment } from 'react';\r\nimport DescriptionOutlinedIcon from '@material-ui/icons/DescriptionOutlined';\r\n\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Grid, Button } from '@material-ui/core';\r\nimport ExcelFile from 'react-export-excel/dist/ExcelPlugin/components/ExcelFile'\r\n\r\nimport ExcelSheet from 'react-export-excel/dist/ExcelPlugin/elements/ExcelSheet';\r\nimport ExcelColumn from 'react-export-excel/dist/ExcelPlugin/elements/ExcelColumn';\r\n\r\n//Este componente requiere el ArrayData, ArrayColumn, fileName\r\nfunction ExportarExcel(props) {\r\n\treturn (\r\n\t\t<Fragment>\r\n            <Grid>\r\n                <Grid item>\r\n                <ExcelFile\r\n\t\t\t\t\t\r\n\t\t\t\t\telement={\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\"startIcon={<DescriptionOutlinedIcon />}>\r\n\t\t\t\t\t\t\tExportar a Excel\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfilename={props.fileName}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ExcelSheet data={props.data} name={props.fileName}>\r\n                        {props.columnName.map((element) => {\r\n                            return(\r\n                                <ExcelColumn key={element.id} label={element.label} value={element.id} />\r\n                            )\r\n                        }\r\n                        )}\r\n\t\t\t\t\t\r\n\t\t\t\t\t</ExcelSheet>\r\n\t\t\t\t</ExcelFile>\r\n                </Grid>\r\n            </Grid>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default withRouter(ExportarExcel);","import React, { useContext, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nimport {\r\n\tDialog,\r\n\tBox,\r\n\tButton,\r\n\tDialogTitle,\r\n\tDialogActions,\r\n\tSlide,\r\n  } from \"@material-ui/core\";\r\nimport { useMutation } from '@apollo/client';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {  CANCELAR_ABONO_PROVEEDOR } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_ABONOS } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport moment from 'moment';\r\nimport { withRouter } from \"react-router\";\r\nimport { TesoreriaCtx } from '../../../../../../../context/Tesoreria/tesoreriaCtx';\r\nimport ExportarExcel from '../../../../../../../components/ExportExcel';\r\nimport { formatoFecha } from \"../../../../../../../config/reuserFunctions\";\r\nconst columns = [\r\n\t{ id: 'fecha', label: 'Fecha de abono', minWidth: 170, align: 'center' },\r\n\t{ id: 'cliente', label: 'Nombre', minWidth: 170, align: 'center' },\r\n\t{ id: 'abono', label: 'Monto', minWidth: 100, align: 'right' },\r\n\t{ id: 'cancelar', label: 'Cancelar', minWidth: 100, align: 'center' },\r\n];\r\n\r\n\r\n\r\n\r\nconst columnsEffect = [\r\n    { id: 'fecha_movimiento', label: 'Fecha', minWidth: 60 , widthPx: 160, },\r\n    { id: 'monto_total_abonado', label: 'Cantidad abono', minWidth: 170, widthPx: 160, },\r\n    { id: 'estado', label: 'Estado', minWidth: 170, widthPx: 160, },\r\n    \r\n];\r\nconst useStyles  = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '45vh'\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n  });\r\n\r\nfunction TablaAbonos(props) {\r\n\tconst turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\tconst sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n\tconst { reload, setReload, setAlert } = useContext(TesoreriaCtx);\r\n\t\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [abonoSelected, setAbonoSelected] = useState({});\r\n\tconst [openCancelar, setOpenCancelar] = useState(false);\r\n\tconst [loadingCancelar, setLoadingCancelar] = useState(false);\r\n\r\n\tconst [ cancelarAbonoProveedor ] = useMutation(CANCELAR_ABONO_PROVEEDOR);\r\n\r\n\tlet dataExcel = [];\r\n    \r\n   \r\n\tconst { data, refetch } = useQuery(\r\n\t\tOBTENER_HISTORIAL_ABONOS, {\r\n\t\t\tvariables: {\r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\tinput: {\r\n\t\t\t\t\tfecha_inicio: \"\",\r\n\t\t\t\t\tfecha_fin: \"\",\r\n\t\t\t\t\tusuario: \"\",\r\n\t\t\t\t\tid_cliente: props.cuenta.proveedor.id_proveedor._id,\r\n\t\t\t\t\tid_egreso: \"\",\r\n\t\t\t\t\trol_movimiento: \"ABONO_PROVEEDOR\",\r\n\t\t\t\t\tid_compra: props.cuenta._id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t  \tfetchPolicy: \"network-only\",\r\n\t\t}\r\n\t);\r\n\t\r\n\tlet abonos = []\r\n\tif(data){\r\n\t\tabonos = data.obtenerHistorialAbonos;\r\n\t\tabonos.forEach(element => {\r\n          \r\n            dataExcel.push({\r\n                fecha_movimiento : formatoFecha(element.fecha_movimiento.completa),\r\n                monto_total_abonado :   element.monto_total_abonado,\r\n                estado: element.status\r\n        \r\n            })\r\n        });\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [reload])\r\n\r\n\tconst handleOpen = () =>{\r\n        setOpenCancelar(!setOpenCancelar)\r\n      \r\n    }\r\n\tconst affirmCancelar = (abono) =>{\r\n        try {\r\n             \r\n        if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n            setOpenCancelar(true);\r\n            setAbonoSelected(abono)\r\n        }else{\r\n            props.history.push('/ventas/venta-general');\r\n        }\r\n           \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n \r\n\r\n\tconst cancelAbono = async() =>{\r\n        try {\r\n         setLoadingCancelar(true);\r\n       \r\n         const input = {\r\n            tipo_movimiento: \"CANCELACION_ABONO_PROVEEDOR\",\r\n            rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n            numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n            id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n            fecha_movimiento: {\r\n                year: moment().locale(\"es-mx\").format('YYYY'),\r\n                mes: moment().locale(\"es-mx\").format('MM'),\r\n                dia: moment().locale(\"es-mx\").format('DD'),\r\n                no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n                no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n                completa: moment().locale('es-mx').format()\r\n            },\r\n            monto_abono: abonoSelected.monto_total_abonado,\r\n           \r\n            horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n            hora_moviento: {\r\n                hora: moment().locale(\"es-mx\").format('hh'),\r\n                minutos: moment().locale(\"es-mx\").format('mm'),\r\n                segundos: moment().locale(\"es-mx\").format('ss'),\r\n                completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n            },\r\n           \r\n            concepto: 'CANCELACION_ABONO_PROVEEDOR',\r\n            id_usuario: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n            id_proveedor: props.proveedor.id_proveedor._id,\r\n            \r\n            clave_proveedor: props.proveedor.id_proveedor.clave_cliente,\r\n            nombre_proveedor: props.proveedor.id_proveedor.nombre_cliente,\r\n            telefono_proveedor:  props.proveedor.id_proveedor.telefono_cliente,\r\n            email_proveedor: props.proveedor.id_proveedor.email_cliente,\r\n            id_abono: abonoSelected._id,\r\n            id_compra: props.cuenta._id,\r\n            metodo_de_pago: '01',\r\n            caja_principal: sesion.accesos.tesoreria.caja_principal.ver\r\n        }\r\n\r\n\r\n\r\n          await cancelarAbonoProveedor({\r\n            variables: {\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                input:input\r\n            },\r\n        });\r\n        setReload(true);\r\n        setOpenCancelar(false);\r\n        setLoadingCancelar(false);\r\n        handleOpen();\r\n        setAlert({ \r\n            message: 'Abono cancelado con éxito.', \r\n            status: 'success', \r\n            open: true \r\n        });\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n            if (error.networkError) {\r\n                console.log(error.networkError.result);\r\n            } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors);\r\n            }\r\n            setLoadingCancelar(false);\r\n            handleOpen();\r\n            setAlert({ \r\n                message: 'La cancelación ha fallado.', \r\n                status: 'success', \r\n                open: true \r\n            });\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t<Paper className={classes.root}>\r\n\t\t<Dialog\r\n            open={openCancelar}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={() => handleOpen()}\r\n            aria-labelledby=\"alert-eliminar-abono\"\r\n        >\r\n            <DialogTitle id=\"alert-eliminar-abono\">\r\n            {\"¿Está seguro de eliminar este abono?\"}\r\n            </DialogTitle>\r\n            <DialogActions>\r\n            <Button\r\n                onClick={() => handleOpen()}\r\n                color=\"inherit\"\r\n                disabled={loadingCancelar}\r\n            >\r\n                Cancelar\r\n            </Button>\r\n            <Button\r\n                onClick={() => cancelAbono()}\r\n                color=\"secondary\"\r\n                disabled={loadingCancelar}\r\n                startIcon={\r\n                    loadingCancelar ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n                }\r\n            >\r\n                Eliminar\r\n            </Button>\r\n            </DialogActions>\r\n      </Dialog> \r\n\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{abonos?.map((row, index) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} key={index}>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='center'>{moment(row.fecha_movimiento.completa).format('D MMMM YYYY')}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='center'>{row.nombre_cliente}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t<TableCell align='right'><b>${row.monto_total_abonado}</b></TableCell>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t(row.status === 'CANCELADO') ?\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.status}\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => affirmCancelar(row)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CloseIcon style={{ fontSize: 22 }} />\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>    \r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</TableBody>\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t\r\n\t\t\t\r\n             \r\n\t\t</Paper>\r\n\t\t{(abonos?.length > 0) ?\r\n\t\t\t\t<Box m={1} mb={1} mrstyle={{ backgroundColor:'red', alignContent:'flex-end'}}  justifyContent=\"flex-end\"  >\r\n\t\t\t\t\t<Box  >\r\n\t\t\t\t\t\t<ExportarExcel fileName=\"Historial Abonos\" data={dataExcel} columnName={columnsEffect} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t:\r\n\t\t\t\t<div/>\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default  withRouter(TablaAbonos);","import React, { useContext, useState, Fragment } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Divider,\r\n  FormControl,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router\";\r\nimport { formaPago } from \"../../../../Facturacion/catalogos\";\r\nimport { formatoMexico } from \"../../../../../../config/reuserFunctions\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CREAR_ABONO } from \"../../../../../../gql/Tesoreria/abonos\";\r\nimport moment from \"moment\";\r\nimport BackdropComponent from \"../../../../../../components/Layouts/BackDrop\";\r\nimport { TesoreriaCtx } from \"../../../../../../context/Tesoreria/tesoreriaCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  input: {\r\n    \"& input[type=number]\": {\r\n      \"-moz-appearance\": \"textfield\",\r\n    },\r\n    \"& input[type=number]::-webkit-outer-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n    \"& input[type=number]::-webkit-inner-spin-button\": {\r\n      \"-webkit-appearance\": \"none\",\r\n      margin: 0,\r\n    },\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(0.5)}px`,\r\n    },\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n    paddingTop: 0,\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n  },\r\n}));\r\n\r\nfunction AbonoaRecibir(props) {\r\n  const [CrearAbono] = useMutation(CREAR_ABONO);\r\n\r\n  const { setReload, setAlert } = useContext(TesoreriaCtx);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [abono, setAbono] = useState(\"\");\r\n  const [metodoPago, setMetodoPago] = useState(\"\");\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const input = {\r\n        tipo_movimiento: \"ABONO_PROVEEDOR\",\r\n        rol_movimiento: turnoEnCurso ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n        horario_turno: turnoEnCurso ? turnoEnCurso.horario_en_turno : \"\",\r\n        hora_moviento: {\r\n          hora: moment().locale(\"es-mx\").format(\"hh\"),\r\n          minutos: moment().locale(\"es-mx\").format(\"mm\"),\r\n          segundos: moment().locale(\"es-mx\").format(\"ss\"),\r\n          completa: moment().locale(\"es-mx\").format(\"HH:mm:ss\"),\r\n        },\r\n        fecha_movimiento: {\r\n          year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n          mes: moment().locale(\"es-mx\").format(\"MM\"),\r\n          dia: moment().locale(\"es-mx\").format(\"DD\"),\r\n          no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n          no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n          completa: moment().locale(\"es-mx\").format(),\r\n        },\r\n        monto_total_abonado: parseFloat(abono),\r\n        montos_en_caja: {\r\n          monto_efectivo: {\r\n            monto: metodoPago === \"01\" ? parseFloat(abono * -1) : 0,\r\n            metodo_pago: \"01\",\r\n          },\r\n          monto_tarjeta_debito: {\r\n            monto: metodoPago === \"28\" ? parseFloat(abono * -1) : 0,\r\n            metodo_pago: \"28\",\r\n          },\r\n          monto_tarjeta_credito: {\r\n            monto: metodoPago === \"04\" ? parseFloat(abono * -1) : 0,\r\n            metodo_pago: \"04\",\r\n          },\r\n          monto_creditos: {\r\n            monto: metodoPago === \"99\" ? parseFloat(abono * -1) : 0,\r\n            metodo_pago: \"99\",\r\n          },\r\n          monto_monedero: {\r\n            monto: metodoPago === \"05\" ? parseFloat(abono * -1) : 0,\r\n            metodo_pago: \"05\",\r\n          },\r\n          monto_transferencia: {\r\n            monto: metodoPago === \"03\" ? parseFloat(abono * -1) : 0,\r\n            metodo_pago: \"03\",\r\n          },\r\n          monto_cheques: {\r\n            monto: metodoPago === \"02\" ? parseFloat(abono * -1) : 0,\r\n            metodo_pago: \"02\",\r\n          },\r\n          monto_vales_despensa: {\r\n            monto: metodoPago === \"08\" ? parseFloat(abono * -1) : 0,\r\n            metodo_pago: \"08\",\r\n          },\r\n        },\r\n        metodo_de_pago: {\r\n          clave: metodoPago.Value,\r\n          metodo: metodoPago.Name,\r\n        },\r\n        numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        id_Caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n        id_usuario: sesion._id,\r\n        concepto: \"ABONO_PROVEEDOR\",\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: props.cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: props.cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: props.cuenta.proveedor.nombre_cliente,\r\n        telefono_cliente: props.cuenta.proveedor.id_proveedor.telefono,\r\n        email_cliente: props.cuenta.proveedor.id_proveedor.email,\r\n        caja_principal: sesion.accesos.tesoreria.caja_principal.ver,\r\n        id_compra: props.cuenta._id,\r\n      };\r\n\r\n      if (abono === \"\" || metodoPago === \"\") {\r\n        setAlert({\r\n          message: \"Por favor complete los datos.\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      await CrearAbono({\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          input,\r\n        },\r\n      });\r\n      setReload(true);\r\n      setAbono(\"\");\r\n      setMetodoPago(\"\");\r\n      setAlert({\r\n        message: \"Abono registrado con éxito\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      handleClick();\r\n      setLoading(false);\r\n    } catch (error) {\r\n      handleClick();\r\n      setLoading(false);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n      console.log(error);\r\n      setAlert({\r\n        message: \"Ocurrio un problema en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClick = () => {\r\n    if (turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver) {\r\n      setReload(true);\r\n      setOpen(!open);\r\n    } else {\r\n      props.history.push(\"/ventas/venta-general\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {props.cuenta.credito_pagado ? (\r\n        <div />\r\n      ) : (\r\n        <Button\r\n          size=\"large\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          color=\"primary\"\r\n          startIcon={<AddCircleOutlineIcon style={{ fontSize: 35 }} />}\r\n          onClick={handleClick}\r\n        >\r\n          <Typography variant=\"h6\">Abonar</Typography>\r\n        </Button>\r\n      )}\r\n\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClick}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <DialogTitle id=\"alert-dialog-slide-title\">\r\n          <Box display=\"flex\">\r\n            <Box p={1} flexGrow={1}>\r\n              Registrar nuevo abono\r\n            </Box>\r\n            <Box p={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClick}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box>\r\n            <Typography>\r\n              <b>Cantidad a abonar:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              className={classes.input}\r\n              onChange={(e) => setAbono(e.target.value)}\r\n              value={abono}\r\n              size=\"small\"\r\n              name=\"abono_recibir\"\r\n              variant=\"outlined\"\r\n              type=\"number\"\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <b>Metodo de pago:</b>\r\n            </Typography>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <Select\r\n                width=\"100%\"\r\n                name=\"metodo_pago\"\r\n                variant=\"outlined\"\r\n                value={metodoPago ? metodoPago : \"\"}\r\n                onChange={(e) => setMetodoPago(e.target.value)}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                {formaPago.map((metodo, index) => {\r\n                  return (\r\n                    <MenuItem key={index} value={metodo.Value}>\r\n                      {metodo.Name}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n          <Box mt={2} display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              <b>Total de la cuenta</b>\r\n            </Typography>\r\n            <Typography style={{ color: \"#9B9B9B\" }} variant=\"h6\">\r\n              <b>${formatoMexico(props.cuenta.total)}</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\"  justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              <b>Total pagado</b>\r\n            </Typography>\r\n\r\n            <Typography style={{ color: \"green\" }} variant=\"h6\">\r\n              <b>\r\n                $\r\n                {formatoMexico(\r\n                  props.cuenta.total - props.cuenta.saldo_credito_pendiente\r\n                )}\r\n              </b>\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              <b>Total restante</b>\r\n            </Typography>\r\n            <Typography variant=\"h6\">\r\n              <b>${formatoMexico(props.cuenta.saldo_credito_pendiente)}</b>\r\n            </Typography>\r\n          </Box>\r\n          <Divider />\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              <b>Nuevo abono</b>\r\n            </Typography>\r\n            <Typography style={{ color: \"green\" }} variant=\"h6\">\r\n              <b>${formatoMexico(abono)} </b>\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              <b>Nuevo total pagado</b>\r\n            </Typography>\r\n            <Typography style={{ color: \"green\" }} variant=\"h6\">\r\n              <b>\r\n                $\r\n                {formatoMexico(\r\n                  props.cuenta.total - props.cuenta.saldo_credito_pendiente + abono\r\n                )}\r\n              </b>\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">\r\n              <b>Nuevo restante total</b>\r\n            </Typography>\r\n\r\n            <Typography variant=\"h6\">\r\n              <b>\r\n                ${formatoMexico(props.cuenta.saldo_credito_pendiente - abono)}\r\n              </b>\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignContent=\"center\" p={2}>\r\n          <Button\r\n            size=\"large\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            style={{ fontSize: 18 }}\r\n            onClick={enviarDatos}\r\n          >\r\n            Registrar Abono\r\n          </Button>\r\n        </Box>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default withRouter(AbonoaRecibir);\r\n","import React, { Fragment } from 'react'\r\nimport { Box, Grid, makeStyles, Typography, Button, AppBar, Toolbar } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport TablaCompras from './TablaCompras';\r\nimport TablaAbonos from './TablaDeAbonos';\r\nimport AbonoaRecibir from '../AbonoPercibir';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../../../../config/reuserFunctions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n}));\r\n\r\n\r\nexport default function DetallesCuenta(props) {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Fragment>\r\n            <AppBar className={classes.appBar}>\r\n                <Toolbar>\r\n                    <Typography variant=\"h6\" className={classes.title}>\r\n                        Detalles de cuenta\r\n                    </Typography>\r\n                    <Box m={1}>\r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={props.handleClick} size=\"large\">\r\n                            <CloseIcon style={{fontSize: 30}} />\r\n                        </Button>\r\n                    </Box>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <div className={classes.formInputFlex}>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.proveedor.id_proveedor.nombre_cliente}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Clave proveedor: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.proveedor.id_proveedor.clave_cliente}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Nombre de usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.usuario.nombre}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Numero usuario: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.usuario.numero_usuario}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                <Box width=\"100%\" p={1}>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Folio de compra: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{props.cuenta.folio}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\" p={.5}>\r\n                        <Typography><b>Fecha compra: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(props.cuenta.fecha_registro).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" display=\"flex\"  p={.5}>\r\n                        <Typography><b>Fecha vencimiento: </b> </Typography>\r\n                        <Typography style={{paddingLeft: 5}}>{moment(props.cuenta.fecha_vencimiento_credito).format('D MMMM YYYY')}</Typography>\r\n                    </Box>\r\n                </Box>\r\n                {permisosUsuario.accesos.tesoreria.abonos_proveedores.agregar === false ? (null) : (\r\n                    <Box width=\"60%\" p={1} display='flex' alignItems={'center'} >\r\n                        <AbonoaRecibir cuenta={props.cuenta} />\r\n                    </Box>\r\n                )}\r\n            </div>\r\n            <Grid container>\r\n                \r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2}>\r\n                        <Typography variant=\"h6\">\r\n                            Lista de abonos\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaAbonos cuenta={props.cuenta} proveedor={props.cuenta.proveedor} recargar={props.recargar} />\r\n                    </Box>\r\n                    <Box p={0} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total abonado: <b style={{color: \"#9B9B9B\"}}>${props.cuenta.total - props.cuenta.saldo_credito_pendiente}</b></Typography>\r\n                    </Box> \r\n                    <Box p={0} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Restante: <b  style={{color: \"green\"}}>${formatoMexico(props.cuenta.saldo_credito_pendiente)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item lg={6} xs={12}>\r\n                    <Box p={2} >\r\n                        <Typography variant=\"h6\">\r\n                            Lista de compra\r\n                        </Typography>\r\n                    </Box>\r\n                    <Box p={2}>\r\n                        <TablaCompras productos={props.cuenta.productos}/>\r\n                    </Box>\r\n                    <Box p={1} mr={3} display=\"flex\" justifyContent=\"flex-end\">\r\n                        <Typography variant='h6'>Total a liquidar: <b  style={{color: \"red\"}}>${formatoMexico(props.cuenta.total)}</b></Typography>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Fragment>\r\n\r\n    )\r\n}\r\n","import React, { useContext, useState, Fragment } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  FormControl,\r\n  makeStyles,\r\n  MenuItem,\r\n  Select,\r\n  Slider,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { withRouter } from \"react-router\";\r\nimport { formatoMexico } from \"../../../../../../config/reuserFunctions\";\r\nimport BackdropComponent from \"../../../../../../components/Layouts/BackDrop\";\r\nimport { formaPago } from \"../../../../Facturacion/catalogos\";\r\nimport moment from \"moment\";\r\nimport { CREAR_ABONO } from \"../../../../../../gql/Tesoreria/abonos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { TesoreriaCtx } from \"../../../../../../context/Tesoreria/tesoreriaCtx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n}));\r\n\r\n\r\n function LiquidarCuenta(props) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { setAlert, setReload } = useContext(TesoreriaCtx);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [CrearAbono] = useMutation(CREAR_ABONO);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n  const [cuentaTotalDescuento, setCuentaTotalDescuento] = useState(0);\r\n  const [dineroDescontado, setDineroDescontado] = useState(0);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [metodoPago, setMetodoPago] = useState(\"\");\r\n\r\n\r\n   \r\n\r\n\r\n    const handleClick = () => { \r\n      if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n        setOpen(!open);\r\n        setCuentaTotalDescuento(0);\r\n        setDineroDescontado(0);\r\n        setValue(0);\r\n      }else{\r\n      \r\n        props.history.push('/ventas/venta-general');\r\n      }\r\n  } \r\n\r\n\r\n  const classes = useStyles();\r\n\r\n  const obtenerPorcientoSlide = (event, newValue) => {\r\n    setValue(newValue);\r\n    let porcentaje = parseFloat((100 - newValue).toFixed(2)); //Porcentaje para calculos de descuento\r\n    let cuenta_con_descuento = parseFloat(\r\n      ((props.cuenta.saldo_credito_pendiente * porcentaje) / 100).toFixed(2)\r\n    );\r\n    let dineroDescontado = parseFloat(\r\n      (props.cuenta.saldo_credito_pendiente - cuenta_con_descuento).toFixed(2)\r\n    );\r\n    setCuentaTotalDescuento(cuenta_con_descuento);\r\n    setDineroDescontado(dineroDescontado);\r\n  };\r\n\r\n  const obtenerPrecioText = (e) => {\r\n    let valorText = parseFloat(e.target.value);\r\n\r\n    let porcentaje = parseFloat(\r\n      ((valorText * 100) / props.cuenta.saldo_credito_pendiente).toFixed(2)\r\n    );\r\n    let dineroDescontado = parseFloat(\r\n      (props.cuenta.saldo_credito_pendiente - valorText).toFixed(2)\r\n    );\r\n\r\n    setCuentaTotalDescuento(valorText);\r\n    setDineroDescontado(dineroDescontado);\r\n    setValue(porcentaje);\r\n  };\r\n\r\n  function valuetext(e) {\r\n    return `${e}`;\r\n  }\r\n\r\n  \r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const input = {\r\n        tipo_movimiento: \"ABONO_PROVEEDOR\",\r\n        rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n        horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n        hora_moviento: {\r\n          hora: moment().locale(\"es-mx\").format('hh'),\r\n          minutos: moment().locale(\"es-mx\").format('mm'),\r\n          segundos: moment().locale(\"es-mx\").format('ss'),\r\n          completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n      },\r\n        fecha_movimiento: {\r\n          year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n          mes: moment().locale(\"es-mx\").format(\"MM\"),\r\n          dia: moment().locale(\"es-mx\").format(\"DD\"),\r\n          no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n          no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n          completa: moment().locale(\"es-mx\").format(),\r\n        },\r\n        concepto: 'ABONO_PROVEEDOR',\r\n        monto_total_abonado: parseFloat(props.cuenta.saldo_credito_pendiente),\r\n        descuento: {\r\n          porciento_descuento: value,\r\n          dinero_descontado: dineroDescontado,\r\n          total_con_descuento: cuentaTotalDescuento,\r\n        },\r\n        montos_en_caja: {\r\n          monto_efectivo: {\r\n            monto:\r\n              metodoPago === \"01\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento * -1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"01\",\r\n          },\r\n          monto_tarjeta_debito: {\r\n            monto:\r\n              metodoPago === \"28\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento *-1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"28\",\r\n          },\r\n          monto_tarjeta_credito: {\r\n            monto:\r\n              metodoPago === \"04\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento * -1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"04\",\r\n          },\r\n          monto_creditos: {\r\n            monto:\r\n              metodoPago === \"99\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente *-1\r\n                      : cuentaTotalDescuento *-1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"99\",\r\n          },\r\n          monto_monedero: {\r\n            monto:\r\n              metodoPago === \"05\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente *-1\r\n                      : cuentaTotalDescuento *-1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"05\",\r\n          },\r\n          monto_transferencia: {\r\n            monto:\r\n              metodoPago === \"03\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente *-1\r\n                      : props.cuentaTotalDescuento *-14\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"03\",\r\n          },\r\n          monto_cheques: {\r\n            monto:\r\n              metodoPago === \"02\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento * -1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"02\",\r\n          },\r\n          monto_vales_despensa: {\r\n            monto:\r\n              metodoPago === \"08\"\r\n                ? parseFloat(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente * -1\r\n                      : props.cuentaTotalDescuento * -1\r\n                  )\r\n                : 0,\r\n            metodo_pago: \"08\",\r\n          },\r\n        },\r\n        metodo_de_pago: {\r\n          clave: \"\",\r\n          metodo: \"\",\r\n        },\r\n        numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: props.cuenta.proveedor.id_proveedor._id,\r\n        numero_cliente: props.cuenta.proveedor.numero_cliente,\r\n        nombre_cliente: props.cuenta.proveedor.nombre_cliente,\r\n        telefono_cliente: props.cuenta.proveedor.id_proveedor.telefono,\r\n        email_cliente: props.cuenta.proveedor.id_proveedor.email,\r\n        id_compra: props.cuenta._id,\r\n        caja_principal: sesion.accesos.tesoreria.caja_principal.ver,\r\n      };\r\n      \r\n      if (metodoPago === \"\") {\r\n        setAlert({\r\n          message: \"Por favor complete el metodo de pago\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      await CrearAbono({\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          input,\r\n        },\r\n      });\r\n      setReload(true);\r\n      setMetodoPago(\"\");\r\n      setAlert({\r\n        message: \"Cuenta liquidada\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      handleClick();\r\n      setLoading(false);\r\n    } catch (error) {\r\n      handleClick();\r\n      setLoading(false);\r\n      setAlert({\r\n        message: \"Ocurrio un problema en el servidor\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        size=\"small\"\r\n        variant=\"outlined\"\r\n        color=\"primary\"\r\n        startIcon={<DoneIcon />}\r\n        onClick={handleClick}\r\n      >\r\n        Liquidar\r\n      </Button>\r\n\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n        onClose={handleClick}\r\n        aria-labelledby=\"draggable-dialog-title\"\r\n      >\r\n        <BackdropComponent loading={loading} setLoading={setLoading} />\r\n        <Box display=\"flex\">\r\n          <Box flexGrow={1} p={2}>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Liquidar Cuenta\r\n            </Typography>\r\n          </Box>\r\n          <Box p={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClick}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n        <DialogContent>\r\n          <Typography>\r\n            Aplica un descuento por pronto pago a tu cuenta\r\n          </Typography>\r\n          <Box mt={1} textAlign=\"center\">\r\n            <Typography id=\"discrete-slider-always\" gutterBottom>\r\n              <b>Porcentaje de descuento</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box ml={1} mr={1} mb={2}>\r\n            <Slider\r\n              getAriaValueText={valuetext}\r\n              valueLabelFormat={value.toFixed(2)}\r\n              aria-labelledby=\"discrete-slider-small-steps\"\r\n              valueLabelDisplay=\"auto\"\r\n              onChange={obtenerPorcientoSlide}\r\n            />\r\n          </Box>\r\n          <Box width=\"100%\" textAlign=\"center\">\r\n            <Typography id=\"discrete-slider-always\" gutterBottom>\r\n              <b>Cantidad a pagar con descuento</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"descuento\"\r\n              variant=\"outlined\"\r\n              value={cuentaTotalDescuento ? cuentaTotalDescuento : 0}\r\n              onChange={obtenerPrecioText}\r\n            />\r\n          </Box>\r\n          <Box width=\"100%\" mt={2} textAlign={\"center\"}>\r\n            <Typography>\r\n              <b>Metodo de pago:</b>\r\n            </Typography>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <Select\r\n                width=\"100%\"\r\n                name=\"metodo_pago\"\r\n                variant=\"outlined\"\r\n                onChange={(e) => setMetodoPago(e.target.value)}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                {formaPago.map((metodo, index) => {\r\n                  return (\r\n                    <MenuItem key={index} value={metodo.Value}>\r\n                      {metodo.Name}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n          </Box>\r\n          <Box display=\"flex\" mt={2}>\r\n            <Box flexGrow={1}>\r\n              <Typography>Total cuenta: </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>${formatoMexico(props.cuenta.total)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box flexGrow={1}>\r\n              <Typography>Saldo pendiente: </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>${formatoMexico(props.cuenta.saldo_credito_pendiente)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box flexGrow={1}>\r\n              <Typography>Dinero Descontado: </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>${formatoMexico(dineroDescontado)}</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box flexGrow={1}>\r\n              <Typography>Porciento Descontado: </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>{formatoMexico(value)}%</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Box flexGrow={1}>\r\n              <Typography variant=\"h6\">Total a pagar:</Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"h6\">\r\n                <b style={{ color: \"green\" }}>\r\n                  $\r\n                  {formatoMexico(\r\n                    cuentaTotalDescuento === 0\r\n                      ? props.cuenta.saldo_credito_pendiente\r\n                      : props.cuentaTotalDescuento\r\n                  )}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={enviarDatos}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n          >\r\n            Liquidar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default withRouter(LiquidarCuenta);","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport { formatoMexico } from \"../../../../../../config/reuserFunctions\";\r\nimport DetallesCuenta from \"./DetalleCuenta/DetallesCuenta\";\r\nimport LiquidarCuenta from \"./LiquidarCuenta\";\r\nimport moment from \"moment\";\r\n\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  Dialog,\r\n  Slide,\r\n  TableHead,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport \"moment/locale/es\";\r\nimport { TesoreriaCtx } from \"../../../../../../context/Tesoreria/tesoreriaCtx\";\r\n\r\nconst columns = [\r\n  { id: \"folio\", label: \"Folio\", minWidth: 100, align: \"center\" },\r\n  { id: \"fecha\", label: \"Fecha Compra\", minWidth: 100, align: \"center\" },\r\n  { id: \"provedor\", label: \"Provedor\", minWidth: 100, align: \"center\" },\r\n  { id: \"total\", label: \"Total\", minWidth: 100, align: \"center\" },\r\n  { id: \"abonado\", label: \"Abonado\", minWidth: 100, align: \"center\" },\r\n  { id: \"restante\", label: \"Restante\", minWidth: 100, align: \"center\" },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minHeight: \"60vh\",\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  pagada: {\r\n    backgroundColor: \"#EDFFF3\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#D8FFE5\",\r\n    },\r\n  },\r\n  vencidas: {\r\n    backgroundColor: \"#FFF4F4\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#F5F5F5\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function TablaAbonos(props) {\r\n  const { cuentas } = useContext(TesoreriaCtx);\r\n\r\n  const classes = useStyles();\r\n\r\n  if (props.loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  const handleChangePage = (_, nextPage) => {\r\n    props.setPage(nextPage);\r\n  };\r\n\r\n  console.log(cuentas);\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className={classes.root}>\r\n        <Box my={1} m={2} display=\"flex\">\r\n          <Fragment>\r\n            <Box\r\n              border={1}\r\n              borderColor=\"#58ff8f\"\r\n              bgcolor=\"#EDFFF3\"\r\n              height=\"24px\"\r\n              width=\"24px\"\r\n            />\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>- Pagadas </b>\r\n            </Typography>\r\n            <Box mx={2} />\r\n          </Fragment>\r\n\r\n          <Box\r\n            border={1}\r\n            borderColor=\"#FF8A8A\"\r\n            bgcolor=\"#FFF4F4\"\r\n            height=\"24px\"\r\n            width=\"24px\"\r\n          />\r\n          <Box mx={1} />\r\n          <Typography>\r\n            <b>- Compras vencidas </b>\r\n          </Typography>\r\n        </Box>\r\n        <Paper className={classes.paper}>\r\n          <TableContainer className={classes.table}>\r\n            <Table\r\n              aria-labelledby=\"tableTitle\"\r\n              stickyHeader\r\n              size=\"small\"\r\n              aria-label=\"a dense table\"\r\n            >\r\n              <TableHead>\r\n                <TableRow>\r\n                  {columns.map((column) => (\r\n                    <TableCell\r\n                      key={column.id}\r\n                      align={column.align}\r\n                      style={{ minWidth: column.minWidth }}\r\n                    >\r\n                      {column.label}\r\n                    </TableCell>\r\n                  ))}\r\n                  <TableCell align={\"center\"} style={{ minWidth: 100 }}>\r\n                    Liquidar\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {cuentas?.docs?.map((row, index) => (\r\n                  <RowsCuentas\r\n                    loading={props.loading}\r\n                    cuentaSelect={row}\r\n                    key={index}\r\n                  />\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          <TablePagination\r\n            rowsPerPageOptions={[]}\r\n            component=\"div\"\r\n            count={cuentas?.totalDocs ? cuentas?.totalDocs : 0}\r\n            rowsPerPage={props.limit}\r\n            page={props.page}\r\n            onPageChange={handleChangePage}\r\n          />\r\n        </Paper>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nfunction RowsCuentas(props) {\r\n  const permisosUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const classes = useStyles();\r\n  const handleClick = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const TwoClickInRowTableBuy = (e) => {\r\n    try {\r\n      let timer;\r\n      clearTimeout(timer);\r\n      if (e.detail === 2) {\r\n        handleClick();\r\n      }\r\n    } catch (error) {}\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        hover\r\n        tabIndex={-1}\r\n        onClick={(e) => TwoClickInRowTableBuy(e)}\r\n        className={\r\n          props.cuentaSelect.estatus_credito === \"PAGADA\"\r\n            ? classes.pagada\r\n            : props.cuentaSelect.estatus_credito === \"VENCIDA\"\r\n            ? classes.vencidas\r\n            : classes.vencer\r\n        }\r\n      >\r\n        <TableCell align=\"center\">\r\n          {props.cuentaSelect.folio ? props.cuentaSelect.folio : \"SIN FOLIO\"}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          {moment(props.cuentaSelect.fecha_registro).format(\"D MMMM YYYY\")}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          {props.cuentaSelect.proveedor.id_proveedor.nombre_cliente}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          ${formatoMexico(props.cuentaSelect.total)}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          $\r\n          {formatoMexico(\r\n            props.cuentaSelect.total -\r\n              props.cuentaSelect.saldo_credito_pendiente\r\n          )}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          ${formatoMexico(props.cuentaSelect.saldo_credito_pendiente)}\r\n        </TableCell>\r\n\r\n        {permisosUsuario.accesos.tesoreria.abonos_proveedores.editar ===\r\n        false ? (\r\n          <TableCell align=\"center\"></TableCell>\r\n        ) : (\r\n          <TableCell align=\"center\">\r\n            {props.cuentaSelect.credito_pagado ? (\r\n              <div />\r\n            ) : (\r\n              <LiquidarCuenta cuenta={props.cuentaSelect} />\r\n            )}\r\n          </TableCell>\r\n        )}\r\n      </TableRow>\r\n\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClick}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DetallesCuenta\r\n          cuenta={props.cuentaSelect}\r\n          loading={props.loading}\r\n          handleClick={handleClick}\r\n          recargar={props.refetch}\r\n        />\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/salary.50f75166.svg\";","import React, {\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n  Fragment,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Box, IconButton, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport TablaAbonos from \"./Components/TablaAbonos\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { TesoreriaCtx } from \"../../../../../context/Tesoreria/tesoreriaCtx\";\r\nimport SearchOutlined from \"@material-ui/icons/SearchOutlined\";\r\nimport { OBTENER_ABONOS_PROVEEDORES } from \"../../../../../gql/Tesoreria/abonos\";\r\nimport AbonosIcon from \"../../../../../icons/salary.svg\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  rootSearch: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosProveedores(props) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const { reload, setReload, setCuentas } = useContext(TesoreriaCtx);\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const searchfilter = useRef(null);\r\n  const [page, setPage] = useState(0);\r\n\r\n  const limit = 15;\r\n\r\n  const { loading, data, refetch } = useQuery(OBTENER_ABONOS_PROVEEDORES, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtro: filtro,\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (data) {\r\n    setCuentas(data.obtenerAbonosProveedores);\r\n  }\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n\r\n    setReload(false);\r\n  }, [reload, refetch]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      refetch({ filtro: filtro, fecha: \"\" });\r\n    } catch (error) {}\r\n  }, [filtro]);\r\n\r\n  const handleClickOpen = () => setOpen(!open);\r\n\r\n  const obtenerBusqueda = (e, value) => {\r\n    e.preventDefault();\r\n    setFiltro(value);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={AbonosIcon}\r\n              alt=\"icono abono\"\r\n              className={classes.icon}\r\n            />\r\n          </Box>\r\n          Abonos de provedores\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Abonos a Provedores\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Box display=\"flex\" p={2}>\r\n          <Box minWidth=\"40%\">\r\n            <form onSubmit={(e) => obtenerBusqueda(e, e.target[0].value)}>\r\n              <TextField\r\n                inputRef={searchfilter}\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                placeholder=\"Buscar una compra...\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton type=\"submit\" color=\"primary\" size=\"medium\">\r\n                        <SearchOutlined />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </form>\r\n          </Box>\r\n        </Box>\r\n        <Box p={2}>\r\n          <TablaAbonos\r\n            loading={loading}\r\n            refetch={refetch}\r\n            limit={limit}\r\n            setPage={setPage}\r\n            page={page}\r\n          />\r\n        </Box>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const AbonosCtx = createContext();\r\n\r\nexport const AbonosProvider= ({ children }) => {\r\n\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [ventas, setVentas] = useState([]);\r\n    const [reload, setReload] = useState(false);\r\n    const [openAbonar, setOpenAbonar] = useState(false);\r\n    const [abonos, setAbonos] = useState([]);\r\n\r\n    return (\r\n        <AbonosCtx.Provider\r\n            value={{\r\n                alert, \r\n                setAlert,\r\n                ventas, \r\n                setVentas,\r\n                reload, \r\n                setReload,\r\n                openAbonar, \r\n                setOpenAbonar,\r\n                abonos,\r\n                setAbonos,\r\n            \r\n            }}\r\n        >\r\n            {children}\r\n        </AbonosCtx.Provider>\r\n    );\r\n};\r\n","import React, { Fragment} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n  Chip,\r\n} from \"@material-ui/core\";\r\nimport { useTheme } from \"@material-ui/core\";\r\n\r\nimport {  Done } from \"@material-ui/icons\";\r\nimport { formatoMexico } from \"../../../../../../../config/reuserFunctions\";\r\n\r\nconst useStyles = makeStyles({\r\n    \r\n});\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n  });\r\n  \r\nexport default function DetalleVentaCredito(props){\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const handleOpen = () =>{\r\n        props.setOpenDetalle(!props.openDetalle)\r\n    }\r\n    return(\r\n       <Fragment>\r\n            <Dialog\r\n                open={props.openDetalle}\r\n                onClose={handleOpen}\r\n                fullWidth\r\n                maxWidth=\"lg\"\r\n                TransitionComponent={Transition}\r\n            >\r\n            <DialogTitle>\r\n                <Box display=\"flex\">\r\n                    <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n                    Datos de compra\r\n                    </Typography>\r\n                    <Button\r\n                    variant=\"text\"\r\n                    color=\"primary\"\r\n                    onClick={handleOpen}\r\n                    size=\"large\"\r\n                    >\r\n                    <CloseIcon style={{ fontSize: 30 }} />\r\n                    </Button>\r\n                </Box>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Paper className={classes.root}>\r\n                            <TableContainer className={classes.container}>\r\n                            <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                                <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Producto</TableCell>\r\n                                    <TableCell>Medida</TableCell>\r\n                                    <TableCell>Color</TableCell>\r\n                                    <TableCell>Unidad</TableCell>\r\n                                    <TableCell>Cantidad</TableCell>\r\n                                    <TableCell>C. regalo</TableCell>\r\n                                    <TableCell>C. total</TableCell>\r\n                                    {/* <TableCell>Descuento</TableCell> */}\r\n                                    <TableCell>Subtotal</TableCell>\r\n                                    <TableCell>Impuestos</TableCell>\r\n                                    <TableCell>Total</TableCell>\r\n                                </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                {props.datos?.productos?.map((producto, index) => {\r\n                                   \r\n                                    return (\r\n                                    <TableRow hover tabIndex={-1} key={index}>\r\n                                        <TableCell>\r\n                                        {producto.producto.datos_generales.nombre_comercial}\r\n                                        </TableCell>\r\n                                        <TableCell padding=\"checkbox\">\r\n                                        {producto.medida && producto.medida.medida ? producto.medida.medida : \"N/A\"}\r\n                                        </TableCell>\r\n                                        <TableCell padding=\"checkbox\">\r\n                                        {producto.color && producto.color.hex ? (\r\n                                            <Chip\r\n                                            label={producto.color.color}\r\n                                            size=\"small\"\r\n                                            style={{\r\n                                                backgroundColor: producto.color.hex,\r\n                                                color: theme.palette.getContrastText(\r\n                                                    producto.color.hex\r\n                                                ),\r\n                                            }}\r\n                                            />\r\n                                        ) : (\r\n                                            \"N/A\"\r\n                                        )}\r\n                                        </TableCell>\r\n                                        <TableCell>{producto.unidad}</TableCell>\r\n                                        <TableCell>{producto.cantidad_venta}</TableCell>\r\n                                        <TableCell>{producto.cantidad_regalo}</TableCell>\r\n                                        <TableCell>{producto.cantidad_total}</TableCell>\r\n                                        {/* <TableCell>{`$${producto.descuento_precio} - %${producto.descuento_porcentaje}`}</TableCell> */}\r\n                                        <TableCell>\r\n                                        <b>${formatoMexico(producto.subtotal)}</b>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                        <b>${formatoMexico(producto.impuestos)}</b>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                        <b>${formatoMexico(producto.total)}</b>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                    );\r\n                                })}\r\n                                </TableBody>\r\n                            </Table>\r\n                            </TableContainer>\r\n                        </Paper>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                <Button\r\n                    variant=\"text\"\r\n                    color=\"primary\"\r\n                    size=\"large\"\r\n                    startIcon={<Done />}\r\n                    onClick={() => handleOpen()}\r\n                >\r\n                    Aceptar\r\n                </Button>\r\n                </DialogActions>\r\n            </Dialog>   \r\n       </Fragment>\r\n    )\r\n};\r\n","import React, { Fragment, useState} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport {\r\n  Dialog,\r\n  Typography,\r\n  Box,\r\n  Button,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Slide,\r\n} from \"@material-ui/core\";\r\nimport { useMutation } from '@apollo/client';\r\nimport moment from 'moment';\r\nimport { withRouter } from \"react-router\";\r\nimport {  Done } from \"@material-ui/icons\";\r\nimport {  CANCELAR_ABONO_CLIENTE } from \"../../../../../../../gql/Tesoreria/abonos\";\r\nimport { formatoMexico,formatoFecha } from \"../../../../../../../config/reuserFunctions\";\r\n\r\nimport ExportarExcel from '../../../../../../../components/ExportExcel'\r\nconst useStyles = makeStyles({\r\n    \r\n});\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nconst columnsEffect = [\r\n    { id: 'fecha_movimiento_credito', label: 'Fecha', minWidth: 60 , widthPx: 160, },\r\n    { id: 'monto_total_abonado', label: 'Cantidad abono', minWidth: 170, widthPx: 160, },\r\n    { id: 'cancelar', label: 'Cancelar abono', minWidth: 170, widthPx: 160, },\r\n];\r\nconst columnsExcel = [\r\n    { id: 'fecha_movimiento_credito', label: 'Fecha', minWidth: 60 , widthPx: 160, },\r\n    { id: 'monto_total_abonado', label: 'Cantidad abono', minWidth: 170, widthPx: 160, },\r\n    { id: 'estatus', label: 'Estado', minWidth: 200, widthPx: 200, },\r\n];\r\nfunction HistorialAbonos(props){\r\n    const classes = useStyles();\r\n    const [openCancelar, setOpenCancelar] = useState(false);\r\n    const [loadingCancelar, setLoadingCancelar] = useState(false);\r\n    const [abonoSelected, setAbonoSelected] = useState(false);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n    const [ cancelarAbonoCliente ] = useMutation(CANCELAR_ABONO_CLIENTE);\r\n \r\n    const handleOpen = () =>{\r\n        props.setOpenHistorial(!props.openHistorial)\r\n      \r\n    }\r\n\r\n    let dataExcel = [];\r\n    if(props.rowSelected.abonos){\r\n        props.rowSelected.abonos.forEach(element => {\r\n            dataExcel.push({\r\n                fecha_movimiento_credito : formatoFecha(element.fecha_movimiento.completa),\r\n                monto_total_abonado :   formatoMexico(element.monto_total_abonado),\r\n                estatus: element.status\r\n            })\r\n        });\r\n    }\r\n    const affirmCancelar = (abono) =>{\r\n        try {\r\n            if(props.rowSelected.facturacion){\r\n                props.setAlert({ \r\n                    message: 'No se puede cancelar un abono facturado.', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n            }else{\r\n                if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n                    setOpenCancelar(true);\r\n                    setAbonoSelected(abono)\r\n                }else{\r\n                    props.history.push('/ventas/venta-general');\r\n                }\r\n            }\r\n           \r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const cancelAbono = async() =>{\r\n        try {\r\n         setLoadingCancelar(true);\r\n       \r\n         const input = {\r\n            tipo_movimiento: \"CANCELACION_ABONO_CLIENTE\",\r\n            rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n            numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n            id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n            fecha_movimiento: {\r\n                year: moment().locale(\"es-mx\").format('YYYY'),\r\n                mes: moment().locale(\"es-mx\").format('MM'),\r\n                dia: moment().locale(\"es-mx\").format('DD'),\r\n                no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n                no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n                completa: moment().locale('es-mx').format()\r\n            },\r\n            monto_abono: abonoSelected.monto_total_abonado,\r\n           \r\n            horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n            hora_moviento: {\r\n                hora: moment().locale(\"es-mx\").format('hh'),\r\n                minutos: moment().locale(\"es-mx\").format('mm'),\r\n                segundos: moment().locale(\"es-mx\").format('ss'),\r\n                completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n            },\r\n            concepto: 'CANCELACION_ABONO_CLIENTE',\r\n            \r\n            id_usuario: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n            id_cliente: props.rowSelected.cliente._id,\r\n            credito_disponible: props.rowSelected.cliente.credito_disponible,\r\n            numero_cliente: props.rowSelected.cliente.numero_cliente,\r\n            nombre_cliente: props.rowSelected.cliente.nombre_cliente ,\r\n            telefono_cliente: props.rowSelected.cliente.telefono,\r\n            email_cliente: props.rowSelected.cliente.email,\r\n            id_abono: abonoSelected._id,\r\n            id_venta: props.rowSelected._id,\r\n            metodo_de_pago: '01',\r\n            caja_principal: sesion.accesos.tesoreria.caja_principal.ver,\r\n        }\r\n\r\n\r\n\r\n          await cancelarAbonoCliente({\r\n            variables: {\r\n                empresa: sesion.empresa._id,\r\n                sucursal: sesion.sucursal._id,\r\n                input:input\r\n            },\r\n        });\r\n        props.recargar();\r\n        setOpenCancelar(false);\r\n        setLoadingCancelar(false);\r\n        handleOpen();\r\n        props.setAlert({ \r\n            message: 'Abono cancelado con éxito.', \r\n            status: 'success', \r\n            open: true \r\n        });\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n            if (error.networkError) {\r\n                console.log(error.networkError.result);\r\n            } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors);\r\n            }\r\n            setOpenCancelar(false);\r\n            setLoadingCancelar(false);\r\n            handleOpen();\r\n            props.setAlert({ \r\n                message: 'La cancelación ha fallado.', \r\n                status: 'error', \r\n                open: true \r\n            });\r\n    \r\n        }\r\n    }\r\n\r\n    return(\r\n      <Fragment>\r\n           \r\n      <Dialog\r\n          open={props.openHistorial}\r\n          onClose={handleOpen}\r\n          fullWidth\r\n          maxWidth=\"sm\"\r\n          TransitionComponent={Transition}\r\n      >\r\n        <Dialog\r\n            open={openCancelar}\r\n            TransitionComponent={Transition}\r\n            keepMounted\r\n            onClose={() => setOpenCancelar(false)}\r\n            aria-labelledby=\"alert-eliminar-abono\"\r\n        >\r\n            <DialogTitle id=\"alert-eliminar-abono\">\r\n            {\"¿Está seguro de eliminar este abono?\"}\r\n            </DialogTitle>\r\n            <DialogActions>\r\n            <Button\r\n                onClick={() => setOpenCancelar(false)}\r\n                color=\"inherit\"\r\n                disabled={loadingCancelar}\r\n            >\r\n                Cancelar\r\n            </Button>\r\n            <Button\r\n                onClick={() => cancelAbono()}\r\n                color=\"secondary\"\r\n                disabled={loadingCancelar}\r\n                startIcon={\r\n                    loadingCancelar ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n                }\r\n            >\r\n                Eliminar\r\n            </Button>\r\n            </DialogActions>\r\n      </Dialog> \r\n      <DialogTitle>\r\n          <Box display=\"flex\">\r\n              <Typography variant=\"h6\" style={{ flexGrow: 1 }}>\r\n              Historial de abonos\r\n              </Typography>\r\n              <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              onClick={handleOpen}\r\n              size=\"large\"\r\n              >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n          </Box>\r\n          {(props.rowSelected.abonos?.length > 0) ?\r\n                <Box mr={4} mrstyle={{ backgroundColor:'red', alignContent:'flex-end'}}  justifyContent=\"flex-end\"  >\r\n                    <Box  >\r\n                        <ExportarExcel fileName=\"Historial Abonos\" data={dataExcel} columnName={columnsExcel} />\r\n                    </Box>\r\n                </Box>\r\n                :\r\n                <div/>\r\n            }\r\n          </DialogTitle>\r\n          <DialogContent>\r\n              <Paper className={classes.root}>\r\n                      <TableContainer className={classes.container}>\r\n                      <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                          <TableHead>\r\n                          <TableRow>\r\n                              <TableCell>Fecha</TableCell>\r\n                              <TableCell>Cantidad abono</TableCell>\r\n                              <TableCell>Cancelar abono</TableCell>\r\n                          </TableRow>\r\n                          </TableHead>\r\n                          <TableBody>\r\n                          {props.rowSelected.abonos?.map((abono, index) => {\r\n                             \r\n                              return (\r\n                              <TableRow hover tabIndex={-1} key={index}>\r\n                                <TableCell>\r\n                                    {formatoFecha(abono.fecha_movimiento.completa)}\r\n                                </TableCell>\r\n                                <TableCell padding=\"checkbox\">\r\n                                    <b>${formatoMexico(abono.monto_total_abonado)}</b>\r\n                                </TableCell>\r\n                                {\r\n                                    (abono.status === 'CANCELADO') ?\r\n                                    <TableCell>\r\n                                        {abono.status}\r\n                                    </TableCell>\r\n                                    :\r\n                                    <TableCell padding=\"checkbox\">\r\n                                    <Button\r\n                                        variant=\"text\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => affirmCancelar(abono)}\r\n                                        size=\"large\"\r\n                                    >\r\n                                        <CloseIcon style={{ fontSize: 22 }} />\r\n                                    </Button>\r\n                                </TableCell>    \r\n                                }\r\n                               \r\n                              </TableRow>\r\n                              );\r\n                          })}\r\n                          </TableBody>\r\n                      </Table>\r\n                      </TableContainer>\r\n                  </Paper>\r\n          </DialogContent>\r\n          <DialogActions>\r\n          <Button\r\n              variant=\"text\"\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              startIcon={<Done />}\r\n              onClick={() => handleOpen()}\r\n          >\r\n              Aceptar\r\n          </Button>\r\n          </DialogActions>\r\n      </Dialog>\r\n      \r\n </Fragment>\r\n    )\r\n};\r\n\r\nexport default withRouter(HistorialAbonos);","import React, { useState, useContext } from 'react';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport DoneAll from '@material-ui/icons/DoneAll';\r\nimport { Box, Button, Dialog,  DialogContent,  InputAdornment, Grid,\r\n    DialogTitle, Slide, TextField, Typography,MenuItem,\r\n     makeStyles, IconButton, Select, FormControl} from '@material-ui/core'\r\nimport { useMutation } from '@apollo/client';\r\nimport { withRouter } from \"react-router\";\r\nimport {  CREAR_ABONO_CLIENTE } from \"../../../../../../gql/Tesoreria/abonos\";\r\nimport {AbonosCtx} from \"../../../../../../context/Tesoreria/abonosCtx\";\r\nimport { formaPago } from '../../../../Facturacion/catalogos';\r\nimport BackdropComponent from '../../../../../../components/Layouts/BackDrop';   \r\nimport RemoveCircleTwoToneIcon from \"@material-ui/icons/RemoveCircleTwoTone\";\r\nimport moment from 'moment';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nconst useStyles = makeStyles({\r\n\r\ntitle: {\r\n    fontSize: 16,\r\n},\r\n\r\n});\r\nfunction Liquidar(props) {\r\n    //listo\r\n    const classes = useStyles();\r\n    \r\n    const [open, setOpen] = useState(false);\r\n    const {abonos} = useContext(AbonosCtx);\r\n  \r\n    const [metodoPago, setMetodoPago] = useState('');\r\n    const [value, setValue] = useState(0);\r\n    const [total, setTotal] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n    const [cuentaTotalDescuento, setCuentaTotalDescuento] = useState(0);\r\n    const [dineroDescontado, setDineroDescontado] = useState(0);\r\n    const [ crearAbonoVentaCredito ] = useMutation(CREAR_ABONO_CLIENTE);\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n    const handleClick = () => { \r\n        if(turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver){\r\n            setOpen(!open);\r\n        }else{\r\n            props.history.push('/ventas/venta-general');\r\n        }\r\n    } \r\n   \r\n    const obtenerPrecioText = (e) => {\r\n        \r\n        let valorText = parseFloat(e.target.value);\r\n        if(valorText >= 0 && valorText <= props.total_ventas){\r\n            let porcentaje  = parseFloat((((valorText * 100) / props.total_ventas ).toFixed(2)));\r\n            let dineroDescontado = parseFloat((props.total_ventas - valorText).toFixed(2));\r\n                setCuentaTotalDescuento(valorText);\r\n                setDineroDescontado(dineroDescontado);\r\n                setValue(porcentaje);\r\n                setTotal(dineroDescontado);\r\n        }\r\n    };\r\n    \r\n    const obtenerPorcientoSlide = (e) => {\r\n       \r\n        let porcentaje = parseFloat(e.target.value);\r\n        if(porcentaje >= 0 && porcentaje <= 100 ){\r\n            setValue(porcentaje);\r\n            //let porcentaje  =  parseFloat((100 - newValue).toFixed(2));//Porcentaje para calculos de descuento\r\n           \r\n            let cuenta_con_descuento = parseFloat((props.total_ventas * porcentaje / 100).toFixed(2));\r\n            let dineroDescontado = parseFloat((props.total_ventas - cuenta_con_descuento).toFixed(2));\r\n            setCuentaTotalDescuento(cuenta_con_descuento);\r\n            setDineroDescontado(dineroDescontado);\r\n            setTotal(dineroDescontado);\r\n        }\r\n      \r\n    };\r\n    const quitarDescuento = () =>{\r\n        setValue('');\r\n        setCuentaTotalDescuento('');\r\n        setDineroDescontado('');\r\n        setTotal(props.total_ventas);\r\n    }\r\n    const liquidarVentas = async() =>{\r\n        try {\r\n         setLoading(true);\r\n            let ObjectMetodoPago = {};\r\n            formaPago.forEach((val) => {\r\n                if (metodoPago === val.Value) { \r\n                    ObjectMetodoPago = val;\r\n                }\r\n            });\r\n\r\n            const input = {\r\n                tipo_movimiento: \"ABONO_CLIENTE\",\r\n                rol_movimiento: ( turnoEnCurso) ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n                numero_caja: (turnoEnCurso) ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n                id_Caja: (turnoEnCurso) ? turnoEnCurso.id_caja : '',\r\n                fecha_movimiento: {\r\n                    year: moment().locale(\"es-mx\").format('YYYY'),\r\n                    mes: moment().locale(\"es-mx\").format('MM'),\r\n                    dia: moment().locale(\"es-mx\").format('DD'),\r\n                    no_semana_year: moment().week().toString(),\r\n                    no_dia_year: moment().dayOfYear().toString(),\r\n                    completa: moment().locale('es-mx').format()\r\n                },\r\n                concepto: 'ABONO_CLIENTE',\r\n                monto_total: props.total_ventas,\r\n                descuento: {\r\n                    porciento_descuento: value,\r\n                    dinero_descontado: dineroDescontado,\r\n                    total_con_descuento: cuentaTotalDescuento\r\n                },\r\n                horario_turno: (turnoEnCurso) ? turnoEnCurso.horario_en_turno : '',\r\n                hora_moviento: {\r\n                    hora: moment().locale(\"es-mx\").format('hh'),\r\n                    minutos: moment().locale(\"es-mx\").format('mm'),\r\n                    segundos: moment().locale(\"es-mx\").format('ss'),\r\n                    completa: moment().locale(\"es-mx\").format('HH:mm:ss')\r\n                },\r\n                metodo_de_pago:{\r\n                    clave: ObjectMetodoPago.Value,\r\n                    metodo:  ObjectMetodoPago.Name,\r\n                },\r\n                \r\n                id_usuario: sesion._id,\r\n                numero_usuario_creador: sesion.numero_usuario,\r\n                nombre_usuario_creador: sesion.nombre,\r\n                id_cliente: props.cliente._id,\r\n                credito_disponible: props.cliente.credito_disponible,\r\n                numero_cliente: props.cliente.numero_cliente,\r\n                nombre_cliente: props.cliente.nombre_cliente ,\r\n                telefono_cliente: props.cliente.telefono_cliente  ,\r\n                email_cliente: props.cliente.email_cliente,\r\n                ventas: (props.isIcon) ? \r\n                    [\r\n                        { monto_total_abonado: 0, \r\n                            id_venta:abonos[props.index].id_venta,\r\n                            saldo_credito_pendiente:abonos[props.index].saldo_credito_pendiente\r\n                        }\r\n                    ]\r\n                    :\r\n                    abonos, \r\n                liquidar: true,\r\n                caja_principal: sesion.accesos.tesoreria.caja_principal.ver\r\n                \r\n            }\r\n            if(metodoPago){\r\n                await crearAbonoVentaCredito({\r\n                    variables: {\r\n                        empresa: sesion.empresa._id,\r\n                        sucursal: sesion.sucursal._id,\r\n                        input\r\n                    },\r\n                });\r\n                props.recargar();\r\n                setOpen(false);\r\n                setLoading(false);\r\n                props.setAlert({ \r\n                    message: 'Venta liquidada con éxito.', \r\n                    status: 'success', \r\n                    open: true \r\n                });\r\n            }else{\r\n                setLoading(false);\r\n                props.setAlert({ \r\n                    message: 'Elige un método de pago.', \r\n                    status: 'error', \r\n                    open: true \r\n                });\r\n            }\r\n\r\n            \r\n        } catch (error) {\r\n          \r\n            if (error.networkError) {\r\n                console.log(error.networkError.result);\r\n            } else if (error.graphQLErrors) {\r\n                console.log(error.graphQLErrors);\r\n            }\r\n        }\r\n    }\r\n  \r\n    return (\r\n        <Box m={1}>\r\n            {\r\n                (props.isIcon) ? \r\n                <IconButton aria-label=\"liquidar\" onClick={handleClick} disabled={props.estatus_credito === \"PAGADA\"} size=\"small\" >\r\n                    <DoneAll />\r\n                   \r\n                </IconButton>\r\n                :\r\n                <Button\r\n                size=\"large\"\r\n                variant=\"contained\" \r\n                color=\"primary\"\r\n                onClick={handleClick}\r\n                >\r\n                     Liquidar TODAS\r\n                </Button>\r\n            }\r\n           \r\n            <Dialog\r\n                open={open}\r\n                TransitionComponent={Transition}\r\n                keepMounted\r\n                onClose={handleClick}\r\n                aria-labelledby=\"alert-dialog-slide-title\"\r\n                aria-describedby=\"alert-dialog-slide-description\"\r\n            >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <DialogTitle id=\"alert-dialog-slide-title\">\r\n                    <Box display=\"flex\">\r\n                        <Box width='100%' display=\"flex\" justifyContent=\"flex-start\">\r\n                                {(props.isIcon) ? 'Liquidar cuenta':'Liquidar todas las cuentas'}   \r\n                        </Box>\r\n                        <Box width='42%' display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Button variant=\"contained\" color=\"secondary\" onClick={handleClick} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</Button>\r\n                        </Box>\r\n                    </Box>\r\n                    \r\n                </DialogTitle>\r\n                <DialogContent>\r\n                   \r\n                  \r\n                <Box mt={4}>\r\n                    \r\n                        <Box textAlign={\"center\"}>\r\n                        <Typography style={{ fontSize: 17 }}>\r\n                            <b>Agregar descuento</b>\r\n                        </Typography>\r\n                        <Alert severity=\"info\">\r\n                            Aplica un descuento por pronto pago a tu cuenta\r\n                        </Alert>\r\n                        </Box>\r\n                        <Box p={2}>\r\n                        <Grid container spacing={2}>\r\n                            <Grid item md={6}>\r\n                            <Typography>\r\n                                <b>Porcentaje:</b>\r\n                            </Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                name=\"descuento\"\r\n                                id=\"form-venta-porsentaje-descuento\"\r\n                                variant=\"outlined\"\r\n                                value={value}\r\n                                onChange={obtenerPorcientoSlide}\r\n                                type=\"number\"\r\n                                disabled={false}\r\n                                InputProps={{\r\n                                startAdornment: (\r\n                                    <InputAdornment position=\"start\">%</InputAdornment>\r\n                                ),\r\n                                }}\r\n                            />\r\n                            </Grid>\r\n                            <Grid item md={6}>\r\n                            <Typography>\r\n                                <b>Dinero a descontar</b>\r\n                            </Typography>\r\n                            <TextField\r\n                                fullWidth\r\n                                size=\"small\"\r\n                                type=\"number\"\r\n                                name=\"precioConDescuento\"\r\n                                onChange={obtenerPrecioText}\r\n                                value={cuentaTotalDescuento ? cuentaTotalDescuento : 0 }\r\n                                className={classes.input}\r\n                                variant=\"outlined\"\r\n                            />\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Box mt={2} display=\"flex\" justifyContent=\"flex-end\">\r\n                            <Button\r\n                            variant=\"text\"\r\n                            color=\"secondary\"\r\n                            size=\"medium\"\r\n                            onClick={quitarDescuento}\r\n                            startIcon={<RemoveCircleTwoToneIcon />}\r\n                            >\r\n                            Quitar descuento\r\n                            </Button>\r\n                        </Box>\r\n                        </Box>\r\n                    \r\n                </Box>\r\n  \r\n                <Box width=\"65%\"  >\r\n                        <Typography><b>Método de pago:</b></Typography>\r\n                        <FormControl \r\n                            variant=\"outlined\"\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <Select\r\n                                width=\"100%\"\r\n                                name=\"metodo_pago\"\r\n                                variant='outlined'\r\n                                value={metodoPago ? metodoPago : ''}\r\n                                onChange={(e) => setMetodoPago(e.target.value)}\r\n                            >\r\n                                <MenuItem value=\"\">\r\n                                    <em>Selecciona uno</em>\r\n                                </MenuItem>\r\n                                {formaPago.map((metodo, index) => {\r\n                                    return(\r\n                                        <MenuItem key={index} value={metodo.Value}>{metodo.Name}</MenuItem>\r\n                                    )\r\n                                })}\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1} mt={1}>\r\n                        <Typography><b>Nombre de Cliente:</b> {props.cliente.nombre_cliente}</Typography>\r\n                    </Box>\r\n                    <Box width=\"100%\" p={1}>\r\n                        <Typography><b>Total:</b>  {(total > 0) ? total : props.total_ventas}</Typography>\r\n                    </Box>\r\n                    {/* <Box p={1}>\r\n                        <Alert severity=\"info\">Si desea editar el abono del cliente, <br/>\r\n                        procure este sea mayor al establecido</Alert>\r\n                    </Box> */}\r\n                    \r\n                \r\n                </DialogContent>\r\n                <Box display=\"flex\" justifyContent=\"flex-end\" alignContent=\"center\" p={2}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        style={{fontSize: 16}}\r\n                        onClick={liquidarVentas}\r\n                    >\r\n                        Liquidar\r\n                    </Button>\r\n                </Box>\r\n            </Dialog>\r\n        </Box>\r\n    )\r\n}\r\nexport default withRouter(Liquidar);\r\n/* \r\n<Box width=\"100%\">\r\n<Typography>Cuenta No. 2501265</Typography>\r\n<TextField\r\n    fullWidth\r\n    size=\"small\"\r\n    /* error \r\n    name=\"nombre_comercial\"\r\n    id=\"form-producto-nombre-comercial\"\r\n    variant=\"outlined\"\r\n    value=\"$150,000.00 Mx\" \r\n    /* helperText=\"Incorrect entry.\" \r\n    /* onChange={obtenerCampos} \r\n/>\r\n</Box>\r\n<Box width=\"100%\">\r\n<Typography>Cuenta No. 2501265</Typography>\r\n<TextField\r\n    fullWidth\r\n    size=\"small\"\r\n    /* error \r\n    name=\"nombre_comercial\"\r\n    id=\"form-producto-nombre-comercial\"\r\n    variant=\"outlined\"\r\n    value=\"$150,000.00 Mx\" \r\n    /* helperText=\"Incorrect entry.\" \r\n    /* onChange={obtenerCampos} \r\n/>\r\n</Box> */","import React, { Fragment, useState, useContext, useEffect } from \"react\";\r\n\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  makeStyles,\r\n  DialogTitle,\r\n  Slide,\r\n  TextField,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  Typography,\r\n  IconButton,\r\n  Divider,\r\n} from \"@material-ui/core\";\r\nimport BackdropComponent from \"../../../../../../components/Layouts/BackDrop\";\r\nimport { AbonosCtx } from \"../../../../../../context/Tesoreria/abonosCtx\";\r\nimport { CREAR_ABONO_CLIENTE } from \"../../../../../../gql/Tesoreria/abonos\";\r\n\r\nimport { formatoMexico } from \"../../../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../../../Facturacion/catalogos\";\r\nimport { withRouter } from \"react-router\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport moment from \"moment\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(6)}px ${theme.spacing(4)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n}));\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction Abonar(props) {\r\n  //listo\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [abono, setAbono] = useState(\"\");\r\n  const { abonos } = useContext(AbonosCtx);\r\n  const [metodoPago, setMetodoPago] = useState({});\r\n  const [nameMetodo, setNameMetodo] = useState(\"\");\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [crearAbonoVentaCredito] = useMutation(CREAR_ABONO_CLIENTE);\r\n\r\n  const handleClick = () => {\r\n    setOpen(false);\r\n  };\r\n  const hacerAbono = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      let ObjectMetodoPago = {};\r\n      formaPago.forEach((val) => {\r\n        if (metodoPago === val.Value) {\r\n          ObjectMetodoPago = val;\r\n        }\r\n      });\r\n\r\n      const input = {\r\n        tipo_movimiento: \"ABONO_CLIENTE\",\r\n        rol_movimiento: turnoEnCurso ? \"CAJA\" : \"CAJA_PRINCIPAL\",\r\n        numero_caja: turnoEnCurso ? parseInt(turnoEnCurso.numero_caja) : 0,\r\n        id_Caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n        fecha_movimiento: {\r\n          year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n          mes: moment().locale(\"es-mx\").format(\"MM\"),\r\n          dia: moment().locale(\"es-mx\").format(\"DD\"),\r\n          no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n          no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n          completa: moment().locale(\"es-mx\").format(),\r\n        },\r\n        monto_total: props.total_ventas,\r\n        concepto: \"ABONO_CLIENTE\",\r\n        horario_turno: turnoEnCurso ? turnoEnCurso.horario_en_turno : \"\",\r\n        hora_moviento: {\r\n          hora: moment().locale(\"es-mx\").format(\"hh\"),\r\n          minutos: moment().locale(\"es-mx\").format(\"mm\"),\r\n          segundos: moment().locale(\"es-mx\").format(\"ss\"),\r\n          completa: moment().locale(\"es-mx\").format(\"HH:mm:ss\"),\r\n        },\r\n        metodo_de_pago: {\r\n          clave: ObjectMetodoPago.Value,\r\n          metodo: ObjectMetodoPago.Name,\r\n        },\r\n\r\n        id_usuario: sesion._id,\r\n        numero_usuario_creador: sesion.numero_usuario,\r\n        nombre_usuario_creador: sesion.nombre,\r\n        id_cliente: props.cliente._id,\r\n        credito_disponible: props.cliente.credito_disponible,\r\n        numero_cliente: props.cliente.numero_cliente,\r\n        nombre_cliente: props.cliente.nombre_cliente,\r\n        telefono_cliente: props.cliente.telefono_cliente,\r\n        email_cliente: props.cliente.email_cliente,\r\n\r\n        ventas: [\r\n          {\r\n            monto_total_abonado: parseFloat(abono),\r\n            id_venta: abonos[props.index].id_venta,\r\n            saldo_credito_pendiente:\r\n              abonos[props.index].saldo_credito_pendiente,\r\n          },\r\n        ],\r\n        liquidar: false,\r\n        facturacion: props.venta.facturacion,\r\n        caja_principal: sesion.accesos.tesoreria.caja_principal.ver,\r\n      };\r\n      if (metodoPago && abono !== \"\" && abono > 0) {\r\n        const doAbono = await crearAbonoVentaCredito({\r\n          variables: {\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            input,\r\n          },\r\n        });\r\n\r\n        props.recargar();\r\n        setOpen(false);\r\n        setLoading(false);\r\n        props.setAlert({\r\n          message: \"Abono registrado con éxito.\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setLoading(false);\r\n        props.setAlert({\r\n          message: \"Por favor complete los datos.\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      let message = error;\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n        message = error.networkError.result;\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors[0].message);\r\n        message = error.graphQLErrors[0].message;\r\n      }\r\n      props.setAlert({\r\n        message: message,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const enviarCantidad = (e) => {\r\n    try {\r\n      let cantidad = e.target.value;\r\n      if (cantidad >= 0 && cantidad <= props.venta.saldo_credito_pendiente) {\r\n        setAbono(cantidad);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  const openDialog = () => {\r\n    try {\r\n      if (turnoEnCurso || sesion.accesos.tesoreria.caja_principal.ver) {\r\n        setOpen(true);\r\n      } else {\r\n        props.history.push(\"/ventas/venta-general\");\r\n      }\r\n    } catch (error) {}\r\n  };\r\n  useEffect(() => {\r\n    if (metodoPago) {\r\n      setNameMetodo(metodoPago.name);\r\n    }\r\n  }, [metodoPago]);\r\n\r\n  return (\r\n    <Box m={1}>\r\n      <Box display=\"flex\">\r\n        <IconButton\r\n          size=\"small\"\r\n          aria-label=\"detalle\"\r\n          onClick={() => {\r\n            openDialog();\r\n          }}\r\n          disabled={props.estatus_credito === \"PAGADA\"}\r\n        >\r\n          <AddIcon />\r\n        </IconButton>\r\n      </Box>\r\n      <Fragment>\r\n        <Dialog\r\n          open={open}\r\n          TransitionComponent={Transition}\r\n          keepMounted\r\n          onClose={handleClick}\r\n          fullWidth\r\n          maxWidth=\"xs\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-slide-title\">\r\n            <Box display=\"flex\">\r\n              <Box width=\"100%\" display=\"flex\" justifyContent=\"flex-end\">\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={() => setOpen(false)}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon />\r\n                </Button>\r\n              </Box>\r\n            </Box>\r\n          </DialogTitle>\r\n\r\n          <BackdropComponent loading={loading} setLoading={setLoading} />\r\n\r\n          <DialogContent>\r\n            <Box>\r\n              <Typography>\r\n                <b>Cantidad a abonar:</b>\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                className={classes.input}\r\n                onChange={(e) => enviarCantidad(e)}\r\n                value={abono}\r\n                size=\"small\"\r\n                name=\"abono_recibir\"\r\n                variant=\"outlined\"\r\n                type=\"number\"\r\n              />\r\n            </Box>\r\n            <Box>\r\n              <Typography>\r\n                <b>Método de pago:</b>\r\n              </Typography>\r\n              <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                <Select\r\n                  width=\"100%\"\r\n                  name=\"metodo_pago\"\r\n                  variant=\"outlined\"\r\n                  value={metodoPago ? metodoPago : \"\"}\r\n                  onChange={(e) => setMetodoPago(e.target.value)}\r\n                >\r\n                  <MenuItem value=\"\">\r\n                    <em>Selecciona uno</em>\r\n                  </MenuItem>\r\n                  {formaPago.map((metodo, index) => {\r\n                    return (\r\n                      <MenuItem key={index} value={metodo.Value}>\r\n                        {metodo.Name}\r\n                      </MenuItem>\r\n                    );\r\n                  })}\r\n                </Select>\r\n              </FormControl>\r\n            </Box>\r\n            <Box mt={2}>\r\n              <Box display=\"flex\" justifyContent=\"space-between\">\r\n                <Typography variant=\"h6\">\r\n                  <b>Total de la cuenta</b>\r\n                </Typography>\r\n                <Typography style={{ color: \"#9B9B9B\" }} variant=\"h6\">\r\n                  <b>${formatoMexico(props.venta.total)}</b>\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" justifyContent=\"space-between\">\r\n                <Typography variant=\"h6\">\r\n                  <b>Total pagado</b>\r\n                </Typography>\r\n                <Typography style={{ color: \"green\" }} variant=\"h6\">\r\n                  <b>\r\n                    $\r\n                    {formatoMexico(\r\n                      props.venta.total - props.venta.saldo_credito_pendiente\r\n                    )}\r\n                  </b>\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" justifyContent=\"space-between\">\r\n                <Typography variant=\"h6\">\r\n                  <b>Total restante</b>\r\n                </Typography>\r\n\r\n                <Typography variant=\"h6\">\r\n                  <b>${formatoMexico(props.venta.saldo_credito_pendiente)}</b>\r\n                </Typography>\r\n              </Box>\r\n              <Divider />\r\n              <Box display=\"flex\" justifyContent=\"space-between\">\r\n                <Typography variant=\"h6\">\r\n                  <b>Nuevo abono</b>\r\n                </Typography>\r\n                <Typography style={{ color: \"green\" }} variant=\"h6\">\r\n                  <b>${formatoMexico(abono)} </b>\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" justifyContent=\"space-between\">\r\n                <Typography variant=\"h6\">\r\n                  <b>Nuevo total pagado</b>\r\n                </Typography>\r\n                <Typography style={{ color: \"green\" }} variant=\"h6\">\r\n                  <b>\r\n                    $\r\n                    {formatoMexico(\r\n                      parseFloat(props.venta.total) - parseFloat(props.venta.saldo_credito_pendiente) + parseFloat(abono)\r\n                    )}\r\n                  </b>\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" justifyContent=\"space-between\">\r\n                <Typography variant=\"h6\">\r\n                  <b>Nuevo restante total</b>\r\n                </Typography>\r\n\r\n                <Typography variant=\"h6\">\r\n                  <b>${formatoMexico(props.venta.saldo_credito_pendiente - abono)}</b>\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          </DialogContent>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"flex-end\"\r\n            alignContent=\"center\"\r\n            p={2}\r\n            mt={2}\r\n          >\r\n            <Button\r\n              size=\"large\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ fontSize: 15 }}\r\n              onClick={() => hacerAbono()}\r\n            >\r\n              Registrar Abono\r\n            </Button>\r\n          </Box>\r\n        </Dialog>\r\n      </Fragment>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default withRouter(Abonar);\r\n","import React, { useState, Fragment } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\n\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\n\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport DetalleVentaCredito from \"./AbonarSeleccion/DetalleVentaCredito\";\r\nimport HistorialAbonos from \"./AbonarSeleccion/HistorialAbonos\";\r\nimport IconLiquidar from \"./Liquidar\";\r\nimport Abonar from \"./Abonar\";\r\nimport { formatoFechaCorta } from \"../../../../../../config/reuserFunctions\";\r\nimport { Dehaze } from \"@material-ui/icons\";\r\n//import DetallesCuenta from './DetalleCuenta/DetallesCuenta';\r\n\r\nconst rows = [];\r\n\r\nconst headCells = [\r\n  { id: \"folio\", numeric: false, disablePadding: true, label: \"Folio\" },\r\n  { id: \"fecha\", numeric: false, disablePadding: true, label: \"Fecha\" },\r\n  {\r\n    id: \"fechaVencimiento\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"Fecha de vencimiento\",\r\n  },\r\n  {\r\n    id: \"totalVenta\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"Total venta\",\r\n  },\r\n  {\r\n    id: \"faltaPagar\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"Falta por pagar\",\r\n  },\r\n\r\n  {\r\n    id: \"detalle\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"Detalles\",\r\n  },\r\n  {\r\n    id: \"historialAbonos\",\r\n    numeric: false,\r\n    disablePadding: true,\r\n    label: \"Historial\",\r\n  },\r\n  { id: \"abonar\", numeric: false, disablePadding: true, label: \"Abonar\" },\r\n  { id: \"liquidar\", numeric: false, disablePadding: true, label: \"Liquidar\" },\r\n];\r\n\r\nfunction EnhancedTableHead(props) {\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n        {headCells.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.numeric ? \"right\" : \"left\"}\r\n          >\r\n            {headCell.label}\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  // onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  // order: PropTypes.oneOf([ 'asc', 'desc' ]).isRequired,\r\n  // orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  pagada: {\r\n    backgroundColor: \"#EDFFF3\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#D8FFE5\",\r\n    },\r\n  },\r\n  vencidas: {\r\n    backgroundColor: \"#FFF4F4\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#F5F5F5\",\r\n    },\r\n  },\r\n  vencer: {\r\n    backgroundColor: \"#FFF\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#F5F5F5\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function TablaVentasCredito(props) {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState([]);\r\n  /* const { setVentas} = useContext(AbonosCtx); */\r\n  const [openDetalle, setOpenDetalle] = useState(false);\r\n  const [openHistorial, setOpenHistorial] = useState(false);\r\n  const [rowSelected, setRowSelected] = useState({});\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = rows.map((n) => n.name);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  /* const handleClick = (event, item) => {\r\n         try {\r\n\t\t\tlet newSelected = [];\r\n\t\t\tconst selectedIndex = selected.indexOf(item);\r\n\t\t\t//console.log(selected,selectedIndex);\r\n\t\t\t\r\n\t\t\tif (selectedIndex === -1) {\r\n\t\t\t\tnewSelected = newSelected.concat(selected, item);\r\n\t\t\t} else if (selectedIndex === 0) {\r\n\t\t\t\tnewSelected = newSelected.concat(selected.slice(1));\r\n\t\t\t} else if (selectedIndex === selected.length - 1) {\r\n\t\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\r\n\t\t\t} else if (selectedIndex > 0) {\r\n\t\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsetSelected(newSelected);\r\n\t\t\tsetVentas(newSelected); \r\n\t\t } catch (error) {\r\n\t\t\t \r\n\t\t }\r\n\t\r\n\t\t\r\n\t}; */\r\n  const detalle = (row) => {\r\n    setOpenDetalle(true);\r\n    setRowSelected(row);\r\n  };\r\n\r\n  const historial = (row) => {\r\n    setOpenHistorial(true);\r\n    setRowSelected(row);\r\n  };\r\n\r\n  const isSelected = (item) => selected.indexOf(item) !== -1;\r\n  const handleChangePage = (_, nextPage) => {\r\n\t\tprops.setPage(nextPage);\r\n\t\t\r\n\t};\t\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <Box my={1} m={2} display=\"flex\">\r\n          <Fragment>\r\n            <Box\r\n              border={1}\r\n              borderColor=\"#58ff8f\"\r\n              bgcolor=\"#EDFFF3\"\r\n              height=\"24px\"\r\n              width=\"24px\"\r\n            />\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>- Pagadas </b>\r\n            </Typography>\r\n            <Box mx={2} />\r\n          </Fragment>\r\n\r\n          <Box\r\n            border={1}\r\n            borderColor=\"#FF8A8A\"\r\n            bgcolor=\"#FFF4F4\"\r\n            height=\"24px\"\r\n            width=\"24px\"\r\n          />\r\n          <Box mx={1} />\r\n          <Typography>\r\n            <b>- Ventas vencidas </b>\r\n          </Typography>\r\n          {/* <Box\r\n\t\t\t\tborder={1}\r\n\t\t\t\tborderColor=\"#FF8A8A\"\r\n\t\t\t\tbgcolor=\"#FFF4F4\"\r\n\t\t\t\theight=\"24px\"\r\n\t\t\t\twidth=\"24px\"\r\n\t\t\t/>\r\n\t\t\t<Box mx={1} />\r\n\t\t\t\t<Typography>\r\n\t\t\t\t<b>- Ventas por vencer</b>\r\n\t\t\t</Typography> */}\r\n        </Box>\r\n\r\n        <TableContainer style={{ height: \"58vh\" }}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            stickyHeader\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              rowCount={rows.length}\r\n            />\r\n            <TableBody>\r\n              {props.rows.docs.map((row, index) => {\r\n             \r\n                const isItemSelected = isSelected(row);\r\n                const labelId = `enhanced-table-checkbox-${index}`;\r\n      \r\n                return (\r\n                  <TableRow\r\n                    hover\r\n                    key={index}\r\n                    // onClick={(event) => handleClick(event, row)}\r\n                    role=\"checkbox\"\r\n                    aria-checked={isItemSelected}\r\n                    tabIndex={-1}\r\n                    selected={isItemSelected}\r\n                    className={\r\n                      row.estatus_credito === \"PAGADA\"\r\n                        ? classes.pagada\r\n                        : row.estatus_credito === \"VENCIDA\"\r\n                        ? classes.vencidas\r\n                        : classes.vencer\r\n                    }\r\n                  >\r\n                    {/* <TableCell padding=\"checkbox\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t\t\t\t\t\t\t\t/> \r\n\t\t\t\t\t\t\t\t\t\t</TableCell>*/}\r\n                    <TableCell id={labelId}>{row.folio}</TableCell>\r\n                    <TableCell>{` ${formatoFechaCorta(\r\n                      row.fecha_registro\r\n                    )}`}</TableCell>\r\n                    <TableCell>\r\n                      {formatoFechaCorta(row.fecha_de_vencimiento_credito)}\r\n                    </TableCell>\r\n                    <TableCell>{row.total}</TableCell>\r\n                    <TableCell>{row.saldo_credito_pendiente}</TableCell>\r\n                    <TableCell align=\"center\" padding=\"checkbox\">\r\n                      <IconButton\r\n                        aria-label=\"detalle\"\r\n                        onClick={() => {\r\n                          detalle(row);\r\n                        }}\r\n                        size=\"small\"\r\n                      >\r\n                        <Dehaze />\r\n                      </IconButton>\r\n                    </TableCell>\r\n                    <TableCell align=\"center\" padding=\"checkbox\">\r\n                      <IconButton\r\n                        aria-label=\"historial\"\r\n                        onClick={() => {\r\n                          historial(row);\r\n                        }}\r\n                        size=\"small\"\r\n                      >\r\n                        <HistoryIcon />\r\n                      </IconButton>\r\n                    </TableCell>\r\n                    <TableCell align=\"center\" padding=\"checkbox\">\r\n                      <Abonar\r\n                        cliente={props.selectedClient}\r\n                        total_ventas={row.saldo_credito_pendiente}\r\n                        setLoading={props.setLoading}\r\n                        venta={row}\r\n                        setAlert={props.setAlert}\r\n                        index={index}\r\n                        recargar={props.recargar}\r\n                        estatus_credito={row.estatus_credito}\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell align=\"center\" padding=\"checkbox\">\r\n                      <IconLiquidar\r\n                        isIcon={true}\r\n                        cliente={props.selectedClient}\r\n                        total_ventas={row.saldo_credito_pendiente}\r\n                        setAlert={props.setAlert}\r\n                        index={index}\r\n                        setLoading={props.setLoading}\r\n                        recargar={props.recargar}\r\n                        estatus_credito={row.estatus_credito}\r\n                      />\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n              {/* {emptyRows > 0 && (\r\n\t\t\t\t\t\t\t\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t\t\t\t\t\t\t\t<TableCell colSpan={6} />\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t)} */}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={props.rows.totalDocs}\r\n\t\t\t\t\trowsPerPage={props.limit}\r\n\t\t\t\t\tpage={props.page}\r\n\t\t\t\t\tonPageChange={handleChangePage}\r\n\t\t\t\t/>\r\n       \r\n        <DetalleVentaCredito\r\n          openDetalle={openDetalle}\r\n          setOpenDetalle={setOpenDetalle}\r\n          datos={rowSelected}\r\n        />\r\n        <HistorialAbonos\r\n          openHistorial={openHistorial}\r\n          setOpenHistorial={setOpenHistorial}\r\n          rowSelected={rowSelected}\r\n          recargar={props.recargar}\r\n          setAlert={props.setAlert}\r\n        />\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const CONSULTA_PRODUCTOS = gql`\r\n  query ObtenerConsultaGeneralVentas($empresa: ID!, $sucursal: ID!) {\r\n    obtenerConsultaGeneralVentas(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      descuento {\r\n        porciento\r\n        dinero_descontado\r\n        precio_con_descuento\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTO_UNITARIO = gql`\r\n  query ObtenerUnProductoVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $datosProductos: ID!\r\n  ) {\r\n    obtenerUnProductoVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      datosProductos: $datosProductos\r\n    ) {\r\n      _id\r\n      precio\r\n      cantidad\r\n      concepto\r\n      unidad\r\n      unidad_principal\r\n      codigo_barras\r\n      codigo_unidad\r\n      precio_unidad {\r\n        numero_precio\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        unidad_mayoreo\r\n        precio_general\r\n        cantidad_unidad\r\n        unidad_maxima\r\n      }\r\n      descuento {\r\n        cantidad_unidad\r\n        numero_precio\r\n        unidad_maxima\r\n        precio_general\r\n        precio_neto\r\n        precio_venta\r\n        iva_precio\r\n        ieps_precio\r\n        utilidad\r\n        dinero_descontado\r\n        porciento\r\n      }\r\n      medida {\r\n        talla\r\n        tipo\r\n        _id\r\n      }\r\n      color {\r\n        hex\r\n        nombre\r\n        _id\r\n      }\r\n      descuento_activo\r\n      default\r\n      id_producto {\r\n        imagenes {\r\n          url_imagen\r\n        }\r\n        _id\r\n        datos_generales {\r\n          nombre_comercial\r\n          codigo_barras\r\n          tipo_producto\r\n          clave_alterna\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          ieps\r\n          ieps_activo\r\n          inventario {\r\n            inventario_minimo\r\n            inventario_maximo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          iva\r\n          iva_activo\r\n          monedero\r\n          monedero_electronico\r\n          precio_de_compra {\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n            iva\r\n            ieps\r\n          }\r\n          precios_producto {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n            codigo_unidad\r\n          }\r\n        }\r\n      }\r\n      inventario_general {\r\n        cantidad_existente\r\n        unidad_inventario\r\n        cantidad_existente_maxima\r\n        unidad_maxima\r\n        codigo_unidad\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTA_PRODUCTOS_VENTAS = gql`\r\n  query ObtenerProductosVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $input: ObtenerProductosVentasInput\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerProductosVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        _id\r\n        precio\r\n        cantidad\r\n        concepto\r\n        unidad\r\n        unidad_principal\r\n        codigo_barras\r\n        codigo_unidad\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        descuento {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          dinero_descontado\r\n          porciento\r\n        }\r\n        medida {\r\n          talla\r\n          tipo\r\n          _id\r\n        }\r\n        color {\r\n          hex\r\n          nombre\r\n          _id\r\n        }\r\n        descuento_activo\r\n        default\r\n        id_producto {\r\n          imagenes {\r\n            url_imagen\r\n          }\r\n          _id\r\n          datos_generales {\r\n            nombre_comercial\r\n            codigo_barras\r\n            tipo_producto\r\n            clave_alterna\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n          }\r\n        }\r\n        inventario_general {\r\n          cantidad_existente\r\n          unidad_inventario\r\n          cantidad_existente_maxima\r\n          unidad_maxima\r\n          codigo_unidad\r\n          id_almacen_general\r\n        }\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_CLIENTES_VENTAS = gql`\r\n  query ObtenerClientesVentas(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $limit: Int\r\n    $offset: Int\r\n    $filtro: String\r\n  ) {\r\n    obtenerClientesVentas(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      limit: $limit\r\n      offset: $offset\r\n      filtro: $filtro\r\n    ) {\r\n      docs {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion {\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        banco\r\n        numero_cuenta\r\n        monedero_electronico\r\n        credito_disponible\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_VENTA = gql`\r\n  mutation createVenta(\r\n    $input: CrearVentasInput!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n    $caja: ID!\r\n    $isOnline: Boolean!\r\n  ) {\r\n    createVenta(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n      caja: $caja\r\n      isOnline: $isOnline\r\n    ) {\r\n      message\r\n      done\r\n      datos_to_save_storage{\r\n        historialCajaInstance{\r\n          _id\r\n          montos_en_caja {\r\n            monto_efectivo{monto metodo_pago}\r\n            monto_tarjeta_debito{monto metodo_pago}\r\n            monto_tarjeta_credito{monto metodo_pago}\r\n            monto_creditos{monto metodo_pago}\r\n            monto_monedero{monto metodo_pago}\r\n            monto_transferencia{monto metodo_pago}\r\n            monto_cheques{monto metodo_pago}\r\n            monto_vales_despensa{monto metodo_pago}\r\n          }\r\n          id_movimiento\r\n          tipo_movimiento\r\n          concepto\r\n          rol_movimiento\r\n          id_Caja\r\n          numero_caja\r\n          horario_turno\r\n          hora_moviento{\r\n            hora\r\n            minutos\r\n            segundos\r\n            completa\r\n          }\r\n          fecha_movimiento{\r\n            year\r\n            mes\r\n            dia\r\n            no_semana_year\r\n            no_dia_year\r\n            completa\r\n          }\r\n          id_User\r\n          numero_usuario_creador\r\n          nombre_usuario_creador\r\n          empresa\r\n          sucursal\r\n        }\r\n        new_venta{\r\n          _id\r\n          folio\r\n          descuento\r\n          ieps\r\n          impuestos\r\n          iva\r\n          monedero\r\n          subTotal\r\n          total\r\n          venta_cliente\r\n          status\r\n          montos_en_caja {\r\n            monto_efectivo{monto metodo_pago}\r\n            monto_tarjeta_debito{monto metodo_pago}\r\n            monto_tarjeta_credito{monto metodo_pago}\r\n            monto_creditos{monto metodo_pago}\r\n            monto_monedero{monto metodo_pago}\r\n            monto_transferencia{monto metodo_pago}\r\n            monto_cheques{monto metodo_pago}\r\n            monto_vales_despensa{monto metodo_pago}\r\n          }\r\n          credito\r\n          abono_minimo\r\n          saldo_credito_pendiente\r\n          credito_pagado\r\n          descuento_general_activo\r\n          descuento_general{ \r\n            cantidad_descontado\r\n            porciento\r\n            precio_con_descuento\r\n          }\r\n          id_caja\r\n          fecha_de_vencimiento_credito\r\n          dias_de_credito_venta\r\n          empresa\r\n          sucursal\r\n          usuario\r\n          cliente{\r\n            _id\r\n            numero_cliente\r\n            clave_cliente\r\n            representante\r\n            nombre_cliente\r\n            rfc\r\n            curp\r\n            telefono\r\n            celular\r\n            email\r\n            numero_descuento\r\n            limite_credito\r\n            credito_disponible\r\n            dias_credito\r\n            razon_social\r\n            direccion {\r\n              calle\r\n              no_ext\r\n              no_int\r\n              codigo_postal\r\n              colonia\r\n              municipio\r\n              localidad\r\n              estado\r\n              pais\r\n            }\r\n            imagen\r\n            estado_cliente\r\n            tipo_cliente\r\n            banco\r\n            numero_cuenta\r\n            empresa {\r\n              _id\r\n              nombre_empresa\r\n              correo_empresa\r\n              nombre_dueno\r\n              telefono_dueno\r\n              sucursales_activas\r\n              limite_sucursales\r\n            }\r\n            sucursal {\r\n              _id\r\n              nombre_sucursal\r\n              descripcion\r\n            }\r\n            monedero_electronico\r\n            fecha_nacimiento\r\n            fecha_registro\r\n            eliminado\r\n          }\r\n          year_registro\r\n          numero_semana_year\r\n          numero_mes_year\r\n          fecha_registro\r\n\r\n          forma_pago\r\n          metodo_pago\r\n          tipo_emision\r\n          fecha_venta\r\n          turno\r\n        }\r\n        productos_base {\r\n          _id\r\n          id_venta\r\n          id_producto\r\n          forma_pago\r\n          producto {\r\n            almacen_inicial {\r\n              almacen\r\n              cantidad\r\n              fecha_de_expiracion\r\n              id_almacen\r\n            }\r\n            datos_generales {\r\n              codigo_barras\r\n              clave_alterna\r\n              tipo_producto\r\n              nombre_comercial\r\n              nombre_generico\r\n              descripcion\r\n              id_categoria\r\n              categoria\r\n              subcategoria\r\n              id_subcategoria\r\n              id_departamento\r\n              departamento\r\n              id_marca\r\n              marca\r\n              clave_producto_sat {\r\n                Name\r\n                Value\r\n              }\r\n              receta_farmacia\r\n            }\r\n            precios {\r\n              ieps\r\n              ieps_activo\r\n              iva\r\n              iva_activo\r\n              monedero\r\n              monedero_electronico\r\n              granel\r\n              inventario {\r\n                inventario_minimo\r\n                inventario_maximo\r\n                unidad_de_inventario\r\n              }\r\n              precio_de_compra {\r\n                precio_con_impuesto\r\n                precio_sin_impuesto\r\n                iva\r\n                ieps\r\n              }\r\n              precios_producto {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                unidad_mayoreo\r\n                utilidad\r\n              }\r\n              unidad_de_compra {\r\n                cantidad\r\n                precio_unitario_con_impuesto\r\n                precio_unitario_sin_impuesto\r\n                unidad\r\n              }\r\n            }\r\n            unidades_de_venta {\r\n              _id\r\n              cantidad\r\n              codigo_barras\r\n              id_producto\r\n              precio\r\n              unidad\r\n              unidad_principal\r\n            }\r\n          }\r\n          concepto\r\n          cantidad\r\n          cantidad_regalo\r\n          cantidad_total\r\n          cantidad_venta\r\n          costo\r\n          descuento_porcentaje\r\n          descuento_precio\r\n          impuestos\r\n          mantener_precio\r\n          subtotal\r\n          total\r\n          medida {\r\n            id_medida\r\n            medida\r\n            tipo\r\n          }\r\n          color {\r\n            id_color\r\n            color\r\n            hex\r\n          }\r\n          unidad\r\n          id_unidad_venta\r\n          empresa\r\n          sucursal\r\n          usuario\r\n          year_registro\r\n          numero_semana_year\r\n          numero_mes_year\r\n          fecha_registro\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          subtotal_antes_de_impuestos\r\n          precio_actual_object{\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            unidad_mayoreo\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          granel_producto{\r\n            granel\r\n            valor\r\n          }\r\n          precio\r\n          precio_a_vender\r\n          precio_actual_producto\r\n          descuento_activo\r\n          default\r\n         \r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CREAR_NOTA_CREDITO = gql`\r\n  mutation crearNotaCredito(\r\n    $input: CrearNotaCreditoInput!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $turno: turnoVenta\r\n  ) {\r\n    crearNotaCredito(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      turno: $turno\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_VENTAS_SUCURSAL = gql`\r\n  query obtenerVentasSucursal(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtros: filtrosObtenerVentas\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerVentasSucursal(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtros: $filtros\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        _id\r\n        folio\r\n        cliente {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          representante\r\n          nombre_cliente\r\n          rfc\r\n          curp\r\n          telefono\r\n          celular\r\n          email\r\n          numero_descuento\r\n          limite_credito\r\n          dias_credito\r\n          razon_social\r\n          direccion {\r\n            calle\r\n            no_ext\r\n            no_int\r\n            codigo_postal\r\n            colonia\r\n            municipio\r\n            localidad\r\n            estado\r\n            pais\r\n          }\r\n          imagen\r\n          eliminado\r\n          banco\r\n          numero_cuenta\r\n          monedero_electronico\r\n          credito_disponible\r\n        }\r\n        descuento\r\n        ieps\r\n        impuestos\r\n        iva\r\n        monedero\r\n        subTotal\r\n        total\r\n        venta_cliente\r\n        credito\r\n        descuento_general_activo\r\n        id_caja {\r\n          _id\r\n          numero_caja\r\n          activa\r\n        }\r\n        fecha_de_vencimiento_credito\r\n        dias_de_credito_venta\r\n        empresa\r\n        sucursal\r\n        usuario {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n        }\r\n        productos {\r\n          _id\r\n          id_unidad_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            unidad_activa\r\n            codigo_barras\r\n            id_producto\r\n            empresa\r\n            sucursal\r\n            default\r\n          }\r\n          id_producto {\r\n            _id\r\n            datos_generales {\r\n              codigo_barras\r\n              clave_alterna\r\n              tipo_producto\r\n              nombre_comercial\r\n              nombre_generico\r\n              descripcion\r\n              id_categoria\r\n              categoria\r\n              subcategoria\r\n              id_subcategoria\r\n              id_departamento\r\n              departamento\r\n              id_marca\r\n              marca\r\n              clave_producto_sat {\r\n                Name\r\n                Value\r\n              }\r\n              receta_farmacia\r\n            }\r\n            precios {\r\n              ieps\r\n              ieps_activo\r\n              inventario {\r\n                inventario_minimo\r\n                inventario_maximo\r\n                unidad_de_inventario\r\n                codigo_unidad\r\n              }\r\n              iva\r\n              iva_activo\r\n              monedero\r\n              monedero_electronico\r\n              precio_de_compra {\r\n                precio_con_impuesto\r\n                precio_sin_impuesto\r\n                iva\r\n                ieps\r\n              }\r\n              precios_producto {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n              unidad_de_compra {\r\n                cantidad\r\n                precio_unitario_con_impuesto\r\n                precio_unitario_sin_impuesto\r\n                unidad\r\n                codigo_unidad\r\n              }\r\n              granel\r\n              litros\r\n            }\r\n            imagenes {\r\n              url_imagen\r\n              location_imagen\r\n              key_imagen\r\n              extencion_imagen\r\n            }\r\n            centro_de_costos {\r\n              cuenta\r\n              id_cuenta\r\n              id_subcuenta\r\n              subcuenta\r\n            }\r\n            precio_plazos {\r\n              precio_cajas {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n              precio_costales {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n              precio_piezas {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n            }\r\n            unidades_de_venta {\r\n              _id\r\n              precio\r\n              cantidad\r\n              concepto\r\n              unidad\r\n              codigo_unidad\r\n              unidad_principal\r\n              codigo_barras\r\n              codigo_barras\r\n              id_producto\r\n              empresa\r\n              sucursal\r\n              descuento {\r\n                cantidad_unidad\r\n                numero_precio\r\n                unidad_maxima\r\n                precio_general\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                utilidad\r\n                porciento\r\n                dinero_descontado\r\n              }\r\n              descuento_activo\r\n              default\r\n              precio_unidad {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n            }\r\n            inventario_general {\r\n              _id\r\n              cantidad_existente\r\n              unidad_inventario\r\n              codigo_unidad\r\n              cantidad_existente_maxima\r\n              unidad_maxima\r\n              id_almacen_general\r\n              eliminado\r\n            }\r\n            medidas_producto {\r\n              _id\r\n              cantidad\r\n              cantidad_nueva\r\n              almacen\r\n              codigo_barras\r\n              color {\r\n                hex\r\n                nombre\r\n                _id\r\n              }\r\n              descuento {\r\n                cantidad_unidad\r\n                numero_precio\r\n                unidad_maxima\r\n                precio_general\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                utilidad\r\n                porciento\r\n                dinero_descontado\r\n              }\r\n              descuento_activo\r\n              existencia\r\n              medida {\r\n                talla\r\n                tipo\r\n                _id\r\n              }\r\n              nombre_comercial\r\n              precio\r\n              precio_unidad {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n            }\r\n            empresa\r\n            sucursal\r\n          }\r\n          concepto\r\n          cantidad\r\n          iva_total\r\n          ieps_total\r\n          subtotal\r\n          impuestos\r\n          total\r\n          medida {\r\n            id_medida\r\n            medida\r\n            tipo\r\n          }\r\n          color {\r\n            id_color\r\n            color\r\n            hex\r\n          }\r\n          cantidad_venta\r\n          granel_producto {\r\n            granel\r\n            valor\r\n          }\r\n          precio\r\n          precio_a_vender\r\n          precio_actual_producto\r\n          default\r\n          unidad\r\n          codigo_unidad\r\n          id_unidad_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            unidad_activa\r\n            codigo_barras\r\n            id_producto\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          inventario_general {\r\n            _id\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n            eliminado\r\n          }\r\n          year_registro\r\n          fecha_registro\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          subtotal_antes_de_impuestos\r\n          descuento_activo\r\n          descuento_producto {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          precio_actual_object {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            unidad_mayoreo\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n        }\r\n        fecha_registro\r\n        factura {\r\n          id_cfdi\r\n          serie\r\n          currency\r\n          expedition_place\r\n          folio\r\n          cfdi_type\r\n          payment_form\r\n          payment_method\r\n          logo_url\r\n          date\r\n          issuer {\r\n            FiscalRegime\r\n            Rfc\r\n            TaxName\r\n          }\r\n          receiver {\r\n            Rfc\r\n            Name\r\n            CfdiUse\r\n          }\r\n          items {\r\n            ProductCode\r\n            IdentificationNumber\r\n            Description\r\n            Unit\r\n            UnitCode\r\n            UnitPrice\r\n            Quantity\r\n            Subtotal\r\n            Discount\r\n            Taxes {\r\n              Total\r\n              Name\r\n              Base\r\n              Rate\r\n              IsRetention\r\n            }\r\n            Total\r\n          }\r\n          original_string\r\n          sub_total\r\n          total\r\n          discount\r\n          fecha_registro\r\n          empresa\r\n          sucursal\r\n        }\r\n        montos_en_caja {\r\n          monto_efectivo {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_tarjeta_debito {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_tarjeta_credito {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_creditos {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_monedero {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_transferencia {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_cheques {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_vales_despensa {\r\n            monto\r\n            metodo_pago\r\n          }\r\n        }\r\n        status\r\n        tipo_emision\r\n        forma_pago\r\n        metodo_pago\r\n        abono_minimo\r\n        cambio\r\n        nota_credito {\r\n          _id\r\n          cliente {\r\n            _id\r\n            numero_cliente\r\n            clave_cliente\r\n            nombre_cliente\r\n            representante\r\n            rfc\r\n          }\r\n          generar_cfdi\r\n          descuento\r\n          ieps\r\n          impuestos\r\n          iva\r\n          subTotal\r\n          total\r\n          id_factura\r\n          observaciones\r\n          empresa\r\n          sucursal\r\n          usuario {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n            email\r\n          }\r\n          venta {\r\n            _id\r\n          }\r\n          fecha_registro\r\n          cambio\r\n          devolucion_en\r\n        }\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\nexport const OBTENER_VENTAS_REPORTES = gql`\r\n  query obtenerVentasReportes(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtros: filtrosReportesVentas\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerVentasReportes(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtros: $filtros\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        _id\r\n        id_compra\r\n        id_traspaso\r\n        id_producto\r\n        id_proveedor\r\n        id_venta\r\n        id_almacen\r\n        almacen {\r\n          id_almacen\r\n          nombre_almacen\r\n        }\r\n        proveedor {\r\n          _id\r\n          clave_cliente\r\n          numero_cliente\r\n          nombre_cliente\r\n        }\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            litros\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n            _id\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        cantidad_venta\r\n        unidad_regalo\r\n        cantidad_total\r\n        iva_total\r\n        ieps_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        compra_credito\r\n        venta_credito\r\n        forma_pago\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n        factura {\r\n          id_cfdi\r\n          serie\r\n          currency\r\n          expedition_place\r\n          folio\r\n          cfdi_type\r\n          payment_form\r\n          payment_method\r\n          date\r\n        }\r\n        nota_credito {\r\n          id_nota_credito\r\n          cantidad_devuelta\r\n          cantidad_vendida\r\n          total\r\n        }\r\n        venta {\r\n          _id\r\n          folio\r\n          cliente {\r\n            _id\r\n            numero_cliente\r\n            clave_cliente\r\n            nombre_cliente\r\n          }\r\n          descuento\r\n          ieps\r\n          ieps\r\n          impuestos\r\n          iva\r\n          monedero\r\n          subTotal\r\n          total\r\n          venta_cliente\r\n          factura {\r\n            id_cfdi\r\n            folio\r\n            serie\r\n          }\r\n          status\r\n          tipo_emision\r\n          observaciones\r\n          forma_pago\r\n          metodo_pago\r\n          credito\r\n          descuento_general_activo\r\n          id_caja {\r\n            _id\r\n            numero_caja\r\n          }\r\n          usuario {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n          }\r\n          fecha_registro\r\n          cambio\r\n        }\r\n      }\r\n      totalDocs\r\n      totalVenta\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OBTENER_REPORTE_VENTAS_VENTA = gql`\r\n  query obtenerVentasByVentaReportes(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $filtros: filtrosReportesVentasByVenta\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerVentasByVentaReportes(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      filtros: $filtros\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        _id\r\n        folio\r\n        cliente {\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          representante\r\n          nombre_cliente\r\n          rfc\r\n          curp\r\n          telefono\r\n          celular\r\n          email\r\n          numero_descuento\r\n          limite_credito\r\n          dias_credito\r\n          razon_social\r\n          direccion {\r\n            calle\r\n            no_ext\r\n            no_int\r\n            codigo_postal\r\n            colonia\r\n            municipio\r\n            localidad\r\n            estado\r\n            pais\r\n          }\r\n          imagen\r\n          eliminado\r\n          banco\r\n          numero_cuenta\r\n          monedero_electronico\r\n          credito_disponible\r\n        }\r\n        descuento\r\n        ieps\r\n        impuestos\r\n        iva\r\n        monedero\r\n        subTotal\r\n        total\r\n        venta_cliente\r\n        credito\r\n        descuento_general_activo\r\n        id_caja {\r\n          _id\r\n          numero_caja\r\n          activa\r\n        }\r\n        fecha_de_vencimiento_credito\r\n        dias_de_credito_venta\r\n        saldo_credito_pendiente\r\n        empresa\r\n        sucursal\r\n        usuario {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n        }\r\n        productos {\r\n          _id\r\n          id_unidad_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            unidad_activa\r\n            codigo_barras\r\n            id_producto\r\n            empresa\r\n            sucursal\r\n            default\r\n          }\r\n          id_producto {\r\n            _id\r\n            datos_generales {\r\n              codigo_barras\r\n              clave_alterna\r\n              tipo_producto\r\n              nombre_comercial\r\n              nombre_generico\r\n              descripcion\r\n              id_categoria\r\n              categoria\r\n              subcategoria\r\n              id_subcategoria\r\n              id_departamento\r\n              departamento\r\n              id_marca\r\n              marca\r\n              clave_producto_sat {\r\n                Name\r\n                Value\r\n              }\r\n              receta_farmacia\r\n            }\r\n            precios {\r\n              ieps\r\n              ieps_activo\r\n              inventario {\r\n                inventario_minimo\r\n                inventario_maximo\r\n                unidad_de_inventario\r\n                codigo_unidad\r\n              }\r\n              iva\r\n              iva_activo\r\n              monedero\r\n              monedero_electronico\r\n              precio_de_compra {\r\n                precio_con_impuesto\r\n                precio_sin_impuesto\r\n                iva\r\n                ieps\r\n              }\r\n              precios_producto {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n              unidad_de_compra {\r\n                cantidad\r\n                precio_unitario_con_impuesto\r\n                precio_unitario_sin_impuesto\r\n                unidad\r\n                codigo_unidad\r\n              }\r\n              granel\r\n              litros\r\n            }\r\n            imagenes {\r\n              url_imagen\r\n              location_imagen\r\n              key_imagen\r\n              extencion_imagen\r\n            }\r\n            centro_de_costos {\r\n              cuenta\r\n              id_cuenta\r\n              id_subcuenta\r\n              subcuenta\r\n            }\r\n            precio_plazos {\r\n              precio_cajas {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n              precio_costales {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n              precio_piezas {\r\n                plazo\r\n                unidad\r\n                codigo_unidad\r\n                precio\r\n              }\r\n            }\r\n            unidades_de_venta {\r\n              _id\r\n              precio\r\n              cantidad\r\n              concepto\r\n              unidad\r\n              codigo_unidad\r\n              unidad_principal\r\n              codigo_barras\r\n              codigo_barras\r\n              id_producto\r\n              empresa\r\n              sucursal\r\n              descuento {\r\n                cantidad_unidad\r\n                numero_precio\r\n                unidad_maxima\r\n                precio_general\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                utilidad\r\n                porciento\r\n                dinero_descontado\r\n              }\r\n              descuento_activo\r\n              default\r\n              precio_unidad {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n            }\r\n            inventario_general {\r\n              _id\r\n              cantidad_existente\r\n              unidad_inventario\r\n              codigo_unidad\r\n              cantidad_existente_maxima\r\n              unidad_maxima\r\n              id_almacen_general\r\n              eliminado\r\n            }\r\n            medidas_producto {\r\n              _id\r\n              cantidad\r\n              cantidad_nueva\r\n              almacen\r\n              codigo_barras\r\n              color {\r\n                hex\r\n                nombre\r\n                _id\r\n              }\r\n              descuento {\r\n                cantidad_unidad\r\n                numero_precio\r\n                unidad_maxima\r\n                precio_general\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                utilidad\r\n                porciento\r\n                dinero_descontado\r\n              }\r\n              descuento_activo\r\n              existencia\r\n              medida {\r\n                talla\r\n                tipo\r\n                _id\r\n              }\r\n              nombre_comercial\r\n              precio\r\n              precio_unidad {\r\n                numero_precio\r\n                precio_neto\r\n                precio_venta\r\n                iva_precio\r\n                ieps_precio\r\n                unidad_mayoreo\r\n                utilidad\r\n                precio_general\r\n                cantidad_unidad\r\n                unidad_maxima\r\n              }\r\n            }\r\n            empresa\r\n            sucursal\r\n          }\r\n          concepto\r\n          cantidad\r\n          iva_total\r\n          ieps_total\r\n          subtotal\r\n          impuestos\r\n          total\r\n          medida {\r\n            id_medida\r\n            medida\r\n            tipo\r\n          }\r\n          color {\r\n            id_color\r\n            color\r\n            hex\r\n          }\r\n          cantidad_venta\r\n          granel_producto {\r\n            granel\r\n            valor\r\n          }\r\n          precio\r\n          precio_a_vender\r\n          precio_actual_producto\r\n          default\r\n          unidad\r\n          codigo_unidad\r\n          id_unidad_venta {\r\n            _id\r\n            precio\r\n            cantidad\r\n            concepto\r\n            unidad\r\n            codigo_unidad\r\n            unidad_principal\r\n            unidad_activa\r\n            codigo_barras\r\n            id_producto\r\n            descuento {\r\n              cantidad_unidad\r\n              numero_precio\r\n              unidad_maxima\r\n              precio_general\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              utilidad\r\n              porciento\r\n              dinero_descontado\r\n            }\r\n            descuento_activo\r\n            default\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n          inventario_general {\r\n            _id\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n            eliminado\r\n          }\r\n          year_registro\r\n          fecha_registro\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n          subtotal_antes_de_impuestos\r\n          descuento_activo\r\n          descuento_producto {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          precio_actual_object {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            unidad_mayoreo\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n        }\r\n        fecha_registro\r\n        factura {\r\n          id_cfdi\r\n          serie\r\n          currency\r\n          expedition_place\r\n          folio\r\n          cfdi_type\r\n          payment_form\r\n          payment_method\r\n          logo_url\r\n          date\r\n          issuer {\r\n            FiscalRegime\r\n            Rfc\r\n            TaxName\r\n          }\r\n          receiver {\r\n            Rfc\r\n            Name\r\n            CfdiUse\r\n          }\r\n          items {\r\n            ProductCode\r\n            IdentificationNumber\r\n            Description\r\n            Unit\r\n            UnitCode\r\n            UnitPrice\r\n            Quantity\r\n            Subtotal\r\n            Discount\r\n            Taxes {\r\n              Total\r\n              Name\r\n              Base\r\n              Rate\r\n              IsRetention\r\n            }\r\n            Total\r\n          }\r\n          original_string\r\n          sub_total\r\n          total\r\n          discount\r\n          fecha_registro\r\n          empresa\r\n          sucursal\r\n        }\r\n        montos_en_caja {\r\n          monto_efectivo {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_tarjeta_debito {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_tarjeta_credito {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_creditos {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_monedero {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_transferencia {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_cheques {\r\n            monto\r\n            metodo_pago\r\n          }\r\n          monto_vales_despensa {\r\n            monto\r\n            metodo_pago\r\n          }\r\n        }\r\n        status\r\n        tipo_emision\r\n        forma_pago\r\n        metodo_pago\r\n        abono_minimo\r\n        cambio\r\n        nota_credito {\r\n          _id\r\n          cliente {\r\n            _id\r\n            numero_cliente\r\n            clave_cliente\r\n            nombre_cliente\r\n            representante\r\n            rfc\r\n          }\r\n          generar_cfdi\r\n          descuento\r\n          ieps\r\n          impuestos\r\n          iva\r\n          subTotal\r\n          total\r\n          id_factura\r\n          observaciones\r\n          empresa\r\n          sucursal\r\n          usuario {\r\n            _id\r\n            numero_usuario\r\n            nombre\r\n            email\r\n          }\r\n          venta {\r\n            _id\r\n          }\r\n          fecha_registro\r\n          cambio\r\n          devolucion_en\r\n        }\r\n      }\r\n      totalDocs\r\n      totalVenta\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CANCELAR_VENTA_SUCURSAL = gql`\r\n  mutation cancelarVentasSucursal(\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $folio: String!\r\n    $input: cancelarVentaInput\r\n  ) {\r\n    cancelarVentasSucursal(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      folio: $folio\r\n      input: $input\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SUBIR_VENTAS_CLOUD = gql`\r\n  mutation subirVentasCloud(\r\n  $arrayVentasCloud: [VentasCloudInput]\r\n \r\n) {\r\n  subirVentasCloud(\r\n    arrayVentasCloud: $arrayVentasCloud\r\n  ) {\r\n    message\r\n    done\r\n    ventas_fail{\r\n\r\n      historialCajaInstance{\r\n          _id\r\n          montos_en_caja {\r\n            monto_efectivo{monto metodo_pago}\r\n            monto_tarjeta_debito{monto metodo_pago}\r\n            monto_tarjeta_credito{monto metodo_pago}\r\n            monto_creditos{monto metodo_pago}\r\n            monto_monedero{monto metodo_pago}\r\n            monto_transferencia{monto metodo_pago}\r\n            monto_cheques{monto metodo_pago}\r\n            monto_vales_despensa{monto metodo_pago}\r\n          }\r\n          id_movimiento\r\n          tipo_movimiento\r\n          concepto\r\n          rol_movimiento\r\n          id_Caja\r\n          numero_caja\r\n          horario_turno\r\n          hora_moviento{\r\n            hora\r\n            minutos\r\n            segundos\r\n            completa\r\n          }\r\n          fecha_movimiento{\r\n            year\r\n            mes\r\n            dia\r\n            no_semana_year\r\n            no_dia_year\r\n            completa\r\n          }\r\n          id_User\r\n          numero_usuario_creador\r\n          nombre_usuario_creador\r\n          empresa\r\n          sucursal\r\n      }\r\n\r\n      new_venta{\r\n        _id\r\n        folio\r\n        descuento\r\n        ieps\r\n        impuestos\r\n        iva\r\n        monedero\r\n        subTotal\r\n        total\r\n        venta_cliente\r\n        status\r\n        montos_en_caja {\r\n          monto_efectivo{monto metodo_pago}\r\n          monto_tarjeta_debito{monto metodo_pago}\r\n          monto_tarjeta_credito{monto metodo_pago}\r\n          monto_creditos{monto metodo_pago}\r\n          monto_monedero{monto metodo_pago}\r\n          monto_transferencia{monto metodo_pago}\r\n          monto_cheques{monto metodo_pago}\r\n          monto_vales_despensa{monto metodo_pago}\r\n        }\r\n        credito\r\n        abono_minimo\r\n        saldo_credito_pendiente\r\n        credito_pagado\r\n        descuento_general_activo\r\n        descuento_general{ \r\n          cantidad_descontado\r\n          porciento\r\n          precio_con_descuento\r\n        }\r\n        id_caja\r\n        fecha_de_vencimiento_credito\r\n        dias_de_credito_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        cliente{\r\n          _id\r\n          numero_cliente\r\n          clave_cliente\r\n          representante\r\n          nombre_cliente\r\n          rfc\r\n          curp\r\n          telefono\r\n          celular\r\n          email\r\n          numero_descuento\r\n          limite_credito\r\n          credito_disponible\r\n          dias_credito\r\n          razon_social\r\n          direccion {\r\n            calle\r\n            no_ext\r\n            no_int\r\n            codigo_postal\r\n            colonia\r\n            municipio\r\n            localidad\r\n            estado\r\n            pais\r\n          }\r\n          imagen\r\n          estado_cliente\r\n          tipo_cliente\r\n          banco\r\n          numero_cuenta\r\n          empresa {\r\n            _id\r\n            nombre_empresa\r\n            correo_empresa\r\n            nombre_dueno\r\n            telefono_dueno\r\n            sucursales_activas\r\n            limite_sucursales\r\n          }\r\n          sucursal {\r\n            _id\r\n            nombre_sucursal\r\n            descripcion\r\n          }\r\n          monedero_electronico\r\n          fecha_nacimiento\r\n          fecha_registro\r\n          eliminado\r\n        }\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n        forma_pago\r\n        metodo_pago\r\n        tipo_emision\r\n        fecha_venta\r\n        turno\r\n      }\r\n\r\n      productos_base {\r\n        _id\r\n        id_venta\r\n        id_producto\r\n        forma_pago\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              unidad_mayoreo\r\n              utilidad\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            _id\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        cantidad_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        subtotal_antes_de_impuestos\r\n        precio_actual_object{\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          unidad_mayoreo\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n        granel_producto{\r\n          granel\r\n          valor\r\n        }\r\n        precio\r\n        precio_a_vender\r\n        precio_actual_producto\r\n        descuento_activo\r\n        default\r\n      }\r\n\r\n      empresa\r\n      sucursal\r\n      \r\n      cliente{\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        representante\r\n        nombre_cliente\r\n        rfc\r\n        curp\r\n        telefono\r\n        celular\r\n        email\r\n        numero_descuento\r\n        limite_credito\r\n        dias_credito\r\n        razon_social\r\n        direccion{\r\n          calle\r\n          no_ext\r\n          no_int\r\n          codigo_postal\r\n          colonia\r\n          municipio\r\n          localidad\r\n          estado\r\n          pais\r\n        }\r\n        imagen\r\n        estado_cliente\r\n        tipo_cliente\r\n        fecha_nacimiento\r\n        fecha_registro\r\n        eliminado\r\n        banco\r\n        numero_cuenta\r\n        empresa {\r\n          _id\r\n          nombre_empresa\r\n          correo_empresa\r\n          nombre_dueno\r\n          telefono_dueno\r\n          sucursales_activas\r\n          limite_sucursales\r\n        }\r\n        sucursal {\r\n          _id\r\n          nombre_sucursal\r\n          descripcion\r\n        }\r\n        monedero_electronico\r\n        credito_disponible\r\n      } \r\n\r\n      productos {\r\n        _id\r\n        datos_generales {\r\n          codigo_barras\r\n          clave_alterna\r\n          tipo_producto\r\n          nombre_comercial\r\n          nombre_generico\r\n          descripcion\r\n          id_categoria\r\n          categoria\r\n          subcategoria\r\n          id_subcategoria\r\n          id_departamento\r\n          departamento\r\n          id_marca\r\n          marca\r\n          clave_producto_sat {\r\n            Name\r\n            Value\r\n          }\r\n          receta_farmacia\r\n        }\r\n        precios {\r\n          inventario {\r\n            inventario_maximo\r\n            inventario_minimo\r\n            unidad_de_inventario\r\n            codigo_unidad\r\n          }\r\n          precio_de_compra {\r\n            ieps\r\n            iva\r\n            precio_con_impuesto\r\n            precio_sin_impuesto\r\n          }\r\n          unidad_de_compra {\r\n            cantidad\r\n            precio_unitario_con_impuesto\r\n            precio_unitario_sin_impuesto\r\n            unidad\r\n          }\r\n        }\r\n        medidas_producto {\r\n          _id\r\n          cantidad\r\n          almacen\r\n          descuento_activo\r\n          descuento {\r\n            cantidad_unidad\r\n            numero_precio\r\n            unidad_maxima\r\n            precio_general\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            utilidad\r\n            porciento\r\n            dinero_descontado\r\n          }\r\n          codigo_barras\r\n          color {\r\n            _id\r\n            nombre\r\n            hex\r\n          }\r\n          existencia\r\n          medida {\r\n            _id\r\n            talla\r\n            tipo\r\n          }\r\n          nombre_comercial\r\n          precio\r\n          precio_unidad {\r\n            numero_precio\r\n            precio_neto\r\n            precio_venta\r\n            iva_precio\r\n            ieps_precio\r\n            unidad_mayoreo\r\n            utilidad\r\n            precio_general\r\n            cantidad_unidad\r\n            unidad_maxima\r\n          }\r\n        }\r\n        existencia_almacenes {\r\n          _id {\r\n            producto\r\n            almacen {\r\n              _id\r\n              nombre_almacen\r\n            }\r\n          }\r\n          unidad_inventario\r\n          cantidad_existente\r\n          unidad_maxima\r\n          cantidad_existente_maxima\r\n        }\r\n        empresa\r\n        sucursal\r\n      }\r\n\r\n      puntos_totales_venta\r\n      usuario\r\n      caja\r\n      credito\r\n      forma_pago\r\n      \r\n      montos_en_caja {\r\n        monto_efectivo{monto metodo_pago}\r\n        monto_tarjeta_debito{monto metodo_pago}\r\n        monto_tarjeta_credito{monto metodo_pago}\r\n        monto_creditos{monto metodo_pago}\r\n        monto_monedero{monto metodo_pago}\r\n        monto_transferencia{monto metodo_pago}\r\n        monto_cheques{monto metodo_pago}\r\n        monto_vales_despensa{monto metodo_pago}\r\n      }\r\n    }\r\n  }\r\n}\r\n`;","import React, {\r\n  useContext,\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n  Fragment,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FcDonate } from \"react-icons/fc\";\r\nimport { Box, TextField, Grid, CircularProgress } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport SnackBarMessages from \"../../../../../components/SnackBarMessages\";\r\nimport BackdropComponent from \"../../../../../components/Layouts/BackDrop\";\r\nimport { AbonosCtx } from \"../../../../../context/Tesoreria/abonosCtx\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport TablaVentasCredito from \"./Components/TablaVentasCredito\";\r\nimport ButtonLiquidar from \"./Components/Liquidar\";\r\nimport AbonosIcon from \"../../../../../icons/salary.svg\"\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_HISTORIAL_ABONOS_CLIENTE } from \"../../../../../gql/Tesoreria/abonos\";\r\nimport { OBTENER_CLIENTES_VENTAS } from \"../../../../../gql/Ventas/ventas_generales\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  titleSelect: {\r\n    marginLeft: theme.spacing(1),\r\n    flex: 1,\r\n    fontSize: 18,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  iconSize: {\r\n    width: 32,\r\n  },\r\n  borderBotonChico: {\r\n    minWidth: \"100%\",\r\n    minHeight: \"100%\",\r\n    border: \".6px solid #DBDBDB\",\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function AbonosClientes(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const context = useContext(AbonosCtx);\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingClientes, setLoadingClientes] = useState(false);\r\n  const [textValue, setTextValue] = useState(\"\");\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [selectedClient, setSelectedClient] = useState(\"\");\r\n  const [pageCliente, setPageCliente] = useState(0);\r\n  const [pageHistorial, setPageHistorial] = useState(0);\r\n  const client = useApolloClient();\r\n  const limit = 6;\r\n  const [dataDocsClientes, setDataDocsClientes] = useState([]);\r\n  const [totalDocsClientes, setTotalDocsClientes] = useState(0);\r\n\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  //const searchfilter = useRef(null);\r\n  const [totalVentas, setTotalVentas] = useState([]);\r\n  let historialVentasACredito = { docs: [], totalDocs: 0 };\r\n  let clientes = [];\r\n  const handleClickOpen = () => setOpen(!open);\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 117 && props.fromVentas) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  const [VALUE] = useDebounce(textValue, 500);\r\n  const inputRef = useRef(null);\r\n\r\n  const obtenerVentasCredito = useQuery(OBTENER_HISTORIAL_ABONOS_CLIENTE, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      idCliente: selectedClient._id,\r\n      limit,\r\n      offset: pageHistorial,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  /* \tconst obtenerClientes= useQuery(OBTENER_CLIENTES_VENTAS, {\r\n\t\tvariables: {\r\n\t\t  empresa: sesion.empresa._id,\r\n\t\t  sucursal: sesion.sucursal._id,\r\n\t\t  limit,\r\n      \t  offset: page,\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\",\r\n\t});  \r\n */\r\n\r\n  const getClientes = async (filtro = \"\", page = 0, reset = false) => {\r\n    try {\r\n\t\tsetLoadingClientes(true);\r\n      const response = await client.query({\r\n        query: OBTENER_CLIENTES_VENTAS,\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n\t\t  filtro,\r\n          limit,\r\n          offset: page,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n\t  setLoadingClientes(false);\r\n\t  if (response.data) {\r\n        setDataDocsClientes(\r\n          filtro\r\n            ? response.data.obtenerClientesVentas.docs\r\n            : reset ? response.data.obtenerClientesVentas.docs\r\n            : [\r\n\t\t\t\t...dataDocsClientes,\r\n\t\t\t\t...response.data.obtenerClientesVentas.docs,\r\n\t\t\t  ]\r\n        );\r\n\t\t setTotalDocsClientes(response.data.obtenerClientesVentas.totalDocs);\r\n\t\t}\r\n      /* if (response.data) {\r\n        setDataDocsClientes();\r\n       \r\n      } */\r\n    } catch (error) {\r\n\t\tsetLoadingClientes(false);\r\n      console.log(error);\r\n      setAlert({\r\n        message: \"Hubo un error al cargar los clientes\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const ChangeClientAutocomplate = (value) => {\r\n\tif(!value){\r\n\t\tsetPageCliente(0);\r\n\t\tgetClientes(\"\", 0, true);\r\n\t  }\r\n    try {\r\n      let setVal = value !== null ? value : \"\";\r\n\r\n      setSelectedClient(setVal);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  /* useEffect(() => {\r\n    getClientes();\r\n  }, []); */\r\n  useEffect(() => {\r\n    setPageCliente(0);\r\n    getClientes(VALUE, 0, true);\r\n  }, [VALUE]);\r\n\r\n  useEffect(() => {\r\n    setLoading(obtenerVentasCredito.loading);\r\n  }, [obtenerVentasCredito.loading]);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (obtenerVentasCredito.data) {\r\n        let arrayToset = [];\r\n        let total_ventas = 0;\r\n        if (obtenerVentasCredito.data.historialVentasACredito.docs.length > 0) {\r\n          obtenerVentasCredito.data.historialVentasACredito.docs.forEach(\r\n            (element) => {\r\n              total_ventas += element.saldo_credito_pendiente;\r\n\r\n              arrayToset.push({\r\n                id_venta: element._id,\r\n                monto_total_abonado: 0,\r\n                saldo_credito_pendiente: parseFloat(\r\n                  element.saldo_credito_pendiente\r\n                ),\r\n              });\r\n            }\r\n          );\r\n          setTotalVentas(parseFloat(total_ventas.toFixed(2)));\r\n          context.setAbonos(arrayToset);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, [obtenerVentasCredito.data]);\r\n\r\n  if (obtenerVentasCredito.data) {\r\n    historialVentasACredito = obtenerVentasCredito.data.historialVentasACredito;\r\n  }\r\n  /* \r\n\tif(obtenerClientes.data){\r\n\t\tclientes = obtenerClientes.data.obtenerClientesVentas;\r\n\t}\r\n\t */\r\n  if (obtenerVentasCredito.error) {\r\n    console.log(obtenerVentasCredito.error);\r\n    if (obtenerVentasCredito.error.networkError.result) {\r\n      console.log(obtenerVentasCredito.error.networkError.result.errors);\r\n    } else if (obtenerVentasCredito.error.graphQLErrors) {\r\n      console.log(obtenerVentasCredito.error.graphQLErrors.message);\r\n    }\r\n  }\r\n\r\n  const enviarCantidad = (cantidad, index, _id) => {\r\n    let copyArray = [...context.abonos];\r\n\r\n    if (cantidad > 0) {\r\n      copyArray.splice(index, 1, {\r\n        id_venta: _id,\r\n        monto_total_abonado: cantidad,\r\n      });\r\n    } else {\r\n      copyArray.splice(index, 1);\r\n    }\r\n    context.setAbonos(copyArray);\r\n  };\r\n\r\n  const loadMoreClientes = (e) => {\r\n    const { scrollHeight, scrollTop, clientHeight } = e.target;\r\n    if (scrollHeight - parseInt(scrollTop + 1) === clientHeight) {\r\n      if (dataDocsClientes.length < totalDocsClientes) {\r\n\t\tconsole.log(\"entra\")\r\n        let newPage = pageCliente + 1;\r\n        setPageCliente(newPage);\r\n        getClientes(\"\", newPage, false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <BackdropComponent loading={loading} setLoading={setLoading} />\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {props.fromVentas ? (\r\n        <Button\r\n          className={classes.borderBotonChico}\r\n          onClick={handleClickOpen}\r\n          disabled={!turnoEnCurso}\r\n        >\r\n          <Box>\r\n            <Box>\r\n              <FcDonate style={{ fontSize: 35 }} />\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"body2\">\r\n                <b>Abonos</b>\r\n              </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n                <b>F6</b>\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </Button>\r\n      ) : (\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <img\r\n                src={AbonosIcon}\r\n                alt=\"icono abono\"\r\n                className={classes.icon}\r\n              />\r\n            </Box>\r\n            Abonos de Clientes\r\n          </Box>\r\n        </Button>\r\n      )}\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Abonos de Clientes\r\n            </Typography>\r\n\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Grid container>\r\n          <Grid item md={5}>\r\n            <Box ml={2} mt={1}>\r\n              <Typography\r\n                className={classes.titleSelect}\r\n                color=\"textPrimary\"\r\n                gutterBottom\r\n              >\r\n                <b>Seleccionar cliente </b>\r\n              </Typography>\r\n            </Box>\r\n            <Box ml={3} style={{ width: \"80%\" }}>\r\n              <Autocomplete\r\n                id=\"combo-box-producto-codigo\"\r\n                size=\"small\"\r\n                fullWidth\r\n                options={dataDocsClientes}\r\n                loading={loadingClientes}\r\n                getOptionLabel={(option) =>\r\n                  option.nombre_cliente ? option.nombre_cliente : \"N/A\"\r\n                }\r\n                renderInput={(params) => (\r\n                  <TextField\r\n                    {...params}\r\n                    variant=\"outlined\"\r\n                    inputRef={inputRef}\r\n                    onChange={(e) => setTextValue(e.target.value)}\r\n                    value={textValue}\r\n                    InputProps={{\r\n                      ...params.InputProps,\r\n                      endAdornment: (\r\n                        <React.Fragment>\r\n                          {loadingClientes ? (\r\n                            <CircularProgress color=\"primary\" size={20} />\r\n                          ) : null}\r\n                          {params.InputProps.endAdornment}\r\n                        </React.Fragment>\r\n                      ),\r\n                    }}\r\n                  />\r\n                )}\r\n                onChange={(_, value) => ChangeClientAutocomplate(value)}\r\n                getOptionSelected={(option, value) =>\r\n                  option.nombre_cliente === value.nombre_cliente\r\n                }\r\n\t\t\t\t\r\n                ListboxProps={{\r\n                  style: {\r\n                    maxHeight: \"150px\",\r\n                  },\r\n                  onScroll: loadMoreClientes,\r\n                }}\r\n                value={selectedClient ? selectedClient : null}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n\r\n          <Grid item md={7}>\r\n            <Box\r\n              mt={3}\r\n              mr={2}\r\n              display=\"flex\"\r\n              justifyContent=\"flex-end\"\r\n              alignContent=\"space-between\"\r\n            >\r\n              {/*\r\n\t\t\t\t\t\t\t\tcontext.abonos.length > 0  ?( \r\n\t\t\t\t\t\t\t\t\t<ButtonAbonar setOpenAbonar={context.setOpenAbonar}  openAbonar={context.openAbonar}  setSelectedClient={setSelectedClient} selectedClient={selectedClient} ventas={context.ventas} abonos={context.abonos} setAbonos={context.setAbonos} />)\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<div/>\r\n\t\t\t\t\t\t\t*/}\r\n              {historialVentasACredito.length > 0 && totalVentas > 0 ? (\r\n                <ButtonLiquidar\r\n                  cliente={selectedClient}\r\n                  total_ventas={totalVentas}\r\n                  setAlert={setAlert}\r\n                  liquidarTodas={true}\r\n                  recargar={obtenerVentasCredito.refetch}\r\n                  setLoading={setLoading}\r\n                />\r\n              ) : (\r\n                <div />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        {/* \t<Grid container >\r\n                    {\r\n                        historialVentasACredito.map((venta, index) =>{\r\n\t\t\t\t\t\t\t\r\n                            return(\r\n                                <CardVentaAbono datos={venta} index={index}  setSelectedClient={setSelectedClient} selectedClient={selectedClient}  setOpen={setOpen} enviarCantidad={enviarCantidad}  empresa={sesion.empresa._id} sucursal={sesion.sucursal._id} setAlert={setAlert} />   \r\n                            )\r\n                        })\r\n\t\t\t\t\t\t\r\n                    } \r\n                </Grid>  */}\r\n        {historialVentasACredito?.docs.length ? (\r\n          <Box p={2}>\r\n            <TablaVentasCredito\r\n              rows={historialVentasACredito}\r\n              setSelectedClient={setSelectedClient}\r\n              selectedClient={selectedClient}\r\n              setOpen={setOpen}\r\n              enviarCantidad={enviarCantidad}\r\n              setAlert={setAlert}\r\n              setLoading={setLoading}\r\n              recargar={obtenerVentasCredito.refetch}\r\n              limit={limit}\r\n              page={pageHistorial}\r\n              setPage={setPageHistorial}\r\n            />\r\n          </Box>\r\n        ) : (\r\n          <Box />\r\n        )}\r\n        {loading ? (\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            height=\"50vh\"\r\n          >\r\n            <CircularProgress />\r\n          </Box>\r\n        ) : (\r\n          <div />\r\n        )}\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { Box, Container, Grid } from '@material-ui/core';\r\nimport CajaPrincipal from './CajaPrincipal/CajaPrincipal';\r\nimport AbonosProveedores from './Abonos/Provedores/AbonosProovedores';\r\nimport AbonosClientes from './Abonos/Clientes/AbonosClientes';\r\nimport {AbonosProvider} from \"../../../context/Tesoreria/abonosCtx\";\r\n// import Transferencias from './Transferencias/Transferencias';\r\n\r\nimport SnackBarMessages from '../../../components/SnackBarMessages';\r\nimport { TesoreriaCtx } from '../../../context/Tesoreria/tesoreriaCtx';\r\n\r\nexport default function Tesoreria() {\r\n  \r\n\tconst { alert, setAlert } = useContext(TesoreriaCtx);\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n\t\t\t<Grid container spacing={2} justifyContent=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.cuentas_empresa.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<CajaPrincipal />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* {permisosUsuario.accesos.tesoreria.egresos.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Egresos />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)} */}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_proveedores.ver === false ? (null):(\r\n\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<AbonosProveedores />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.tesoreria.abonos_clientes.ver === false ? (null):(\r\n\t\t\t\t\t<AbonosProvider>\r\n\t\t\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<AbonosClientes fromVentas={false} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</AbonosProvider>\r\n\t\t\t\t)}\r\n                {/* <Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<Transferencias />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { TesoreriaProvider } from '../../../context/Tesoreria/tesoreriaCtx';\r\nimport Tesoreria from './Tesoreria';\r\n\r\nexport default function IndexTesoreria() {\r\n    return (\r\n        <TesoreriaProvider>\r\n            <Tesoreria />\r\n        </TesoreriaProvider>\r\n    )\r\n}\r\n","import React, { createContext, useState } from \"react\";\r\n\r\nexport const FacturacionCtx = createContext();\r\n\r\nexport const FacturacionProvider = ({ children }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [datosFactura, setDatosFactura] = useState({\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion && sesion.empresa.imagen ? sesion.empresa.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  });\r\n\r\n  const [venta_factura, setVentaFactura] = useState(null);\r\n  const [productos, setProductos] = useState([]);\r\n\r\n  const [cp_valido, setCPValido] = useState(false);\r\n  const [codigo_postal, setCodigoPostal] = useState(\"\");\r\n  const [error_validation, setError] = useState({ status: false, message: \"\" });\r\n\r\n  return (\r\n    <FacturacionCtx.Provider\r\n      value={{\r\n        datosFactura,\r\n        setDatosFactura,\r\n        cp_valido,\r\n        setCPValido,\r\n        codigo_postal,\r\n        setCodigoPostal,\r\n        error_validation,\r\n        setError,\r\n        venta_factura,\r\n        setVentaFactura,\r\n        productos,\r\n        setProductos,\r\n      }}\r\n    >\r\n      {children}\r\n    </FacturacionCtx.Provider>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProductosSinClaveSat({ productos, open, handleClose }) {\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">\r\n              Productos sin CLAVE del catalogo SAT\r\n            </Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Hay productos sin clave de catalogo de productos del sat, sin esta\r\n            clave no puede realizar facturas\r\n          </DialogContentText>\r\n          <Paper variant=\"outlined\">\r\n            <TableContainer style={{ maxHeight: \"40vh\" }}>\r\n              <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Código de barras</TableCell>\r\n                    <TableCell>Clave alterna</TableCell>\r\n                    <TableCell>Producto</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {productos.map((row, index) => {\r\n                    const { datos_generales } = row.id_producto;\r\n                    return (\r\n                      <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.codigo_barras}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.clave_alterna}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          <Typography>\r\n                            {datos_generales.nombre_comercial}\r\n                          </Typography>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </Paper>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()} color=\"inherit\" size=\"large\">\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { makeStyles, Snackbar, TablePagination } from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { Close, Description, Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport ProductosSinClaveSat from \"./ProductosSinClave\";\r\nimport { OBTENER_VENTAS_SUCURSAL } from \"../../../../../gql/Ventas/ventas_generales\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\n//import { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport moment from \"moment\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"50vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaVentasFactura() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">Selecionar venta</Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <ComponentBusquedaVenta handleClose={handleClose} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()}>Cancelar</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ComponentBusquedaVenta = ({ handleClose }) => {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open_productos, setOpenProductos] = useState(false);\r\n  const [productos_sin_clave, setProductosSinClave] = useState([]);\r\n  const [page, setPage] = useState(0);\r\n  const limit = 20;\r\n\r\n  const openProductosClaves = () => setOpenProductos(true);\r\n  const closeProductosClaves = () => setOpenProductos(false);\r\n\r\n  const [value] = useDebounce(filtro, 500);\r\n\r\n  const isDate = moment(value).isValid();\r\n\r\n  /* Queries */\r\n  const resultado_ventas = useQuery(OBTENER_VENTAS_SUCURSAL, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: {\r\n        isDate,\r\n        busqueda: value ? value : \"\",\r\n        filtro: \"\",\r\n        vista: \"FACTURACION\",\r\n      },\r\n      limit,\r\n      offset: value ? 0 : page\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <ProductosSinClaveSat\r\n        productos={productos_sin_clave}\r\n        open={open_productos}\r\n        handleClose={closeProductosClaves}\r\n      />\r\n      <Box mb={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={8} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              placeholder=\"Buscar por: Folio, cliente, clave o nombre\"\r\n              variant=\"outlined\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n              value={filtro}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={4} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {/* <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para seleccionar una venta haz un doble click!\r\n        </Alert>\r\n      </Box> */}\r\n      <RenderLista\r\n        resultado_ventas={resultado_ventas}\r\n        handleClose={handleClose}\r\n        setProductosSinClave={setProductosSinClave}\r\n        openProductosClaves={openProductosClaves}\r\n        page={page}\r\n        setPage={setPage}\r\n        limit={limit}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderLista = ({\r\n  resultado_ventas,\r\n  handleClose,\r\n  setProductosSinClave,\r\n  openProductosClaves,\r\n  page,\r\n  setPage,\r\n  limit\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const {\r\n    setVentaFactura,\r\n    setProductos,\r\n    setDatosFactura,\r\n    datosFactura,\r\n  } = useContext(FacturacionCtx);\r\n  const { loading, data, error } = resultado_ventas;\r\n  const [open, setOpen] = useState(false);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerVentasSucursal } = data;\r\n\r\n  const obtenerVenta = (click, data, facturada) => {\r\n    /* console.log(data); */\r\n    setSelected(data.folio);\r\n    if (click === 2) {\r\n      if (facturada) {\r\n        setOpen(true);\r\n        return;\r\n      }\r\n      const without_sat_code = data.productos.filter(\r\n        (res) => !res.id_producto.datos_generales.clave_producto_sat.Value\r\n      );\r\n\r\n      if (without_sat_code.length > 0) {\r\n        setProductosSinClave(without_sat_code);\r\n        openProductosClaves();\r\n        return;\r\n      }\r\n\r\n      const { productos, ...venta } = { ...data };\r\n      const productos_base = [...data.productos];\r\n\r\n      let datos_factura = {\r\n        ...datosFactura,\r\n        payment_form: venta.forma_pago,\r\n        payment_method: venta.metodo_pago,\r\n      };\r\n\r\n      if (data.cliente && data.cliente.rfc) {\r\n        datos_factura = {\r\n          ...datos_factura,\r\n          receiver: {\r\n            ...datosFactura.receiver,\r\n            Name: data.cliente.nombre_cliente,\r\n            Rfc: data.cliente.rfc,\r\n          },\r\n        };\r\n      }\r\n\r\n      setDatosFactura(datos_factura);\r\n      setVentaFactura(venta);\r\n      setProductos(productos_base);\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={open}\r\n        onClose={() => setOpen(false)}\r\n        message=\"Esta venta ya fue facturada\"\r\n        autoHideDuration={3000}\r\n      />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell padding=\"checkbox\"></TableCell>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Fecha</TableCell>\r\n              <TableCell>Cliente</TableCell>\r\n              <TableCell>Usuario</TableCell>\r\n              <TableCell>Caja</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerVentasSucursal.docs.map((data, index) => {\r\n              const facturada = data.factura.length > 0;\r\n              return (\r\n                <TableRow\r\n                  key={index}\r\n                  hover\r\n                  role=\"checkbox\"\r\n                  tabIndex={-1}\r\n                  selected={data.folio === selected}\r\n                  onClick={(e) => obtenerVenta(e.detail, data, facturada)}\r\n                >\r\n                  <TableCell>\r\n                    {facturada ? <Description color=\"primary\" /> : null}\r\n                  </TableCell>\r\n                  <TableCell>{data.folio}</TableCell>\r\n                  <TableCell>\r\n                    {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {data.cliente !== null ? data.cliente.nombre_cliente : \"-\"}\r\n                  </TableCell>\r\n                  <TableCell>{data.usuario.nombre}</TableCell>\r\n                  <TableCell>{data.id_caja.numero_caja}</TableCell>\r\n                  <TableCell>\r\n                    ${data.descuento ? formatoMexico(data.descuento) : 0}\r\n                  </TableCell>\r\n                  <TableCell>${formatoMexico(data.subTotal)}</TableCell>\r\n                  <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                  <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerVentasSucursal.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </Paper>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Facturama from \"../../../../../billing/Facturama/facturama.api\";\r\nimport { CircularProgress, InputAdornment, TextField } from \"@material-ui/core\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { CheckCircle, Error } from \"@material-ui/icons\";\r\n\r\nexport default function CodigoPostal() {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const {\r\n    cp_valido,\r\n    setCPValido,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    error_validation,\r\n  } = React.useContext(FacturacionCtx);\r\n  const [value, setValue] = React.useState(\"\");\r\n\r\n  const [CP] = useDebounce(value, 500);\r\n\r\n  const obtenerCodigoPostal = React.useCallback(async (codigo_postal) => {\r\n    if (!codigo_postal) return;\r\n    try {\r\n      setLoading(true);\r\n      const result = await Facturama.Catalogs.PostalCodes(\r\n        codigo_postal,\r\n        function (result) {\r\n          return result;\r\n        }\r\n      );\r\n\r\n      if (result) {\r\n        setCPValido(true);\r\n        setLoading(false);\r\n        setCodigoPostal(result[0].Value);\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setCPValido(false);\r\n      setCodigoPostal(\"\");\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    obtenerCodigoPostal(CP);\r\n  }, [CP]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {/* <Typography>Código Postal:</Typography> */}\r\n      <form onSubmit={obtenerCodigoPostal}>\r\n        <TextField\r\n          fullWidth\r\n          name=\"expedition_place\"\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          value={value}\r\n          label=\"Código postal\"\r\n          onChange={(e) => setValue(e.target.value)}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {value ? (\r\n                  loading ? (\r\n                    <CircularProgress size={20} />\r\n                  ) : cp_valido ? (\r\n                    <CheckCircle color=\"primary\" />\r\n                  ) : (\r\n                    <Error color=\"error\" />\r\n                  )\r\n                ) : (\r\n                  <div />\r\n                )}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          /* error={value ? cp_valido ? false : true : false}\r\n          helperText={value ? cp_valido ? \"\" : \"Introduce un CP valido\" : \"\"} */\r\n\r\n          error={\r\n            error_validation.status && !value\r\n              ? true\r\n              : value\r\n              ? cp_valido\r\n                ? false\r\n                : true\r\n              : false\r\n          }\r\n          helperText={\r\n            error_validation.status && !value\r\n              ? error_validation.message\r\n              : value\r\n              ? cp_valido\r\n                ? \"\"\r\n                : \"Introduce un CP valido\"\r\n              : \"\"\r\n          }\r\n        />\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport { makeStyles, TablePagination } from \"@material-ui/core\";\r\nimport { Close, Error, Search } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CLIENTES } from \"../../../../gql/Catalogos/clientes\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport CrearCliente from \"../../Catalogos/Cliente/CrearCliente\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"45vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaClientesFacturas() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={() => handleOpen()} size=\"small\">\r\n        <Search />\r\n      </IconButton>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">Selecionar cliente</Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <BuscadorClienteComponent handleClose={handleClose} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button size=\"large\" onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst BuscadorClienteComponent = ({ handleClose }) => {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [openAlertRfc, setOpenAlertRfc] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [value] = useDebounce(filtro, 500);\r\n  const [page, setPage] = useState(0);\r\n  const limit = 20;\r\n\r\n  /* Queries */\r\n  const resultado_clientes = useQuery(OBTENER_CLIENTES, {\r\n    variables: {\r\n      tipo: \"CLIENTE\",\r\n      filtro: value,\r\n      empresa: sesion.empresa._id,\r\n      eliminado: false,\r\n      limit,\r\n      offset: page\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  const handleCloseAlertRFC = () => {\r\n    setOpenAlertRfc(false);\r\n  };\r\n  const openAlertRFC = () => {\r\n    setOpenAlertRfc(true);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={openAlertRfc}\r\n        onClose={handleCloseAlertRFC}\r\n        message=\"Debes registrar un RFC y RAZÓN SOCIAL a este cliente.\"\r\n        autoHideDuration={2000}\r\n      />\r\n      <Box mb={2} display=\"flex\" alignItems=\"center\">\r\n        <TextField\r\n          fullWidth\r\n          size=\"small\"\r\n          placeholder=\"Buscar por: Numero de cliente, clave o nombre\"\r\n          variant=\"outlined\"\r\n          onChange={(e) => setFiltro(e.target.value)}\r\n          value={filtro}\r\n        />\r\n        <CrearCliente\r\n          tipo=\"CLIENTE\"\r\n          accion=\"registrar\"\r\n          refetch={resultado_clientes.refetch}\r\n        />\r\n      </Box>\r\n      <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para seleccionar un cliente haz un doble click!\r\n        </Alert>\r\n      </Box>\r\n      <RenderListClientes\r\n        handleClose={handleClose}\r\n        resultado_clientes={resultado_clientes}\r\n        openAlertRFC={openAlertRFC}\r\n        page={page}\r\n        setPage={setPage}\r\n        limit={limit}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RenderListClientes = ({\r\n  handleClose,\r\n  resultado_clientes,\r\n  openAlertRFC,\r\n  page,\r\n  setPage,\r\n  limit,\r\n}) => {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const { datosFactura, setDatosFactura } = useContext(FacturacionCtx);\r\n\r\n  const { loading, data, error, refetch } = resultado_clientes;\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  const { obtenerClientes } = data;\r\n\r\n  const obtenerClienteTabla = (click, row) => {\r\n    setSelected(row.nombre_cliente);\r\n    if (click === 2) {\r\n      if (!row.rfc) {\r\n        openAlertRFC();\r\n        return;\r\n      }\r\n      setDatosFactura({\r\n        ...datosFactura,\r\n        receiver: {\r\n          ...datosFactura.receiver,\r\n          Name: row.nombre_cliente,\r\n          Rfc: row.rfc,\r\n        },\r\n      });\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell minwidth=\"100\">No. Cliente</TableCell>\r\n              <TableCell minwidth=\"100\">Clave</TableCell>\r\n              <TableCell minwidth=\"150\">Nombre</TableCell>\r\n              <TableCell minwidth=\"150\">Razon Social</TableCell>\r\n              <TableCell minwidth=\"150\">RFC</TableCell>\r\n              <TableCell minwidth=\"150\">Editar Cliente</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerClientes.docs.map((row, index) => {\r\n              return (\r\n                <TableRow\r\n                  key={index}\r\n                  hover\r\n                  role=\"checkbox\"\r\n                  tabIndex={-1}\r\n                  onClick={(e) => obtenerClienteTabla(e.detail, row)}\r\n                  selected={row.nombre_cliente === selected}\r\n                >\r\n                  <TableCell>\r\n                    <Typography>{row.numero_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.clave_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.nombre_cliente}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>{row.razon_social}</Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <Typography>\r\n                      {row.rfc ? row.rfc : <Error color=\"primary\" />}\r\n                    </Typography>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <CrearCliente\r\n                      tipo=\"CLIENTE\"\r\n                      accion=\"actualizar\"\r\n                      datos={row}\r\n                      refetch={refetch}\r\n                    />\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerClientes.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </Paper>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport ListaVentasFactura from \"./ListaVentas/ListaVentasFactura.js\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx.js\";\r\nimport CodigosPostales from \"./Catalogos/CodigoPostal.js\";\r\nimport { tipoCambio, tiposCfdi } from \"../catalogos\";\r\nimport ListaClientesFacturas from \"./ClientesSelect.js\";\r\n\r\nexport default function RegistroFactura({ serie_default }) {\r\n  const { datosFactura, setDatosFactura, error_validation, venta_factura } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  useEffect(() => {\r\n    const { folio, serie } = serie_default[0];\r\n    setDatosFactura({ ...datosFactura, folio: folio.toString(), serie });\r\n  }, []);\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    console.log(name, value);\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={5}>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>{`Emisor: ${datosFactura.issuer.Name}`}</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.issuer.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.issuer.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.issuer.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Regimen fiscal</Typography>\r\n              <FormControl fullWidth size=\"small\" variant=\"outlined\">\r\n                <TextField\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  fullWidth\r\n                  value={datosFactura.issuer.FiscalRegime}\r\n                  disabled\r\n                  error={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                  }\r\n                  helperText={\r\n                    error_validation.status && !datosFactura.issuer.FiscalRegime\r\n                      ? error_validation.message\r\n                      : \"\"\r\n                  }\r\n                />\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid item md={6} xs={12}>\r\n          <Box mb={1}>\r\n            <Typography>\r\n              <b>Receptor</b>\r\n            </Typography>\r\n            <Divider />\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>Cliente</Typography>\r\n              <TextField\r\n                value={datosFactura.receiver.Name}\r\n                placeholder=\"Selecciona un cliente\"\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <ListaClientesFacturas />\r\n                    </InputAdornment>\r\n                  ),\r\n                  readOnly: true,\r\n                  disabled: true,\r\n                }}\r\n                error={error_validation.status && !datosFactura.receiver.Name}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Name\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n            <Grid item md={4} xs={12}>\r\n              <Typography>RFC</Typography>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n                value={datosFactura.receiver.Rfc}\r\n                disabled\r\n                error={error_validation.status && !datosFactura.receiver.Rfc}\r\n                helperText={\r\n                  error_validation.status && !datosFactura.receiver.Rfc\r\n                    ? error_validation.message\r\n                    : \"\"\r\n                }\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Box mt={1} mb={2}>\r\n        <Typography>\r\n          <b>Datos factura</b>\r\n        </Typography>\r\n        <Divider />\r\n      </Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <TextField\r\n            placeholder=\"Selecciona venta a facturar\"\r\n            fullWidth\r\n            size=\"small\"\r\n            label=\"Folio Venta\"\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <ListaVentasFactura />\r\n                </InputAdornment>\r\n              ),\r\n              readOnly: true,\r\n              disabled: true,\r\n            }}\r\n            value={venta_factura ? venta_factura.folio : ''}\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.folio}\r\n            label=\"Folio\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.folio}\r\n            helperText={\r\n              error_validation.status && !datosFactura.folio\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={1}>\r\n          <TextField\r\n            value={datosFactura.serie}\r\n            label=\"Serie\"\r\n            fullWidth\r\n            size=\"small\"\r\n            variant=\"outlined\"\r\n            disabled\r\n            error={error_validation.status && !datosFactura.serie}\r\n            helperText={\r\n              error_validation.status && !datosFactura.serie\r\n                ? error_validation.message\r\n                : \"\"\r\n            }\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"cfdi_type\"\r\n            error={error_validation.status && !datosFactura.cfdi_type}\r\n          >\r\n            <InputLabel id=\"cfdi_type\">Tipo de CFDI</InputLabel>\r\n            <Select\r\n              labelId=\"cfdi_type\"\r\n              value={datosFactura.cfdi_type}\r\n              name=\"cfdi_type\"\r\n              onChange={obtenerDatos}\r\n              label=\"tipo de CFDI\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tiposCfdi.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.cfdi_type\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={2}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"currency\"\r\n            error={error_validation.status && !datosFactura.currency}\r\n          >\r\n            <InputLabel id=\"moneda\">Moneda</InputLabel>\r\n            <Select\r\n              labelId=\"moneda\"\r\n              value={datosFactura.currency}\r\n              name=\"currency\"\r\n              onChange={obtenerDatos}\r\n              label=\"moneda\"\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {tipoCambio.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n            <FormHelperText>\r\n              {error_validation.status && !datosFactura.currency\r\n                ? error_validation.message\r\n                : \"\"}\r\n            </FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={4} md={3}>\r\n          <CodigosPostales />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Close, Edit } from \"@material-ui/icons\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ModificarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const [producto_base, setProductoBase] = useState({ ...producto });\r\n  const [venta_base, setVentaBase] = useState({ ...venta });\r\n\r\n  const [cantidad_base, setCantidad] = useState(producto_base.cantidad_venta);\r\n  const [precio_base, setPrecio] = useState(\r\n    producto_base.precio_actual_object.precio_neto\r\n  );\r\n  const [error, setError] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    handleClose();\r\n    setProductoBase(producto);\r\n    setVentaBase(venta);\r\n    setCantidad(producto.cantidad_venta);\r\n    setPrecio(producto.precio_actual_object.precio_neto);\r\n  };\r\n\r\n  const obtenerDatos = async (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad_venta\") {\r\n      setCantidad(value);\r\n    } else {\r\n      setPrecio(value);\r\n    }\r\n    if (!value) return;\r\n    //##################\r\n    let venta_copy = { ...venta_base };\r\n    let copy_producto = { ...producto_base };\r\n    let { precio_actual_object, cantidad_venta, granel_producto } = {\r\n      ...copy_producto,\r\n    };\r\n\r\n    const { precios } = { ...copy_producto.id_producto };\r\n    //meter el precio original para restalo a la venta\r\n    const resta_base = await calculatePrices2({\r\n      newP: copy_producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //restal resultados a la venta\r\n\r\n    venta_copy.iva = venta_copy.iva - resta_base.ivaCalculo;\r\n    venta_copy.ieps = venta_copy.ieps - resta_base.iepsCalculo;\r\n    venta_copy.impuestos = venta_copy.impuestos - resta_base.impuestoCalculo;\r\n    venta_copy.subTotal = venta_copy.subTotal - resta_base.subtotalCalculo;\r\n    venta_copy.total = venta_copy.total - resta_base.totalCalculo;\r\n    venta_copy.monedero = venta_copy.monedero - resta_base.monederoCalculo;\r\n\r\n    //realizar calculos de cantidad\r\n    //meter el precio nuevo para sumarlo a la venta\r\n    let suma_nuevo;\r\n\r\n    if (name === \"cantidad_venta\") {\r\n      suma_nuevo = await calculatePrices2({\r\n        newP: copy_producto,\r\n        cantidad: parseFloat(value),\r\n        granel: granel_producto,\r\n        precio_boolean: true,\r\n        precio: precio_actual_object,\r\n      });\r\n      copy_producto.cantidad_venta = parseFloat(value);\r\n      setProductoBase({ ...copy_producto, [name]: parseFloat(value) });\r\n    } else {\r\n      const precio_neto = parseFloat(value);\r\n      //sacar impuestos\r\n      const { iva, ieps } = precios;\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n\r\n      //sacar precio_venta\r\n      let PVCI = parseFloat(precio_neto / cantidad_venta);\r\n      let PVSI = parseFloat(PVCI / (suma_impuestos + 1));\r\n\r\n      //sacar iva e ieps\r\n      let iva_precio = parseFloat(\r\n        PVSI * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        PVSI * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n      );\r\n      //sacar utilidad\r\n      let PCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat(((PVSI - PCSI) / PCSI) * 100);\r\n      let precios_nuevos = { ...precio_actual_object };\r\n\r\n      let impuestos_precio = ieps_precio + iva_precio;\r\n\r\n      precios_nuevos.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n      precios_nuevos.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n      precios_nuevos.precio_venta = parseFloat(PVSI.toFixed(2));\r\n      precios_nuevos.precio_neto = parseFloat(PVCI.toFixed(2));\r\n      precios_nuevos.utilidad = parseFloat(utilidad.toFixed(2));\r\n      if (precio_actual_object.unidad_maxima) {\r\n        precio_actual_object.precio_general = precio_neto;\r\n      }\r\n\r\n      suma_nuevo = await calculatePrices2({\r\n        newP: copy_producto,\r\n        cantidad: cantidad_venta,\r\n        granel: granel_producto,\r\n        precio_boolean: true,\r\n        precio: precios_nuevos,\r\n      });\r\n      setProductoBase({\r\n        ...copy_producto,\r\n        precio_actual_object: precios_nuevos,\r\n        ieps_total: precios_nuevos.ieps_precio * cantidad_base,\r\n        iva_total: precios_nuevos.iva_precio * cantidad_base,\r\n        precio_a_vender: precios_nuevos.precio_neto * cantidad_base,\r\n        precio_actual_producto: precios_nuevos.precio_neto * cantidad_base,\r\n        subtotal: precios_nuevos.precio_venta * cantidad_base,\r\n        impuestos: impuestos_precio * cantidad_base,\r\n        total: precios_nuevos.precio_neto * cantidad_base,\r\n      });\r\n    }\r\n    //sumar resultados a la venta\r\n    venta_copy.iva = venta_copy.iva + suma_nuevo.ivaCalculo;\r\n    venta_copy.ieps = venta_copy.ieps + suma_nuevo.iepsCalculo;\r\n    venta_copy.impuestos = venta_copy.impuestos + suma_nuevo.impuestoCalculo;\r\n    venta_copy.subTotal = venta_copy.subTotal + suma_nuevo.subtotalCalculo;\r\n    venta_copy.total = venta_copy.total + suma_nuevo.totalCalculo;\r\n    venta_copy.monedero = venta_copy.monedero + suma_nuevo.monederoCalculo;\r\n    setVentaBase(venta_copy);\r\n  };\r\n\r\n  const verificarCampoVacio = (value) => {\r\n    if (!value) {\r\n      setError(true);\r\n    } else {\r\n      setError(false);\r\n    }\r\n  };\r\n\r\n  const guardarPrecios = () => {\r\n    if (error) return;\r\n    const copy_array_productos = [...productos];\r\n    copy_array_productos.splice(index, 1, producto_base);\r\n    setVentaFactura(venta_base);\r\n    setProductos(copy_array_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Edit />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle>\r\n          <Box style={{ display: \"flex\" }}>\r\n            <Typography variant=\"h6\">\r\n              {producto_base.id_producto.datos_generales.nombre_comercial}\r\n            </Typography>\r\n            <Box flexGrow={1} />\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n              onClick={() => handleCancel()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <Box mb={2}>\r\n              <Typography>\r\n                <b>Producto</b>\r\n              </Typography>\r\n              <TableContainer>\r\n                <Table size=\"small\" aria-label=\"a dense table\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                      <TableCell style={{ width: 50 }}>Precio</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                      <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow tabIndex={-1}>\r\n                      <TableCell>\r\n                        <TextField\r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          value={cantidad_base}\r\n                          type=\"number\"\r\n                          name=\"cantidad_venta\"\r\n                          InputProps={{\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                {producto_base.unidad}\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                          onChange={obtenerDatos}\r\n                          placeholder={\r\n                            producto ? producto.cantidad_venta.toString() : \"\"\r\n                          }\r\n                          onBlur={(e) => verificarCampoVacio(e.target.value)}\r\n                          error={error && !cantidad_base}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <TextField\r\n                          variant=\"outlined\"\r\n                          size=\"small\"\r\n                          value={precio_base}\r\n                          type=\"number\"\r\n                          name=\"precio_neto\"\r\n                          InputProps={{\r\n                            startAdornment: (\r\n                              <InputAdornment position=\"start\">\r\n                                $\r\n                              </InputAdornment>\r\n                            ),\r\n                          }}\r\n                          onChange={obtenerDatos}\r\n                          placeholder={producto.precio_actual_object.precio_neto.toString()}\r\n                          onBlur={(e) => verificarCampoVacio(e.target.value)}\r\n                          error={error && !precio_base}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.subtotal)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.impuestos)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(producto_base.total)}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Box>\r\n          </Box>\r\n          <Box>\r\n            <Typography>\r\n              <b>Venta</b>\r\n            </Typography>\r\n          </Box>\r\n          <Divider />\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n                  <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.iva)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.ieps)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b> ${formatoMexico(venta_base.subTotal)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b>${formatoMexico(venta_base.impuestos)}</b>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <b> ${formatoMexico(venta_base.total)}</b>\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => guardarPrecios()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { useState } from \"react\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProductoFactura({ venta, producto, index }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { setVentaFactura, setProductos, productos } = useContext(FacturacionCtx);\r\n  const { datos_generales } = producto.id_producto;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    const copy_venta = { ...venta };\r\n    const copy_productos = [ ...productos];\r\n    const { cantidad_venta, granel_producto, precio_actual_object } = producto;\r\n    const { iva, ieps, impuestos, subTotal, total, monedero } = copy_venta;\r\n    //devuelve cantidades a restar\r\n    const precio_resta = await calculatePrices2({\r\n      newP: producto,\r\n      cantidad: cantidad_venta,\r\n      granel: granel_producto,\r\n      precio_boolean: true,\r\n      precio: precio_actual_object,\r\n    });\r\n    //Restar precios a venta\r\n    console.log(precio_resta);\r\n    const {\r\n      ivaCalculo,\r\n      iepsCalculo,\r\n      impuestoCalculo,\r\n      subtotalCalculo,\r\n      totalCalculo,\r\n      monederoCalculo,\r\n    } = precio_resta;\r\n\r\n    copy_venta.iva = iva - ivaCalculo;\r\n    copy_venta.ieps = ieps - iepsCalculo;\r\n    copy_venta.impuestos = impuestos - impuestoCalculo;\r\n    copy_venta.subTotal = subTotal - subtotalCalculo;\r\n    copy_venta.total = total - totalCalculo;\r\n    copy_venta.monedero = monedero - monederoCalculo;\r\n\r\n    //remover de la lista\r\n    copy_productos.splice(index, 1);\r\n    setVentaFactura(copy_venta);\r\n    setProductos(copy_productos);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton size=\"small\" onClick={handleClickOpen}>\r\n        <Close />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle>¿Está seguro de eliminar este producto?</DialogTitle>\r\n        <DialogContent>\r\n          <TableContainer>\r\n            <Table size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell style={{ width: 100 }}>Producto</TableCell>\r\n                  <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n                  <TableCell style={{ width: 100 }}>Total</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableRow tabIndex={-1}>\r\n                  <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n                  <TableCell>{producto.cantidad_venta}</TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.subtotal)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.impuestos)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    ${formatoMexico(producto.total)}\r\n                  </TableCell>\r\n                </TableRow>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleClose()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => handleDelete()} color=\"secondary\">\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, Typography } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport ModificarProductoFactura from \"./EditarProductoFactura\";\r\nimport EliminarProductoFactura from \"./EliminarProductoFactura\";\r\nimport { useContext } from \"react\";\r\nimport { FacturacionCtx } from \"../../../../../context/Facturacion/facturacionCtx\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"36vh\",\r\n  },\r\n});\r\n\r\nexport default function DetallesFactura() {\r\n  const classes = useStyles();\r\n  const { venta_factura, productos } = useContext(FacturacionCtx);\r\n\r\n  if (!venta_factura) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Paper className={classes.root} variant=\"elevation\">\r\n      <Box textAlign=\"center\">\r\n        <Typography variant=\"button\">Detalles de Venta</Typography>\r\n      </Box>\r\n      <TableContainer>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Folio</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cliente</TableCell>\r\n              <TableCell style={{ width: 50 }}>Descuento</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Usuario</TableCell>\r\n              <TableCell style={{ width: 50 }}>Caja</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            <TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.folio}\r\n              </TableCell>\r\n              <TableCell style={{ width: 50 }}>\r\n                {venta_factura.cliente !== null\r\n                  ? venta_factura.cliente.nombre_cliente\r\n                  : \"-\"}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.descuento)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                $\r\n                {venta_factura.iva\r\n                  ? formatoMexico(venta_factura.iva)\r\n                  : 0}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                $\r\n                {venta_factura.ieps\r\n                  ? formatoMexico(venta_factura.ieps)\r\n                  : 0}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.subTotal)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.impuestos)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                ${formatoMexico(venta_factura.total)}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.usuario.nombre}\r\n              </TableCell>\r\n              <TableCell style={{ width: 200 }}>\r\n                {venta_factura.id_caja.numero_caja}\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Box textAlign=\"center\" mt={1}>\r\n        <Typography variant=\"button\">Productos de Venta</Typography>\r\n      </Box>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell style={{ width: 250 }}>Producto</TableCell>\r\n              <TableCell style={{ width: 50 }}>Cantidad</TableCell>\r\n              <TableCell style={{ width: 50 }}>IVA</TableCell>\r\n              <TableCell style={{ width: 50 }}>IEPS</TableCell>\r\n              <TableCell style={{ width: 100 }}>Subtotal</TableCell>\r\n              <TableCell style={{ width: 100 }}>Impuestos</TableCell>\r\n              <TableCell style={{ width: 100 }}>Total</TableCell>\r\n              <TableCell style={{ width: 50 }}>Modificar</TableCell>\r\n              <TableCell style={{ width: 50 }}>Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productos.map((producto, index) => {\r\n              return (\r\n                <RowTableProductos\r\n                  venta={venta_factura}\r\n                  producto={producto}\r\n                  key={index}\r\n                  index={index}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowTableProductos = ({ venta, producto, index }) => {\r\n  const { datos_generales } = producto.id_producto;\r\n  return (\r\n    <TableRow tabIndex={-1}>\r\n      <TableCell>{datos_generales.nombre_comercial}</TableCell>\r\n      <TableCell>{producto.cantidad_venta}</TableCell>\r\n      <TableCell>${formatoMexico(producto.iva_total)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.ieps_total)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.subtotal)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.impuestos)}</TableCell>\r\n      <TableCell>${formatoMexico(producto.total)}</TableCell>\r\n      <TableCell>\r\n        <ModificarProductoFactura\r\n          venta={venta}\r\n          producto={producto}\r\n          index={index}\r\n        />\r\n      </TableCell>\r\n      <TableCell>\r\n        <EliminarProductoFactura\r\n          venta={venta}\r\n          producto={producto}\r\n          index={index}\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","export const verificarDatosFactura = (datos) => {\r\n  const {\r\n    cfdi_type,\r\n    currency,\r\n    date,\r\n    empresa,\r\n    expedition_place,\r\n    folio,\r\n    issuer,\r\n    items,\r\n    /* logo_url, */\r\n    payment_form,\r\n    payment_method,\r\n    receiver,\r\n    serie,\r\n    sucursal,\r\n  } = datos;\r\n\r\n  //verificar datos factura\r\n  if (\r\n    !cfdi_type ||\r\n    !currency ||\r\n    !date ||\r\n    !empresa ||\r\n    !expedition_place ||\r\n    !folio ||\r\n    !issuer ||\r\n    !items ||\r\n    /* !logo_url || */\r\n    !payment_form ||\r\n    !payment_method ||\r\n    !receiver ||\r\n    !serie ||\r\n    !sucursal\r\n  ){\r\n      return [{message: \"Campo requerido\"}]\r\n  }\r\n//verificar productos factura\r\n\r\n\r\n    return [];\r\n};\r\n","const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\nexport const factura_initial_state = {\r\n    serie: \"\",\r\n    currency: \"MXN\",\r\n    expedition_place: \"\",\r\n    folio: \"\",\r\n    cfdi_type: \"I\",\r\n    payment_form: \"\",\r\n    payment_method: \"\",\r\n    logo_url: sesion && sesion.empresa.imagen ? sesion.empresa.imagen : '',\r\n    date: \"0\",\r\n    issuer: {\r\n      FiscalRegime: sesion ? sesion.empresa.regimen_fiscal : \"\",\r\n      Rfc: sesion ? sesion.empresa.rfc : \"\",\r\n      Name: sesion ? sesion.empresa.nombre_fiscal : \"\",\r\n    },\r\n    receiver: {\r\n      Rfc: \"\",\r\n      Name: \"\",\r\n      CfdiUse: \"\",\r\n    },\r\n    items: [],\r\n    empresa: sesion ? sesion.empresa._id : \"\",\r\n    sucursal: sesion ? sesion.sucursal._id : \"\",\r\n  }","import React, { useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport moment from \"moment\";\r\nimport { verificarDatosFactura } from \"./validacion_factura\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { CREAR_FACTURA } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { formaPago, metodoPago, usosCfdi } from \"../catalogos\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RealizarFactura({ setAlert }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const {\r\n    datosFactura,\r\n    setDatosFactura,\r\n    codigo_postal,\r\n    setCodigoPostal,\r\n    productos,\r\n    setProductos,\r\n    venta_factura,\r\n    setVentaFactura,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const [CrearFactura] = useMutation(CREAR_FACTURA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setVentaFactura(null);\r\n    setProductos([]);\r\n    setCodigoPostal(\"\");\r\n  };\r\n\r\n  const crearFactura = async () => {\r\n    try {\r\n      setLoading(true);\r\n      let nuevo_obj = { ...datosFactura };\r\n      const items = [];\r\n\r\n      productos.forEach((producto) => {\r\n        let { iva, ieps } = producto.id_producto.precios;\r\n        let Taxes = [];\r\n\r\n        if (producto.iva_total) {\r\n          Taxes.push({\r\n            Total: producto.iva_total.toFixed(2),\r\n            Name: \"IVA\",\r\n            Base: producto.subtotal.toFixed(2),\r\n            Rate: `0.${iva < 10 ? `0${iva}` : iva}`,\r\n            IsRetention: \"false\",\r\n          });\r\n        }\r\n        if (producto.ieps_total) {\r\n          Taxes.push({\r\n            Total: producto.ieps_total.toFixed(2),\r\n            Name: \"IEPS\",\r\n            Base: producto.subtotal.toFixed(2),\r\n            Rate: `0.${ieps < 10 ? `0${ieps}` : ieps}`,\r\n            IsRetention: \"true\",\r\n          });\r\n        }\r\n        items.push({\r\n          ProductCode:\r\n            producto.id_producto.datos_generales.clave_producto_sat.Value,\r\n          IdentificationNumber: producto.id_producto._id,\r\n          Description: producto.id_producto.datos_generales.nombre_comercial,\r\n          UnitCode: producto.codigo_unidad,\r\n          UnitPrice: producto.precio_unidad.precio_venta.toFixed(2),\r\n          Quantity: producto.cantidad_venta.toString(),\r\n          Subtotal: producto.subtotal_antes_de_impuestos.toFixed(2),\r\n          Discount: producto.descuento_activo\r\n            ? producto.descuento_producto.dinero_descontado.toFixed(2)\r\n            : \"0.00\",\r\n          Taxes: Taxes.length ? Taxes : null,\r\n          Total: producto.total.toFixed(2),\r\n        });\r\n      });\r\n      //poner la fecha de facturacion\r\n      if (datosFactura.date === \"1\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(1, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else if (datosFactura.date === \"2\") {\r\n        nuevo_obj.date = moment()\r\n          .subtract(2, \"d\")\r\n          .format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      } else {\r\n        nuevo_obj.date = moment().locale(\"es-mx\").format(\"YYYY-MM-DDTHH:mm:ss\");\r\n      }\r\n\r\n      nuevo_obj.items = items;\r\n      nuevo_obj.expedition_place = codigo_postal;\r\n      nuevo_obj.id_venta = venta_factura._id;\r\n      nuevo_obj.folio_venta = venta_factura.folio;\r\n\r\n      //console.log(nuevo_obj);\r\n\r\n      /* validar todos los datos */\r\n      const validate = verificarDatosFactura(nuevo_obj);\r\n      if (validate.length) {\r\n        setError({ status: true, message: validate[0].message });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setError({ status: false, message: \"\" });\r\n\r\n      /* console.log(nuevo_obj); */\r\n\r\n      let result = await CrearFactura({\r\n        variables: {\r\n          input: nuevo_obj,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearFactura.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      limpiarCampos();\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      } else if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        startIcon={<DoneIcon />}\r\n        size=\"large\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        Guardar\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClose();\r\n          }\r\n        }}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" m={1}>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            size=\"large\"\r\n            color=\"secondary\"\r\n            variant=\"contained\"\r\n            disabled={loading}\r\n          >\r\n            <Close />\r\n          </Button>\r\n        </Box>\r\n        <DialogContent>\r\n          <InputsFacturaModal />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            onClick={() => crearFactura()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst InputsFacturaModal = () => {\r\n  const { datosFactura, setDatosFactura, error_validation } = useContext(\r\n    FacturacionCtx\r\n  );\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerUsoCfdi = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatosFactura({\r\n      ...datosFactura,\r\n      receiver: {\r\n        ...datosFactura.receiver,\r\n        [name]: value,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box my={1}>\r\n        <Typography>Fecha de facturación</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"date\"\r\n          error={error_validation.status && !datosFactura.date}\r\n        >\r\n          <Select value={datosFactura.date} name=\"date\" onChange={obtenerDatos}>\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona una fecha</em>\r\n            </MenuItem>\r\n            <MenuItem value=\"0\">\r\n              {moment().locale(\"es-mx\").format(\"LL\")}\r\n            </MenuItem>\r\n            <MenuItem value=\"1\">\r\n              {moment().subtract(1, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n            <MenuItem value=\"2\">\r\n              {moment().subtract(2, \"d\").format(\"LL\")}\r\n            </MenuItem>\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.date\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Forma de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_form\"\r\n          error={error_validation.status && !datosFactura.payment_form}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_form}\r\n            name=\"payment_form\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {formaPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_form\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box my={1}>\r\n        <Typography>Método de pago</Typography>\r\n        <FormControl\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          size=\"small\"\r\n          name=\"payment_method\"\r\n          error={error_validation.status && !datosFactura.payment_method}\r\n        >\r\n          <Select\r\n            value={datosFactura.payment_method}\r\n            name=\"payment_method\"\r\n            onChange={obtenerDatos}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {metodoPago.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.payment_method\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n      <Box>\r\n        <Typography>Uso de CFDi</Typography>\r\n        <FormControl\r\n          fullWidth\r\n          size=\"small\"\r\n          variant=\"outlined\"\r\n          error={error_validation.status && !datosFactura.receiver.CfdiUse}\r\n        >\r\n          <Select\r\n            value={datosFactura.receiver.CfdiUse}\r\n            name=\"CfdiUse\"\r\n            onChange={obtenerUsoCfdi}\r\n          >\r\n            <MenuItem value=\"\">\r\n              <em>Selecciona uno</em>\r\n            </MenuItem>\r\n            {usosCfdi.map((res, index) => (\r\n              <MenuItem\r\n                key={index}\r\n                value={res.Value}\r\n              >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n            ))}\r\n          </Select>\r\n          <FormHelperText>\r\n            {error_validation.status && !datosFactura.receiver.CfdiUse\r\n              ? error_validation.message\r\n              : \"\"}\r\n          </FormHelperText>\r\n        </FormControl>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { FacturacionCtx } from \"../../../../context/Facturacion/facturacionCtx\";\r\nimport { factura_initial_state } from \"./initial_factura_states\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarFactura({ open, setOpen, handleCloseFactura }) {\r\n  const {\r\n    setDatosFactura,\r\n    setCodigoPostal,\r\n    setProductos,\r\n    setVentaFactura,\r\n    setCPValido,\r\n    setError,\r\n  } = useContext(FacturacionCtx);\r\n\r\n  const limpiarCampos = () => {\r\n    setDatosFactura(factura_initial_state);\r\n    setVentaFactura(null);\r\n    setProductos([]);\r\n    setCodigoPostal(\"\");\r\n    setCPValido(false);\r\n    setError({ status: false, message: \"\" });\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const cancelar = () => {\r\n    limpiarCampos();\r\n    handleClose();\r\n    handleCloseFactura();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n      >\r\n        <DialogTitle>{\"¿Estás seguro de cancelar esta factura?\"}</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={() => handleClose()}>Cerrar</Button>\r\n          <Button onClick={() => cancelar()} color=\"primary\">\r\n            Cancelar Factura\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/factura-2.312cbce3.png\";","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\n\r\nimport RegistroFactura from \"./RegistroFactura\";\r\nimport DetallesFactura from \"./TablaVenta/TablaDetallesFactura\";\r\nimport {\r\n  FacturacionCtx,\r\n  FacturacionProvider,\r\n} from \"../../../../context/Facturacion/facturacionCtx\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport RealizarFactura from \"./RealizarFactura\";\r\nimport CancelarFactura from \"./CancelarFactura\";\r\nimport FacturaIcon from \"../../../../icons/Facturacion/factura-2.png\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function NuevaFactura() {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={() => handleClickOpen()}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mb={2}\r\n          >\r\n            <img\r\n              src={FacturaIcon}\r\n              alt=\"icono Factura\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Nuevo CFDI\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        disableEscapeKeyDown\r\n        TransitionComponent={Transition}\r\n      >\r\n        <FacturacionProvider>\r\n          <DialogFacturaPrincipal handleClose={handleClose} />\r\n        </FacturacionProvider>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst DialogFacturaPrincipal = ({ handleClose }) => {\r\n  const classes = useStyles();\r\n  const { venta_factura } = useContext(FacturacionCtx);\r\n  const [openCancel, setOpenCancel] = React.useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpenCancel(true);\r\n  };\r\n\r\n  const cancelarCFDI = () => {\r\n    if (venta_factura !== null) {\r\n      handleClickOpen();\r\n    } else {\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            Nuevo CFDI\r\n          </Typography>\r\n          <Box m={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={() => cancelarCFDI()}\r\n              color=\"secondary\"\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <DialogContent>\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <FacturaModalContent />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <RealizarFactura setAlert={setAlert} />\r\n      </DialogActions>\r\n      <CancelarFactura\r\n        open={openCancel}\r\n        setOpen={setOpenCancel}\r\n        handleCloseFactura={handleClose}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst FacturaModalContent = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { seriesCfdi } = data.obtenerSeriesCdfi;\r\n\r\n  let serie_default = [];\r\n  serie_default = seriesCfdi.filter((serie) => serie.default === true);\r\n  if (!serie_default.length) {\r\n    serie_default = [{ folio: \"\", serie: \"\" }];\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      {!seriesCfdi.length ? (\r\n        <Alert severity=\"warning\">No tienes Series CFDI registradas</Alert>\r\n      ) : null}\r\n      <Box my={2}>\r\n        <RegistroFactura serie_default={serie_default} />\r\n      </Box>\r\n      <DetallesFactura />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControlLabel,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Add, Close, Done } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { CREAR_SERIE } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroSeries({ refetch }) {\r\n  const [open, setOpen] = useState(false);\r\n  const [datos, setDatos] = useState({ folio: \"\", serie: \"\", default: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [crearSerieCFDI] = useMutation(CREAR_SERIE);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setDatos({ folio: \"\", serie: \"\", default: false });\r\n  };\r\n\r\n  const obtenerDatosSeries = (e) => {\r\n    const { name, value } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerPredeterminado = (e) => {\r\n    const { name, checked } = e.target;\r\n    setDatos({\r\n      ...datos,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const guardarDatosBD = async () => {\r\n    if (!datos.folio || !datos.serie) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const result = await crearSerieCFDI({\r\n        variables: {\r\n          input: {\r\n            serie: datos.serie,\r\n            folio: parseInt(datos.folio),\r\n            default: datos.default,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.crearSerieCFDI.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Box display=\"flex\" justifyContent=\"flex-end\">\r\n        <Button\r\n          onClick={() => handleClickOpen()}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          startIcon={<Add />}\r\n        >\r\n          Nueva serie\r\n        </Button>\r\n      </Box>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        fullWidth\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Registrar nueva serie</DialogTitle>\r\n        <DialogContent>\r\n          <Box width=\"100%\">\r\n            <Typography>Serie para CDFI:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"serie\"\r\n                onChange={obtenerDatosSeries}\r\n                inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <Box width=\"100%\">\r\n            <Typography>Folio Inicial:</Typography>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                name=\"folio\"\r\n                onChange={obtenerDatosSeries}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          <FormControlLabel\r\n            style={{ marginTop: 8 }}\r\n            control={\r\n              <Checkbox\r\n                checked={datos.default}\r\n                onChange={obtenerPredeterminado}\r\n                name=\"default\"\r\n              />\r\n            }\r\n            label=\"Serie predeterminada\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            disabled={!datos.serie || !datos.folio || loading}\r\n            onClick={() => guardarDatosBD()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { Backdrop, Checkbox, CircularProgress } from \"@material-ui/core\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  ACTUALIZAR_DEFAULT_SERIE,\r\n  ELIMINAR_SERIE,\r\n} from \"../../../../gql/Facturacion/Facturacion\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"80vh\",\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n}));\r\n\r\nexport default function ListaSeriesCDFI({ obtenerSeriesCdfi, refetch }) {\r\n  const classes = useStyles();\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { seriesCfdi } = obtenerSeriesCdfi;\r\n  const [modificarDefaultSerie] = useMutation(ACTUALIZAR_DEFAULT_SERIE);\r\n\r\n  const setPredeterminado = async (value, data) => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await modificarDefaultSerie({\r\n        variables: {\r\n          id: data._id,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.modificarDefaultSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Backdrop className={classes.backdrop} open={loading}>\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Serie</TableCell>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Predeterminado</TableCell>\r\n              <TableCell padding=\"checkbox\">Eliminar</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {seriesCfdi.map((row, index) => {\r\n              return (\r\n                <TableRow hover role=\"checkbox\" tabIndex={-1} key={index}>\r\n                  <TableCell>{row.serie}</TableCell>\r\n                  <TableCell>{row.folio}</TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    <Checkbox\r\n                      checked={row.default}\r\n                      onChange={(e) => setPredeterminado(e.target.checked, row)}\r\n                      name=\"checkedA\"\r\n                    />\r\n                  </TableCell>\r\n                  <TableCell align=\"center\" padding=\"checkbox\">\r\n                    {sesion.accesos.facturacion.registro_series_cdfi.eliminar === false ? (null) : (\r\n                      <ModalDeleteSerie\r\n                        row={row}\r\n                        refetch={refetch}\r\n                        setAlert={setAlert}\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst ModalDeleteSerie = ({ row, refetch, setAlert }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [eliminarSerie] = useMutation(ELIMINAR_SERIE);\r\n\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const eliminarSerieBD = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarSerie({\r\n        variables: {\r\n          id: row._id,\r\n        },\r\n      });\r\n      refetch();\r\n      setLoading(false);\r\n      handleClose();\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.eliminarSerie.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton aria-label=\"delete\" size=\"small\" onClick={() => handleOpen()} disabled={row.default}>\r\n        <DeleteIcon />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>Se eliminara esta serie</DialogTitle>\r\n        <DialogActions style={{ justifyContent: \"center\" }}>\r\n          <Button startIcon={<Close />} onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={loading ? <CircularProgress size={20} /> : <Done />}\r\n            onClick={() => eliminarSerieBD()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/factura-1.357d7c56.png\";","import React, { forwardRef, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Container,\r\n  Dialog,\r\n  makeStyles,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport RegistroSeries from \"./RegistroSeries\";\r\nimport ListaSeriesCDFI from \"./ListaSeries\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_SERIES } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport Factura1Icon from \"../../../../icons/Facturacion/factura-1.png\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function SeriesCDFI() {\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            mb={2}\r\n          >\r\n            <img\r\n              src={Factura1Icon}\r\n              alt=\"icono Factura\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Series CFDI\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Series para CFDI\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button color=\"secondary\" variant=\"contained\" onClick={handleClickOpen} size=\"large\">\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ContentSeriesCFDI />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentSeriesCFDI = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_SERIES, {\r\n    variables: {\r\n      sucursal: sesion.sucursal._id,\r\n      empresa: sesion.empresa._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerSeriesCdfi } = data;\r\n\r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Box my={2}>\r\n        {sesion.accesos.facturacion.registro_series_cdfi.agregar === false ? (null) : (\r\n          <RegistroSeries refetch={refetch} />\r\n        )}\r\n      </Box>\r\n      <ListaSeriesCDFI\r\n        obtenerSeriesCdfi={obtenerSeriesCdfi}\r\n        refetch={refetch}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n","import React, { Fragment } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport { FaRegFileCode, FaRegFilePdf } from \"react-icons/fa\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { Box, CircularProgress, Typography } from \"@material-ui/core\";\r\nimport InnerHTML from \"dangerously-set-html-content\";\r\n\r\nconst base64toBlob = (data, type) => {\r\n  const bytes = atob(data);\r\n  let length = bytes.length;\r\n  let out = new Uint8Array(length);\r\n\r\n  while (length--) {\r\n    out[length] = bytes.charCodeAt(length);\r\n  }\r\n\r\n  return new Blob([out], { type });\r\n};\r\n\r\nexport default function DetallesFacturaModal({\r\n  factura,\r\n  facturaBase64,\r\n  setOpen,\r\n  loading,\r\n}) {\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            height=\"70vh\"\r\n          >\r\n            <CircularProgress />\r\n            <Typography variant=\"h6\">Cargando...</Typography>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" startIcon={<Close />}>\r\n            Cerrar\r\n          </Button>\r\n          <Button startIcon={<FaRegFilePdf />} disabled>\r\n            PDF\r\n          </Button>\r\n          <Button startIcon={<FaRegFileCode />} disabled>\r\n            XML\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n\r\n  if (!facturaBase64 || !factura) {\r\n    return (\r\n      <Fragment>\r\n        <DialogContent>\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n            height=\"70vh\"\r\n          >\r\n            <ErrorPage />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" startIcon={<Close />}>\r\n            Cerrar\r\n          </Button>\r\n          <Button startIcon={<FaRegFilePdf />} disabled>\r\n            PDF\r\n          </Button>\r\n          <Button startIcon={<FaRegFileCode />} disabled>\r\n            XML\r\n          </Button>\r\n        </DialogActions>\r\n      </Fragment>\r\n    );\r\n  }\r\n  //decodificar base64 an html\r\n  var decodedHTML = window.atob(facturaBase64.htmlBase64);\r\n  //decodificar pdfBase64 a pdf\r\n  const blob_pdf = base64toBlob(facturaBase64.pdfBase64, \"application/pdf\");\r\n  const url_pdf = URL.createObjectURL(blob_pdf);\r\n\r\n  //decodificar xmlBase64 a xml\r\n  const blob_xml = base64toBlob(facturaBase64.xmlBase64, \"text/plain\");\r\n  const url_xml = URL.createObjectURL(blob_xml);\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <InnerHTML html={decodedHTML} />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"inherit\" startIcon={<Close />}>\r\n          Cerrar\r\n        </Button>\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<FaRegFilePdf />}\r\n          download={`CFDI ${factura.fecha_registro} ${factura.receiver.Name}`}\r\n          href={url_pdf}\r\n        >\r\n          PDF\r\n        </Button>\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<FaRegFileCode />}\r\n          download={`CFDI ${factura.fecha_registro} ${factura.receiver.Name}.xml`}\r\n          href={url_xml}\r\n        >\r\n          XML\r\n        </Button>\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport moment from \"moment\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\n\r\nconst columns = [\r\n  { label: \"Serie\", padding: \"checkbox\" },\r\n  { label: \"Folio\", padding: \"checkbox\" },\r\n  { label: \"Folio venta\", minWidth: 90 },\r\n  { label: \"Fecha\", minWidth: 90 },\r\n  { label: \"Tipo CDFI\", minWidth: 110 },\r\n  { label: \"M. de pago\", minWidth: 90 },\r\n  { label: \"F. de pago\", minWidth: 110 },\r\n  { label: \"Cliente\", minWidth: 100 },\r\n  { label: \"Parcialidad\", minWidth: 90 },\r\n  { label: \"Saldo anterior\", minWidth: 90 },\r\n  { label: \"Cantidad\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      \"& > *\": {\r\n        borderBottom: \"unset\",\r\n      },\r\n    },\r\n  }));\r\n\r\nexport default function ComplementosFactura({ data, open, handleSelectFactura }) {\r\n    const classes = useStyles();\r\n\r\n  return (\r\n    <TableRow>\r\n      <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={12}>\r\n        <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n          <Box margin={1}>\r\n            <Typography variant=\"h6\" gutterBottom component=\"div\">\r\n              Complementos de pago\r\n            </Typography>\r\n            <Table size=\"small\" aria-label=\"purchases\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  {columns.map((column, index) => (\r\n                    <TableCell\r\n                      key={index}\r\n                      /* align={column.align} */\r\n                      padding={column.padding}\r\n                      style={{ minWidth: column.minWidth }}\r\n                    >\r\n                      {column.label}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {data.complementos?.map((cfdi, index) => {\r\n                  return (\r\n                    <TableRow hover key={index} onClick={(e) => handleSelectFactura(e, cfdi)} className={data.complementos.length === index+1 ? classes.root : \"\"}>\r\n                      <TableCell>{cfdi.serie}</TableCell>\r\n                      <TableCell>{cfdi.folio}</TableCell>\r\n                      <TableCell>{cfdi.folio_venta}</TableCell>\r\n                      <TableCell>\r\n                        {moment(cfdi.fecha_registro).format(\"DD/MM/YYYY\")}\r\n                      </TableCell>\r\n                      <TableCell>{cfdi.cfdi_type}</TableCell>\r\n                      <TableCell>\r\n                        {\r\n                          cfdi.complement?.Payments[0]?.RelatedDocuments[0]\r\n                            ?.PaymentMethod\r\n                        }\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {cfdi.complement?.Payments[0]?.PaymentForm}\r\n                      </TableCell>\r\n                      <TableCell>{cfdi.receiver.Name}</TableCell>\r\n                      <TableCell>\r\n                        {\r\n                          cfdi.complement?.Payments[0]?.RelatedDocuments[0]\r\n                            ?.PartialityNumber\r\n                        }\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(cfdi.complement?.Payments[0]?.RelatedDocuments[0]\r\n                            ?.PreviousBalanceAmount)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${formatoMexico(cfdi.complement?.Payments[0]?.Amount)}\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </Box>\r\n        </Collapse>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n}\r\n","import React, { useState, Fragment } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, IconButton } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport moment from \"moment\";\r\nimport DetallesFacturaModal from \"./DetallesFacturaModal\";\r\nimport { OBTENER_DOCUMENTO_FACTURA } from \"../../../../gql/Facturacion/Facturacion\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport KeyboardArrowUpIcon from \"@material-ui/icons/KeyboardArrowUp\";\r\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\r\nimport ComplementosFactura from \"./TablaComplementosFactura\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst columns = [\r\n  { label: \"expand\", padding: \"checkbox\" },\r\n  { label: \"Serie\", padding: \"checkbox\" },\r\n  { label: \"Folio\", padding: \"checkbox\" },\r\n  { label: \"Folio venta\", minWidth: 90 },\r\n  { label: \"Fecha\", minWidth: 90 },\r\n  { label: \"Tipo CDFI\", minWidth: 110 },\r\n  { label: \"M. de pago\", minWidth: 90 },\r\n  { label: \"F. de pago\", minWidth: 110 },\r\n  { label: \"Cliente\", minWidth: 100 },\r\n  { label: \"Descuento\", minWidth: 90 },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"67vh\",\r\n  },\r\n  root: {\r\n    \"& > *\": {\r\n      borderBottom: \"unset\",\r\n    },\r\n  },\r\n  notas_credito: {\r\n    borderLeft: \" 6px solid #FFEAAD\",\r\n  },\r\n  complementos: {\r\n    borderLeft: \"6px solid #C0DEFF\"\r\n  }\r\n}));\r\n\r\nexport default function TablaFacturasFiltradas({\r\n  data,\r\n  page,\r\n  setPage,\r\n  refetch,\r\n  filtro,\r\n  limit,\r\n}) {\r\n  const classes = useStyles();\r\n  const [factura, setFactura] = useState();\r\n  const [facturaBase64, setFacturaBase64] = useState();\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: filtro,\r\n      offset: nextPage,\r\n    });\r\n  };\r\n\r\n  const handleSelectFactura = (e, factura) => {\r\n    if (e.detail === 2) {\r\n      setFactura(factura);\r\n      setOpen(true);\r\n      getDocumentCfdi(factura.id_cfdi);\r\n    }\r\n  };\r\n\r\n  //consultar documento cfdi\r\n  const client = useApolloClient();\r\n\r\n  const getDocumentCfdi = async (id) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: OBTENER_DOCUMENTO_FACTURA,\r\n        variables: {\r\n          id,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoading(false);\r\n      setFacturaBase64(response.data.obtenerDocumentCfdi);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => setOpen(false)}\r\n        aria-labelledby=\"detalles-factura-modal-title\"\r\n        fullWidth\r\n        maxWidth=\"md\"\r\n      >\r\n        <DialogTitle id=\"detalles-factura-modal-title\">\r\n          Detalles factura\r\n        </DialogTitle>\r\n        <DetallesFacturaModal\r\n          factura={factura}\r\n          facturaBase64={facturaBase64}\r\n          setOpen={setOpen}\r\n          loading={loading}\r\n        />\r\n      </Dialog>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={alert}\r\n        onClose={() => setAlert(false)}\r\n        message=\"Hubo un error al cargar los productos\"\r\n        autoHideDuration={3000}\r\n      />\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    padding={column.padding}\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.docs.map((data, index) => {\r\n                return (\r\n                  <RenderListFacturas\r\n                    key={index}\r\n                    data={data}\r\n                    handleSelectFactura={handleSelectFactura}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={data.totalDocs}\r\n          rowsPerPage={limit}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst RenderListFacturas = ({ data, handleSelectFactura }) => {\r\n  const [desplegar, setDesplegar] = useState(false);\r\n  const complement = data.complementos.length > 0 ? true : false;\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        hover\r\n        role=\"checkbox\"\r\n        tabIndex={-1}\r\n        onClick={(e) => handleSelectFactura(e, data)}\r\n        className={classes.root}\r\n      >\r\n        <TableCell className={data.tipo === \"NOTA_CREDITO\" ? classes.notas_credito : complement ? classes.complementos : null}>\r\n          {complement ? (\r\n            <IconButton\r\n              aria-label=\"expand row\"\r\n              size=\"small\"\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                setDesplegar(!desplegar);\r\n              }}\r\n            >\r\n              {desplegar ? (\r\n                <KeyboardArrowUpIcon style={{ fontSize: 18 }} />\r\n              ) : (\r\n                <KeyboardArrowDownIcon style={{ fontSize: 18 }} />\r\n              )}\r\n            </IconButton>\r\n          ) : null}\r\n        </TableCell>\r\n        <TableCell>{data.serie}</TableCell>\r\n        <TableCell>{data.folio}</TableCell>\r\n        <TableCell>{data.folio_venta}</TableCell>\r\n        <TableCell>\r\n          {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n        </TableCell>\r\n        <TableCell>{data.cfdi_type}</TableCell>\r\n        <TableCell>{data.payment_method.split(\"-\")[0]}</TableCell>\r\n        <TableCell>{data.payment_form.split(\"-\")[0]}</TableCell>\r\n        <TableCell>{data.receiver.Name}</TableCell>\r\n        <TableCell>${formatoMexico(data.discount)}</TableCell>\r\n        <TableCell>${formatoMexico(data.sub_total)}</TableCell>\r\n        <TableCell>${formatoMexico(data.total)}</TableCell>\r\n      </TableRow>\r\n      <ComplementosFactura\r\n        data={data}\r\n        open={desplegar}\r\n        handleSelectFactura={handleSelectFactura}\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\n/* import { formaPago } from \"../catalogos\"; */\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarFacturas({ data, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setValue(value);\r\n\r\n    if (!value) {\r\n      refetch({\r\n        limit: 20,\r\n        offset: 0,\r\n      });\r\n    } else {\r\n      refetch({\r\n        limit: 0,\r\n        offset: 0,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<RiFileExcel2Line />}\r\n        onClick={handleClickOpen}\r\n      >\r\n        Exportar Excel\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\r\n        <DialogTitle>{\"Exportar Facturas Realizadas\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            -Exportar pagina actual: exportará la pagina actual\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            -Exportar todo: exportará todos los registros filtrados\r\n          </DialogContentText>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => handleChange(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Contenido Actual</MenuItem>\r\n              <MenuItem value={1}>Todos los registros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <ExportarExcelAction datosExcel={data.docs} />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ datosExcel }) => {\r\n  const facturas = datosExcel.map((factura) => {\r\n    const {\r\n      serie,\r\n      folio,\r\n      folio_venta,\r\n      fecha_registro,\r\n      expedition_place,\r\n      cfdi_type,\r\n      payment_form,\r\n      payment_method,\r\n      issuer,\r\n      receiver,\r\n      taxes,\r\n      complement,\r\n      sub_total,\r\n      total,\r\n      discount,\r\n      tipo\r\n    } = factura;\r\n\r\n    const iva = taxes.filter((res) => res.Name === \"IVA\");\r\n    const ieps = taxes.filter((res) => res.Name === \"IEPS\");\r\n\r\n    const factura_realizada = {\r\n      serie,\r\n      folio,\r\n      folio_venta,\r\n      fecha_registro,\r\n      expedition_place,\r\n      cfdi_type,\r\n      tipo,\r\n      payment_form,\r\n      payment_method,\r\n      issuer: issuer.TaxName,\r\n      receiver: receiver.Name,\r\n      iva: iva.length ? iva[0].Total : 0,\r\n      ieps: ieps.length ? ieps[0].Total : 0,\r\n      satCertNumber: complement.TaxStamp.SatCertNumber,\r\n      sub_total: formatoMexico(sub_total),\r\n      total: formatoMexico(total),\r\n      discount: formatoMexico(discount),\r\n    };\r\n\r\n    return factura_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar\r\n        </Button>\r\n      }\r\n      filename=\"Facturas realizadas CAFI\"\r\n    >\r\n      <ExcelSheet data={facturas} name=\"Facturas realizadas CAFI\">\r\n        <ExcelColumn label=\"Serie\" value=\"serie\" />\r\n        <ExcelColumn label=\"Folio\" value=\"folio\" />\r\n        <ExcelColumn label=\"Folio de venta\" value=\"folio_venta\" />\r\n        <ExcelColumn label=\"Fecha\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Lugar de Expedición\" value=\"expedition_place\" />\r\n        <ExcelColumn label=\"tipo de documento\" value=\"tipo\" />\r\n        <ExcelColumn label=\"tipo de CFDI\" value=\"cfdi_type\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"payment_method\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"payment_form\" />\r\n        <ExcelColumn label=\"Emisor\" value=\"issuer\" />\r\n        <ExcelColumn label=\"Receptor\" value=\"receiver\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps\" />\r\n        <ExcelColumn label=\"Num. Certificado SAT\" value=\"satCertNumber\" />\r\n        <ExcelColumn label=\"Descuento\" value=\"discount\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"sub_total\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n};\r\n","import {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaFacturasFiltradas from \"./TablaFacturasFiltradas\";\r\nimport { formaPago } from \"../catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarFactuas from \"./ExportarFacturas\";\r\nimport { OBTENER_FACTURAS_REALIZADAS } from \"../../../../gql/Facturacion/Facturacion\";\r\n\r\nexport default function FiltrosFactura() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [page, setPage] = useState(0);\r\n  const limit = 20;\r\n  const [filtro, setFiltro] = useState({\r\n    fecha: \"\",\r\n    metodo_pago: \"\",\r\n    forma_pago: \"\",\r\n    busqueda: \"\",\r\n  });\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_FACTURAS_REALIZADAS,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        filtros: {\r\n          fecha: \"\",\r\n          metodo_pago: \"\",\r\n          forma_pago: \"\",\r\n          busqueda: \"\",\r\n        },\r\n        limit,\r\n        offset: 0,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error);\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerFacturas } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos\r\n          refetch={refetch}\r\n          data={obtenerFacturas}\r\n          filtro={filtro}\r\n          setFiltro={setFiltro}\r\n        />\r\n        <TablaFacturasFiltradas\r\n          data={obtenerFacturas}\r\n          page={page}\r\n          setPage={setPage}\r\n          filtro={filtro}\r\n          refetch={refetch}\r\n          limit={limit}\r\n        />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data, filtro, setFiltro }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [values] = useDebounce(filtro, 800);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro({\r\n      fecha: \"\",\r\n      metodo_pago: \"\",\r\n      forma_pago: \"\",\r\n      busqueda: \"\",\r\n    });\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filtros) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={3} sm={3}>\r\n          <Typography>Buscar por:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"busqueda\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Folio CFDi, Folio de venta, Cliente...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.busqueda}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3} sm={3}>\r\n          <Typography>Fecha Factura:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3} sm={3}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"PPD - Pago en parcialidades ó diferido\">\r\n                Pago en parcialidades ó diferido\r\n              </MenuItem>\r\n              <MenuItem value=\"PUE - Pago en una sola exhibición\">\r\n                Pago en parcialidades ó diferido\r\n              </MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={3} sm={3}>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={`${res.Value} - ${res.Name}`}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n      </Grid>\r\n      <Box display=\"flex\" alignItems=\"center\" my={1}>\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<ClearOutlined />}\r\n          onClick={() => limpiarFiltros()}\r\n        >\r\n          Limpiar filtros\r\n        </Button>\r\n        <Box mx={1} />\r\n        <ExportarFactuas data={data} refetch={refetch} />\r\n        <Box mx={1} />\r\n        <Box\r\n          border={1}\r\n          borderColor=\"#FFA91C\"\r\n          bgcolor=\"#FFEAAD\"\r\n          height=\"24px\"\r\n          width=\"24px\"\r\n        />\r\n        <Box mx={0.5} />\r\n        <Typography>\r\n          <b>Notas de crédito</b>\r\n        </Typography>\r\n        <Box mx={1} />\r\n        <Box\r\n          border={1}\r\n          borderColor=\"#52A3FF\"\r\n          bgcolor=\"#C0DEFF\"\r\n          height=\"24px\"\r\n          width=\"24px\"\r\n        />\r\n        <Box mx={0.5} />\r\n        <Typography>\r\n          <b>Con complementos de pago</b>\r\n        </Typography>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport FiltrosFactura from \"./FiltrosFactura\";\r\nimport Factura3Icon from \"../../../../icons/Facturacion/factura-3.png\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ComprasRealizadas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"center\"\r\n              alignItems=\"center\"\r\n              mb={2}\r\n            >\r\n              <img\r\n                src={Factura3Icon}\r\n                alt=\"icono Factura\"\r\n                style={{ width: 100 }}\r\n              />\r\n            </Box>\r\n          </Box>\r\n          CFDis realizados\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              CFDis realizados\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClose}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <FiltrosFactura />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","export default \"data:image/png;base64,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\"","import React from \"react\";\r\n\r\nimport { Box, Container, Grid } from \"@material-ui/core\";\r\n\r\nimport NuevaFactura from \"./NuevaFactura/NuevaFactura\";\r\nimport SeriesCDFI from \"./CFDISeries/SeriesCdfi\";\r\n/* import SellosCDFI from './CFDISellos/SellosCdfi'; */\r\nimport FacturasRealizadas from \"./FacturasRealizadas/FacturasRealizadas\";\r\n\r\nexport default function Facturacion() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <div>\r\n      <Container>\r\n        <Grid container spacing={2} justifyContent=\"center\">\r\n          {sesion.accesos.facturacion.generar_cdfi.ver === false ? null : (\r\n            <Grid item lg={2}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <NuevaFactura />\r\n              </Box>\r\n            </Grid>\r\n          )}\r\n          {sesion.accesos.facturacion.cdfi_realizados.ver === false ? null : (\r\n            <Grid item lg={2}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <FacturasRealizadas />\r\n              </Box>\r\n            </Grid>\r\n          )}\r\n          {/* \r\n                    <Grid item lg={2}>\r\n                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                            <SellosCDFI />\r\n                        </Box>\r\n                    </Grid> */}\r\n          {sesion.accesos.facturacion.registro_series_cdfi.ver ===\r\n          false ? null : (\r\n            <Grid item lg={2}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <SeriesCDFI />\r\n              </Box>\r\n            </Grid>\r\n          )}\r\n        </Grid>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { ELIMINAR_ALMACEN } from \"../../../../gql/Almacenes/Almacen\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarAlmacen({ datos, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n  const [eliminarAlmacen] = useMutation(ELIMINAR_ALMACEN);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleDeleteAlmacen = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const result = await eliminarAlmacen({\r\n        variables: {\r\n          id: datos._id,\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setAlert({\r\n        message: result.data.eliminarAlmacen.message,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({ message: error.message, status: \"error\", open: true });\r\n        handleClose();\r\n        return;\r\n      }\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      handleClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"secondary\" onClick={handleClickOpen} disabled={datos.default_almacen}>\r\n        <Delete />\r\n      </IconButton>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        aria-labelledby=\"eliminarAlmacen-dialog\"\r\n      >\r\n        <DialogTitle id=\"eliminarAlmacen-dialog\">\r\n          ¿Estás seguro de eliminar esto?\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" disabled={loading}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            onClick={handleDeleteAlmacen}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress color=\"inherit\" size={20} /> : null\r\n            }\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport {\r\n  Paper,\r\n  makeStyles,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  CircularProgress,\r\n  Box,\r\n  Typography,\r\n} from \"@material-ui/core/\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_ALMACENES } from \"../../../../gql/Almacenes/Almacen\";\r\nimport ContainerRegistroAlmacen from \"./ContainerRegistroAlmacen\";\r\nimport { CrearAlmacenContext } from \"../../../../context/Almacenes/crearAlmacen\";\r\nimport EliminarAlmacen from \"./EliminarAlmacen\";\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n  root: {\r\n    width: \"100%\",\r\n    heigth: \"75%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"77vh\",\r\n    \"& ::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n  },\r\n});\r\n\r\nconst columns = [\r\n  { id: 1, label: \"Nombre\", minWidth: 100 },\r\n  { id: 2, label: \"Encargado\", minWidth: 100 },\r\n  { id: 3, label: \"Sucursal\", minWidth: 150 },\r\n  { id: 13, label: \"Editar\", minWidth: 50, align: \"right\" },\r\n  { id: 14, label: \"Eliminar\", minWidth: 50, align: \"right\" },\r\n];\r\n\r\nexport default function ListaAlmacen() {\r\n  const classes = useStyles();\r\n  const { update } = useContext(CrearAlmacenContext);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_ALMACENES, {\r\n    variables: {\r\n      id: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [update, refetch]);\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerAlmacenes } = data;\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer component={Paper} className={classes.container}>\r\n        <Table className={classes.table} aria-label=\"a dense table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell key={column.id} align={column.align}>\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerAlmacenes.map((row, index) => {\r\n                return <RowsRender key={index} datos={row} refetch={refetch}  />;\r\n              })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsRender = ({ datos, refetch }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  return (\r\n    <TableRow hover role=\"checkbox\" tabIndex={-1}>\r\n      <TableCell>\r\n        <Typography>{datos.nombre_almacen}</Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>\r\n          {!datos.id_usuario_encargado\r\n            ? \"Sin encargado\"\r\n            : datos.id_usuario_encargado.nombre}\r\n        </Typography>\r\n      </TableCell>\r\n      <TableCell>\r\n        <Typography>{datos.id_sucursal.nombre_sucursal}</Typography>\r\n      </TableCell>\r\n      <TableCell width={50}>\r\n        {sesion.accesos.almacenes.almacen.editar === false ? null : (\r\n          <ContainerRegistroAlmacen accion=\"actualizar\" datos={datos} />\r\n        )}\r\n      </TableCell>\r\n      <TableCell width={50}>\r\n        {sesion.accesos.almacenes.almacen.eliminar === false ? null : (\r\n          <EliminarAlmacen datos={datos} refetch={refetch} />\r\n        )}\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { forwardRef } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Slide,\r\n  Button,\r\n  Box,\r\n  Dialog,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { FcPlus } from \"react-icons/fc\";\r\nimport ContainerRegistroAlmacen from \"./ContainerRegistroAlmacen\";\r\nimport ListaAlmacen from \"./ListaAlmacen\";\r\n\r\nimport { AlmacenProvider } from \"../../../../context/Almacenes/crearAlmacen\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function RegistroAlmacen() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <AlmacenProvider>\r\n        <Button fullWidth onClick={handleClickOpen}>\r\n          <Box display=\"flex\" flexDirection=\"column\">\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n              <FcPlus className={classes.icon} />\r\n            </Box>\r\n            Almacenes\r\n          </Box>\r\n        </Button>\r\n        <Dialog\r\n          fullScreen\r\n          open={open}\r\n          onClose={handleClose}\r\n          TransitionComponent={Transition}\r\n        >\r\n          <AppBar className={classes.appBar}>\r\n            <Toolbar>\r\n              <Typography variant=\"h6\" className={classes.title}>\r\n                Agregar almacen\r\n              </Typography>\r\n              <Box m={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClose}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Toolbar>\r\n          </AppBar>\r\n          <Box m={3} display=\"flex\" justifyContent=\"flex-end\">\r\n            {sesion.accesos.almacenes.almacen.agregar === false ? null : (\r\n              <ContainerRegistroAlmacen accion=\"registrar\" />\r\n            )}\r\n          </Box>\r\n          <Box mx={4}>\r\n            <ListaAlmacen />\r\n          </Box>\r\n        </Dialog>\r\n      </AlmacenProvider>\r\n    </div>\r\n  );\r\n}\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const TraspasosAlmacenContext = createContext();\r\n\r\nexport const TraspasosProvider = ({ children }) => {\r\n\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ openRegistro, setOpenRegistro ] = useState(false);\r\n    const [ productos, setProductos ] = useState([]);\r\n    const [ productosTo, setProductosTo ] = useState([]);\r\n     const [ productosEmpTo, setProductosEmpTo ] = useState([]);\r\n    const [ productosTras, setProductosTras ] = useState([]);\r\n    const [ dataExcel, setDataExcel ] = useState([]);\r\n\r\n\treturn (\r\n\t\t<TraspasosAlmacenContext.Provider value={\r\n            { \r\n                \r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                openRegistro,\r\n                setOpenRegistro,\r\n                productos,\r\n                setProductos,\r\n                productosTras,\r\n                setProductosTras,\r\n                productosTo,\r\n                setProductosTo,\r\n                productosEmpTo, \r\n                setProductosEmpTo,\r\n                dataExcel,\r\n                setDataExcel\r\n                \r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</TraspasosAlmacenContext.Provider>\r\n\t);\r\n};\r\n","import React, { Fragment, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n//import { RegProductoContext } from \"../../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Box, Chip, IconButton, Tooltip, Zoom } from \"@material-ui/core\";\r\nimport { Cached, Close, Edit } from \"@material-ui/icons\";\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {},\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({\r\n  productoData,\r\n  datos,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  setNew_medidas,\r\n}) {\r\n  const classes = useStyles();\r\n  //const { presentaciones, setPresentaciones } = useContext([]);\r\n  //let mostrar_presentaciones = [];\r\n\r\n  /* let mostrar_presentaciones = [...datos].sort((a, b) => compareFunction(a, b)); */\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell padding=\"checkbox\">Precio</TableCell>\r\n                {/* <TableCell padding=\"checkbox\">Descuento</TableCell> */}\r\n                {/* {!onlyPrice ? (\r\n                  <Fragment>\r\n                    <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                  </Fragment>\r\n                ) : null} */}\r\n                <Fragment>\r\n                  <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                </Fragment>\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datos.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    productoData={productoData}\r\n                    producto={producto}\r\n                    index={index}\r\n                    datos={datos}\r\n                    setNew_medidas={setNew_medidas}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  productoData,\r\n  producto,\r\n  index,\r\n  datos,\r\n  setNew_medidas,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n  withoutPrice,\r\n  onlyPrice,\r\n}) => {\r\n  /* const { presentaciones, setPresentaciones, preciosP } = useContext(\r\n    RegProductoContext\r\n  ); */\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...datos].sort((a, b) => compareFunction(a, b));\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  //const copy_element_presentacion = {  };\r\n  //const copy_element_presentacion_descuento = { ...copy_presentaciones[index].descuento };\r\n  const copy_element_presentacion_descuento = {};\r\n  const copy_producto = { ...producto };\r\n\r\n  /* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.medida.cantidad) {\r\n      copy_element_presentacion.medida.cantidad = 0;\r\n    }\r\n    if (!copy_producto.nuevaCantidad) {\r\n      copy_element_presentacion.nuevaCantidad = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = copy_producto.precio;\r\n      //copy_element_presentacion.medida.precio = 0;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setNew_medidas(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { name, value } = e.target;\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.cantidad = \"\";\r\n        copy_element_presentacion.medida.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(setNew_medidas);\r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.cantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"nuevaCantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.nuevaCantidad = \"\";\r\n        copy_element_presentacion.medida.existencia =\r\n          copy_producto.medida.existencia;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.nuevaCantidad = parseFloat(value);\r\n      copy_element_presentacion.medida.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n\r\n      let precio_neto = parseFloat(value);\r\n      let { iva, ieps } = productoData.precios;\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`) +\r\n        parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n      let precio_venta = parseFloat(\r\n        (precio_neto / (suma_impuestos + 1))\r\n      );\r\n      let iva_precio = parseFloat(\r\n        (precio_venta * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`))\r\n      );\r\n      let ieps_precio = parseFloat(\r\n        (\r\n          precio_venta * parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        )\r\n      );\r\n      let PUCSI =\r\n        productoData.precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat(\r\n        (((precio_venta - PUCSI) / PUCSI) * 100)\r\n      );\r\n\r\n      let { descuento_activo, descuento } = copy_element_presentacion;\r\n      if (descuento_activo && descuento_activo === true) {\r\n        let new_precio_venta_desc = (precio_venta * descuento.porciento) / 100;\r\n        let new_iva_precio =\r\n          new_precio_venta_desc * parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`);\r\n        let new_ieps_precio =\r\n          new_precio_venta_desc *\r\n          parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`);\r\n        let new_impuestos = new_iva_precio + new_ieps_precio;\r\n        let precio_con_descuento = new_precio_venta_desc + new_impuestos;\r\n\r\n        copy_element_presentacion_descuento.precio_neto = parseFloat(\r\n          precio_con_descuento.toFixed(2)\r\n        );\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento;\r\n      } else {\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      }\r\n\r\n      copy_element_presentacion.medida.precio_unidad.precio_venta = parseFloat(precio_venta.toFixed(2));\r\n      copy_element_presentacion.medida.precio_unidad.precio_neto = parseFloat(precio_neto.toFixed(2));\r\n      copy_element_presentacion.medida.precio_unidad.utilidad = parseFloat(utilidad.toFixed(2));\r\n      copy_element_presentacion.medida.precio_unidad.iva_precio = parseFloat(iva_precio.toFixed(2));\r\n      copy_element_presentacion.medida.precio_unidad.ieps_precio = parseFloat(ieps_precio.toFixed(2));\r\n    } else if (name === \"descuento\") {\r\n      /* if (!value) {\r\n        copy_element_presentacion.medida.precio = 0;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      if(copy_element_presentacion.medida.descuento_activo && copy_element_presentacion.medida.descuento_activo === true){\r\n        let precio_con_descuento = Math.round(\r\n          (value * copy_element_presentacion.medida.descuento.porciento) / 100\r\n        );\r\n        copy_element_presentacion_descuento.medida.precio_con_descuento = parseFloat(precio_con_descuento);\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n        copy_element_presentacion.medida.descuento = copy_element_presentacion_descuento\r\n      }else{\r\n        copy_element_presentacion.medida.precio = parseFloat(value);\r\n      } */\r\n      copy_element_presentacion.medida.descuento = value;\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.medida.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setNew_medidas(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.medida.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n\r\n    setNew_medidas(copy_presentaciones);\r\n    //console.log(copy_presentaciones)\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.medida.codigo_barras = codigo_barras;\r\n    /*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); */\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  /*  const aplicarDescuento = (value) => {\r\n    copy_element_presentacion.medida.descuento_activo = value;\r\n/*     copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones); \r\n  }; */\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\" padding=\"checkbox\">\r\n        <Checkbox checked={copy_producto.medida.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.medida.codigo_barras}\r\n            type=\"number\"\r\n            name=\"codigo_barras\"\r\n            disabled={\r\n              datos.medidas_registradas && !copy_producto.medida.nuevo\r\n                ? true\r\n                : disabledInput\r\n            }\r\n          />\r\n          {!datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : datos.medidas_registradas && copy_producto.medida.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.medida.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.medida._id ? (\r\n          <Chip label={copy_producto.medida.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.medida.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.medida.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n\r\n      <Fragment>\r\n        <TableCell width={110}>\r\n          <Input\r\n            inputRef={textfield}\r\n            inputMode=\"numeric\"\r\n            type=\"number\"\r\n            onChange={(e) => obtenerDatos(e)}\r\n            disabled={disabledInput}\r\n            value={copy_producto.medida.precio}\r\n            name=\"precio\"\r\n          />\r\n        </TableCell>\r\n        {/*  <TableCell>\r\n              <Input\r\n                inputRef={textfield}\r\n                onChange={(e) => obtenerDatos(e)}\r\n                disabled={disabledInput}\r\n                value={copy_producto.medida.descuento}\r\n                type=\"tel\"\r\n                name=\"descuento\"\r\n              />\r\n            </TableCell> */}\r\n        <TableCell padding=\"checkbox\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            disabled={disabledInput}\r\n            value={copy_producto.nuevaCantidad}\r\n            type=\"tel\"\r\n            name=\"nuevaCantidad\"\r\n          />\r\n        </TableCell>\r\n      </Fragment>\r\n\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { Typography, Tooltip } from \"@material-ui/core\";\r\n\r\nimport { Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentacionesNotOrigen from \"./TablePresentacionesNotOrigen\";\r\nimport CrearColorProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearColor\";\r\nimport CrearTallasProducto from \"../../pages/sucursales/Catalogos/Producto/TallasColores/crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\nexport default function ColoresTallas({\r\n  producto,\r\n  new_medidas,\r\n  setNew_medidas,\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n\r\n  \r\n  const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n  const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n  /* const medidas =\r\n    producto.datos_generales.tipo_producto === \"ROPA\" ? [...obtenerConsultasProducto.tallas] : [...obtenerConsultasProducto.calzados]; */\r\n\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n  //console.log(data.obtenerConsultasProducto)\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n\r\n    let copy_presentaciones = [...new_medidas];\r\n\r\n    //const copy_presentaciones = [];\r\n    /* Queries */\r\n\r\n    copy_presentaciones.forEach((element) => {\r\n      //console.log('obtenerColoresSeleccinados', element)\r\n      if (element.medida.color._id) colors.push(element.medida.color);\r\n      if (element.medida.medida._id) medidas.push(element.medida.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n    //console.log('colores_existentes', colores_existentes, 'medidas_existentes', medidas_existentes)\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n  }, [new_medidas, setColoresSeleccionados, setMedidasSeleccionadas]);\r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n  \r\n\r\n  return (\r\n    <div>\r\n     \r\n      <Box alignContent=\"center\" m={5} mt={1}>\r\n        <Grid container spacing={4}>\r\n          {/*  {!datos.medidas_registradas ? (\r\n            <Grid item md={4}>\r\n              <Box width=\"100%\">\r\n                <Typography>Almacen</Typography>\r\n                <Box display=\"flex\">\r\n                  <FormControl\r\n                    disabled={presentaciones.length === 0 || from === \"compra\"}\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"almacen\"\r\n                    error={\r\n                      presentaciones.length > 0 && !almacen_inicial.almacen\r\n                    }\r\n                  >\r\n                    \r\n                    {presentaciones.length > 0  ? (\r\n                      <FormLabel>* Campo obligatorio</FormLabel>\r\n                    ) : null}\r\n                  </FormControl>\r\n            \r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n          ) : null} */}\r\n\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>\r\n                  {producto.datos_generales.tipo_producto === \"ROPA\"\r\n                    ? \"Talla\"\r\n                    : \"Número\"}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <CrearTallasProducto\r\n                  tipo_producto={producto.datos_generales.tipo_producto}\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  refetch={refetch}\r\n                />\r\n              </Box>\r\n              {producto.datos_generales.tipo_producto === \"ROPA\" ? (\r\n                obtenerConsultasProducto.tallas !== undefined ? (\r\n                  <Grid container>\r\n                    {obtenerConsultasProducto.tallas.map((talla, index) => (\r\n                      <RenderTallas\r\n                        producto={producto}\r\n                        key={index}\r\n                        talla={talla}\r\n                        coloresSeleccionados={coloresSeleccionados}\r\n                        medidasSeleccionadas={medidasSeleccionadas}\r\n                        setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                        datos={new_medidas}\r\n                        setNew_medidas={setNew_medidas}\r\n                      />\r\n                    ))}\r\n                  </Grid>\r\n                ) : (\r\n                  <div />\r\n                )\r\n              ) : obtenerConsultasProducto.calzados !== undefined ? (\r\n                <Grid container>\r\n                  {obtenerConsultasProducto.calzados.map((talla, index) => (\r\n                    <RenderTallas\r\n                      producto={producto}\r\n                      key={index}\r\n                      talla={talla}\r\n                      coloresSeleccionados={coloresSeleccionados}\r\n                      medidasSeleccionadas={medidasSeleccionadas}\r\n                      setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                      datos={new_medidas}\r\n                      setNew_medidas={setNew_medidas}\r\n                    />\r\n                  ))}\r\n                </Grid>\r\n              ) : (\r\n                <div />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            <Box\r\n              width=\"100%\"\r\n              style={\r\n                onUpdate.length > 0\r\n                  ? {\r\n                      pointerEvents: \"none\",\r\n                      opacity: 0.4,\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Typography>Color</Typography>\r\n                <Box mx={1} />\r\n                <CrearColorProducto refetch={refetch} />\r\n              </Box>\r\n              {obtenerConsultasProducto.colores !== undefined ? (\r\n                <Grid container>\r\n                  {obtenerConsultasProducto.colores.map((color, index) => (\r\n                    <Colores\r\n                      producto={producto}\r\n                      key={index}\r\n                      color={color}\r\n                      coloresSeleccionados={coloresSeleccionados}\r\n                      setColoresSeleccionados={setColoresSeleccionados}\r\n                      medidasSeleccionadas={medidasSeleccionadas}\r\n                      datos={new_medidas}\r\n                      setNew_medidas={setNew_medidas}\r\n                    />\r\n                  ))}\r\n                </Grid>\r\n              ) : (\r\n                <div />\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={2} />\r\n        <TablaPresentacionesNotOrigen\r\n          productoData={producto}\r\n          datos={new_medidas}\r\n          setOnUpdate={setOnUpdate}\r\n          onUpdate={onUpdate}\r\n          setNew_medidas={setNew_medidas}\r\n        />\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  producto,\r\n  talla,\r\n  coloresSeleccionados,\r\n  setMedidasSeleccionadas,\r\n  medidasSeleccionadas,\r\n  setNew_medidas,\r\n  datos,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  /*  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext); */\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarMedidas = useCallback(() => {\r\n    medidasSeleccionadas.forEach((res) => {\r\n      if (res._id === talla._id) setSelected(true);\r\n    });\r\n  }, [talla._id, medidasSeleccionadas]);\r\n\r\n  useEffect(() => {\r\n    if (datos) {\r\n      return seleccionarMedidas();\r\n    }\r\n  }, [datos, seleccionarMedidas]);\r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n    //console.log('handleAddTallas', datos)\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n          /*     presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    const { iva, ieps } = producto.precios;\r\n    //const array_medidad_finales = [];\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let iva_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        presentacion_temp.push({\r\n          medida: {\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: producto.datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            //precios: producto.precios,\r\n            precio: producto.precios.precios_producto[0].precio_neto,\r\n            cantidad: 0,\r\n            //nuevo: true\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n              precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: producto.precios.precios_producto[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          },\r\n\r\n          nuevaCantidad: 0,\r\n        });\r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.medida._id === producto_medida._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: { nombre: \"\", hex: \"\" },\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            },\r\n\r\n            nuevaCantidad: 0,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial:\r\n                array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: medidas_seleccionadas_temp[k],\r\n              color: array_medidad_finales[i].medida.color,\r\n              //precios:producto.precios,\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n              //nuevo: true\r\n              precio_unidad: array_medidad_finales[i].medida.precio_unidad,\r\n            },\r\n\r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            //console.log('YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL' , array_medidad_finales, producto_medida, producto_color)\r\n            presentacion_temp.push({\r\n              medida: {\r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                //precios:producto.precios,\r\n                precio: producto.precios.precios_producto[0].precio_neto,\r\n                cantidad: 0,\r\n                precio_unidad: {\r\n                  numero_precio: 1,\r\n                  precio_venta:\r\n                    producto.precios.precios_producto[0].precio_venta,\r\n                  precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                  unidad_mayoreo: 0,\r\n                  iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                  ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                  utilidad: producto.precios.precios_producto[0].utilidad,\r\n                  unidad_maxima: false,\r\n                },\r\n              },\r\n              nuevaCantidad: 0,\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: objeto_presentaciones_final.medida.existencia,\r\n              codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n              nombre_comercial:\r\n                objeto_presentaciones_final.medida.nombre_comercial,\r\n              medida: objeto_presentaciones_final.medida.medida,\r\n              color: objeto_presentaciones_final.medida.color,\r\n              //precios:producto.precios,\r\n              precio: objeto_presentaciones_final.medida.precio,\r\n              cantidad: objeto_presentaciones_final.medida.cantidad,\r\n              //nuevo: true\r\n              precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n            },\r\n\r\n            nuevaCantidad: objeto_presentaciones_final.nuevaCantidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n      <Tooltip\r\n        title={talla.talla}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          noWrap\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </Tooltip>  \r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  producto,\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n  datos,\r\n  setNew_medidas,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  const seleccionarColores = useCallback(() => {\r\n    coloresSeleccionados.forEach((res) => {\r\n      if (res._id === color._id) setSelected(true);\r\n    });\r\n  }, [color._id, coloresSeleccionados]);\r\n\r\n  useEffect(() => {\r\n    if (producto) {\r\n      return seleccionarColores();\r\n    }\r\n  }, [producto, seleccionarColores]);\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n          /*  new_medidas.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          }); */\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...datos];\r\n    const { iva, ieps } = producto.precios;\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        let iva_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        presentacion_temp.push({\r\n          medida: {\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: producto.datos_generales.nombre_comercial,\r\n            medida: {},\r\n            color: producto_color,\r\n            //precios:producto.precios,\r\n            precio: producto.precios.precios_producto[0].precio_neto,\r\n            cantidad: 0,\r\n            //nuevo: true\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n              precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: producto.precios.precios_producto[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          },\r\n\r\n          nuevaCantidad: 0,\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida.color._id === producto_color._id\r\n        );\r\n        let iva_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          producto.precios.precios_producto[0].precio_venta *\r\n            parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: producto.datos_generales.nombre_comercial,\r\n              medida: {},\r\n              color: producto_color,\r\n              //precios:producto.precios,\r\n              precio: producto.precios.precios_producto[0].precio_neto,\r\n              cantidad: 0,\r\n              //nuevo: true\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: producto.precios.precios_producto[0].precio_venta,\r\n                precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: producto.precios.precios_producto[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            },\r\n\r\n            nuevaCantidad: 0,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: array_medidad_finales[i].medida.existencia,\r\n              codigo_barras: array_medidad_finales[i].medida.codigo_barras,\r\n              nombre_comercial:\r\n                array_medidad_finales[i].medida.nombre_comercial,\r\n              medida: array_medidad_finales[i].medida.medida,\r\n              color: coloresSeleccionados[k],\r\n              precio: array_medidad_finales[i].medida.precio,\r\n              cantidad: array_medidad_finales[i].medida.cantidad,\r\n\r\n              //nuevo: true\r\n              precio_unidad: array_medidad_finales[i].medida.precio_unidad,\r\n            },\r\n\r\n            nuevaCantidad: array_medidad_finales[i].nuevaCantidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.medida.color._id\r\n          );\r\n          let iva_precio = parseFloat(\r\n            producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${iva < 10 ? `0${iva}` : iva}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            producto.precios.precios_producto[0].precio_venta *\r\n              parseFloat(`0.${ieps < 10 ? `0${ieps}` : ieps}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              medida: {\r\n                existencia: false,\r\n                codigo_barras: GenCodigoBarras(),\r\n                nombre_comercial: producto.datos_generales.nombre_comercial,\r\n                medida: producto_medida,\r\n                color: producto_color,\r\n                // precios:producto.precios,\r\n                precio: producto.precios.precios_producto[0].precio_neto,\r\n                cantidad: 0,\r\n                //nuevo: true\r\n                precio_unidad: {\r\n                  numero_precio: 1,\r\n                  precio_venta:\r\n                    producto.precios.precios_producto[0].precio_venta,\r\n                  precio_neto: producto.precios.precios_producto[0].precio_neto,\r\n                  unidad_mayoreo: 0,\r\n                  iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                  ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                  utilidad: producto.precios.precios_producto[0].utilidad,\r\n                  unidad_maxima: false,\r\n                },\r\n              },\r\n\r\n              nuevaCantidad: 0,\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            medida: {\r\n              existencia: objeto_presentaciones_final.medida.existencia,\r\n              codigo_barras: objeto_presentaciones_final.medida.codigo_barras,\r\n              nombre_comercial:\r\n                objeto_presentaciones_final.medida.nombre_comercial,\r\n              medida: objeto_presentaciones_final.medida.medida,\r\n              color: { nombre: \"\", hex: \"\" },\r\n              // precios:producto.precios,\r\n              precio: objeto_presentaciones_final.medida.precio,\r\n              cantidad: objeto_presentaciones_final.medida.cantidad,\r\n              //nuevo: true\r\n              precio_unidad: objeto_presentaciones_final.medida.precio_unidad,\r\n            },\r\n\r\n            nuevaCantidad: objeto_presentaciones_final.nuevaCantidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setNew_medidas(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected, color)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { useContext,  useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {  Chip,  Tooltip, Zoom , TextField} from '@material-ui/core';\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\n\r\n/* const compareFunction = (a, b) => {\r\n\tif (a.medida.talla && b.medida.talla) {\r\n\t\treturn a.medida.talla.localeCompare(b.medida.talla);\r\n\t}\r\n}; */\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\talignSelf:'center',\r\n\t\twidth:'90%',\r\n\t\tpaddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n\t\t\r\n\t},\r\n\tpaper: {\r\n\t\twidth: '100%',\r\n\t\tmarginBottom: theme.spacing(2)\r\n\t},\r\n\ttable: {\r\n\t\t\r\n\t\tminWidth: '100%',\r\n\t\tmaxWidth: '100%',\r\n\t\t\r\n\t},\r\n\t\r\n\ttableRow: {\r\n    \r\n\t\t'&.Mui-selected, &.Mui-selected:hover': {\r\n\t\t\tbackgroundColor: fade(theme.palette.primary.main, 0.1)\r\n\t\t}\r\n\t},\r\n    cell:{\r\n       align:'center'     \r\n    },\r\n\tvisuallyHidden: {\r\n\t\tborder: 0,\r\n\t\tclip: 'rect(0 0 0 0)',\r\n\t\theight: 1,\r\n\t\tmargin: -1,\r\n\t\toverflow: 'hidden',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 20,\r\n\t\twidth: 1\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: '1px solid rgba(0,0,0, .3)',\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: '15%'\r\n\t}\r\n}));\r\n\r\n\r\n/* function stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n} */\r\n\r\n/* function descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n} */\r\n\r\n/* function getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n} */\r\n\r\nexport default function TablaPresentaciones({ producto, setOnUpdate, onUpdate, new_medidas, setNew_medidas }) {\r\n  const classes = useStyles();\r\n \r\n \r\n\r\n/*  \r\nconst handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n}; */\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<TableContainer style={{height:400}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell >Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Cantidad existente</TableCell>\r\n                                <TableCell >Cantidad a traspasar</TableCell>\r\n                            </TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{/* {stableSort(producto.medidas_producto, getComparator(order, orderBy))\r\n                \t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((item, index) => { */}\r\n\t\t\t\t\t\t\t{producto.medidas_producto.map((item, index) => {\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<RenderPresentacionesRows\r\n\t\t\t\t\t\t\t\t\t\tidProducto={producto._id}\r\n\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\tmedida={item}\r\n\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\tsetOnUpdate={setOnUpdate}\r\n\t\t\t\t\t\t\t\t\t\tonUpdate={onUpdate}\r\n\t\t\t\t\t\t\t\t\t\tnew_medidas={new_medidas}\r\n\t\t\t\t\t\t\t\t\t\tsetNew_medidas={setNew_medidas}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[5, 10, 25]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={producto.medidas_producto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\t// onRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\nconst RenderPresentacionesRows = ({ medida, index, setOnUpdate, onUpdate,new_medidas, setNew_medidas, idProducto}) => {\r\n\r\n\tconst [ disabledInput, setDisabledInput ] = useState(true);\r\n\tconst classes = useStyles();\r\n\tconst [ cantidad, setCantidad ] = useState(0);\r\n\tconst [ cantidadAnt, setCantidadAnt ] = useState(0);\r\n\tconst copy_medida = { ...medida };\r\n\tconst {productosTras} = useContext(TraspasosAlmacenContext);\r\n\t//const [productInTras, setProductInTras] =  useState(null);\r\n\t//let productInTras = null;\r\n\t//let productInTras = productosTras.find(element => element.product_selecteded._id === idProducto);\r\n\t//const productosTrasContext = productosTras;\r\n \r\n\tuseEffect(() => {\r\n\t\tproductosTras.forEach(producto => {\r\n\t\t\t//console.log(\"SELECTMEDIDAS\",producto)\r\n\r\n\t\tif(producto.product_selected._id === idProducto){\r\n\t\t\tlet new_medidasCopia = [];\r\n\t\t\tlet element = null;\r\n\t\t\r\n\t\t\tfor (const med in producto.new_medidas) {\r\n\t\t\t\tif (Object.hasOwnProperty.call(producto.new_medidas, med)) {\r\n\t\t\t\t\telement = producto.new_medidas[med];\r\n\t\t\t\t\tnew_medidasCopia.push(element)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(medida._id === element.medida._id){\r\n\t\t\t\t\t\tsetCantidad( element.nuevaCantidad);\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetNew_medidas(producto.new_medidas);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t});\r\n\t\treturn () => {\r\n\t\t\t<div/>\r\n\t\t}\r\n\t}, [productosTras])\r\n\t\r\n\r\n\r\n\t\r\n\r\n\t/* if(from && from === 'compra'){\r\n\t\tcopy_producto.cantidad_nueva = 0\r\n\t} */\r\n\t\r\n\tconst obtenerDatos = (value) => {\r\n\t\tlet cant = (cantidadAnt > 0) ? parseInt(value - cantidadAnt)   : value;\r\n\t\t//console.log(\"CANT\",cantidad)\r\n\r\n\t\tif(cant <= medida.cantidad){\r\n\t\t\tsetCantidad(value);\r\n\t\t\r\n\t\t\tsetNew_medidas({...new_medidas, [index] : {medida:medida, nuevaCantidad: parseInt(cant)}})\r\n\t\t}\r\n\t\t/* \r\n\t\tconst unidades = {cantidad:} \r\n\t\tcopy_producto.push() */\r\n\t\t//Tengo que obtener los datos que se van a enviar se debe agregar un elemento al array \r\n\t\t\r\n\t\t//setPresentaciones(copy_presentaciones);\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<TableRow  selected={!disabledInput} className={classes.tableRow} >\r\n\t\t\t<TableCell >\r\n\t\t\t\t{copy_medida.medida._id ? <Chip label={copy_medida.medida.talla} color=\"primary\" /> : ''}\r\n\t\t\t</TableCell>\r\n\t\t\t<TableCell  style={{width:'20%'}}>\r\n\t\t\t\t{copy_medida.color._id ? (\r\n\t\t\t\t\t<Tooltip title={copy_medida.color.nombre} placement=\"top\" arrow TransitionComponent={Zoom}>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: copy_medida.color.hex\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t) : null}\r\n\t\t\t</TableCell>\r\n\t\t\t\r\n\t\t\r\n\t\t\t<TableCell className={classes.cell}  style={{width:'25%'}}>\r\n\t\t\t\t{medida.cantidad}\r\n\t\t\t</TableCell>\r\n\t\t \r\n\t\t\t<TableCell  style={{width:'25%'}}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tInputProps={{ inputProps: { min: 0 } }}\r\n\t\t\t\t\tinputMode=\"numeric\"\r\n\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\tvalue={cantidad}\r\n\t\t\t\t\tonChange={(value) => obtenerDatos(value.target.value)}\r\n\t\t\t\t\tname=\"nuevaCantidad\"\r\n\t\t\t\t/>\r\n            </TableCell>    \r\n\t\t</TableRow>\r\n\t);\r\n};","import React, {useContext, useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { Grid,Box, TextField } from '@material-ui/core';\r\nimport { lighten, makeStyles } from '@material-ui/core/styles';\r\nimport {Table, TableBody, TableCell, TableContainer, TableHead, TableRow, TableSortLabel, TablePagination} from '@material-ui/core';\r\nimport {Toolbar, Typography, Paper, IconButton, Tooltip, Dialog, Checkbox ,Slide, Button, DialogTitle, DialogActions} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CloseIcon from '@material-ui/icons/Close'; \r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport { TraspasosAlmacenContext } from \"../../context/Almacenes/traspasosAlmacen\";\r\nimport TallasColoresTraspasos from './TallasColoresTraspasos';\r\nimport TableSelectMedidas from './TableSelectMedidas';\r\nimport { useQuery } from '@apollo/client';\r\nimport {  OBTENER_CONSULTAS } from \"../../gql/Catalogos/productos\";\r\nimport SnackBarMessages from '../../components/SnackBarMessages';\r\n// function createData(name, cantidad, precio) {\r\n//   return { name, cantidad, precio };\r\n// }\r\n\r\n/* function descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n} */\r\n\r\n/* function getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map((el) => el[0]);\r\n} */\r\n\r\nconst headCells = (add) => {\r\n\r\nlet hC = (add) ? \r\n\r\n  [\r\n    { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n    { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n    { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n\r\n  ]\r\n  :\r\n\r\n  [\r\n    { id: 'codeBarras', numeric: false, disablePadding: false, label: 'Código de barras' },\r\n    { id: 'name', numeric: false, disablePadding: true, label: 'Nombre' },\r\n    { id: 'tipo', numeric: true, disablePadding: false, label: 'Tipo' },\r\n    { id: 'cantidad', numeric: true, disablePadding: false, label: 'Cantidad' },\r\n    { id: 'solo', numeric: true, disablePadding: false, label: ' ' },\r\n  ]\r\n\r\n  return hC;\r\n}\r\n;\r\nconst getUnidadMax  = (cantidad_existente_maxima,unidadMaxima) => {\r\n  //console.log('getCantidad',cantidad_nueva, cantidad_medida, accion)\r\n  const UNIDAD_MAXIMA = {\r\n    'Caja' :  'Cantidad existente en cajas: ' + cantidad_existente_maxima,\r\n    'Costal' : 'Cantidad existente en costales: ' + cantidad_existente_maxima,\r\n  }  \r\n  return UNIDAD_MAXIMA[unidadMaxima];\r\n}\r\n\r\nconst  EnhancedTableHead = (props) => {\r\n  const { classes,  order, orderBy, onRequestSort } = props;\r\n  const createSortHandler = (property) => (event) => {\r\n    onRequestSort(event, property);\r\n  };\r\n  const headCellsNames =  headCells(props.add);\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n     \r\n        {headCellsNames.map((headCell) => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align='left'\r\n            // padding={headCell.disablePadding ? 'none' : 'normal'}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              {headCell.label}\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  // product_selected: PropTypes.object.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useToolbarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n   \r\n  },\r\n  input:{\r\n    width:180\r\n  }\r\n  ,\r\n  inputCantidad:{\r\n    width:120,\r\n    height:10\r\n  },\r\n  inputCantidadTable:{\r\n    width:'20%',\r\n    height:10\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          \r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.primary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    fontSize:16,\r\n    flex: '1',\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n}));\r\n\r\nconst DialogTallas = (props) => {\r\n \r\n  const [new_medidas, setNew_medidas] = useState([]);\r\n  const {setProductosTras, productosTras} = useContext(TraspasosAlmacenContext);\r\n  \r\n\r\n  \r\n  const setProd = () =>{\r\n    let newMedidasCopy = new_medidas;\r\n    let cantidad_total = 0;\r\n    \r\n    \r\n\r\n     try {\r\n     \r\n       let prodSelect = null;\r\n    prodSelect = (props.almacenOrigen !== null) ? {\r\n      _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      medidas_producto: props.product_selected.medidas_producto,\r\n      inventario_general: props.product_selected.inventario_general,\r\n      unidades_de_venta: props.product_selected.unidades_de_venta,\r\n      precios: props.product_selected.precios,\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario\r\n    }\r\n    :\r\n\r\n    {\r\n       _id: props.product_selected._id,\r\n      datos_generales:  props.product_selected.datos_generales,\r\n      precios: props.product_selected.precios,\r\n       medidas_producto: [],\r\n      inventario_general: [{unidad_maxima:''}],\r\n      unidades_de_venta: [],\r\n      empresa:props.product_selected.empresa,\r\n      sucursal:props.product_selected.sucursal,\r\n      usuario: props.product_selected.usuario \r\n    }; \r\n\r\n    let existe = false;\r\n    let copyProductosTras = productosTras;\r\n    let medidasTo =[];\r\n    //Count all new_medidas from array\r\n    \r\n    if (newMedidasCopy.length > 0) {\r\n    \r\n      const pres = newMedidasCopy.filter(\r\n        (res) => res.medida.color._id && res.medida.medida._id\r\n      );\r\n\r\n      if (pres.length !== newMedidasCopy.length) {\r\n        props.setError({\r\n           message: `Faltan medidas o colores en tus presentaciones`,\r\n          status: \"error\",\r\n          open: true\r\n        });\r\n        \r\n        return;\r\n      }\r\n    }\r\n\r\n    for (let newMed in newMedidasCopy){ \r\n        cantidad_total +=  newMedidasCopy[newMed].nuevaCantidad;\r\n        //cantidad_total += newMedidasCopy[newMed];\r\n      medidasTo.push(newMedidasCopy[newMed])\r\n    } \r\n\r\n    if(cantidad_total > 0){\r\n    \r\n      if(copyProductosTras.length){//Check have data context\r\n        copyProductosTras.forEach(element => {\r\n          if(element.product_selected._id === props.product_selected._id){\r\n            existe = true;\r\n            ///VA A SUMAR EN LAS MEDIDAS LAS CANTIDADES\r\n            element.new_medidas = medidasTo;\r\n            element.cantidad_total = cantidad_total;\r\n            return;\r\n          }\r\n        });\r\n    \r\n        if(!existe){\r\n          //console.log(\"NO está este producto\", element.product_selected._id , props.product_selected._id );\r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      \r\n        } \r\n      }else{ \r\n          let obj= {product_selected:prodSelect, new_medidas:medidasTo, cantidad_total:parseInt(cantidad_total), unidad_maxima: false}\r\n          copyProductosTras.push(obj)\r\n      }\r\n         \r\n      setProductosTras([...copyProductosTras])  \r\n      setNew_medidas([]);\r\n      close();\r\n    }else{\r\n      props.setError({\r\n        message: `La cantidad debe ser mayor a 0`,\r\n       status: \"error\",\r\n       open: true\r\n     });\r\n    }  \r\n     } catch (error) {\r\n       console.log('MANDH',error)\r\n     }\r\n    \r\n  }\r\n\r\n  const close= () => {\r\n    try {\r\n      props.setOpenTallas();\r\n      props.setproduct_selected(undefined)\r\n    } catch (error) {\r\n      //console.log(error)\r\n    }\r\n  }\r\n \r\n  useEffect(() => {\r\n    let new_medidasCopia = [];\r\n\r\n    productosTras.forEach(prod => {\r\n\t\t\r\n\t\tif(prod.product_selected._id ===  props.product_selected._id){\r\n\t\t\tlet element = null;\r\n        for (const med in prod.new_medidas) {\r\n          if (Object.hasOwnProperty.call(prod.new_medidas, med)) {\r\n            element = prod.new_medidas[med];\r\n            new_medidasCopia.push(element)\r\n          }\r\n        }\r\n      }\r\n    })  \r\n    setNew_medidas(new_medidasCopia);\r\n  }, [productosTras, props.product_selected._id])\r\n     \r\n\r\n  return(\r\n    <Dialog open={props.openTallas} TransitionComponent={Transition} fullWidth maxWidth={\"md\"} >\r\n      \t\r\n      <DialogTitle>\r\n        <Box display='flex' >\r\n          <Box width=\"88%\">\r\n            Tallas y medidas\r\n          </Box>\r\n          <Box m={1} display=\"flex\" justifyContent=\"flex-end\">\r\n            <Button variant=\"contained\" color=\"secondary\" onClick={() => close()} size=\"large\">\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </DialogTitle>\r\n      {\r\n        (props.almacenOrigen === null) ? \r\n          <div>\r\n            <TallasColoresTraspasos \r\n              obtenerConsultasProducto={props.obtenerConsultasProducto}\r\n              refetch={props.refetch}\r\n              producto={props.product_selected}\r\n              new_medidas={new_medidas} \r\n              setNew_medidas={setNew_medidas}\r\n            />\r\n          </div>\r\n        :\r\n        <div>\r\n          <TableSelectMedidas producto = {props.product_selected} new_medidas={new_medidas} setNew_medidas={setNew_medidas} add={props.add} />\r\n        </div> \r\n      }    \r\n      <Box display=\"flex\" justifyContent=\"flex-end\" m={1} mr={5}>\r\n        <Button  variant=\"contained\" color=\"primary\"style={{width:\"20%\"}} onClick={setProd} >\r\n          AGREGAR \r\n        </Button>\r\n      </Box>   \r\n    </Dialog>\r\n  )\r\n}\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst EnhancedTableToolbar = (props) => {\r\n  const classes = useToolbarStyles();\r\n  const [cantidadTo, setCantidadTo] = useState('');\r\n  const [openEnd, setOpenEnd] = useState(false);\r\n \r\n \r\n  const { product_selected, setproduct_selected, tipoPieza, update } = props;\r\n   const {\r\n        setProductosTras,\r\n        productosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n\r\n\r\nconst setValueToTrans =(cantidad_total) =>{\r\n  try {\r\n    props.setError({error:false, mensaje:''})\r\n   \r\n    if(cantidad_total === 0 || cantidad_total === '') return;\r\n   let element = productosTras.find(element => element.product_selected._id === product_selected._id);\r\n  /*   let elementTablaTo = (props.almacenOrigen !== null) ? \r\n        productosEmpTo.find(element => element.product_selected._id === product_selected._id)\r\n        :\r\n        productosTo.find(element => element.product_selected._id === product_selected._id) */\r\n    if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = parseFloat(cantidad_total);\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(product_selected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  product_selected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            \r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n        /*   if(props.add){\r\n            elementTablaTo.inventario_general[0].cantidad_existente -= cantidad_total;\r\n          }else{\r\n            elementTablaTo.cantidad_total -= cantidad_total\r\n          } */\r\n\r\n          \r\n        }\r\n      }else{\r\n\r\n        element.cantidad_total = parseFloat(cantidad_total);\r\n      }  \r\n      setProductosTras([...productosTras]);\r\n      /*  if(props.almacenOrigen !== null){\r\n           setProductosEmpTo([...productosTras]);\r\n        }else{\r\n           setProductosTo([...productosTras]);\r\n        } */\r\n\r\n      return;\r\n\r\n\r\n    }else{\r\n      //Cuando sea el caso que no hay almacen de origen cambiar los datos que van a ir vacíos\r\n      //\r\n     \r\n      //console.log(props.product_selected.precios)\r\n      let prodSelect = {\r\n        _id: props.product_selected._id,\r\n        datos_generales:  props.product_selected.datos_generales,\r\n        inventario_general: props.product_selected.inventario_general,\r\n        unidades_de_venta: props.product_selected.unidades_de_venta,\r\n        medidas_producto: props.product_selected.medidas_producto,\r\n      \r\n        precios: props.product_selected.precios,\r\n        empresa:props.product_selected.empresa,\r\n        sucursal:props.product_selected.sucursal,\r\n        usuario: props.product_selected.usuario\r\n      } \r\n    //VERIFICA CANTIDAD MAXIMA\r\n    if(product_selected.inventario_general !== undefined){\r\n      if(cantidad_total <=  product_selected.inventario_general[0].cantidad_existente){\r\n      \r\n        let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n      }\r\n      else{\r\n        props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n      }\r\n    }else{\r\n       let obj= {product_selected:prodSelect, new_medidas:[], cantidad_total, unidad_maxima: tipoPieza.cajas};\r\n        setProductosTras([...productosTras, obj]);\r\n    }\r\n    }\r\n    setproduct_selected(undefined);\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\nconst deletesItems =() =>{\r\n  try {\r\n  \r\n    setproduct_selected(undefined)\r\n    //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n    setProductosTras([]);\r\n    setOpenEnd(false);\r\n\r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n\r\n\r\nuseEffect(() => {\r\n  try {\r\n    if(props.add){\r\n      props.setOpenTallas(true)\r\n    }\r\n    setCantidadTo(props.cant)\r\n    \r\n  } catch (error) {\r\n    \r\n  }\r\n  \r\n}, [product_selected])   \r\n  \r\n  const pressEnter = (e) => {\r\n    try {\r\n      if (e.key === \"Enter\") {\r\n        setValueToTrans(parseFloat(e.target.value))\r\n      }\r\n    } catch (error) {\r\n      \r\n    }\r\n  };        \r\n\r\n\r\n  function onlyNumbers(value){\r\n    props.setError({error:false, mensaje:''})\r\n      //const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      const intValue = (value !== '') ? parseFloat(value) : 0;\r\n      try {\r\n        if(props.almacenOrigen !== null){\r\n          \r\n          if( !tipoPieza.piezas  ){\r\n            if(intValue <= product_selected.inventario_general[0].cantidad_existente_maxima){\r\n              setCantidadTo((intValue !== 0) ? intValue : '');\r\n              //console.log(intValue)\r\n              return;\r\n            }else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n              return;\r\n            } \r\n          }else{\r\n            \r\n              if(intValue <= product_selected.inventario_general[0].cantidad_existente){\r\n                 setCantidadTo((intValue !== 0) ? intValue : '');\r\n                return;\r\n              }\r\n              else{\r\n              props.setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente.'})\r\n              return;\r\n            } \r\n            }\r\n          }else{\r\n          \r\n            setCantidadTo(intValue);\r\n            return;\r\n          }\r\n      } catch (error) {\r\n        \r\n      }\r\n    \r\n  }\r\n\r\n\r\n\r\n  const TipoPiezaComponent = () => {\r\n     try {\r\n     \r\n      const TIPO_PIEZA = {\r\n        'Pz' :  {unidad_maxima: null, unidad_minima: 'Pz' },\r\n        'Caja' : {unidad_maxima: 'Caja', unidad_minima: 'Pz' },\r\n        'Kg' : {unidad_maxima: null, unidad_minima: 'Kg' },\r\n        'Costal' : {unidad_maxima: 'Costal', unidad_minima: 'Kg' },\r\n        'Lt' : {unidad_maxima: null, unidad_minima: 'Lt' }\r\n      }\r\n      \r\n\r\n    \r\n      return (\r\n        <Box flexDirection={'row'} display=\"flex\">\r\n          <Box flexDirection={'row'}  >\r\n          <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima === null} />\r\n            <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_minima}</Typography> \r\n          </Box>\r\n    \r\n          \r\n        { \r\n          (TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima !== null) ? \r\n            <Box flexDirection={'row'} >\r\n              <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n              <Typography color=\"primary\" style={{marginLeft:10}}>{TIPO_PIEZA[product_selected.precios.unidad_de_compra.unidad].unidad_maxima} </Typography> \r\n            </Box>\r\n          :\r\n            <div/>\r\n          \r\n          }\r\n      \r\n        </Box>\r\n      );\r\n     } catch (error) {\r\n       \r\n     }\r\n    \r\n    \r\n  }\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: product_selected !== undefined && props.add,\r\n      })}\r\n    \r\n    >\r\n    <Grid container>\r\n      {product_selected !== undefined  && props.add ? (\r\n        <Box style={{width:'100%'}}>\r\n         \r\n          <Typography className={classes.title} color=\"inherit\" variant=\"subtitle2\"  >\r\n            {product_selected.datos_generales.nombre_comercial} \r\n          </Typography>\r\n        </Box>\r\n      ) : (\r\n        <Box style={{width:'100%'}} flexDirection={'row'} display=\"flex\">\r\n          <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\" component=\"div\">\r\n            {props.title}\r\n          </Typography>\r\n          {\r\n            (productosTras.length > 0 && !props.add) ? \r\n            <Tooltip title=\"Eliminar todos\">\r\n              <IconButton aria-label=\"delete\" onClick={() => setOpenEnd(true)} >\r\n                  <DeleteIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            :\r\n            <div/>\r\n          }\r\n          \r\n         </Box>  \r\n      )}\r\n\r\n      {(product_selected !== undefined )? (\r\n      <Box > \r\n        {\r\n          (props.error.error) ?\r\n          <Typography color=\"inherit\">{props.error.mensaje}</Typography>\r\n          :\r\n          <div/>\r\n        } \r\n            {\r\n            (props.add ) ?\r\n                (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                  <Grid container  justifyContent=\"space-evenly\" ml={1}>\r\n                \r\n                      {\r\n                        (props.almacenOrigen === null)?\r\n                        \r\n                        <TipoPiezaComponent />\r\n                        :\r\n                        <Box flexDirection={'row'} display=\"flex\">\r\n                          <Box flexDirection={'row'}  >\r\n                            <Checkbox checked={tipoPieza.piezas}   color=\"primary\" onChange={() => {update(); setCantidadTo(0)}} disabled={props.product_selected.inventario_general[0].cantidad_existente_maxima === null} />\r\n                            <Typography color=\"primary\" style={{marginLeft:10}}>{props.product_selected.inventario_general[0].unidad_inventario}</Typography> \r\n                          </Box>\r\n                          {\r\n                            (props.product_selected.inventario_general[0].unidad_maxima !== null ) ?\r\n                              <Box flexDirection={'row'} >\r\n                                <Checkbox checked={tipoPieza.cajas} color=\"primary\" onChange={() => {update(); setCantidadTo(0)}}/>\r\n                                <Typography color=\"primary\" style={{marginLeft:10}}>{\"\" + props.product_selected.inventario_general[0].unidad_maxima} </Typography> \r\n                              </Box>\r\n                            :\r\n                              <div/>\r\n                          }\r\n                        </Box>\r\n                      }\r\n                        \r\n                      <Box width=\"180px\" ml={2}>\r\n                    \r\n                        <Typography color=\"primary\">Cantidad</Typography>\r\n                        <TextField\r\n                            className={classes.inputCantidad}\r\n                            \r\n                            size=\"small\"\r\n                            name=\"cantidad\"\r\n                            variant=\"outlined\"\r\n                            type=\"number\"\r\n                            InputProps={{ inputProps: { min: 0 } }}\r\n                            value={cantidadTo}\r\n    \r\n                            onKeyPress={pressEnter}\r\n                            onChange={(value) => onlyNumbers(value.target.value)}\r\n                            \r\n                        />\r\n                      \r\n                        <Tooltip title=\"Agregar\">\r\n                            <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                                <AddIcon />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                      </Box>\r\n                      {\r\n                        (props.almacenOrigen) ? \r\n                          <Box  width=\"150px\" >\r\n                            {\r\n                              (props.product_selected.inventario_general[0].cantidad_existente_maxima !== null ) ? \r\n                                <Typography color=\"primary\" style={{flexWrap: \"wrap\"}}>\r\n                                  {getUnidadMax(props.product_selected.inventario_general[0].cantidad_existente_maxima,props.product_selected.inventario_general[0].unidad_maxima)}\r\n                                  </Typography>\r\n                              :\r\n                              <div/>\r\n                            }\r\n                          </Box>\r\n                        :\r\n                        <div/>\r\n                      }\r\n                    </Grid>\r\n                   \r\n                  :    \r\n                  <div>\r\n                    <DialogTallas openTallas={props.openTallas} setOpenTallas={props.setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto} refetch={props.refetch} setError={props.setError} /> \r\n                  </div> \r\n                :\r\n                <div>\r\n                   <DialogTallas openTallas={props.openTallas} setOpenTallas={props.setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto} refetch={props.refetch} setError={props.setError}/> \r\n                </div>\r\n                /* <Grid width={'100%'} container>\r\n                  { (product_selected.datos_generales.tipo_producto === 'OTROS') ? \r\n                    <div>\r\n                     \r\n                      <Typography color=\"primary\">Cantidad</Typography>\r\n                      <TextField\r\n                          className={classes.inputCantidad}\r\n                          size=\"small\"\r\n                          name=\"cantidad\"\r\n                          variant=\"outlined\"\r\n                          type=\"number\"\r\n                          InputProps={{ inputProps: { min: 0 } }}\r\n                          value={cantidadTo}\r\n                          onChange={(value) => onlyNumbers(value.target.value)}\r\n                          \r\n                      />\r\n                    \r\n                      <Tooltip title=\"Agregar\">\r\n                          <IconButton aria-label=\"add\" onClick={() => setValueToTrans(cantidadTo)} >\r\n                              <AddIcon />\r\n                          </IconButton>\r\n                      </Tooltip>\r\n                    </div>\r\n                    :\r\n                    \r\n                    <DialogTallas openTallas={openTallas} setOpenTallas={setOpenTallas} setproduct_selected={setproduct_selected}  product_selected={product_selected} almacenOrigen={props.almacenOrigen} obtenerConsultasProducto={props.obtenerConsultasProducto}refetch={props.refetch}/> \r\n                     \r\n                     \r\n                  }\r\n                  <Box mt={3} >\r\n                  { (product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                     <Tooltip title=\"Editar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => editItem()} >\r\n                            <EditIcon />\r\n                        </IconButton>\r\n                    </Tooltip> \r\n                    :\r\n                    <div/>\r\n                    }\r\n                    <Tooltip title=\"Eliminar\">\r\n                        <IconButton aria-label=\"delete\" onClick={() => deleteItem()} >\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                  </Box> \r\n                </Grid> */\r\n            }\r\n                \r\n         \r\n        </Box>\r\n      ) : (\r\n        <div/>\r\n      )}\r\n       <SnackBarMessages alert={props.error} setAlert={props.setError} />  \r\n      </Grid>\r\n      <Dialog open={openEnd} onClose={() => setOpenEnd(false)}>\r\n            <DialogTitle>{'¿Está seguro de realizar esta acción?'}</DialogTitle>\r\n            <DialogActions>\r\n                <Button onClick={() => setOpenEnd(false)} color=\"primary\">\r\n                    Cancelar\r\n                </Button>\r\n                <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => deletesItems()}>\r\n                    Eliminar\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\n// EnhancedTableToolbar.propTypes = {\r\n//   numSelected: PropTypes.number.isRequired,\r\n// };\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n   \r\n    marginLeft:theme.spacing(1),\r\n    marginRight:theme.spacing(1),\r\n\r\n\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n  \r\n    \r\n   \r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: 'rect(0 0 0 0)',\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: 'hidden',\r\n    padding: 0,\r\n    position: 'absolute',\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  const [order, setOrder] = useState('asc');\r\n  const [orderBy, setOrderBy] = useState('calories');\r\n  const [selected, setSelected] = useState(undefined);\r\n  const [ openTallas, setOpenTallas] = useState(false);\r\n  const [ data, setData] = useState([]);\r\n  const [cant, setCant] = useState(0);\r\n   const [error, setError] = useState({error:false, mensaje:''});\r\n  //const [data, setData] = useState([]);\r\n \r\n\r\n  const [tipoPieza, setTipoPieza] = useState({piezas: true, cajas: false});\r\n  const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\r\n\r\n  const update = () => {\r\n   setTipoPieza({...tipoPieza, piezas: !tipoPieza.piezas, cajas: !tipoPieza.cajas})\r\n }\r\n \r\n  const {\r\n        productosTras, productosTo,   productosEmpTo, setProductosTras\r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n  const obtenerConsultasProducto = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { \r\n      empresa: sesion.empresa._id, \r\n      sucursal: sesion.sucursal._id  },\r\n    fetchPolicy: \"network-only\"\r\n  });\r\n\r\n  \r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = (event) => {\r\n    if (event.target.checked) {\r\n      //const newSelecteds = data.map((n) => n.name);\r\n      setSelected(event.target.checked);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n // const data = (!props.add) ?  productosTras  : (!props.almacenOrigen) ? productosEmpTo : productosTo  ; \r\n  useEffect(() => {\r\n    \r\n    setData((!props.add) ?  productosTras  : (!props.almacenOrigen) ? productosEmpTo : productosTo)\r\n  }, [productosEmpTo, productosTo, productosTras])\r\n  \r\n  const handleClick = (event, elemento, cant) => {\r\n  setError({error:false, mensaje:''})\r\n    if(elemento.datos_generales.tipo_producto === 'OTROS'){\r\n      let haveCant= 0;\r\n      productosTras.forEach(producto => {\r\n        if(producto.product_selected._id === elemento._id){\r\n      \t  \r\n          haveCant = producto.cantidad_total;\t\t\r\n        }\r\n      });\r\n      \r\n        setCant(props.add ? haveCant : cant)\r\n    }\r\n\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === elemento._id;\r\n     \r\n      // let newSelected = [];\r\n      if(selectedIndex){\r\n          setSelected(undefined);\r\n      }else{\r\n          setSelected(elemento);\r\n      } \r\n    }else{\r\n      //console.log(elemento)\r\n      setSelected(elemento);\r\n    }\r\n   \r\n    \r\n  };\r\n    \r\n /*  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  }; */\r\n  const deleteItem =(row) =>{\r\n    try {\r\n      \r\n      let prodSet =  [] ;\r\n      \r\n    \r\n      if(productosTras.length){\r\n        prodSet = productosTras;\r\n      }\r\n      \r\n    \r\n      //console.log(prodSet.filter(item => item.product_selected._id !== product_selected._id))\r\n      setProductosTras(prodSet.filter(item => item.product_selected._id !== row._id));\r\n\r\n    } catch (error) {\r\n\r\n    }\r\n  }\r\n  const setValueToTrans =(cantidad_total, rowSelected) =>{\r\n  try {\r\n    //setError({error:false, mensaje:''})\r\n   \r\n    \r\n   let element = productosTras.find(element => element.product_selected._id === rowSelected._id);\r\n   if(cantidad_total === 0 || cantidad_total === '') {element.cantidad_total = 0;return;};\r\n  /*   let elementTablaTo = (props.almacenOrigen !== null) ? \r\n        productosEmpTo.find(element => element.product_selected._id === product_selected._id)\r\n        :\r\n        productosTo.find(element => element.product_selected._id === product_selected._id) */\r\n  if(element) {\r\n //console.log(cantidad_total, element)\r\n      let totalCantExistMasNuevaCantidad = parseFloat(cantidad_total + element.cantidad_total);\r\n      //SUMA CANTIDAD TOTAL\r\n      \r\n      if(props.add){\r\n        if(rowSelected.inventario_general !== undefined){\r\n          if( !tipoPieza.piezas ){\r\n            if(totalCantExistMasNuevaCantidad <=  rowSelected.inventario_general[0].cantidad_existente_maxima){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }  \r\n          }else{\r\n            if(totalCantExistMasNuevaCantidad <=  rowSelected.inventario_general[0].cantidad_existente){\r\n              element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n            \r\n            }else{\r\n              setError({error:true, mensaje:'La cantidad ingresada sobrepasa la cantidad existente del producto seleccionado.'})\r\n            }\r\n          }\r\n        }else{\r\n          element.cantidad_total = totalCantExistMasNuevaCantidad;\r\n        /*   if(props.add){\r\n            elementTablaTo.inventario_general[0].cantidad_existente -= cantidad_total;\r\n          }else{\r\n            elementTablaTo.cantidad_total -= cantidad_total\r\n          } */\r\n\r\n          \r\n        }\r\n      }else{\r\n\r\n        element.cantidad_total = parseFloat(cantidad_total);\r\n      }  \r\n      setProductosTras([...productosTras]);\r\n      /*  if(props.almacenOrigen !== null){\r\n           setProductosEmpTo([...productosTras]);\r\n        }else{\r\n           setProductosTo([...productosTras]);\r\n        } */\r\n\r\n      return;\r\n\r\n\r\n    }\r\n     return;\r\n  } catch (error) {\r\n     //console.log(error)\r\n  }\r\n}\r\n\r\n  \r\n  function onlyNumbers(value, rowSelected){\r\n   \r\n    \r\n   setError({error:false, mensaje:''})\r\n      //const onlyNums = value.toString().replace(/[^0-9]/g, '');\r\n      if(value === '') {setValueToTrans('', rowSelected);return;}\r\n      const intValue = parseFloat(value);\r\n\r\n      try {\r\n         \r\n        if(props.almacenOrigen !== null){\r\n            if( !tipoPieza.piezas  ){\r\n              if(intValue <= rowSelected.inventario_general[0].cantidad_existente_maxima){\r\n                setValueToTrans(intValue, rowSelected)\r\n                //console.log(intValue)\r\n                return;\r\n              } \r\n            }else{\r\n            \r\n              if(intValue <= rowSelected.inventario_general[0].cantidad_existente){\r\n                \r\n                setValueToTrans(intValue, rowSelected)\r\n                return;\r\n              }\r\n            }\r\n           \r\n        }else{\r\n           \r\n           \r\n            setValueToTrans(intValue, rowSelected)\r\n            return;\r\n          }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    \r\n  }\r\n  const isSelected = (id) => {\r\n    //return selected.indexOf(name) !== -1;\r\n    \r\n    if(selected!== undefined){\r\n      const selectedIndex = selected._id === id;\r\n   \r\n      // let newSelected = [];\r\n      if(!selectedIndex){\r\n        return false;\r\n      }else{\r\n        return true;\r\n      } \r\n    }else{\r\n      return false;\r\n    }\r\n    \r\n  } \r\n\r\n  const editItem =(prod_sel) =>{\r\n  try {\r\n  \r\n  \r\n    if(prod_sel.datos_generales.tipo_producto !== 'OTROS') {\r\n      setOpenTallas(true);\r\n      obtenerConsultasProducto.refetch();\r\n      //console.log(props)\r\n    }\r\n   \r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n  //const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n  const handleChangePage = (_, nextPage) => {\r\n    if(props.almacenOrigen){\r\n      props.setPageAlm(nextPage);\r\n    }else{\r\n      props.setPage(nextPage);\r\n    }\r\n  \r\n    /* refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: filtro,\r\n      offset: nextPage,\r\n    }); */\r\n  };\r\n  \r\n  if(props.loading && props.add){\r\n    return (\r\n      <div className={classes.root}>\r\n        <Box mt={5} style={{display:'flex', justifyContent: 'center'}}>\r\n          <CircularProgress  />\r\n        </Box>\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  let datosMap = (props.add ? data?.docs : data);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n       \r\n        <EnhancedTableToolbar \r\n          product_selected={selected} \r\n          setproduct_selected={setSelected} \r\n          openTallas={openTallas}\r\n          setOpenTallas={setOpenTallas}\r\n          error={error}\r\n          setError={setError}\r\n          title={props.title} \r\n          add={props.add} \r\n          almacenOrigen={props.almacenOrigen} \r\n          productosTras ={productosTras} \r\n          tipoPieza={tipoPieza} \r\n          update={update} \r\n          cant={cant} \r\n          obtenerConsultasProducto={(obtenerConsultasProducto.data) ? obtenerConsultasProducto.data.obtenerConsultasProducto :[]}\r\n          refetch={( obtenerConsultasProducto.refetch ) ? obtenerConsultasProducto.refetch : null}  />\r\n        <TableContainer style={{height:'38vh'}}>\r\n          <Table\r\n          \r\n            aria-labelledby=\"tableTitle\"\r\n            size={'small'}\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              product_selected={selected}\r\n              add = {props.add}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              handleSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              //rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {datosMap?.map((row, index) => {\r\n                \r\n                  const isItemSelected = isSelected((props.add === true) ? row._id: row.product_selected._id);\r\n                  const labelId = `enhanced-table-checkbox-${index}`;\r\n                \r\n                  if(props.add){\r\n              \r\n                    if(props.almacenOrigen) {\r\n                 \r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={(props.add === true) ? row._id : row.product_selected._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell  id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        \r\n                        <TableCell align=\"left\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"left\"> {row.inventario_general[0].cantidad_existente }  {row.inventario_general[0].unidad_inventario} </TableCell>\r\n\r\n                      </TableRow>\r\n                    );\r\n                    }else{\r\n                      return(\r\n                        <TableRow\r\n                        hover\r\n                        onClick={(event) => handleClick(event, row)}\r\n                        role=\"checkbox\"\r\n                        aria-checked={isItemSelected}\r\n                        tabIndex={-1}\r\n                        key={row._id}\r\n                        selected={isItemSelected}\r\n                        \r\n                      >\r\n                        <TableCell  id={labelId} scope=\"row\">\r\n                          {(row.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.datos_generales.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" id={labelId} scope=\"row\">\r\n                          {row.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <TableCell align=\"left\"> {row.datos_generales.tipo_producto}</TableCell>\r\n                        <TableCell align=\"left\"> N/A</TableCell>\r\n                      </TableRow>\r\n                      );\r\n                    }\r\n                  }else{\r\n                    \r\n                    return(\r\n                    <TableRow\r\n                      hover\r\n                      onClick={(event) => handleClick(event, row.product_selected, row.cantidad_total)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isItemSelected}\r\n                      tabIndex={-1}\r\n                      key={(props.add === true) ? row._id : row.product_selected._id}\r\n                      selected={isItemSelected}\r\n                      \r\n                    >\r\n                      <TableCell  id={labelId} component=\"th\" width={100}>\r\n                        {(row.product_selected.datos_generales.codigo_barras == null)? 'SIN CÓDIGO' : row.product_selected.datos_generales.codigo_barras}\r\n                      </TableCell>\r\n                      <TableCell id={labelId}  width={200}>\r\n                        {row.product_selected.datos_generales.nombre_comercial}\r\n                      </TableCell>\r\n                      <TableCell align=\"left\" > {row.product_selected.datos_generales.tipo_producto}</TableCell>\r\n                      {\r\n                        (row.product_selected.datos_generales.tipo_producto  === \"OTROS\" ) ? \r\n                          <TableCell align=\"left\"  width={20} > \r\n                            <TextField\r\n                              size=\"small\"\r\n                              name=\"cantidad\"\r\n                              variant=\"outlined\"\r\n                              type=\"number\"\r\n                              InputProps={{ inputProps: { min: 0 } }}\r\n                              value={row.cantidad_total} \r\n                              onChange={(value) => onlyNumbers(value.target.value, row.product_selected)}\r\n                            \r\n                            />\r\n                          </TableCell> \r\n                          :\r\n                          <TableCell align=\"left\"> {row.cantidad_total}</TableCell> \r\n\r\n                      }\r\n\r\n                      <TableCell align=\"left\" width={10}>\r\n                        <Box flexDirection={'row'} display=\"flex\" style={{width:75}}>\r\n                          { (row.product_selected.datos_generales.tipo_producto !== 'OTROS') ? \r\n                          <Tooltip title=\"Editar\">\r\n                              <IconButton aria-label=\"edit\" onClick={() => editItem(row.product_selected)} >\r\n                                  <EditIcon />\r\n                              </IconButton>\r\n                          </Tooltip> \r\n                          :\r\n                          <div/>\r\n                          } \r\n                          <Tooltip title=\"Eliminar\">\r\n                            <IconButton aria-label=\"delete\" onClick={() => deleteItem(row.product_selected)} >\r\n                                <DeleteIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </Box>\r\n                      </TableCell> \r\n                    </TableRow>\r\n                    )\r\n                  }\r\n                })}\r\n                \r\n              {/* {emptyRows > 0 && (\r\n                <TableRow style={{ height: 53 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )} */}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        {\r\n          (props.add)?\r\n          <TablePagination\r\n            rowsPerPageOptions={[]}\r\n            component=\"div\"\r\n            count={data?.totalDocs}\r\n            rowsPerPage={props.limit}\r\n            page={(props.almacenOrigen) ? props.pageAlm : props.page}\r\n            onPageChange={handleChangePage}\r\n          />\r\n          :\r\n          <div/>\r\n        }\r\n       \r\n       \r\n      </Paper>\r\n      \r\n    </div>\r\n  );\r\n}","import React, { forwardRef, useEffect, useContext, useState,useCallback } from 'react';\r\nimport { AppBar, Toolbar, Typography, IconButton, Slide,\r\n         Button, Box, Dialog, Grid, DialogActions, TextField,Divider,\r\n         InputLabel, Select, Input, MenuItem, FormControl, useTheme, OutlinedInput, InputAdornment,\r\n         Stepper, Step, StepLabel, DialogTitle } from '@material-ui/core';\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport { useDebounce } from 'use-debounce';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport {Close} from '@material-ui/icons';\r\n//import ErrorPage from '../../../../components/ErrorPage';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\n\r\nimport { FcAdvance } from 'react-icons/fc';\r\nimport almacenIcon from '../../../../icons/almacen.svg';\r\nimport TableSelectProducts from '../../../../components/Traspasos/TableSelectProducts';\r\n\r\nimport { useQuery, useMutation } from '@apollo/client';\r\nimport { OBTENER_CONCEPTOS_ALMACEN} from '../../../../gql/Catalogos/conceptosAlmacen';\r\nimport { OBTENER_ALMACENES, REALIZAR_TRASPASO, OBTENER_CATEGORIAS, OBTENER_PRODUCTOS_EMPRESA} from '../../../../gql/Almacenes/Almacen';\r\n\r\nimport { OBTENER_PRODUCTOS } from \"../../../../gql/Catalogos/productos\";\r\n\r\n\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\tfontSize: 50\r\n\t},\r\n    imagen: {\r\n        width: 50\r\n    },\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t\t},\r\n\t\t'& span': {\r\n\t\t\tcolor: 'red'\r\n\t\t}\r\n\t},\r\n    subtitle: {\r\n\t\tmarginLeft: '10px',\r\n\t\twidth:'50%',\r\n     \r\n\t},\r\n    boxUpData:{\r\n        height: 80,\r\n\r\n    },\r\n    formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 300,\r\n        maxWidth: 300,\r\n    },\r\n    selected2:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    selected:{\r\n\t\twidth: '50%',\r\n\t\theight: 50,\r\n\t\t\r\n    },\r\n    input:{\r\n\t\twidth:'100%'\t\r\n\t},\r\n    inputBox:{\r\n\t\tmargin:20,\r\n        marginTop:5,\r\n        marginBottom:10,\r\n       \r\n\t},\r\n    button:{\r\n\t\tmargin: theme.spacing(3),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(0)\r\n\t},\r\n    boxControl: {\r\n        margin: theme.spacing(2.5),\r\n\t\tmarginTop: 0,\r\n        minWidth: \"20%\",\r\n        maxWidth: \"20%\",\r\n        minHeight: 20,\r\n      \r\n    },\r\n    centerControl:{\r\n        marginTop:10,\r\n      \r\n    },\r\n  \r\n}));\r\n\r\n\r\nfunction getStyles(almacen, almacenName, theme) {\r\n  return {\r\n    fontWeight:\r\n      almacenName.indexOf(almacen) === -1\r\n        ? theme.typography.fontWeightRegular\r\n        : theme.typography.fontWeightMedium,\r\n  };\r\n}\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ITEM_HEIGHT = 200;\r\nconst ITEM_PADDING_TOP = 8;\r\n\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n      width: 400,\r\n    },\r\n  },\r\n};\r\n\r\n\r\nconst transportes = [\r\n    'Barco',\r\n    'Moto',\r\n    'Carro',\r\n    'Camioneta'\r\n];\r\n\r\n/* function createData(name, cantidad, precio, unidad) {\r\n    return { name, cantidad, precio, unidad };\r\n}  */\r\n\r\n\r\nconst steps = ['Datos traspaso', 'Seleccionar productos'];\r\n\r\nexport default function Traspasos(props) {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n    const {\r\n        setProductos,\r\n        setProductosTras,\r\n        setProductosTo,\r\n        setProductosEmpTo,\r\n        productosTras \r\n    } = useContext(TraspasosAlmacenContext);\r\n\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n\tconst [ open, setOpen ] = useState(false);\r\n    const [ loading, setLoading ] = useState(false);\r\n    const [ filtro, setFiltro ] = useState('');\r\n\tconst [value] = useDebounce(filtro, 700);\r\n\r\n    const [ haveConcepto, setHaveConcepto ] = useState(false);\r\n    const [ conceptoTraspaso, setConceptoTraspaso ] = useState(null);\r\n    const [ isAlmacenOrigen, setIsAlmacenOrigen ] = useState(false);\r\n    const [ isAlmacenDestino, setIsAlmacenDestino ] = useState(false);\r\n\r\n    const [ almacenOrigen, setAlmacenOrigen ] = useState(null);\r\n    const [ almacenDestino, setAlmacenDestino ] = useState(null);\r\n    const [almacenesDestino, setAlmacenesDestino] =useState([])\r\n    const [ transporte, setTransporte ] = useState('');\r\n    const [ placas, setPlacas ] = useState('');\r\n    const [ nombreQuien, setNombreQuien ] = useState('');\r\n  \r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [skipped, setSkipped] = useState(new Set());\r\n    const [openEnd, setOpenEnd] = useState(false);\r\n \r\n    const [ CrearTraspaso ] = useMutation(REALIZAR_TRASPASO); \r\n\r\n    let conceptos= [];\r\n    let almacenes = [];\r\n    \r\n    \r\n    const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES,{\r\n        variables: {\r\n            id: sesion.sucursal._id\r\n        },\r\n         fetchPolicy: \"network-only\"\r\n    });\t\r\n   /*  const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t}\r\n\t});\t */\r\n\tconst dataConceptos = useQuery(OBTENER_CONCEPTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tempresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t},\r\n         fetchPolicy: \"network-only\"\r\n\t});\r\n   \r\n    const categoriasQuery = useQuery(OBTENER_CATEGORIAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\t\r\n\t\t},\r\n        fetchPolicy: \"network-only\"\r\n\t});\r\n\r\n    const productosQuery = useQuery(\r\n    OBTENER_PRODUCTOS,\r\n    {\r\n      variables: { \r\n          empresa: sesion.empresa._id, \r\n          sucursal: sesion.sucursal._id,\r\n          filtro: value,\r\n          almacen: (almacenOrigen ) ? almacenOrigen._id : \"\",\r\n          existencias: true,\r\n          limit: props.limit,\r\n          offset: props.pageAlm,\r\n      },\r\n      fetchPolicy: \"network-only\"\r\n\r\n    }\r\n  );\r\n\r\n    const productosEmpresaQuery = useQuery(\r\n    \r\n        OBTENER_PRODUCTOS_EMPRESA,\r\n    {\r\n        variables: { \r\n          empresa: sesion.empresa._id, \r\n          filtro: value,\r\n          limit: props.limit,\r\n          offset: props.page,\r\n        },\r\n        fetchPolicy: \"network-only\"\r\n     }\r\n  );\r\n    \r\n    /* const obtenerAlmacenes= useCallback( () =>{\r\n        try {\r\n            console.log('obtenerAlmacenes')\r\n            \r\n        } catch (error) {\r\n           console.log(error)\r\n        }   \r\n    },[]); */ \r\n    const setValueFilter = (val) =>{\r\n       \r\n        setFiltro(val);\r\n        props.setPage(0);\r\n    }\r\n\r\n    const obtenerProductosAlmacen = useCallback(async() =>{\r\n        try {\r\n            \r\n           productosQuery.refetch();\r\n        } catch (error) {\r\n            \r\n        }   \r\n    },[productosQuery]);\r\n    \r\n   \r\n    \r\n    useEffect(() => {\r\n        if(almacenOrigen){\r\n          \r\n            setAlmacenesDestino(queryObtenerAlmacenes.data.obtenerAlmacenes.filter(element => element._id !== almacenOrigen._id));\r\n            obtenerProductosAlmacen();\r\n        }\r\n    }, [almacenOrigen ])\r\n\r\n\r\n    const obtenerProductosEmpresa = useCallback(async () =>{\r\n        try {\r\n             productosEmpresaQuery.refetch();\r\n        } catch (error) {\r\n            console.log('errorObtenerProductosEmpresa',error)\r\n        }   \r\n      },[productosEmpresaQuery]);\r\n\r\n   \r\n\r\n    useEffect(() => {\r\n        try {\r\n            if(conceptoTraspaso!== null){\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    obtenerProductosEmpresa();\r\n                } else{\r\n                    obtenerProductosAlmacen();\r\n                }      \r\n            }\r\n        } catch (error) {\r\n            console.log('conceptoTraspaso', error)\r\n        }\r\n       \r\n    }, [conceptoTraspaso])    \r\n\r\n /*    useEffect(() => {\r\n\t\t\tdataConceptos.refetch();\r\n\t},[ dataConceptos ]);  */\r\n\r\n     useEffect(() => {\r\n        \r\n        if(conceptoTraspaso !== null){\r\n            if(conceptoTraspaso.destino === 'N/A'){\r\n                if(almacenOrigen !== null){\r\n                    setHaveConcepto(true)\r\n                }else{\r\n                     setHaveConcepto(false)\r\n                }\r\n            \r\n            }else{\r\n                if(conceptoTraspaso.origen === 'N/A'){\r\n                    if(almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }else{\r\n                    if(almacenOrigen !== null && almacenDestino !== null){\r\n                        setHaveConcepto(true);\r\n                    }else{\r\n                        setHaveConcepto(false);\r\n                    } \r\n                }\r\n                \r\n            }    \r\n        }\r\n       \r\n\t},[conceptoTraspaso, almacenOrigen, almacenDestino ]); \r\n\r\n    \r\n\r\n     \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\t if(productosEmpresaQuery.data){\r\n               \r\n                //setProductos(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n             \r\n                setProductosEmpTo(productosEmpresaQuery.data.obtenerProductosPorEmpresa);\r\n            }\r\n    },[ productosEmpresaQuery.data, setProductosEmpTo ]);  \r\n\r\n\r\n    useEffect(\r\n\t\t() => {\r\n            if(productosQuery.data ){\r\n                setProductos(productosQuery.data.obtenerProductos);\r\n                setProductosTo(productosQuery.data.obtenerProductos)\r\n            }    \r\n\t\t},\r\n\t\t[ productosQuery ]\r\n\t); \r\n    \r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\tcategoriasQuery.refetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ categoriasQuery ]\r\n\t); \r\n  \r\n\r\n   \r\n    \r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n        productosEmpresaQuery.refetch();  \r\n        productosQuery.refetch();   \r\n        dataConceptos.refetch();   \r\n        queryObtenerAlmacenes.refetch(); \r\n        props.productosAlmacenQuery.refetch();\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n        setProductosTras([]);\r\n        setAlmacenOrigen(null);\r\n        setAlmacenDestino(null);\r\n        setConceptoTraspaso(null);\r\n        props.setPage(0);\r\n        props.setPageAlm(0);\r\n        let newSkipped = skipped;\r\n       \r\n        if (isStepSkipped(activeStep)) {\r\n            newSkipped = new Set(newSkipped.values());\r\n            newSkipped.delete(activeStep);\r\n        }\r\n        setActiveStep((prevActiveStep) => 0);\r\n\t};\r\n\r\n     const handleChange = (event) => {\r\n       \r\n        setAlmacenOrigen(event.target.value);\r\n       /*   productosQuery.refetch({\r\n            variables: { \r\n            \r\n                almacen: event.target.value._id,\r\n                existencias: true\r\n            },\r\n        });  */\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n    const handleChangeDestino = (event) => {\r\n        //console.log(event)\r\n        setAlmacenDestino(event.target.value);\r\n        setProductosTras([]);\r\n        return;\r\n    };\r\n\r\n     const handleChangeConcepto = (event) => {\r\n        try {\r\n            \r\n            let concepto = event.target.value;  \r\n            setAlmacenesDestino([]);\r\n            almacenes = [];\r\n            setAlmacenOrigen(null); \r\n            setAlmacenDestino(null);\r\n            if(concepto.origen === 'N/A'){\r\n                setAlmacenesDestino( queryObtenerAlmacenes.data.obtenerAlmacenes)\r\n            }else{\r\n                setAlmacenesDestino([])\r\n            }\r\n          \r\n            setIsAlmacenOrigen((concepto.origen === 'N/A') ? false:true);\r\n            setIsAlmacenDestino((concepto.destino === 'N/A') ? false:true);\r\n           \r\n            setConceptoTraspaso(concepto);    \r\n        } catch (error) {\r\n            //console.log(error)\r\n        }\r\n      \r\n    };\r\n    \r\n      const handleChangeTransporte = (event) => {\r\n        setTransporte(event.target.value);\r\n    };\r\n\r\n    /* const isStepOptional = (step) => {\r\n        return step === 1;\r\n    }; */\r\n\r\n    const isStepSkipped = (step) => {\r\n        return skipped.has(step);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        /* if(conceptoTraspaso === null ) {setAlert({message:'No es posible continuar sin seleccionar un concepto.', status: 'error', open: true });  return}\r\n        if( isAlmacenOrigen && almacenOrigen === null)  {setAlert({message:'No es posible continuar sin seleccionar un almacén origen.', status: 'error', open: true });  return }   \r\n        if(isAlmacenDestino && almacenDestino === null) { setAlert({message:'No es posible continuar sin seleccionar un almacén destino.', status: 'error', open: true }); return}    */\r\n        \r\n        let newSkipped = skipped;\r\n        if (isStepSkipped(activeStep)) {\r\n            newSkipped = new Set(newSkipped.values());\r\n            newSkipped.delete(activeStep);\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped(newSkipped);\r\n        \r\n    };\r\n\r\n    const handleBack = () => {\r\n        props.setPage(0);\r\n        props.setPageAlm(0);\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    /* const handleSkip = () => {\r\n        if (!isStepOptional(activeStep)) {\r\n        // You probably want to guard against something like this,\r\n        // it should never occur unless someone's actively trying to break something.\r\n        throw new Error(\"You can't skip a step that isn't optional.\");\r\n        }\r\n\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n        setSkipped((prevSkipped) => {\r\n        const newSkipped = new Set(prevSkipped.values());\r\n        newSkipped.add(activeStep);\r\n        return newSkipped;\r\n        });\r\n    };\r\n\r\n    const handleReset = () => {\r\n        setActiveStep(0);\r\n    }; */\r\n\r\n\r\n   /*  if(categoriasQuery.data){\r\n\t\tcategorias = categoriasQuery.data.obtenerCategorias;\r\n\t}  */\r\n   \r\n    if(dataConceptos.data){\r\n\t\tconceptos = dataConceptos.data.obtenerConceptosAlmacen;\r\n\t}\r\n\r\n    if(queryObtenerAlmacenes.data){\r\n        almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n       \r\n    }\r\n\r\n   \r\n   \r\n   /*  const filtrarProductos = (event) => {\r\n        event.preventDefault();\r\n        if(almacenOrigen !== ''){\r\n            productosQuery.refetch();\r\n        }else{\r\n            productosEmpresaQuery.refetch();\r\n        }\r\n    }; */\r\n\r\n    const handleModal = () => {\r\n        setOpenEnd(!openEnd)\r\n    }\r\n\r\n    const traspasar = async () => {\r\n        try {\r\n         \r\n            if(productosTras.length){\r\n               setOpenEnd(false)\r\n               setLoading(true)\r\n                //let productTrasTo = productosTras;\r\n             const input =  {\r\n                variables: {\r\n                    input: {\r\n                        concepto_traspaso: {\r\n                            _id: conceptoTraspaso._id, \r\n                            nombre_concepto: conceptoTraspaso.nombre_concepto,\r\n                            destino: conceptoTraspaso.destino,\r\n                            origen: conceptoTraspaso.origen,\r\n                            editable: conceptoTraspaso.editable,\r\n                        },\r\n                        almacen_origen: \r\n                            (almacenOrigen !== null) ? \r\n                                {_id: almacenOrigen._id,\r\n                                nombre_almacen: almacenOrigen.nombre_almacen,\r\n                                default_almacen: almacenOrigen.default_almacen }\r\n                            : \r\n                                {_id:\"\",\r\n                                nombre_almacen: \"\",\r\n                                default_almacen: false }\r\n                        ,\r\n                        almacen_destino: \r\n                            (almacenDestino !== null) ?  \r\n                            {_id: almacenDestino._id,\r\n                            nombre_almacen: almacenDestino.nombre_almacen,\r\n                            default_almacen: almacenDestino.default_almacen }\r\n                        : \r\n                            {_id:\"\",\r\n                            nombre_almacen: \"\",\r\n                            default_almacen: false }\r\n                        ,\r\n                        productos: productosTras,\r\n                        datos_transporte :{\r\n                            transporte: transporte,\r\n                            placas: placas,\r\n                            nombre_encargado: nombreQuien\r\n                        },\r\n                        sucursalOrigen: sesion.sucursal._id,\r\n                        sucursalDestino: sesion.sucursal._id,\r\n                        fecha_registro: moment().locale(\"es-mx\").format()\r\n                    },\r\n                    usuario: sesion._id,\r\n                    empresa: sesion.empresa._id\r\n                }\r\n            }  \r\n            \r\n             const traspaso =    await CrearTraspaso(input) \r\n           \r\n                //console.log(traspaso)\r\n               \r\n                if(traspaso.data.crearTraspaso.resp !== 'error'){\r\n                    props.productosAlmacenQuery.refetch();\r\n                    setAlert({message: traspaso.data.crearTraspaso.message, status: traspaso.data.crearTraspaso.resp, open: true })\r\n                    setProductosTras([]);\r\n                    setAlmacenOrigen(null);\r\n                    setAlmacenDestino(null);\r\n                    setConceptoTraspaso(null);\r\n                    handleBack();\r\n                }\r\n                \r\n            }else{\r\n                \r\n                setAlert({message:'No es posible realizar un traspaso sin agregar productos.', status: 'error', open: true })\r\n           \r\n            }\r\n            \r\n           \r\n           \r\n            setLoading(false);\r\n        } catch (error) {\r\n             setLoading(false);\r\n             setOpenEnd(false)\r\n          \r\n           if(error.networkError !== undefined){\r\n\t\t\t  console.log('traspaso networkError', error.networkError.result)\r\n            }else if(error.graphQLErrors!== undefined){\r\n                console.log('traspaso graphQLErrors', error.graphQLErrors)\r\n            }else{\r\n             \r\n              \r\n            }\r\n             setAlert({message: 'Ocurrió un error al realizar el traspaso...', status: 'error', open: true })\r\n        }\r\n    }\r\n\r\n   \r\n\r\n    return (\r\n        <>\r\n        <Box sx={{ width: '100%',  }}>\r\n            <Button fullWidth onClick={handleClickOpen}>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Grid container justifyContent=\"center\">\r\n                        <Grid item xs={12} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <FcAdvance className={classes.icon} />  \r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item md={6} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen}/>\r\n                            </Box>\r\n                        </Grid>\r\n                        <Grid item md={6} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                                <img src={almacenIcon} alt=\"icono almacen\" className={classes.imagen} />\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                    Traspasos\r\n                </Box>\r\n\t\t\t\t\t\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition} >\r\n                <BackdropComponent loading={loading} setLoading={setLoading} />\r\n                <AppBar className={classes.appBar}>\r\n               \r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n                                Traspasos\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box mx={3}>\r\n                            <Box m={1}>\r\n                                <Button  variant=\"contained\" color=\"secondary\"onClick={handleClose}>\r\n                                    <Close style={{ fontSize: 30}}/>\r\n                                </Button>\r\n                            </Box>\r\n                        </Box>\r\n                    \r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n                <Box style={{ width: '50%',alignSelf:'center', alignContent:'center', alignItems:'center' }}>\r\n                  \r\n                    <Stepper activeStep={activeStep}>\r\n                        {steps.map((label, index) => {\r\n                        const stepProps = {};\r\n                        const labelProps = {};\r\n                    \r\n                        if (isStepSkipped(index)) {\r\n                            stepProps.completed = false;\r\n                        }\r\n                        return (\r\n                            <Step key={label} {...stepProps}>\r\n                            <StepLabel {...labelProps}>{label}</StepLabel>\r\n                            </Step>\r\n                        );\r\n                        })}\r\n                    </Stepper>\r\n                </Box>\r\n                <Box >\r\n                {\r\n                (activeStep === 0) ? \r\n                    <Grid container  justify=\"center\" >\r\n                        <Grid item lg={7}>\r\n                            <Box>\r\n                                <Box >\r\n                                    <Typography className={classes.subtitle}  >\r\n                                        <b>Datos traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                \r\n                                    <Box mt={2} style={{display: 'flex', width:'100%', justifyContent: 'center' }}>\r\n                                        <Box m={2}>\r\n                                            <Typography><b>Usuario</b></Typography>\r\n                                            <Typography> {sesion.nombre} </Typography>\r\n                                        </Box>\r\n                                        <Box m={2}>\r\n                                            <Typography><b>Sucursal</b></Typography>\r\n                                            <Typography> {sesion.sucursal.nombre_sucursal} </Typography>\r\n                                        </Box>\r\n                                        <Box m={2}>\r\n                                            <Typography><b>Fecha</b></Typography>\r\n                                            <Typography> \t{moment().locale(\"es-mx\").format('MM/DD/YYYY')} </Typography>\r\n                                        </Box>\r\n                                    \r\n                                    </Box>\r\n                                    <Box m={1}   style={{width:'100%', justifyContent: 'center'}}>\r\n                                        <Box style={{width:'100%'}}>\r\n                                            <FormControl className={classes.formControl}>\r\n                                                <InputLabel id=\"concepto-label\">Concepto traspaso</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"concepto-label\"\r\n                                                id=\"concepto-name\"\r\n                                                value={(conceptoTraspaso) ? conceptoTraspaso : \"\"}\r\n                                                onChange={handleChangeConcepto}\r\n                                                input={<Input />}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                {conceptos.map((concepto) => {\r\n                                                \r\n                                                    return(\r\n                                                    <MenuItem key={concepto._id} value={concepto} >\r\n                                                        {concepto.nombre_concepto}\r\n                                                    </MenuItem>\r\n                                                    )})\r\n                                                }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Box>\r\n                                    {\r\n                                        (conceptoTraspaso !== null) ? \r\n                                        <Box style={{display: 'flex'}}>\r\n                                            {   \r\n                                                \r\n                                                (isAlmacenOrigen) ?\r\n                                                <Box> \r\n                                                    <FormControl className={classes.formControl}>\r\n                                                        <InputLabel id=\"almacen-origen-label\">Almacén origen</InputLabel>\r\n                                                        <Select\r\n                                                        labelId=\"almacen-origen-label\"\r\n                                                        id=\"almacen-origen-name\"\r\n                                                        value={(almacenOrigen) ? almacenOrigen : \"\"}\r\n                                                        onChange={handleChange}\r\n                                                        input={<Input />}\r\n                                                        MenuProps={MenuProps}\r\n                                                        >\r\n                                                        {almacenes.map((almacen) => (\r\n                                                            <MenuItem key={almacen._id} value={almacen}>\r\n                                                                {almacen.nombre_almacen}\r\n                                                            </MenuItem>\r\n                                                        ))}\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                </Box>\r\n                                                :\r\n                                                <></>\r\n                                            }\r\n                                            \r\n                                            {\r\n                                                (isAlmacenDestino) ? \r\n                                                <FormControl className={classes.formControl}>\r\n                                                    <InputLabel id=\"almacen-destino-label\">Almacén destino</InputLabel>\r\n                                                    <Select\r\n                                                    labelId=\"almacen-destino-label\"\r\n                                                    id=\"almacen-destino-name\"\r\n                                                    value={(almacenDestino) ? almacenDestino : \"\"}\r\n\r\n                                                    onChange={handleChangeDestino}\r\n                                                    input={<Input />}\r\n                                                    MenuProps={MenuProps}\r\n                                                    >\r\n                                                    {almacenesDestino.map((almacen) => (\r\n                                                        <MenuItem key={almacen._id} value={almacen} >\r\n                                                        {almacen.nombre_almacen}\r\n                                                        </MenuItem>\r\n                                                    ))}\r\n                                                    </Select>\r\n                                                </FormControl>\r\n\r\n                                                :\r\n                                                <></>\r\n                                            }\r\n                                           \r\n                                        </Box> \r\n                                        :\r\n                                        <></>\r\n                                        \r\n                                    } \r\n                                    \r\n                                    </Box>   \r\n                                </Box>      \r\n                                <Box className={classes.centerControl}   style={{width:'100%'}} >\r\n                                    <Typography className={classes.subtitle}>\r\n                                        <b>Datos transporte traspaso</b>\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                \r\n                                    <Grid  justify=\"center\" >\r\n                                        \r\n                                        <FormControl className={classes.formControl} style={{marginTop:15}}>\r\n                                            \r\n                                            <InputLabel id=\"transporte-label\">Transporte</InputLabel>\r\n                                            <Select\r\n                                            labelId=\"transporte-label\"\r\n                                            id=\"transporte-name\"\r\n                                            value={transporte}\r\n                                            onChange={handleChangeTransporte}\r\n                                            input={<Input />}\r\n                                            \r\n                                            MenuProps={MenuProps}\r\n                                            >\r\n                                            {transportes.map((trans) => (\r\n                                                <MenuItem key={trans} value={trans} style={getStyles(trans, transporte, theme)}>\r\n                                                {trans}\r\n                                                </MenuItem>\r\n                                            ))}\r\n                                            </Select>\r\n                                            \r\n                                        </FormControl>\r\n                                        <Box  justify=\"center\" >\r\n                                        <FormControl className={classes.formControl}>\r\n                                        \r\n                                            <Typography>\r\n                                                Placas\r\n                                            </Typography>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                className={classes.input}\r\n                                                type=\"text\"\r\n                                                size=\"small\"\r\n                                                name=\"placas\"\r\n                                                variant=\"outlined\"\r\n                                                value={placas.toUpperCase()}\r\n                                                \r\n                                                onChange={(e) => setPlacas(e.target.value)}\r\n                                            />\r\n                                        \r\n                                        </FormControl>\r\n                                        <FormControl className={classes.formControl}>\r\n                                        \r\n                                            <Typography>\r\n                                                Nombre de encargado de transporte\r\n                                            </Typography>\r\n                                            <TextField\r\n                                                fullWidth\r\n                                                className={classes.input}\r\n                                                type=\"text\"\r\n                                                size=\"small\"\r\n                                                name=\"nombreQuien\"\r\n                                                variant=\"outlined\"\r\n                                                value={nombreQuien}\r\n                                                \r\n                                                onChange={(e) => setNombreQuien(e.target.value)}\r\n                                            />\r\n                                        </FormControl>\r\n                                        </Box>\r\n                                    </Grid>\r\n                                </Box>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                : \r\n                    <Box>\r\n                        <Box ml={1} style={{width:'100%'}}  >\r\n                            <Box ml={2}>\r\n                            <Typography className={classes.subtitle}>\r\n                                <b>Buscar producto</b>\r\n                            </Typography>\r\n                            <Box  style={{ width: \"48%\" }}>\r\n                                \r\n                                <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                                    <OutlinedInput\r\n                                        id=\"search-producto\"\r\n                                        type=\"text\"\r\n                                        value={filtro}\r\n                                        onChange={(e) => setValueFilter(e.target.value)}\r\n                                        endAdornment={\r\n                                        <InputAdornment position=\"start\">\r\n                                            <IconButton\r\n                                            type=\"submit\"\r\n                                            aria-label=\"search producto\"\r\n                                            edge=\"end\"\r\n                                            >\r\n                                            <Search />\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                        }\r\n                                    />\r\n                                </FormControl>\r\n                                    \r\n                                \r\n                            </Box>\r\n                            </Box>\r\n                            <Box  mt={1}>\r\n                                <Grid container spacing={2} style={{width:'100%'}}>\r\n                                    <Grid item md={6}>\r\n                                    {\r\n                                        (isAlmacenOrigen) ? \r\n                                    \r\n                                        <TableSelectProducts title='Productos' add={true} almacenOrigen={almacenOrigen} refetch ={productosQuery.refetch} loading={productosQuery.loading} setAlert={setAlert} pageAlm={props.pageAlm}\r\n                                        setPageAlm={props.setPageAlm } limit={props.limit}\r\n                                        />\r\n                                        :\r\n                                        <TableSelectProducts title='Productos' add={true} almacenOrigen={null} refetch ={productosQuery.refetch}setAlert={setAlert} page={props.page}loading={productosQuery.loading} \r\n                                        setPage={props.setPage}limit={props.limit}\r\n                                        />   \r\n                                    }\r\n                                    </Grid>\r\n                                    <Grid item md={6}>\r\n                                        <TableSelectProducts title='Productos a traspasar' add={false} almacenOrigen={almacenOrigen} refetch ={productosQuery.refetch} setAlert={setAlert}/>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Box>\r\n                        </Box>\r\n                    </Box>\r\n                }\r\n                \r\n                   <DialogActions style={{justifyContent:'center'}}>\r\n                    <Box sx={{ flexDirection: 'row',alignSelf: 'center',  width: '30%',display: 'flex', pt: 0 }} >\r\n                            <Button\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            disabled={activeStep === 0}\r\n                            onClick={handleBack}\r\n                            style={{width:'43%'}}\r\n                            sx={{ mr: 1 }}\r\n                            >\r\n                            Atrás\r\n                            </Button>\r\n                            <Box style={{ flex: '1 1 auto' }} />\r\n                            {/*     {isStepOptional(activeStep) && (\r\n                                <Button color=\"inherit\" onClick={handleSkip} sx={{ mr: 1 }}>\r\n                                    Skip\r\n                                </Button>\r\n                                )} */}\r\n                            \r\n                                <Button color=\"primary\" variant=\"contained\"    style={{width:'43%'}} disabled={!haveConcepto} onClick={() => (activeStep < steps.length -1) ? handleNext() : handleModal()}>\r\n                                    {activeStep < steps.length -1   ? 'Siguiente' : 'Terminar'}\r\n                                </Button>\r\n                        \r\n                        </Box>\r\n                   </DialogActions>    \r\n                </Box>\r\n                <Dialog open={openEnd} onClose={handleModal}>\r\n                    <DialogTitle>{'¿Está seguro de realizar este traspaso?'}</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={() => handleModal()} color=\"primary\">\r\n                            Cancelar\r\n                        </Button>\r\n                        <Button color=\"secondary\" autoFocus variant=\"contained\" onClick={() => traspasar()}>\r\n                            Traspasar\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n               \r\n\t        <SnackBarMessages alert={alert} setAlert={setAlert} />  \r\n            \r\n\t\t\t</Dialog>\r\n            \r\n               \r\n        </Box>\r\n        </>\r\n    )\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '48vh'\r\n\t},\r\n\tcontainer: {\r\n\t\t\r\n\t\tmaxHeight: '74vh'\r\n\t},\r\n\tcolorContainer: {\r\n\t\tborder: \"1px solid rgba(0,0,0, .3)\",\r\n\t\theight: 30,\r\n\t\twidth: 30,\r\n\t\tborderRadius: \"15%\",\r\n\t  },\r\n});\r\n\r\nexport default function MedidasAlmacenes(props) {\r\n\tconst classes = useStyles();\r\n\r\n\r\n\t\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Paper >\r\n\t\t\t\t<TableContainer style={{height:'45vh'}}>\r\n\t\t\t\t\t<Table\r\n\t\t\t\t\t\tclassName={classes.table}\r\n\t\t\t\t\t\taria-labelledby=\"tableTitle\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\taria-label=\"enhanced table\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TableCell >Medida</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Color</TableCell>\r\n\t\t\t\t\t\t\t\t<TableCell >Cantidad existente</TableCell>\r\n                            </TableRow>\r\n\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t{/* {stableSort(producto.medidas_producto, getComparator(order, orderBy))\r\n                \t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n\t\t\t\t\t\t\t.map((item, index) => { */}\r\n\t\t\t\t\t\t\t{props.producto.medidas_producto.map((item, index) => {\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<Row item={item} key={index} almacenSeleccionado={props.almacen} />\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t</TableContainer>\r\n\t\t\t{/* \t<TablePagination\r\n\t\t\t\t\trowsPerPageOptions={[5, 10, 25]}\r\n\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\tcount={producto.medidas_producto.length}\r\n\t\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\t\tpage={page}\r\n\t\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\t\t// onRowsPerPageChange={handleChangeRowsPerPage}\r\n\t\t\t\t/> */}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst Row = ({item, almacenSeleccionado}) =>{\r\n\tconst classes = useStyles();\r\n\t\r\n\ttry {\r\n\t\tlet ItemReturn= <div/>;\r\n\t\t\r\n\t\tif(almacenSeleccionado._id  === item.almacen){\r\n\t\t\tItemReturn = \r\n\t\t\t\t<TableRow>\r\n\t\t\t\t\t<TableCell >\r\n\t\t\t\t\t\t{item.medida.talla}\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell >\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\ttitle={item.color.nombre}\r\n\t\t\t\t\t\t\tplacement=\"top\"\r\n\t\t\t\t\t\t\tarrow\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName={classes.colorContainer}\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\tbackgroundColor: item.color.hex,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell >{item.cantidad}</TableCell>\r\n\t\t\t\t</TableRow>\t\r\n\t\t\t;\t\r\n\t\t}\r\n\t\t\r\n\t\treturn(\r\n\t\t\tItemReturn\r\n\t\t);\r\n\t} catch (error) {\r\n\t\tconsole.log(error)\r\n\t}\r\n\t\r\n}","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {Close} from '@material-ui/icons';\r\nimport { Slide,Button, Box, Dialog, InputLabel, Select, Input, MenuItem, FormControl, DialogTitle } from '@material-ui/core';\r\nimport MedidasAlmacens from './MedidasAlmacenes'\r\n\r\n\tconst ITEM_HEIGHT = 200;\r\n\tconst ITEM_PADDING_TOP = 8;\r\n\tconst MenuProps = {\r\n\t  PaperProps: {\r\n\t\tstyle: {\r\n\t\t  maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n\t\t  width: 400,\r\n\t\t},\r\n\t  },\r\n\t};\r\n\t\r\n\tconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: '100%'\r\n\t},\r\n\t\r\n\tcontainer: {\r\n\r\n\t\theight: '100%'\r\n\t},\r\n\tformControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 300,\r\n        maxWidth: 300,\r\n    },\r\n}));\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function DialogMedidasAlmacenes(props) {\r\n\tconst classes = useStyles();\r\n\tconst [almacen, setAlmacen] = useState({});\r\n\r\n\r\n\tconst handleChangeAlmacen = (e) =>{\r\n\t\ttry {\r\n\t\t\r\n\t\t\tsetAlmacen(e.target.value);\r\n\t\t\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t\r\n\t\r\n\t\treturn (\r\n\t\t\t<Dialog open={props.medidasAlmacen.open} TransitionComponent={Transition} fullWidth maxWidth={\"sm\"} >\r\n\t\t\t\t<DialogTitle>\r\n\t\t\t\t\r\n\t\t\t\t<Box display='flex' >\r\n\t\t\t\t\t<Box width=\"88%\">\r\n\t\t\t\t\tTallas y medidas\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box  display='flex' justifyContent=\"flex-end\" >\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={() => {props.setMedidasAlmacen({open:false, producto:{}}); setAlmacen({});}} size=\"large\">\r\n\t\t\t\t\t\t\t<Close style={{ fontSize: 30}}/>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Box>\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<Box mx={3}>\r\n\t\t\t\t<FormControl className={classes.formControl}>\r\n\t\t\t\t\t<InputLabel id=\"almacen-label\">Almacén</InputLabel>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tlabelId=\"almacen-label\"\r\n\t\t\t\t\t\tid=\"almacen\"\r\n\t\t\t\t\t\tvalue={(almacen) ? almacen.nombre_almacen : \"\"}\r\n\t\t\t\t\t\tonChange={ handleChangeAlmacen}\r\n\t\t\t\t\t\tinput={<Input />}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tMenuProps={MenuProps}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{props.obtenerAlmacenes.map((alm) => {\r\n\t\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t\t<MenuItem key={alm._id} value={alm} >\r\n\t\t\t\t\t\t\t\t\t{alm.nombre_almacen}\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t)})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</FormControl>\r\n\t\t\t\t</Box>\r\n\t\t\t\t{(props.medidasAlmacen.open) ?\r\n\t\t\t\t<Box height='100%' mx={3} mt={2}>\r\n\t\t\t\t\t<MedidasAlmacens producto={props.medidasAlmacen.producto}  almacen={almacen} />\t\r\n\t\t\t\t</Box>\r\n\t\t\t\t:\r\n\t\t\t\t<div/>\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t</Dialog>\r\n\t);\r\n}","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport DialogMedidasAlmacenes from \"./DialogMedidasAlmacenes\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"76vh\",\r\n  },\r\n});\r\n\r\n\r\n\r\n\r\nexport default function ListaAlmacenes(props) {\r\n  const classes = useStyles();\r\n  const [medidasAlmacen, setMedidasAlmacen] = useState({\r\n    open: false,\r\n    producto: {},\r\n  });\r\n\r\n  const toShowMedidasAlmacen = (producto) => {\r\n    try {\r\n      let tipo_producto = producto.datos_generales.tipo_producto;\r\n      if (tipo_producto !== \"OTROS\") {\r\n        setMedidasAlmacen({ open: true, producto });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  const handleChangePage = (_, nextPage) => {\r\n    props.setPage(nextPage);\r\n   \r\n  };\r\n  if(props.loading){\r\n   \r\n    return <BackdropComponent loading={props.loading}  />\r\n  }\r\n\r\n\r\n  return (\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size={\"small\"} aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {props.columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={column.id}\r\n                    align={column.align}\r\n                    style={{\r\n                      textAlign: index > 1 ? \"center\" : \"left\",\r\n                      minWidth: column.minWidth,\r\n                      width: column.minWidth,\r\n                    }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {props.productos.docs.map((row, index) => {\r\n                let key = index;\r\n              \r\n                return (\r\n                  <Rowrow\r\n                    producto={row}\r\n                    index={key}\r\n                    key={index}\r\n                    productosLength={props.productos.totalDocs}\r\n                    dataExcel={props.dataExcel}\r\n                    setDataExcel={props.setDataExcel}\r\n                    obtenerAlmacenes={props.obtenerAlmacenes}\r\n                    toShowMedidasAlmacen={toShowMedidasAlmacen}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={props.productos.totalDocs}\r\n        rowsPerPage={props.limit}\r\n        page={props.page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n        \r\n      <DialogMedidasAlmacenes\r\n        medidasAlmacen={medidasAlmacen}\r\n        setMedidasAlmacen={setMedidasAlmacen}\r\n        obtenerAlmacenes={props.obtenerAlmacenes}\r\n      />\r\n      </Paper>\r\n  );\r\n}\r\n\r\nconst Rowrow = (rowProps) => {\r\n  const { dataExcel, setDataExcel } = useContext(TraspasosAlmacenContext);\r\n  const [dataExcelHere, setDataExcelHere] = useState([]);\r\n  const [arrayCantidades, setArrayCantidades] = useState([]);\r\n  const [row, setRow] = useState({\r\n    codigo_barras: rowProps.producto.datos_generales.codigo_barras,\r\n    nombre_comercial: rowProps.producto.datos_generales.nombre_comercial,\r\n    style: {\r\n      font: { sz: \"12\" },\r\n      alignment: { wrapText: true, horizontal: \"center\", vertical: \"top\" },\r\n      border: { bottom: { style: \"thin\", color: { rgb: \"000000\" } } },\r\n    },\r\n  });\r\n  const [total, setTotal] = useState(0);\r\n  const [unidad_minima, setUnidad_Minima] = useState(\"\");\r\n  \r\n\r\n  useEffect(() => {\r\n    try {\r\n     \r\n    let tot = 0;\r\n    let r = row;\r\n    let datExc = dataExcel;\r\n    let uniMin = 'pz';\r\n    let arrayCantidadesInto = [];\r\n    rowProps.obtenerAlmacenes.forEach((almacenColumna) => {\r\n      \r\n      const existencias = rowProps.producto.existencia_almacenes.filter(\r\n        (existencia) => existencia._id.almacen._id === almacenColumna._id\r\n      );\r\n\r\n    \r\n      if (existencias.length > 0) {\r\n      \r\n        if(existencias[0].unidad_maxima !== null){\r\n          \r\n          if(existencias[0].unidad_maxima === rowProps.producto.precios.inventario.unidad_de_inventario){\r\n           \r\n            arrayCantidadesInto.push(existencias[0].cantidad_existente_maxima);\r\n            tot += existencias[0].cantidad_existente_maxima;\r\n            uniMin = rowProps.producto.existencia_almacenes[0].unidad_maxima;\r\n          }else{\r\n            tot += existencias[0].cantidad_existente;\r\n            arrayCantidadesInto.push(existencias[0].cantidad_existente);\r\n            uniMin = rowProps.producto.existencia_almacenes[0].unidad_inventario;\r\n          }\r\n       \r\n        }else{\r\n          \r\n          uniMin = rowProps.producto.existencia_almacenes[0].unidad_inventario;\r\n          tot += existencias[0].cantidad_existente;\r\n          arrayCantidadesInto.push(existencias[0].cantidad_existente);\r\n        }\r\n        \r\n        setUnidad_Minima(\r\n            uniMin\r\n        );\r\n\r\n        r = {\r\n          ...r,\r\n          [almacenColumna._id]:\r\n            existencias[0].cantidad_existente + \" \" + uniMin,\r\n        };\r\n       \r\n      } else {\r\n        arrayCantidadesInto.push(0);\r\n        r = { ...r, [almacenColumna._id]: 0 };\r\n      }\r\n    });\r\n    \r\n    r = { ...r, costo_producto: costoProducto(),costo_total_produc: totalProductosExcel(tot),total: tot + \" \" + uniMin };\r\n    setArrayCantidades(arrayCantidadesInto);\r\n    setTotal(tot);\r\n    setRow(r);\r\n    datExc.push(r);\r\n    \r\n    setDataExcelHere(datExc);\r\n    if (rowProps.index === rowProps.productosLength - 1) {\r\n   \r\n      console.log('dataExcelHere',datExc)\r\n     \r\n    }\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n    \r\n  }, [ rowProps.producto]);\r\n\r\n  useEffect(() => {\r\n    if (dataExcelHere) {\r\n    \r\n      setDataExcel(dataExcelHere);\r\n    } \r\n  }, [dataExcelHere]);\r\n\r\n  const costoProducto = () => {\r\n    try {\r\n      let costoProd = 0;\r\n      costoProd = rowProps.producto.precios.unidad_de_compra.precio_unitario_con_impuesto;\r\n      if(rowProps.producto.existencia_almacenes.length > 0){\r\n        if(rowProps.producto.existencia_almacenes[0].unidad_maxima !== null){\r\n          if(rowProps.producto.existencia_almacenes[0].unidad_maxima === rowProps.producto.precios.inventario.unidad_de_inventario){\r\n            costoProd = rowProps.producto.precios.precio_de_compra.precio_con_impuesto;\r\n          }\r\n        }\r\n      }\r\n      \r\n\r\n      return formatoMexico(costoProd);\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n  const totalProductosExcel = (totalHere) =>{\r\n    try {\r\n      let tot =  0;\r\n    \r\n     \r\n      tot = rowProps.producto.precios.unidad_de_compra.precio_unitario_con_impuesto *  totalHere;\r\n      if(rowProps.producto.existencia_almacenes.length > 0){\r\n        if(rowProps.producto.existencia_almacenes[0].unidad_maxima !== null){\r\n          if(rowProps.producto.existencia_almacenes[0].unidad_maxima === rowProps.producto.precios.inventario.unidad_de_inventario){\r\n            tot = rowProps.producto.precios.precio_de_compra.precio_con_impuesto *  totalHere;\r\n          }\r\n        }\r\n      }\r\n\r\n      return formatoMexico(tot);\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  const totalProductos = () =>{\r\n    try {\r\n      let tot =  0;\r\n    \r\n     \r\n      tot = rowProps.producto.precios.unidad_de_compra.precio_unitario_con_impuesto *  total;\r\n      if(rowProps.producto.existencia_almacenes.length > 0){\r\n        if(rowProps.producto.existencia_almacenes[0].unidad_maxima !== null){\r\n          if(rowProps.producto.existencia_almacenes[0].unidad_maxima === rowProps.producto.precios.inventario.unidad_de_inventario){\r\n            tot = rowProps.producto.precios.precio_de_compra.precio_con_impuesto *  total;\r\n          }\r\n        }\r\n      }\r\n\r\n      return formatoMexico(tot);\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n  return (\r\n    <TableRow\r\n      hover\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      key={rowProps.producto._id}\r\n      onClick={() => rowProps.toShowMedidasAlmacen(rowProps.producto)}\r\n    >\r\n      <TableCell style={{ minWidth: 60 }}>\r\n        {rowProps.producto.datos_generales.codigo_barras}\r\n      </TableCell>\r\n\r\n      <TableCell style={{ minWidth: 170 }}>\r\n        {rowProps.producto.datos_generales.nombre_comercial}\r\n      </TableCell>\r\n      <TableCell style={{ textAlign: \"center\", minWidth: 60 }}>\r\n        $\r\n        {\r\n          costoProducto()\r\n        }\r\n      </TableCell>\r\n      <TableCell style={{ textAlign: \"center\", minWidth: 80 }}>\r\n        $\r\n        {\r\n          totalProductos()\r\n        }\r\n      </TableCell>\r\n      {/* <TableCell style={{textAlign: 'center',}} >{(producto.datos_generales.receta_farmacia) ? \"SI\" : \"NO\"}</TableCell> */}\r\n      {arrayCantidades.map((cantidad, index) => {\r\n        return (\r\n          <TableCell\r\n            key={index}\r\n            style={{\r\n              backgroundColor: \"rgba(255, 253, 150, 0.1)\",\r\n              color: \"black\",\r\n              fontSize: 17,\r\n              textAlign: \"center\",\r\n              minWidth: 60,\r\n            }}\r\n          >\r\n            {cantidad + \" \" + unidad_minima}\r\n          </TableCell>\r\n        );\r\n      })}\r\n      <TableCell\r\n        style={{\r\n          backgroundColor: \"rgba(255, 253, 150, 0.1)\",\r\n          color: \"black\",\r\n          fontSize: 18,\r\n          fontWeight: \"bold\",\r\n          textAlign: \"center\",\r\n          minWidth: 60,\r\n        }}\r\n      >\r\n        {total + \" \" + unidad_minima}\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { forwardRef, useContext, useState, useEffect } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  IconButton,\r\n  FormControl,\r\n  Slide,\r\n  Button,\r\n  Box,\r\n  Dialog,\r\n  OutlinedInput,\r\n  InputAdornment,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport ExportarExcel from \"../../../../components/ExportExcel\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { TraspasosAlmacenContext } from \"../../../../context/Almacenes/traspasosAlmacen\";\r\nimport {\r\n  OBTENER_CATEGORIAS,\r\n  OBTENER_ALMACENES,\r\n} from \"../../../../gql/Almacenes/Almacen\";\r\nimport conceptosAlmacenImg from \"../../../../icons/conceptosAlmacen.svg\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  boxControl: {\r\n    margin: theme.spacing(2.5),\r\n    marginTop: 0,\r\n    minWidth: \"20%\",\r\n    maxWidth: \"20%\",\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  imagen: {\r\n    width: 100,\r\n  },\r\n  inputBox: {\r\n    margin: 20,\r\n  },\r\n  button: {\r\n    margin: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function InventariosPorAlmacen(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    props.productosAlmacenQuery.refetch();\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={conceptosAlmacenImg}\r\n              alt=\"icono almacen\"\r\n              className={classes.imagen}\r\n            />\r\n          </Box>\r\n          Inventario por almacen\r\n        </Box>\r\n      </Button>\r\n      <InventarioPorAlmacen\r\n        open={open}\r\n        productos={props.productos}\r\n        productosAlmacenQuery={props.productosAlmacenQuery}\r\n        handleClose={handleClose}\r\n        page={props.page}\r\n        setPage={props.setPage}\r\n        limit={props.limit}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst InventarioPorAlmacen = (props) => {\r\n  const classes = useStyles();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [filtro, setFiltro] = useState(\"\");\r\n\r\n  const { dataExcel, setDataExcel } = useContext(TraspasosAlmacenContext);\r\n\r\n  const [obtenerAlmacenes, setObtenerAlmacenes] = useState([]);\r\n  // const [ almacen, setAlmacen ] = React.useState('');\r\n\r\n  const [value] = useDebounce(filtro, 700);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  // let tipos = ['ROPA','CALZADO','OTROS'];\r\n  const [columns, setColumns] = useState([]);\r\n\r\n  /* Queries */\r\n  //const {  data, error, refetch } = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n  /* \tconst [getQuery, { data, error }] = useLazyQuery(OBTENER_PRODUCTOS_ALMACEN, {\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: value\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t}); */\r\n  /*  const productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\tfiltro: ''\r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\t  */\r\n\r\n  const categoriasQuery = useQuery(OBTENER_CATEGORIAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES, {\r\n    variables: {\r\n      id: sesion.sucursal._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  /* useEffect(() => {\r\n\t\tqueryObtenerAlmacenes.refetch();\r\n\t},[ queryObtenerAlmacenes.update, queryObtenerAlmacenes ]);  */\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (props.open) {\r\n        setDataExcel([]);\r\n        queryObtenerAlmacenes.refetch();\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, [props.open]);\r\n\r\n  useEffect(() => {\r\n    if (value !== \"\") {\r\n      props.productosAlmacenQuery.refetch({\r\n        input: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          filtro: value,\r\n        },\r\n        limit: 10,\r\n        offset: 0,\r\n      });\r\n      props.setPage(0);\r\n    }\r\n  }, [value]);\r\n\r\n  /* useEffect(() => {\r\n\t\ttry {\r\n\t\t\tif(props.productosAlmacenQuery.data){\r\n\t\t\t\t\r\n\t\t\t\tsetProductos(props.productosAlmacenQuery.data.obtenerProductosAlmacenes);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n\t},[ props.productosAlmacenQuery.data]);  */\r\n\r\n  useEffect(() => {\r\n    if (queryObtenerAlmacenes.data) {\r\n      const columnsEffect = [\r\n        {\r\n          id: \"codigo_barras\",\r\n          label: \"Código de barras\",\r\n          minWidth: 60,\r\n          widthPx: 160,\r\n        },\r\n        {\r\n          id: \"nombre_comercial\",\r\n          label: \"Nombre comercial\",\r\n          minWidth: 170,\r\n          widthPx: 160,\r\n        },\r\n        {\r\n          id: \"costo_producto\",\r\n          label: \"Costo producto\",\r\n          minWidth: 60,\r\n          widthPx: 100,\r\n        },\r\n        {\r\n          id: \"costo_total_produc\",\r\n          label: \"Costo total productos\",\r\n          minWidth: 60,\r\n          widthPx: 100,\r\n        },\r\n      ];\r\n      let almace = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n      almace.forEach((element) => {\r\n        columnsEffect.push({\r\n          id: element._id,\r\n          label: element.nombre_almacen,\r\n          minWidth: 60,\r\n          widthPx: 160,\r\n        });\r\n      });\r\n      columnsEffect.push({\r\n        id: \"total\",\r\n        label: \"Total existencias\",\r\n        minWidth: 60,\r\n        widthPx: 160,\r\n      });\r\n      setObtenerAlmacenes(almace);\r\n      setColumns(columnsEffect);\r\n    }\r\n  }, [queryObtenerAlmacenes.data]);\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen\r\n      open={props.open}\r\n      onClose={props.handleClose}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            Inventario por almacén\r\n          </Typography>\r\n          <Box mx={3}>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => {\r\n                  setLoading(true);\r\n                  props.handleClose();\r\n                }}\r\n                size=\"large\"\r\n              >\r\n                <Close style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            onClick={props.handleClose}\r\n            aria-label=\"close\"\r\n          ></IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Box mt={2}>\r\n        <Box ml={4}>\r\n          <Typography className={classes.subtitle}>\r\n            <b>Buscar producto</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box ml={4} display=\"flex\">\r\n          <Box style={{ width: \"35%\" }}>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <OutlinedInput\r\n                id=\"search-producto\"\r\n                type=\"text\"\r\n                value={filtro}\r\n                onChange={(e) => setFiltro(e.target.value)}\r\n                endAdornment={\r\n                  <InputAdornment position=\"start\">\r\n                    <IconButton\r\n                      type=\"submit\"\r\n                      aria-label=\"search producto\"\r\n                      edge=\"end\"\r\n                    >\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                }\r\n              />\r\n            </FormControl>\r\n          </Box>\r\n          {props.productos.docs?.length > 0 ? (\r\n            <Box\r\n              ml={4}\r\n              mrstyle={{ backgroundColor: \"red\", alignContent: \"flex-end\" }}\r\n              justifyContent=\"flex-end\"\r\n              alignItems=\"center\"\r\n            >\r\n              <Box>\r\n                <ExportarExcel\r\n                  fileName=\"Inventarios almacen\"\r\n                  data={dataExcel}\r\n                  columnName={columns}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          ) : (\r\n            <div />\r\n          )}\r\n        </Box>\r\n      </Box>\r\n\r\n      {loading && props.productos.length === 0 ? (\r\n        <Box\r\n          display=\"flex\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n          height=\"30vh\"\r\n        >\r\n          <CircularProgress />\r\n        </Box>\r\n      ) : props.productosAlmacenQuery.error || categoriasQuery.error ? (\r\n        <ErrorPage error={props.productosAlmacenQuery.error} />\r\n      ) : props.open ? (\r\n        <Box mx={5} mt={1}>\r\n          <ListaProductos\r\n            productos={props.productos}\r\n            obtenerAlmacenes={obtenerAlmacenes}\r\n            columns={columns}\r\n            page={props.page}\r\n            setPage={props.setPage}\r\n            limit={props.limit}\r\n            loading={props.productosAlmacenQuery.loading}\r\n          />\r\n        </Box>\r\n      ) : (\r\n        <CircularProgress />\r\n      )}\r\n    </Dialog>\r\n  );\r\n};\r\n","import React, {useEffect, useState} from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport RegistroAlmacen from './RegistroAlmacen/RegistroAlmacen';\r\nimport Traspasos from './Traspasos/Traspasos';\r\nimport { useQuery } from '@apollo/client';\r\nimport InventariosPorAlmacen from './InventarioPorAlmacen/InventariosPorAlmacen';\r\nimport { TraspasosProvider } from \"../../../context/Almacenes/traspasosAlmacen\";\r\nimport { OBTENER_PRODUCTOS_ALMACEN } from '../../../gql/Almacenes/Almacen';\r\n\r\nexport default function Almacenes() {\r\n\tconst [productos, setProductos] = useState([]);\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\tconst [page, setPage] = useState(0);\r\n\tconst [pageAlm, setPageAlm] = useState(0);\r\n\tconst limit = 10;\t\r\n\r\n\tconst productosAlmacenQuery = useQuery(OBTENER_PRODUCTOS_ALMACEN,{\r\n\t\tvariables: {\r\n\t\t\tinput:{\r\n\t\t\t\tempresa: sesion.empresa._id,\r\n\t\t\t\tsucursal: sesion.sucursal._id,\r\n\t\t\t\tfiltro: ''\t\r\n\t\t\t},\r\n\t\t\tlimit:limit,\r\n      \t\toffset: page,\r\n            \r\n\t\t},\r\n\t\tfetchPolicy: \"network-only\"\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\ttry {\r\n\t\t\tif(productosAlmacenQuery.data){\r\n\t\t\t\tsetProductos(productosAlmacenQuery.data.obtenerProductosAlmacenes);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t\r\n\t\t}\r\n\t},[ productosAlmacenQuery.data]); \r\n\r\n\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t{sesion.accesos.almacenes.almacen.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<RegistroAlmacen />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid> \r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.almacenes.traspasos.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2}>\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<Traspasos productosAlmacenQuery={productosAlmacenQuery}  page={page} setPage={setPage}limit={limit} pageAlm={pageAlm} setPageAlm={setPageAlm}/>\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{sesion.accesos.almacenes.inventario_almacen.ver === false ? (null):(\r\n\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<TraspasosProvider>\r\n\t\t\t\t\t\t\t<InventariosPorAlmacen productos={productos} productosAlmacenQuery={productosAlmacenQuery} \r\n\t\t\t\t\t\t\t\tsetProductos={setProductos} page={page} setPage={setPage}limit={limit} \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TraspasosProvider>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport \"moment\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Dialog,\r\n  DialogContent,\r\n  Typography,\r\n  CircularProgress,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport moment from \"moment\";\r\n\r\nconst columns = [\r\n  { id: \"fecha\", label: \"Fecha\", minWidth: 100 },\r\n  { id: \"hora\", label: \"Hora\", minWidth: 100 },\r\n  { id: \"movimiento\", label: \"Movimiento\", minWidth: 100 },\r\n  { id: \"usuario\", label: \"Usuario\", minWidth: 100 },\r\n  { id: \"hTurno\", label: \"Horario Turno\", minWidth: 100 },\r\n  { id: \"concepto\", label: \"Concepto\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"70vh\",\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  rootBusqueda: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function TablaHistorialFiltrado({\r\n  loading,\r\n  historial,\r\n  page,\r\n  setPage\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    align=\"center\"\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {historial.docs.map((row, index) => {\r\n                return <RowsRender key={index} datos={row} />;\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={historial.totalDocs}\r\n          rowsPerPage={20}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction RowsRender({ datos }) {\r\n  const [open, setOpen] = useState(false);\r\n  const handleClickOpen = () => setOpen(!open);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <TableRow hover role=\"checkbox\" onClick={handleClickOpen} tabIndex={-1}>\r\n        <TableCell align=\"center\">\r\n          {formatoFechaCorta(datos.fecha_movimiento.completa)}\r\n        </TableCell>\r\n        <TableCell align=\"center\">{datos.hora_moviento.completa}</TableCell>\r\n        <TableCell align=\"center\">{datos.tipo_movimiento}</TableCell>\r\n        <TableCell align=\"center\">{datos.nombre_usuario_creador}</TableCell>\r\n        <TableCell align=\"center\">{datos.horario_turno}</TableCell>\r\n        <TableCell align=\"center\">{datos.concepto}</TableCell>\r\n      </TableRow>\r\n\r\n      <Dialog\r\n        fullWidth={true}\r\n        maxWidth=\"xs\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n      >\r\n        <DialogContent>\r\n          <Grid container>\r\n            <Grid item lg={12} xs={12}>\r\n              <Box textAlign=\"center\" p={2}>\r\n                <Typography variant=\"h6\">Información de movimiento</Typography>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={12} xs={12}>\r\n              <Box display=\"flex\" textAlign=\"left\" p={1}>\r\n                <Typography>\r\n                  <b>Fecha Movimiento: </b>{\" \"}\r\n                  {moment(datos.fecha_movimiento.completa).format(\"YYYY-MM-DD\")}\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" textAlign=\"left\" p={1}>\r\n                <Typography>\r\n                  <b>Hora Movimiento: </b> {datos.hora_moviento.completa}\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" textAlign=\"left\" p={1}>\r\n                <Typography>\r\n                  <b>Usuario: </b> {datos.nombre_usuario_creador}\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" textAlign=\"left\" p={1}>\r\n                <Typography>\r\n                  <b>Horario en Turno: </b>\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" textAlign=\"left\" p={1}>\r\n                <Typography>\r\n                  <b>Tipo Movimiento: </b> {datos.tipo_movimiento}\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" textAlign=\"left\" p={1}>\r\n                <Typography>\r\n                  <b>Concepto: </b> {datos.concepto}\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" textAlign=\"left\" p={1}>\r\n                <Typography>\r\n                  <b>Caja: </b> {datos.numero_caja}\r\n                </Typography>\r\n              </Box>\r\n              <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                  <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n                          Concepto\r\n                        </TableCell>\r\n                        <TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n                          Monto depositado\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">\r\n                          <b>Monto Total Efectivo:</b>\r\n                        </TableCell>\r\n                        <TableCell align=\"center\">\r\n                          <b>\r\n                            $\r\n                            {Math.abs(\r\n                              datos.montos_en_caja.monto_efectivo.monto\r\n                            )}\r\n                          </b>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                      {/* <TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Creditos</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_creditos.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_tarjeta_debito.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_tarjeta_credito.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Monedero</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_monedero.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Cheques</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_cheques.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Transferencias</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_transferencia.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow hover tabIndex={-1} >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">Vales de despensa</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">${Math.abs(datos.montos_en_caja.monto_vales_despensa.monto)}</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow> */}\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Paper>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ExcelFile from \"react-export-excel/dist/ExcelPlugin/components/ExcelFile\";\r\nimport ExcelSheet from \"react-export-excel/dist/ExcelPlugin/elements/ExcelSheet\";\r\nimport ExcelColumn from \"react-export-excel/dist/ExcelPlugin/elements/ExcelColumn\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\n\r\nexport default function ExportarReportesCajas({ props, datos, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setValue(value);\r\n\r\n    if (!value) {\r\n      refetch({\r\n        limit: 20,\r\n        offset: 0,\r\n      });\r\n    } else {\r\n      refetch({\r\n        limit: 0,\r\n        offset: 0,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<RiFileExcel2Line />}\r\n        onClick={handleClickOpen}\r\n      >\r\n        Exportar Excel\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\r\n        <DialogTitle>{\"Exportar Reportes Historial caja\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            -Exportar pagina actual: exportará la pagina actual\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            -Exportar todo:exportará la pagina actual\r\n          </DialogContentText>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => handleChange(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Contenido Actual</MenuItem>\r\n              <MenuItem value={1}>Todos los registros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <ExportarExcelAction\r\n            props={props}\r\n            datosExcel={datos}\r\n            refetch={refetch}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ props, datosExcel }) => {\r\n  const reporteData = datosExcel.map((res) => {\r\n    const arrayExcel = {\r\n      fecha: res.fecha_movimiento.completa,\r\n      hora_movimiento: res.hora_moviento.completa,\r\n      nombre: res.nombre_usuario_creador,\r\n      horario_turno: res.horario_turno,\r\n      tipo_movimiento: res.tipo_movimiento,\r\n      concepto: res.concepto,\r\n      caja: res.numero_caja,\r\n      monto_efectivo: res.montos_en_caja.monto_efectivo.monto,\r\n      monto_creditos: res.montos_en_caja.monto_creditos.monto,\r\n      monto_tarjeta_debito: res.montos_en_caja.monto_tarjeta_debito.monto,\r\n      monto_tarjeta_credito: res.montos_en_caja.monto_tarjeta_credito.monto,\r\n      monto_monedero: res.montos_en_caja.monto_monedero.monto,\r\n      monto_cheques: res.montos_en_caja.monto_cheques.monto,\r\n      monto_transferencia: res.montos_en_caja.monto_transferencia.monto,\r\n      monto_vales_despensa: res.montos_en_caja.monto_vales_despensa.monto,\r\n    };\r\n    return arrayExcel;\r\n  });\r\n\r\n  return (\r\n    <ExcelFile\r\n      element={<Button color=\"primary\">Exportar</Button>}\r\n      filename={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}\r\n    >\r\n      <ExcelSheet\r\n        data={reporteData}\r\n        name={`Reporte de Historial de Caja ${props.cajaSelected.numero_caja}`}\r\n      >\r\n        <ExcelColumn label=\"Usuario\" value=\"nombre\" />\r\n        <ExcelColumn label=\"Fecha Movimiento\" value=\"fecha\" />\r\n        <ExcelColumn label=\"Hora Movimiento\" value=\"hora_movimiento\" />\r\n        <ExcelColumn label=\"Horario en Turno\" value=\"horario_turno\" />\r\n        <ExcelColumn label=\"Concepto\" value=\"concepto\" />\r\n        <ExcelColumn label=\"Tipo Movimiento\" value=\"tipo_movimiento\" />\r\n        <ExcelColumn label=\"No. de Caja\" value=\"caja\" />\r\n        <ExcelColumn label=\"M. en Efectivo\" value=\"monto_efectivo\" />\r\n        <ExcelColumn label=\"M. en Creditos\" value=\"monto_creditos\" />\r\n        <ExcelColumn\r\n          label=\"M. en Tarjeta Debito\"\r\n          value=\"monto_tarjeta_debito\"\r\n        />\r\n        <ExcelColumn\r\n          label=\"M. en Tarjeta Credito\"\r\n          value=\"monto_tarjeta_credito\"\r\n        />\r\n        <ExcelColumn label=\"M. en monedero\" value=\"monto_monedero\" />\r\n        <ExcelColumn label=\"M. en Cheques\" value=\"monto_cheques\" />\r\n        <ExcelColumn label=\"M. en Transferencia\" value=\"monto_transferencia\" />\r\n        <ExcelColumn label=\"M. en Vale Despensa\" value=\"monto_vales_despensa\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  Dialog,\r\n  Slide,\r\n  Box,\r\n  Button,\r\n  Toolbar,\r\n  Typography,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  Grid,\r\n  TextField,\r\n  DialogContent,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_HISTORIAL_CAJA } from \"../../../../gql/Cajas/cajas\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport TablaHistorialFiltrado from \"./TablaHistorialFiltrado\";\r\nimport ExportarReportesCajas from \"./ExportarReportesCajas\";\r\nimport { Close } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`,\r\n    },\r\n  },\r\n  icon: {\r\n    fontSize: 40,\r\n    width: 40,\r\n  },\r\n  iconSave: {\r\n    zIndex: 10,\r\n    position: \"fixed\",\r\n    bottom: theme.spacing(2),\r\n    right: theme.spacing(10),\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst tipos = [\r\n  \"TODOS\",\r\n  \"COMPRA\",\r\n  \"VENTA\",\r\n  \"DEPOSITO\",\r\n  \"RETIRO\",\r\n  \"CUENTA_RETIRO\",\r\n  \"CUENTA_DEPOSITO\",\r\n  \"ABONO_CLIENTE\",\r\n  \"ABONO_PROVEEDOR\",\r\n  \"TRANSFERENCIA\",\r\n];\r\n\r\nexport default function HistorialCaja(props) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [datosBuscar, setDatosBuscar] = useState([]);\r\n  const [value] = useDebounce(datosBuscar, 500);\r\n  const [page, setPage] = useState(0);\r\n\r\n  let obtenerHistorialCaja = [];\r\n\r\n  /* Queries */\r\n  const { data, refetch, loading } = useQuery(OBTENER_HISTORIAL_CAJA, {\r\n    variables: {\r\n      id_Caja: props.cajaSelected._id,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        tipo_movimiento: datosBuscar.tipo_movimiento\r\n          ? datosBuscar.tipo_movimiento\r\n          : \"\",\r\n        fecha_incio: datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\",\r\n        fecha_fin: datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\",\r\n        usuario: value.usuario ? value.usuario : \"\",\r\n      },\r\n      limit: 20,\r\n      offset: page,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch]);\r\n\r\n  if (data) {\r\n    obtenerHistorialCaja = data.obtenerHistorialCaja;\r\n  }\r\n\r\n  const handleDatos = (e) => {\r\n    setDatosBuscar({ ...datosBuscar, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  /* const filtrarProductos = (event) => {\r\n    event.preventDefault();\r\n    refetch();\r\n  }; */\r\n\r\n  const limpiarFiltros = () => {\r\n    setDatosBuscar([]);\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen\r\n      open={props.open}\r\n      onClose={() => {\r\n        props.handleClose();\r\n      }}\r\n      TransitionComponent={Transition}\r\n    >\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar>\r\n          <Typography variant=\"h5\" className={classes.title}>\r\n            Caja {props.cajaSelected.numero_caja}\r\n          </Typography>\r\n          <Box m={1}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => {\r\n                props.handleClose();\r\n              }}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <DialogContent>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography>Movimiento</Typography>\r\n            <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"tipo_movimiento\"\r\n                onChange={handleDatos}\r\n                value={\r\n                  datosBuscar.tipo_movimiento ? datosBuscar.tipo_movimiento : \"\"\r\n                }\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                {tipos.map((tipo, index) => {\r\n                  return (\r\n                    <MenuItem key={index} value={tipo}>\r\n                      {tipo}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography>Fecha inicio:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"fecha_incio\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              value={datosBuscar.fecha_incio ? datosBuscar.fecha_incio : \"\"}\r\n              onChange={handleDatos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography>Fecha fin:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"fecha_fin\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              value={datosBuscar.fecha_fin ? datosBuscar.fecha_fin : \"\"}\r\n              onChange={handleDatos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography>Usuario:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"usuario\"\r\n              variant=\"outlined\"\r\n              value={datosBuscar.usuario ? datosBuscar.usuario : \"\"}\r\n              onChange={handleDatos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Box\r\n              display=\"flex\"\r\n              justifyContent=\"flex-end\"\r\n              alignItems=\"flex-end\"\r\n              height=\"100%\"\r\n            >\r\n              <Button\r\n                color=\"primary\"\r\n                size=\"large\"\r\n                variant=\"text\"\r\n                startIcon={<Close />}\r\n                onClick={limpiarFiltros}\r\n              >\r\n                Limpiar\r\n              </Button>\r\n              <Box mx={1} />\r\n              <ExportarReportesCajas\r\n                datos={obtenerHistorialCaja.docs}\r\n                props={props}\r\n                refetch={refetch}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <Box my={1}>\r\n          <TablaHistorialFiltrado\r\n            loading={loading}\r\n            historial={obtenerHistorialCaja}\r\n            page={page}\r\n            setPage={setPage}\r\n          />\r\n        </Box>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport {Badge, Box} from '@material-ui/core';\r\n \r\nconst StyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n      color :({props})=> props.color,\r\n      background: ({props})=> props.color,\r\n      boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n      '&::after': {\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        borderRadius: '50%',\r\n        animation: '$ripple 1.2s infinite ease-in-out',\r\n        border: '1px solid currentColor',\r\n        content: '\"\"',\r\n      },\r\n    },\r\n    '@keyframes ripple': {\r\n      '0%': {\r\n        transform: 'scale(.8)',\r\n        opacity: 1,\r\n      },\r\n      '100%': {\r\n        transform: 'scale(2.4)',\r\n        opacity: 0,\r\n      },\r\n    }\r\n  }))(Badge);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    minWidth:230,\r\n    maxWidth: 230,\r\n    margin:5,\r\n    \r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    color: red[500],\r\n  },\r\n  textActive:{\r\n    position:'relative',\r\n    bottom:8\r\n  }\r\n}));\r\n\r\nexport default function CardCaja(props) {\r\n    const styleProps={\r\n      color: (props.activa)  ? '#44b700' : 'red'\r\n    }\r\n    const classes = useStyles();\r\n \r\n    return (\r\n        <div>\r\n            <Card className={classes.root}>\r\n                    <CardHeader\r\n                      color=\"secondary\"\r\n                        avatar={\r\n                            <StyledBadge\r\n                              overlap=\"circular\"\r\n                              props={styleProps}\r\n                              anchorOrigin={{\r\n                                vertical: 'bottom',\r\n                                horizontal: 'right',\r\n                              }}\r\n                              variant=\"dot\"\r\n                              badgeContent=\"\"\r\n                            >\r\n                            <Avatar alt=\"Cajero X\" src=\"/static/images/avatar/1.jpg\" />\r\n                            </StyledBadge>\r\n                        }\r\n                    />\r\n                    <Box m={1} mb={2}>\r\n                    <Typography variant=\"h4\" color=\"textSecondary\" component=\"p\" >\r\n                            Caja {props.name}\r\n                    </Typography>\r\n                    </Box>\r\n                    {/* <CardActions disableSpacing  >\r\n                        <Typography style={{fontWeight: 'bold'}} color=\"textSecondary\" component=\"p\">\r\n                           Total en caja: \r\n                        </Typography>\r\n                        <Typography style={{margin: '0px 10px', color: 'green'}} variant=\"h6\" color=\"textSecondary\" component=\"p\">\r\n                           $ {parseFloat(props.cantidad_efectivo_actual)}\r\n                        </Typography>\r\n                    </CardActions> */}\r\n                </Card>\r\n        </div>\r\n    )\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, Grid  } from '@material-ui/core';\r\nimport HistorialCaja from './HistorialCaja';\r\nimport SnackBarMessages from '../../../../components/SnackBarMessages';\r\nimport BackdropComponent from '../../../../components/Layouts/BackDrop';\r\nimport CardCaja from './CardCaja';\r\nimport CajaIcon from \"../../../../icons/cajas.svg\"\r\n\r\nimport { OBTENER_CAJAS } from '../../../../gql/Cajas/cajas';\r\nimport { useQuery } from '@apollo/client';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\ticon: {\r\n\t\twidth: 100\r\n\t}\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Cajas() {\r\n\tconst classes = useStyles();\r\n    const [ loading, setLoading ] = React.useState(false);\r\n\tconst [ open, setOpen ] = React.useState(false);\r\n    const [ openHistorial, setOpenHistorial ] = React.useState(false);\r\n    const [ alert, setAlert ] = useState({ message: '', status: '', open: false });\r\n    const [ cajaSelected, setCajaSelected ] = React.useState({name:''});\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n    let obtenerCajasSucursal = []; \r\n\r\n\t\r\n    /* Queries */\r\n    const {  data, refetch } = useQuery(OBTENER_CAJAS,{\r\n\t\tvariables: {\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\t\r\n\r\n    useEffect(\r\n\t\t() => {\r\n\t\t\tsetLoading(true);\r\n\t\t\trefetch();\r\n\t\t\tsetLoading(false);\r\n\t\t},\r\n\t\t[ refetch ]\r\n\t); \r\n\t\r\n\tif(data){\r\n\t\tobtenerCajasSucursal = data.obtenerCajasSucursal;\r\n\t}\r\n\tconst handleClickOpen = () => {\r\n\t\tsetOpen(true);\r\n\t};\r\n    const handleClickOpenHistorial = () => {\r\n\t\tsetOpenHistorial(true);\r\n\t};\r\n\tconst handleClose = () => {\r\n\t\tsetOpen(false);\r\n\t};\r\n    const handleCloseHistorial = () => {\r\n\t\tsetOpenHistorial(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n            <SnackBarMessages alert={alert} setAlert={setAlert} />\t\r\n\t\t\t<BackdropComponent loading={loading} setLoading={setLoading} />\r\n\t\t\t<Button fullWidth onClick={handleClickOpen}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t<img src={CajaIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClose} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistorial de Cajas\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClose} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t<Grid container spacing={1} justifyContent=\"center\" >\r\n\t\t\t\t\t{obtenerCajasSucursal?.map((caja, index) => {\r\n\t\t\t\t\t\treturn(\r\n\t\t\t\t\t\t\t<Button key={index} onClick={()=>{handleClickOpenHistorial(); setCajaSelected(caja)}}>\r\n\t\t\t\t\t\t\t\t<CardCaja name={caja.numero_caja} activa={caja.activa} cantidad_efectivo_actual={caja.cantidad_efectivo_actual} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t)\t\r\n\t\t\t\t\t})} \r\n\t\t\t\t</Grid> \t\r\n\t\t\t</Dialog>\r\n            <HistorialCaja open={openHistorial} fetchCajas={refetch} handleClickOpen={handleClickOpenHistorial} cajaSelected={cajaSelected} handleClose={handleCloseHistorial} obtenerCajasSucursal={obtenerCajasSucursal} />\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Dialog,\r\n  DialogContent,\r\n  Typography,\r\n  CircularProgress,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nconst columns = [\r\n  { id: \"fecha\", label: \"Fecha\", minWidth: 100 },\r\n  { id: \"hora\", label: \"Hora\", minWidth: 100 },\r\n  { id: \"usuario\", label: \"Usuario\", minWidth: 100 },\r\n  { id: \"hTurno\", label: \"Horario Turno\", minWidth: 100 },\r\n  { id: \"concepto\", label: \"Concepto\", minWidth: 100 },\r\n  { id: \"caja\", label: \"Caja\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"68vh\",\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  rootBusqueda: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function TablaTurnosFiltrados({\r\n  loading,\r\n  turnos,\r\n  page,\r\n  setPage,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    align=\"center\"\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {turnos.docs.map((row, index) => {\r\n                return <RowsRender key={index} turno={row} />;\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={turnos.totalDocs}\r\n          rowsPerPage={20}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction RowsRender({ turno }) {\r\n  const [open, setOpen] = useState(false);\r\n  const classes = useStyles();\r\n  const handleClickOpen = () => setOpen(!open);\r\n\r\n  return (\r\n    <>\r\n      <TableRow\r\n        hover\r\n        role=\"checkbox\"\r\n        onClick={handleClickOpen}\r\n        tabIndex={-1}\r\n        key={turno._id}\r\n      >\r\n        <TableCell align=\"center\">\r\n          {formatoFechaCorta(turno.fecha_movimiento)}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          {turno.concepto === \"ABRIR TURNO\" ? (\r\n            <>{turno.hora_entrada.completa}</>\r\n          ) : (\r\n            <>{turno.hora_salida.completa}</>\r\n          )}\r\n        </TableCell>\r\n        <TableCell align=\"center\">{turno.usuario_en_turno.nombre}</TableCell>\r\n        <TableCell align=\"center\">{turno.horario_en_turno}</TableCell>\r\n        <TableCell align=\"center\">{turno.concepto}</TableCell>\r\n        <TableCell align=\"center\">{turno.numero_caja}</TableCell>\r\n      </TableRow>\r\n\r\n      <Dialog\r\n        fullWidth={true}\r\n        maxWidth=\"md\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n      >\r\n        <DialogContent>\r\n          <Grid container>\r\n            <Grid item lg={12} xs={12}>\r\n              <Box textAlign=\"center\" p={2}>\r\n                <Typography variant=\"h6\">Información del turno</Typography>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={6} xs={12}>\r\n              <Box p={1}>\r\n                <Typography>\r\n                  <b>Usuario</b>: {turno.usuario_en_turno.nombre}\r\n                </Typography>\r\n              </Box>\r\n              <Box p={1}>\r\n                <Typography>\r\n                  <b>Numero de caja</b>: {turno.numero_caja}\r\n                </Typography>\r\n              </Box>\r\n              <Box p={1}>\r\n                <Typography>\r\n                  <b>Moviento de turno</b>: {turno.concepto}\r\n                </Typography>\r\n              </Box>\r\n              <Box p={1}>\r\n                <Typography>\r\n                  <b>Horario de turno</b>: {turno.horario_en_turno}\r\n                </Typography>\r\n              </Box>\r\n              <Box p={1}>\r\n                <Typography>\r\n                  {turno.concepto === \"ABRIR TURNO\" ? (\r\n                    <>\r\n                      <b>Hora de Entrada de turno: </b>\r\n                      {turno.hora_entrada.completa}\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <b>Hora de Salida de turno: </b>\r\n                      {turno.hora_salida.completa}\r\n                    </>\r\n                  )}\r\n                </Typography>\r\n              </Box>\r\n              <Box p={1}>\r\n                <Typography>\r\n                  <b>Comentarios</b>: {turno.comentarios}\r\n                </Typography>\r\n              </Box>\r\n              <Box p={1}>\r\n                <Typography>\r\n                  <b>Fecha de movimiento</b>: {turno.fecha_movimiento}\r\n                </Typography>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={6} xs={12}>\r\n              <Paper className={classes.root}>\r\n                <TableContainer className={classes.container}>\r\n                  <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n                          Concepto\r\n                        </TableCell>\r\n                        <TableCell align=\"center\" style={{ minWidth: 100 }}>\r\n                          Monto depositado\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n\r\n                    <TableBody>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">\r\n                          <b>Monto Total Efectivo:</b>\r\n                        </TableCell>\r\n                        <TableCell align=\"center\">\r\n                          <b>${turno.montos_en_caja.monto_efectivo.monto}</b>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">Creditos</TableCell>\r\n                        <TableCell align=\"center\">\r\n                          ${turno.montos_en_caja.monto_creditos.monto}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">Tarjeta Debito</TableCell>\r\n                        <TableCell align=\"center\">\r\n                          ${turno.montos_en_caja.monto_tarjeta_debito.monto}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">Tarjeta Credito</TableCell>\r\n                        <TableCell align=\"center\">\r\n                          ${turno.montos_en_caja.monto_tarjeta_credito.monto}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">Monedero</TableCell>\r\n                        <TableCell align=\"center\">\r\n                          ${turno.montos_en_caja.monto_monedero.monto}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">Cheques</TableCell>\r\n                        <TableCell align=\"center\">\r\n                          ${turno.montos_en_caja.monto_cheques.monto}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">Transferencias</TableCell>\r\n                        <TableCell align=\"center\">\r\n                          ${turno.montos_en_caja.monto_transferencia.monto}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                      <TableRow hover tabIndex={-1}>\r\n                        <TableCell align=\"center\">Vales de despensa</TableCell>\r\n                        <TableCell align=\"center\">\r\n                          ${turno.montos_en_caja.monto_vales_despensa.monto}\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Paper>\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ExcelFile from \"react-export-excel/dist/ExcelPlugin/components/ExcelFile\";\r\nimport ExcelSheet from \"react-export-excel/dist/ExcelPlugin/elements/ExcelSheet\";\r\nimport ExcelColumn from \"react-export-excel/dist/ExcelPlugin/elements/ExcelColumn\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\n\r\nexport default function ExportarReportesTurnos({ datosExcel, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setValue(value);\r\n\r\n    if (!value) {\r\n      refetch({\r\n        limit: 20,\r\n        offset: 0,\r\n      });\r\n    } else {\r\n      refetch({\r\n        limit: 0,\r\n        offset: 0,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<RiFileExcel2Line />}\r\n        onClick={handleClickOpen}\r\n      >\r\n        Exportar Excel\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\r\n        <DialogTitle>{\"Exportar Reportes Historial caja\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            -Exportar pagina actual: exportará la pagina actual\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            -Exportar todo: exportará la pagina actual\r\n          </DialogContentText>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => handleChange(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Contenido Actual</MenuItem>\r\n              <MenuItem value={1}>Todos los registros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <ExportarExcelAction datosExcel={datosExcel} refetch={refetch} />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ datosExcel }) => {\r\n  const reportesData = datosExcel.map((res) => {\r\n    const arrayExcel = {\r\n      fecha: res.fecha_movimiento,\r\n      nombre: res.usuario_en_turno.nombre,\r\n      numero_usuario: res.usuario_en_turno.numero_usuario,\r\n      fecha_entrada: res.fecha_entrada.completa,\r\n      fecha_salida: res.fecha_salida.completa,\r\n      hora_entrada: res.hora_entrada.completa,\r\n      hora_salida: res.hora_salida.completa,\r\n      horario_en_turno: res.horario_en_turno,\r\n      concepto: res.concepto,\r\n      caja: res.numero_caja,\r\n    };\r\n    return arrayExcel;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={<Button color=\"primary\">Exportar</Button>}\r\n      filename=\"Reporte de Turnos Usuarios\"\r\n    >\r\n      <ExcelSheet data={reportesData} name={\"Reporte de Turnos Usuarios\"}>\r\n        <ExcelColumn label=\"No. Usuario\" value=\"numero_usuario\" />\r\n        <ExcelColumn label=\"Usuario\" value=\"nombre\" />\r\n        <ExcelColumn label=\"Fecha Movimiento\" value=\"fecha\" />\r\n        <ExcelColumn label=\"Fecha Entrada\" value=\"fecha_entrada\" />\r\n        <ExcelColumn label=\"Fecha Salida\" value=\"fecha_salida\" />\r\n        <ExcelColumn label=\"Hora Entrada\" value=\"hora_entrada\" />\r\n        <ExcelColumn label=\"Hora Salida\" value=\"hora_salida\" />\r\n        <ExcelColumn label=\"Horario en Turno\" value=\"horario_en_turno\" />\r\n        <ExcelColumn label=\"Concepto\" value=\"concepto\" />\r\n        <ExcelColumn label=\"No. de Caja\" value=\"caja\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/shift.20c89466.svg\";","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  Slide,\r\n  TextField,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport TablaTurnosFiltrados from \"./TablaTurnosFiltrados\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CAJAS } from \"../../../../gql/Cajas/cajas\";\r\nimport { OBTENER_HISTORIAL_TURNOS } from \"../../../../gql/Ventas/abrir_cerrar_turno\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport ExportarReportesTurnos from \"./ExportarTurnosExcel\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport TurnosIcon from \"../../../../icons/ventas/shift.svg\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nexport default function ReportesTurnosUsuarios() {\r\n  const [open, setOpen] = useState(false);\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        aria-controls=\"simple-menu\"\r\n        aria-haspopup=\"true\"\r\n        onClick={handleClickOpen}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={TurnosIcon}\r\n              alt=\"icono caja\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Turnos de usuarios\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes turnos de usuarios\r\n            </Typography>\r\n            <Box m={1} display=\"flex\">\r\n              <Box p={1}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={handleClickOpen}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon style={{ fontSize: 30 }} />\r\n                </Button>\r\n              </Box>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          <FiltroTablaTurnos />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst FiltroTablaTurnos = () => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [filtros, setFiltros] = useState([]);\r\n  const [value] = useDebounce(filtros, 500);\r\n  const [page, setPage] = useState(0);\r\n  let historialTurnos = [];\r\n\r\n  const cajas = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_HISTORIAL_TURNOS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        horario_en_turno: filtros.horario_turno ? filtros.horario_turno : \"\",\r\n        usuario_en_turno: value.usuario_en_turno ? value.usuario_en_turno : \"\",\r\n        numero_caja: filtros.numero_caja ? filtros.numero_caja : \"\",\r\n        fechaInicio: filtros.fechaInicio ? filtros.fechaInicio : \"\",\r\n        fechaFin: filtros.fechaFin ? filtros.fechaFin : \"\",\r\n      },\r\n      limit: 20,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [refetch]);\r\n\r\n  const obtenerDatos = (e) => {\r\n    setFiltros({ ...filtros, [e.target.name]: e.target.value.toString() });\r\n  };\r\n\r\n  if (data && cajas.loading === false) {\r\n    historialTurnos = data.obtenerFiltroTurnos;\r\n  }\r\n\r\n  if (error) {\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  /*  const filtrarProductos = (event) => {\r\n    event.preventDefault();\r\n    refetch();\r\n  }; */\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltros([]);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Fecha inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fechaInicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerDatos}\r\n            value={filtros.fechaInicio ? filtros.fechaInicio : \"\"}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Fecha fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fechaFin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerDatos}\r\n            value={filtros.fechaFin ? filtros.fechaFin : \"\"}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Usuario:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"usuario_en_turno\"\r\n            value={filtros.usuario_en_turno ? filtros.usuario_en_turno : \"\"}\r\n            variant=\"outlined\"\r\n            onChange={obtenerDatos}\r\n          />\r\n        </Grid>\r\n        <Grid item md={1} xs={12}>\r\n          <Typography>Caja:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              id=\"form-producto-tipo\"\r\n              name=\"numero_caja\"\r\n              onChange={obtenerDatos}\r\n              value={filtros.numero_caja ? filtros.numero_caja : \"\"}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              {cajas.data?.obtenerCajasSucursal?.map((caja, index) => {\r\n                return (\r\n                  <MenuItem key={index} value={caja.numero_caja}>\r\n                    Caja {caja.numero_caja}\r\n                  </MenuItem>\r\n                );\r\n              })}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={1} xs={12}>\r\n          <Typography>Turno:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              id=\"form-producto-tipo\"\r\n              name=\"horario_turno\"\r\n              value={filtros.horario_turno ? filtros.horario_turno : \"\"}\r\n              onChange={obtenerDatos}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n              <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={4} xs={12}>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"flex-end\"\r\n            alignItems=\"flex-end\"\r\n            height=\"100%\"\r\n          >\r\n            <Button\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              variant=\"text\"\r\n              onClick={limpiarFiltros}\r\n              startIcon={<Close />}\r\n            >\r\n              Limpiar\r\n            </Button>\r\n            <Box mx={1} />\r\n            <ExportarReportesTurnos\r\n              datosExcel={historialTurnos.docs}\r\n              refetch={refetch}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      <Box my={1}>\r\n        <TablaTurnosFiltrados\r\n          loading={loading}\r\n          turnos={historialTurnos}\r\n          page={page}\r\n          setPage={setPage}\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, TablePagination } from \"@material-ui/core\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nconst columns = [\r\n  { label: \"Nombre producto\", minWidth: 300 },\r\n  { label: \"Fecha de Compra\", minWidth: 160 },\r\n  { label: \"Almacen\", minWidth: 100 },\r\n  { label: \"Proveedor\", minWidth: 150 },\r\n  { label: \"M. pago\", minWidth: 100 },\r\n  { label: \"F. pago\", minWidth: 130 },\r\n  { label: \"Cantidad\", minWidth: 90 },\r\n  { label: \"Fecha límite crédito\", minWidth: 170 },\r\n  { label: \"Saldo pendiente\", minWidth: 150 },\r\n  { label: \"Descuento\", minWidth: 120 },\r\n  { label: \"Subtotal\", minWidth: 120 },\r\n  { label: \"Impuestos\", minWidth: 120 },\r\n  { label: \"Total\", minWidth: 120 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"60vh\",\r\n  },\r\n}));\r\n\r\nexport default function TablaComprasFiltradas({\r\n  data,\r\n  page,\r\n  setPage,\r\n  refetch,\r\n  filtro,\r\n  limit\r\n}) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: filtro,\r\n      offset: nextPage,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box my={2}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.docs.map((data, index) => {\r\n                const result = formaPago.filter(\r\n                  (res) => res.Value === data.forma_pago\r\n                );\r\n                let forma_pago = result[0];\r\n\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell>\r\n                      {data.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {formatoFechaCorta(data.fecha_registro)}\r\n                    </TableCell>\r\n                    <TableCell>{data.almacen.nombre_almacen}</TableCell>\r\n                    <TableCell>{data.proveedor.nombre_cliente}</TableCell>\r\n                    <TableCell>\r\n                      {data.compra_credito ? \"Crédito\" : \"Contado\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${forma_pago.Value}-${forma_pago.Name}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`${data.cantidad_total} - ${data.unidad}`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                    {formatoFechaCorta(data.compra.fecha_vencimiento_credito)}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                    {formatoMexico(data.compra.saldo_credito_pendiente)}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`%${data.descuento_porcentaje} - $${\r\n                        data.descuento_precio\r\n                          ? formatoMexico(data.descuento_precio)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell>${formatoMexico(data.subtotal)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={data.totalDocs}\r\n          rowsPerPage={limit}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import { gql } from \"@apollo/client\";\r\n\r\nexport const OBTENER_REPORTE_COMPRAS = gql`\r\n  query obtenerProductoMovimientos(\r\n    $empresa: ID!\r\n    $sucursal: ID\r\n    $input: ObteneReportesCompras\r\n    $limit: Int\r\n    $offset: Int\r\n  ) {\r\n    obtenerProductoMovimientos(\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      input: $input\r\n      limit: $limit\r\n      offset: $offset\r\n    ) {\r\n      docs {\r\n        _id\r\n        id_compra\r\n        id_traspaso\r\n        id_producto\r\n        id_proveedor\r\n        id_almacen\r\n        almacen {\r\n          id_almacen\r\n          nombre_almacen\r\n        }\r\n        proveedor {\r\n          _id\r\n          clave_cliente\r\n          numero_cliente\r\n          nombre_cliente\r\n        }\r\n        producto {\r\n          almacen_inicial {\r\n            almacen\r\n            cantidad\r\n            fecha_de_expiracion\r\n            id_almacen\r\n          }\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            granel\r\n            litros\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n          }\r\n          unidades_de_venta {\r\n            cantidad\r\n            codigo_barras\r\n            id_producto\r\n            precio\r\n            unidad\r\n            unidad_principal\r\n            _id\r\n            precio_unidad {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n          }\r\n        }\r\n        concepto\r\n        cantidad\r\n        cantidad_regalo\r\n        unidad_regalo\r\n        cantidad_total\r\n        iva_total\r\n        ieps_total\r\n        costo\r\n        descuento_porcentaje\r\n        descuento_precio\r\n        compra_credito\r\n        forma_pago\r\n        impuestos\r\n        mantener_precio\r\n        subtotal\r\n        total\r\n        medida {\r\n          id_medida\r\n          medida\r\n          tipo\r\n        }\r\n        color {\r\n          id_color\r\n          color\r\n          hex\r\n        }\r\n        unidad\r\n        id_unidad_venta\r\n        empresa\r\n        sucursal\r\n        usuario\r\n        year_registro\r\n        numero_semana_year\r\n        numero_mes_year\r\n        fecha_registro\r\n        compra {\r\n        _id\r\n        folio\r\n        usuario {\r\n          _id\r\n          numero_usuario\r\n          nombre\r\n        }\r\n        proveedor {\r\n          id_proveedor {\r\n            _id\r\n          }\r\n          nombre_cliente\r\n          numero_cliente\r\n          clave_cliente\r\n        }\r\n        en_espera\r\n        almacen {\r\n          id_almacen {\r\n            _id\r\n            nombre_almacen\r\n            default_almacen\r\n          }\r\n          nombre_almacen\r\n          default_almacen\r\n        }\r\n        compra_credito\r\n        fecha_vencimiento_credito\r\n        credito_pagado\r\n        saldo_credito_pendiente\r\n        forma_pago\r\n        descuento_aplicado\r\n        descuento {\r\n          porcentaje\r\n          cantidad_descontada\r\n          precio_con_descuento\r\n        }\r\n        subtotal\r\n        impuestos\r\n        total\r\n        fecha_registro\r\n        estatus_credito\r\n        status\r\n      }\r\n      }\r\n      totalDocs\r\n    }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarCompras({ data, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setValue(value);\r\n\r\n    if (!value) {\r\n      refetch({\r\n        limit: 20,\r\n        offset: 0,\r\n      });\r\n    } else {\r\n      refetch({\r\n        limit: 0,\r\n        offset: 0,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<RiFileExcel2Line />}\r\n        onClick={handleClickOpen}\r\n      >\r\n        Exportar Excel\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\r\n        <DialogTitle>{\"Exportar Reportes de compras\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            -Exportar pagina actual: exportará la pagina actual\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            -Exportar todo: exportará todos los registros filtrados\r\n          </DialogContentText>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => handleChange(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Contenido Actual</MenuItem>\r\n              <MenuItem value={1}>Todos los registros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <ExportarExcelAction\r\n            datosExcel={data.docs}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ datosExcel }) => {\r\n  const compras = datosExcel.map((compra) => {\r\n    const {\r\n      producto,\r\n      fecha_registro,\r\n      almacen,\r\n      proveedor,\r\n      color,\r\n      medida,\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito,\r\n      costo,\r\n      descuento_porcentaje,\r\n      descuento_precio,\r\n      iva_precio,\r\n      ieps_precio,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n    } = compra;\r\n    const forma_pago_filtrada = formaPago.filter(\r\n      (forma) => forma.Value === compra.forma_pago\r\n    );\r\n    const forma_pago = forma_pago_filtrada[0];\r\n\r\n    const compra_realizada = {\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      fecha_registro: formatoFechaCorta(fecha_registro),\r\n      almacen: almacen.nombre_almacen,\r\n      proveedor: proveedor.nombre_cliente,\r\n      color: color ? color.color : \"N/A\",\r\n      medida: medida ? `${medida.medida}/${medida.tipo}` : \"N/A\",\r\n      cantidad,\r\n      unidad,\r\n      unidad_regalo,\r\n      cantidad_regalo,\r\n      cantidad_total,\r\n      compra_credito: compra_credito === true ? \"Credito\" : \"Contado\",\r\n      forma_pago: `${forma_pago.Value} - ${forma_pago.Name}`,\r\n      costo: `$${costo ? formatoMexico(costo) : 0}`,\r\n      descuento_porcentaje: `%${descuento_porcentaje}`,\r\n      descuento_precio: `$${\r\n        descuento_precio ? formatoMexico(descuento_precio) : 0\r\n      }`,\r\n      iva_precio: `$${ieps_precio ? formatoMexico(ieps_precio) : 0}`,\r\n      subtotal: `$${subtotal ? formatoMexico(subtotal) : 0}`,\r\n      impuestos: `$${impuestos ? formatoMexico(impuestos) : 0}`,\r\n      total: `$${total ? formatoMexico(total) : 0}`,\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={compras} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Almacen\" value=\"almacen\" />\r\n        <ExcelColumn label=\"Proveedor\" value=\"proveedor\" />\r\n        <ExcelColumn label=\"Color\" value=\"color\" />\r\n        <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n        <ExcelColumn label=\"Unidad de Regalo\" value=\"unidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad de Regalo\" value=\"cantidad_regalo\" />\r\n        <ExcelColumn label=\"Cantidad Total\" value=\"cantidad_total\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"compra_credito\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"forma_pago\" />\r\n        <ExcelColumn label=\"Costo\" value=\"costo\" />\r\n        <ExcelColumn\r\n          label=\"Descuento en Porcentaje\"\r\n          value=\"descuento_porcentaje\"\r\n        />\r\n        <ExcelColumn label=\"Descuento en Cantidad\" value=\"descuento_precio\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva_precio\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps_precio\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n        <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n};\r\n","import {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  FormControlLabel,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaComprasFiltradas from \"./TablaComprasFiltradas\";\r\nimport { formaPago } from \"../../Facturacion/catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { OBTENER_REPORTE_COMPRAS } from \"../../../../gql/Compras/reporte_compras\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarCompras from \"./ExportarCompras\";\r\n\r\nexport default function FiltrosCompras() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [page, setPage] = useState(0);\r\n  const [filtro, setFiltro] = useState({\r\n    fecha_inicio: \"\",\r\n    fecha_fin: \"\",\r\n    proveedor: \"\",\r\n    metodo_pago: \"\",\r\n    forma_pago: \"\",\r\n    producto: \"\",\r\n    vencidas: false,\r\n    vigentes: false,\r\n    liquidadas: false\r\n  });\r\n  const limit = 20;\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_REPORTE_COMPRAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        fecha_inicio: \"\",\r\n        fecha_fin: \"\",\r\n        proveedor: \"\",\r\n        metodo_pago: \"\",\r\n        forma_pago: \"\",\r\n        producto: \"\",\r\n        vencidas: false,\r\n        vigentes: false,\r\n        liquidadas: false\r\n      },\r\n      limit,\r\n      offset: 0,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) return <ErrorPage error={error} />;\r\n\r\n  const { obtenerProductoMovimientos } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos\r\n          refetch={refetch}\r\n          data={obtenerProductoMovimientos}\r\n          filtro={filtro}\r\n          setFiltro={setFiltro}\r\n        />\r\n        <TablaComprasFiltradas\r\n          data={obtenerProductoMovimientos}\r\n          page={page}\r\n          setPage={setPage}\r\n          filtro={filtro}\r\n          refetch={refetch}\r\n          limit={limit}\r\n        />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data, filtro, setFiltro }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [values] = useDebounce(filtro, 800);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro({\r\n      fecha_inicio: \"\",\r\n      fecha_fin: \"\",\r\n      proveedor: \"\",\r\n      metodo_pago: \"\",\r\n      forma_pago: \"\",\r\n      producto: \"\",\r\n      vencidas: false,\r\n      vigentes: false,\r\n      liquidadas: false\r\n    });\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerChecksVencidas = (e) => {\r\n    const { name, checked } = e.target;\r\n    if (name === \"vencidas\") {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vigentes: false,\r\n        liquidadas: false,\r\n      });\r\n    } else if (name === \"liquidadas\") {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vencidas: false,\r\n        vigentes: false,\r\n      });\r\n    } else {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vencidas: false,\r\n        liquidadas: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filter) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: filter,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_inicio}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha compra fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_fin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_fin}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Proveedor:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"proveedor\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, Clave o numero\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.proveedor}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"CREDITO\">Crédito</MenuItem>\r\n              <MenuItem value=\"CONTADO\">Contado</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Producto:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"producto\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, código, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.producto}\r\n          />\r\n        </Grid>\r\n        <Grid>\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                checked={filtro.vencidas}\r\n                onChange={obtenerChecksVencidas}\r\n                name=\"vencidas\"\r\n                color=\"default\"\r\n              />\r\n            }\r\n            label=\"Vencidas\"\r\n          />\r\n        </Grid>\r\n        <Grid>\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                checked={filtro.vigentes}\r\n                onChange={obtenerChecksVencidas}\r\n                name=\"vigentes\"\r\n                color=\"default\"\r\n              />\r\n            }\r\n            label=\"Vigentes\"\r\n          />\r\n        </Grid>\r\n        <Grid>\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                checked={filtro.liquidadas}\r\n                onChange={obtenerChecksVencidas}\r\n                name=\"liquidadas\"\r\n                color=\"default\"\r\n              />\r\n            }\r\n            label=\"Pagadas\"\r\n          />\r\n        </Grid>\r\n        <Grid>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={<ClearOutlined />}\r\n            onClick={() => limpiarFiltros()}\r\n          >\r\n            Limpiar filtros\r\n          </Button>\r\n        </Grid>\r\n        <Grid>\r\n          <ExportarCompras data={data} refetch={refetch} />\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n};\r\n","import {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport React, { useState } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcPaid } from \"react-icons/fc\";\r\nimport FiltrosCompras from \"./FiltrosCompra\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}));\r\n\r\nexport default function ReportesCompras() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcPaid fontSize={100} />\r\n          </Box>\r\n          Reportes Compras\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes Compras\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <FiltrosCompras />\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, TablePagination, Typography } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../../Facturacion/catalogos\";\r\nimport moment from \"moment\";\r\n\r\nconst columns = [\r\n  { label: \"Folio venta\", minWidth: 100 },\r\n  { label: \"Cliente\", minWidth: 180 },\r\n  { label: \"Clave cliente\", minWidth: 100 },\r\n  { label: \"Usuario en caja\", minWidth: 180 },\r\n  { label: \"Caja\", minWidth: 50 },\r\n  { label: \"Artículo\", minWidth: 200 },\r\n  { label: \"Medida\", minWidth: 100 },\r\n  { label: \"Color\", minWidth: 100 },\r\n  { label: \"Fecha venta\", minWidth: 120 },\r\n  { label: \"M. pago\", minWidth: 90, padding: \"checkbox\" },\r\n  { label: \"F. pago\", minWidth: 100, padding: \"checkbox\" },\r\n  { label: \"Cantidad\", minWidth: 90, padding: \"checkbox\" },\r\n  { label: \"Unidad\", minWidth: 90, padding: \"checkbox\" },\r\n  { label: \"Desc.\", minWidth: 100, padding: \"checkbox\" },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Impuestos\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n  { label: \"Regresó\" },\r\n  { label: \"Cant. venta\", minWidth: 120 },\r\n  { label: \"Total\" },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n  normal_color: {\r\n    borderLeft: \"6px solid #FFF\",\r\n  },\r\n  notas_credito: {\r\n    borderLeft: \" 6px solid #FFEAAD\",\r\n  },\r\n  cancelada: {\r\n    borderLeft: \" 6px solid #FF8A8A\",\r\n  },\r\n}));\r\n\r\nexport default function TablaVentasFiltradas({\r\n  data,\r\n  page,\r\n  filtro,\r\n  refetch,\r\n  setPage,\r\n  limit,\r\n}) {\r\n  const classes = useStyles();\r\n  //const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n    /* refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: filtro,\r\n      offset: nextPage,\r\n    }); */\r\n  };\r\n\r\n  return (\r\n    <Box my={2}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    style={{ minWidth: column.minWidth }}\r\n                    padding={column.checkbox}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.docs.map((data, index) => {\r\n                let forma_pago = \"-\";\r\n                if (data.forma_pago) {\r\n                  const result = formaPago.filter(\r\n                    (res) => res.Value === data.forma_pago\r\n                  );\r\n                  forma_pago = result[0];\r\n                }\r\n\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell\r\n                      className={\r\n                        data.nota_credito\r\n                          ? classes.notas_credito\r\n                          : data.venta.status === \"CANCELADO\"\r\n                          ? classes.cancelada\r\n                          : classes.normal_color\r\n                      }\r\n                    >\r\n                      {data.venta.folio}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.venta.cliente !== null\r\n                        ? data.venta.cliente.nombre_cliente\r\n                        : \"Público General\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.venta.cliente !== null\r\n                        ? data.venta.cliente.clave_cliente\r\n                        : \"-\"}\r\n                    </TableCell>\r\n                    <TableCell>{data.venta.usuario.nombre}</TableCell>\r\n                    <TableCell>{data.venta.id_caja.numero_caja}</TableCell>\r\n                    <TableCell>\r\n                      {data.producto.datos_generales.nombre_comercial}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.medida.medida !== null ? data.medida.medida : \"-\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.color.color !== null ? data.color.color : \"-\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.venta_credito ? \"Crédito\" : \"Contado\"}\r\n                    </TableCell>\r\n                    <TableCell>{`${forma_pago.Name}`}</TableCell>\r\n                    <TableCell>{data.cantidad_venta}</TableCell>\r\n                    <TableCell>{data.unidad}</TableCell>\r\n                    <TableCell>\r\n                      {`$${\r\n                        data.descuento_precio\r\n                          ? formatoMexico(data.descuento_precio)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell>${formatoMexico(data.subtotal)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                    <TableCell\r\n                      style={{ backgroundColor: \"#FFFAEC\" }}\r\n                      align=\"center\"\r\n                    >\r\n                      {\" \"}\r\n                      {data.nota_credito\r\n                        ? data.nota_credito.cantidad_devuelta\r\n                        : \"\"}\r\n                    </TableCell>\r\n                    <TableCell\r\n                      style={{ backgroundColor: \"#FFFAEC\" }}\r\n                      align=\"center\"\r\n                    >\r\n                      {data.nota_credito\r\n                        ? data.nota_credito.cantidad_vendida\r\n                        : \"\"}\r\n                    </TableCell>\r\n                    <TableCell style={{ backgroundColor: \"#FFFAEC\" }}>\r\n                      {data.nota_credito\r\n                        ? `$${formatoMexico(data.nota_credito.total)}`\r\n                        : \"\"}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" mr={3}>\r\n          <Typography variant=\"h6\">\r\n            Total: $ {formatoMexico(data.totalVenta)}\r\n          </Typography>\r\n        </Box>\r\n        <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={data.totalDocs}\r\n          rowsPerPage={limit}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../../Facturacion/catalogos\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarVentas({ data, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setValue(value);\r\n\r\n    if (!value) {\r\n      refetch({\r\n        limit: 20,\r\n        offset: 0,\r\n      });\r\n    } else {\r\n      refetch({\r\n        limit: 0,\r\n        offset: 0,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<RiFileExcel2Line />}\r\n        onClick={handleClickOpen}\r\n      >\r\n        Exportar Excel\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\r\n        <DialogTitle>{\"Exportar Reportes de ventas\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            -Exportar pagina actual: exportará la pagina actual\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            -Exportar todo: exportará todos los registros filtrados\r\n          </DialogContentText>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => handleChange(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Contenido Actual</MenuItem>\r\n              <MenuItem value={1}>Todos los registros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <ExportarExcelAction datosExcel={data.docs} />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ datosExcel }) => {\r\n  const compras = datosExcel.map((compra) => {\r\n    const {\r\n      producto,\r\n      fecha_registro,\r\n      color,\r\n      medida,\r\n      cantidad_venta,\r\n      unidad,\r\n      venta_credito,\r\n      descuento_porcentaje,\r\n      descuento_precio,\r\n      iva_total,\r\n      ieps_total,\r\n      subtotal,\r\n      impuestos,\r\n      total,\r\n      nota_credito,\r\n      factura,\r\n      venta,\r\n    } = compra;\r\n    let forma_pago = \"\";\r\n    if (compra.forma_pago) {\r\n      const forma_pago_filtrada = formaPago.filter(\r\n        (forma) => forma.Value === compra.forma_pago\r\n      );\r\n      forma_pago = forma_pago_filtrada[0];\r\n    }\r\n\r\n    const compra_realizada = {\r\n      folio_venta: venta.folio,\r\n      cliente_venta:\r\n        venta.cliente !== null\r\n          ? venta.cliente.nombre_cliente\r\n          : \"Publico general\",\r\n      clave_cliente: venta.cliente !== null ? venta.cliente.clave_cliente : \"-\",\r\n      usuario: venta.usuario.nombre,\r\n      caja: venta.id_caja.numero_caja,\r\n      tipo_emision: venta.tipo_emision,\r\n      producto: producto.datos_generales.nombre_comercial,\r\n      codigo_barras: producto.datos_generales.codigo_barras,\r\n      clave_alterna: producto.datos_generales.clave_alterna,\r\n      fecha_registro: formatoFechaCorta(fecha_registro),\r\n      color: color.color ? color.color : \"N/A\",\r\n      medida: medida.medida ? `${medida.medida}/${medida.tipo}` : \"N/A\",\r\n      cantidad_venta: cantidad_venta,\r\n      unidad,\r\n      venta_credito: venta_credito === true ? \"Credito\" : \"Contado\",\r\n      forma_pago: `${forma_pago.Value} - ${forma_pago.Name}`,\r\n      nota_credito: nota_credito ? \"SI\" : \"NO\",\r\n      facturada: factura && factura.length > 0 ? \"SI\" : \"NO\",\r\n      descuento_porcentaje: `%${\r\n        descuento_porcentaje ? descuento_porcentaje : 0\r\n      }`,\r\n      descuento_precio: `$${\r\n        descuento_precio ? formatoMexico(descuento_precio) : 0\r\n      }`,\r\n      iva_total: `$${iva_total ? formatoMexico(iva_total) : 0}`,\r\n      ieps_total: `$${ieps_total ? formatoMexico(ieps_total) : 0}`,\r\n      subtotal: `$${subtotal ? formatoMexico(subtotal) : 0}`,\r\n      impuestos: `$${impuestos ? formatoMexico(impuestos) : 0}`,\r\n      total: `$${total ? formatoMexico(total) : 0}`,\r\n      cantidad_regresada: nota_credito ? nota_credito.cantidad_devuelta : \"\",\r\n      cantidad_vendida: nota_credito ? nota_credito.cantidad_vendida : \"\",\r\n      total_nota: nota_credito ? formatoMexico(nota_credito.total) : \"\",\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={compras} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Folio de venta\" value=\"folio_venta\" />\r\n        <ExcelColumn label=\"Cliente venta\" value=\"cliente_venta\" />\r\n        <ExcelColumn label=\"Clave cliente\" value=\"clave_cliente\" />\r\n        <ExcelColumn label=\"Usuario en caja\" value=\"usuario\" />\r\n        <ExcelColumn label=\"Caja\" value=\"caja\" />\r\n        <ExcelColumn label=\"Tipo de emision\" value=\"tipo_emision\" />\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Código_barras\" value=\"codigo_barras\" />\r\n        <ExcelColumn label=\"Clave alterna\" value=\"clave_alterna\" />\r\n        <ExcelColumn label=\"Fecha de compra\" value=\"fecha_registro\" />\r\n        <ExcelColumn label=\"Color\" value=\"color\" />\r\n        <ExcelColumn label=\"Medida\" value=\"medida\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad_venta\" />\r\n        <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n        <ExcelColumn label=\"Metodo de Pago\" value=\"venta_credito\" />\r\n        <ExcelColumn label=\"Forma de pago\" value=\"forma_pago\" />\r\n        <ExcelColumn label=\"Facturada\" value=\"facturada\" />\r\n        <ExcelColumn label=\"Nota de crédito\" value=\"nota_credito\" />\r\n        <ExcelColumn\r\n          label=\"Descuento en Porcentaje\"\r\n          value=\"descuento_porcentaje\"\r\n        />\r\n        <ExcelColumn label=\"Descuento en Cantidad\" value=\"descuento_precio\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva_total\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps_total\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n        <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n        <ExcelColumn\r\n          label=\"Cantidad regresada(NOTA C.)\"\r\n          value=\"cantidad_regresada\"\r\n        />\r\n        <ExcelColumn\r\n          label=\"Cantidad vendida(NOTA C.)\"\r\n          value=\"cantidad_vendida\"\r\n        />\r\n        <ExcelColumn label=\"Total(NOTA C.)\" value=\"total_nota\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n};\r\n","import {\r\n  Box,\r\n  FormControl,\r\n  MenuItem,\r\n  Select,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { OBTENER_CAJAS } from \"../../../../../gql/Cajas/cajas\";\r\n\r\nexport default function CampoCajas({ setFiltro, filtro }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* Queries */\r\n  const { data, error, loading, refetch } = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n        <Select>\r\n          <MenuItem value=\"\">\r\n            <em>Cargando...</em>\r\n          </MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error.networkError.result);\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerCajasSucursal } = data;\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value.toString(),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Typography>Caja:</Typography>\r\n      <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n        <Select name=\"caja\" onChange={obtenerCamposFiltro} value={filtro.caja}>\r\n          <MenuItem value=\"\">\r\n            <em>Selecciona una</em>\r\n          </MenuItem>\r\n          {obtenerCajasSucursal.map((res, index) => (\r\n            <MenuItem key={index} value={res.numero_caja}>\r\n              {res.numero_caja}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n    </Box>\r\n  );\r\n}\r\n","import { Checkbox, withStyles } from \"@material-ui/core\";\r\n\r\nconst checkBoxStylesCanceladas = (theme) => ({\r\n  root: {\r\n    color: \"#FF8A8A\",\r\n    \"& > .MuiIconButton-label\": {\r\n      backgroundColor: \"#FFF4F4\",\r\n    },\r\n    \"&$checked\": {\r\n      color: \"#FF8A8A\",\r\n    },\r\n  },\r\n  checked: {},\r\n});\r\n\r\nconst checkBoxStylesNotas = (theme) => ({\r\n  root: {\r\n    color: \"#FCCF53\",\r\n    \"& > .MuiIconButton-label\": {\r\n      backgroundColor: \"#FFFAEC\",\r\n    },\r\n    \"&$checked\": {\r\n      color: \"#FCCF53\",\r\n    },\r\n  },\r\n  checked: {},\r\n});\r\n\r\nconst checkBoxStylesVencidas = (theme) => ({\r\n  root: {\r\n    color: \"#FFA367\",\r\n    \"& > .MuiIconButton-label\": {\r\n      backgroundColor: \"#FFEBDE\",\r\n    },\r\n    \"&$checked\": {\r\n      color: \"#FFA367\",\r\n    },\r\n  },\r\n  checked: {},\r\n});\r\n\r\nexport const CustomCheckboxCanceladas = withStyles(checkBoxStylesCanceladas)(\r\n  Checkbox\r\n);\r\n\r\nexport const CustomCheckboxNotas = withStyles(checkBoxStylesNotas)(Checkbox);\r\n\r\nexport const CustomCheckboxVencidas = withStyles(checkBoxStylesVencidas)(Checkbox);\r\n","import {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  FormControlLabel,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect, useState } from \"react\";\r\nimport TablaVentasFiltradas from \"./TablaVentasFiltradas\";\r\nimport { formaPago } from \"../../../Facturacion/catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarVentas from \"./ExportarVentas\";\r\nimport { OBTENER_VENTAS_REPORTES } from \"../../../../../gql/Ventas/ventas_generales\";\r\nimport ExportarRVPDF from \"./ExportarRVPDF\";\r\nimport CampoCajas from \"../TabVentas/CampoCajas\";\r\nimport {\r\n  CustomCheckboxCanceladas,\r\n  CustomCheckboxNotas,\r\n} from \"../CustomCheckBoxsStyles\";\r\n\r\nconst initial_state_filtros = {\r\n  fecha_inicio: \"\",\r\n  fecha_fin: \"\",\r\n  metodo_pago: \"\",\r\n  forma_pago: \"\",\r\n  producto: \"\",\r\n  cliente: \"\",\r\n  usuario: \"\",\r\n  folio: \"\",\r\n  caja: \"\",\r\n  canceladas: false,\r\n  facturadas: false,\r\n  notas_credito: false,\r\n  vencidas: false,\r\n  vigentes: false,\r\n  liquidadas: false,\r\n};\r\n\r\nexport default function FiltrosVenta() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [page, setPage] = useState(0);\r\n  const [filtro, setFiltro] = useState(initial_state_filtros);\r\n\r\n  const limit = 20;\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_VENTAS_REPORTES, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: initial_state_filtros,\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n    //pollInterval: 5000\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error);\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerVentasReportes } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos\r\n          refetch={refetch}\r\n          data={obtenerVentasReportes}\r\n          filtro={filtro}\r\n          setFiltro={setFiltro}\r\n        />\r\n        <TablaVentasFiltradas\r\n          data={obtenerVentasReportes}\r\n          page={page}\r\n          setPage={setPage}\r\n          filtro={filtro}\r\n          refetch={refetch}\r\n          limit={limit}\r\n        />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data, filtro, setFiltro }) => {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [values] = useDebounce(filtro, 500);\r\n\r\n  const limpiarFiltros = () => {\r\n    setFiltro(initial_state_filtros);\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerChecksFiltro = (e) => {\r\n    const { name, checked } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecksVencidas = (e) => {\r\n    const { name, checked } = e.target;\r\n    if (name === \"vencidas\") {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vigentes: false,\r\n        liquidadas: false,\r\n      });\r\n    } else if (name === \"liquidadas\") {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vencidas: false,\r\n        vigentes: false,\r\n      });\r\n    } else {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vencidas: false,\r\n        liquidadas: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    realizarBusquedaBD(values);\r\n  }, [values]);\r\n\r\n  const realizarBusquedaBD = (filtros) => {\r\n    refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros,\r\n    });\r\n  };\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2}>\r\n          <Typography>Fecha venta inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_inicio}\r\n          />\r\n          <Typography>Fecha venta fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_fin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_fin}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"CREDITO\">Crédito</MenuItem>\r\n              <MenuItem value=\"CONTADO\">Contado</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <Typography>Forma de Pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Cliente venta:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"cliente\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.cliente}\r\n          />\r\n          <Typography>Usuario:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"usuario\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, numero de usuario...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.usuario}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Folio venta:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"folio\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.folio}\r\n          />\r\n          <CampoCajas setFiltro={setFiltro} filtro={filtro} />\r\n        </Grid>\r\n        <Grid item md={4}>\r\n          <Typography>Producto:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"producto\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, código, clave...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.producto}\r\n          />\r\n          <Box\r\n            display=\"flex\"\r\n            flexWrap=\"wrap\"\r\n            alignItems=\"flex-end\"\r\n            height=\"62px\"\r\n          >\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.vencidas}\r\n                  onChange={obtenerChecksVencidas}\r\n                  name=\"vencidas\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Vencidas\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.vigentes}\r\n                  onChange={obtenerChecksVencidas}\r\n                  name=\"vigentes\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Vigentes\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.liquidadas}\r\n                  onChange={obtenerChecksVencidas}\r\n                  name=\"liquidadas\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Pagadas\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <CustomCheckboxCanceladas\r\n                  checked={filtro.canceladas}\r\n                  onChange={obtenerChecksFiltro}\r\n                  name=\"canceladas\"\r\n                />\r\n              }\r\n              label=\"Canceladas\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <CustomCheckboxNotas\r\n                  checked={filtro.notas_credito}\r\n                  onChange={obtenerChecksFiltro}\r\n                  name=\"notas_credito\"\r\n                />\r\n              }\r\n              label=\"Notas crédito\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.facturadas}\r\n                  onChange={obtenerChecksFiltro}\r\n                  name=\"facturadas\"\r\n                />\r\n              }\r\n              label=\"Facturadas\"\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      <Box\r\n        mt={1}\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        justifyContent=\"space-between\"\r\n      >\r\n        <Box\r\n          display=\"flex\"\r\n          alignItems=\"center\"\r\n          position=\"absolute\"\r\n          top={70}\r\n          right={10}\r\n        >\r\n          {/* <Box display=\"flex\" alignItems=\"center\">\r\n            <Box\r\n              border={1}\r\n              borderColor=\"#FF8A8A\"\r\n              bgcolor=\"#FFF4F4\"\r\n              height=\"20px\"\r\n              width=\"20px\"\r\n            />\r\n            <Box mx={0.5} />\r\n            <Typography>\r\n              <b>Canceladas</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Box\r\n              border={1}\r\n              borderColor=\"#FCCF53\"\r\n              bgcolor=\"#FFFAEC\"\r\n              height=\"20px\"\r\n              width=\"20px\"\r\n            />\r\n            <Box mx={0.5} />\r\n            <Typography>\r\n              <b>Notas de crédito</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box mx={1} /> */}\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={<ClearOutlined />}\r\n            onClick={() => limpiarFiltros()}\r\n          >\r\n            Limpiar filtros\r\n          </Button>\r\n          <Box mx={1} />\r\n          <ExportarVentas refetch={refetch} data={data} />\r\n          <Box mx={1} />\r\n          {/* <ExportarRVPDF data={data} /> */}\r\n        </Box>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, TablePagination, Typography } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../../Facturacion/catalogos\";\r\nimport moment from \"moment\";\r\n\r\nconst columns = [\r\n  { label: \"Folio\", minWidth: 100 },\r\n  { label: \"Fecha\", minWidth: 90 },\r\n  { label: \"Cliente\", minWidth: 180 },\r\n  { label: \"Clave Cliente\", minWidth: 120 },\r\n  { label: \"Usuario venta\", minWidth: 180 },\r\n  { label: \"Caja\", minWidth: 50, padding: \"checkbox\" },\r\n  { label: \"T. emisión\", minWidth: 110 },\r\n  { label: \"F. pago\", minWidth: 110, padding: \"checkbox\" },\r\n  { label: \"M. pago\", minWidth: 100, padding: \"checkbox\" },\r\n  { label: \"Pendiente\", minWidth: 100 },\r\n  { label: \"F. límite crédito\", minWidth: 140 },\r\n  { label: \"Descuento\", minWidth: 100 },\r\n  { label: \"Subtotal\", minWidth: 90 },\r\n  { label: \"Impuestos\", minWidth: 90 },\r\n  { label: \"Total\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n  normal_color: {\r\n    borderLeft: \"6px solid #FFF\",\r\n  },\r\n  notas_credito: {\r\n    borderLeft: \" 6px solid #FFEAAD\",\r\n  },\r\n  cancelada: {\r\n    borderLeft: \" 6px solid #FF8A8A\",\r\n  },\r\n}));\r\n\r\nexport default function TablaVentasFiltradas({\r\n  data,\r\n  page,\r\n  setPage,\r\n  limit,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Box my={2}>\r\n      <Paper variant=\"outlined\">\r\n        <TableContainer className={classes.container}>\r\n          <Table size=\"small\" stickyHeader aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column, index) => (\r\n                  <TableCell\r\n                    key={index}\r\n                    /* align={column.align} */\r\n                    style={{ minWidth: column.minWidth }}\r\n                    padding={column.checkbox}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.docs.map((data, index) => {\r\n                let forma_pago = \"-\";\r\n                if (data.forma_pago) {\r\n                  const resultForma = formaPago.filter(\r\n                    (res) => res.Value === data.forma_pago\r\n                  );\r\n                  forma_pago = resultForma[0];\r\n                }\r\n\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell\r\n                      className={\r\n                        data.nota_credito.length\r\n                          ? classes.notas_credito\r\n                          : data.status === \"CANCELADO\"\r\n                          ? classes.cancelada\r\n                          : classes.normal_color\r\n                      }\r\n                    >\r\n                      {data.folio}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.cliente !== null\r\n                        ? data.cliente.nombre_cliente\r\n                        : \"Público general\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.cliente !== null\r\n                        ? data.cliente.clave_cliente\r\n                        : \"N/A\"}\r\n                    </TableCell>\r\n                    <TableCell>{data.usuario.nombre}</TableCell>\r\n                    <TableCell>{data.id_caja.numero_caja}</TableCell>\r\n                    <TableCell>{data.tipo_emision}</TableCell>\r\n                    <TableCell>{`${forma_pago.Name}`}</TableCell>\r\n                    <TableCell>{`${data.credito ? \"Credito\" : \"Contado\"}`}</TableCell>\r\n                    <TableCell>\r\n                      {`$${\r\n                        data.credito\r\n                          ? formatoMexico(data.saldo_credito_pendiente)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {data.credito\r\n                        ? moment(data.fecha_de_vencimiento_credito).format(\r\n                            \"DD/MM/YYYY\"\r\n                          )\r\n                        : \"-\"}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {`$${data.descuento ? formatoMexico(data.descuento) : 0}`}\r\n                    </TableCell>\r\n                    <TableCell>${formatoMexico(data.subTotal)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.impuestos)}</TableCell>\r\n                    <TableCell>${formatoMexico(data.total)}</TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" mr={3}>\r\n          <Typography variant=\"h6\">Total: $ {formatoMexico(data.totalVenta)}</Typography>\r\n        </Box>\r\n        <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={data.totalDocs}\r\n          rowsPerPage={limit}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button, CircularProgress } from \"@material-ui/core\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { formaPago, metodoPago } from \"../../../Facturacion/catalogos\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { OBTENER_REPORTE_VENTAS_VENTA } from \"../../../../../gql/Ventas/ventas_generales\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\nimport { InfoOutlined } from \"@material-ui/icons\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarVentas({ filtros }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n  const [data, setData] = React.useState(false);\r\n\r\n  const client = useApolloClient();\r\n\r\n  /* Queries */\r\n  const getProductos = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: OBTENER_REPORTE_VENTAS_VENTA,\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          filtros,\r\n          limit: 0,\r\n          offset: 0,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoading(false);\r\n      if (response.data) {\r\n        setData(response.data.obtenerVentasByVentaReportes.docs);\r\n        document.getElementById(\"export-excel-button\").click();\r\n      }\r\n      if (response.error) setError(true);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(true);\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    getProductos();\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<CircularProgress size={20} color=\"inherit\" />}\r\n      >\r\n        Exportar PDF\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<InfoOutlined />}\r\n      >\r\n        Exportar PDF\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {data ? (\r\n        <ExportarExcelAction datosExcel={data} />\r\n      ) : (\r\n        <Button\r\n          variant=\"text\"\r\n          color=\"primary\"\r\n          size=\"large\"\r\n          startIcon={<RiFileExcel2Line />}\r\n          onClick={handleClickOpen}\r\n        >\r\n          Exportar Excel\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ datosExcel }) => {\r\n  const compras = datosExcel.map((venta) => {\r\n    const {\r\n      folio,\r\n      fecha_registro,\r\n      cliente,\r\n      id_caja,\r\n      tipo_emision,\r\n      saldo_credito_pendiente,\r\n      credito,\r\n      fecha_de_vencimiento_credito,\r\n      usuario,\r\n      status,\r\n      factura,\r\n      nota_credito,\r\n      descuento,\r\n      iva,\r\n      ieps,\r\n      subTotal,\r\n      impuestos,\r\n      total,\r\n    } = venta;\r\n    let forma_pago = \"\";\r\n    let metodo_pago = \"\";\r\n    if (venta.forma_pago && venta.metodo_pago) {\r\n      const forma_pago_filtrada = formaPago.filter(\r\n        (forma) => forma.Value === venta.forma_pago\r\n      );\r\n      const metodo_pago_filtrada = metodoPago.filter(\r\n        (metodo) => metodo.Value === venta.metodo_pago\r\n      );\r\n      forma_pago = forma_pago_filtrada[0];\r\n      metodo_pago = metodo_pago_filtrada[0];\r\n    }\r\n\r\n    const compra_realizada = {\r\n      folio_venta: folio,\r\n      fecha_registro: formatoFechaCorta(fecha_registro),\r\n      nombre_cliente:\r\n        cliente !== null ? cliente.nombre_cliente : \"Publico general\",\r\n      clave_cliente: cliente !== null ? cliente.clave_cliente : \"-\",\r\n      numero_cliente: cliente !== null ? cliente.numero_cliente : \"-\",\r\n      caja: id_caja.numero_caja,\r\n      usuario_caja: usuario.nombre,\r\n      tipo_emision: tipo_emision,\r\n      venta_credito: credito ? \"SI \" : \"NO\",\r\n      saldo_credito_pendiente: `$${\r\n        saldo_credito_pendiente ? formatoMexico(saldo_credito_pendiente) : 0\r\n      }`,\r\n      fecha_de_vencimiento_credito: formatoFechaCorta(\r\n        fecha_de_vencimiento_credito\r\n      ),\r\n      forma_pago: `${forma_pago.Value} - ${forma_pago.Name}`,\r\n      metodo_pago: credito ? \"Crédito\" : \"Contado\",\r\n      nota_credito: nota_credito.length ? \"SI\" : \"NO\",\r\n      facturada: factura.length ? \"SI\" : \"NO\",\r\n      status,\r\n      descuento: `$${descuento ? formatoMexico(descuento) : 0}`,\r\n      iva: `$${iva ? formatoMexico(iva) : 0}`,\r\n      ieps: `$${ieps ? formatoMexico(ieps) : 0}`,\r\n      subtotal: `$${subTotal ? formatoMexico(subTotal) : 0}`,\r\n      impuestos: `$${impuestos ? formatoMexico(impuestos) : 0}`,\r\n      total: `$${total ? formatoMexico(total) : 0}`,\r\n    };\r\n\r\n    return compra_realizada;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button\r\n          id=\"export-excel-button\"\r\n          color=\"primary\"\r\n          startIcon={<RiFileExcel2Line />}\r\n        >\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de compras\"\r\n    >\r\n      <ExcelSheet data={compras} name=\"Reporte de compras\">\r\n        <ExcelColumn label=\"Folio de venta\" value=\"folio_venta\" />\r\n        <ExcelColumn label=\"Cliente\" value=\"nombre_cliente\" />\r\n        <ExcelColumn label=\"Número cliente\" value=\"numero_cliente\" />\r\n        <ExcelColumn label=\"Clave cliente\" value=\"clave_cliente\" />\r\n        <ExcelColumn label=\"Caja\" value=\"caja\" />\r\n        <ExcelColumn label=\"Usuario en caja\" value=\"usuario_caja\" />\r\n        <ExcelColumn label=\"Tipo de emision\" value=\"tipo_emision\" />\r\n        <ExcelColumn label=\"Venta a crédito\" value=\"venta_credito\" />\r\n        <ExcelColumn\r\n          label=\"Saldo crédito pendiente\"\r\n          value=\"saldo_credito_pendiente\"\r\n        />\r\n        <ExcelColumn\r\n          label=\"Fecha vencimiento crédito\"\r\n          value=\"fecha_de_vencimiento_credito\"\r\n        />\r\n        <ExcelColumn label=\"Forma pago\" value=\"forma_pago\" />\r\n        <ExcelColumn label=\"Metodo pago\" value=\"metodo_pago\" />\r\n        <ExcelColumn label=\"Facturada\" value=\"facturada\" />\r\n        <ExcelColumn label=\"Nota de crédito\" value=\"nota_credito\" />\r\n        <ExcelColumn label=\"Descuento\" value=\"descuento\" />\r\n        <ExcelColumn label=\"IVA\" value=\"iva\" />\r\n        <ExcelColumn label=\"IEPS\" value=\"ieps\" />\r\n        <ExcelColumn label=\"Subtotal\" value=\"subtotal\" />\r\n        <ExcelColumn label=\"Impuestos\" value=\"impuestos\" />\r\n        <ExcelColumn label=\"Total\" value=\"total\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { FaRegFilePdf } from \"react-icons/fa\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../../Facturacion/catalogos\";\r\nimport { CircularProgress, makeStyles, Typography } from \"@material-ui/core\";\r\nimport cafiLogo from \"../../../../../img/Cafi.svg\";\r\nimport {\r\n  Close,\r\n  CheckBoxOutlineBlankOutlined,\r\n  CheckBox,\r\n  InfoOutlined,\r\n} from \"@material-ui/icons\";\r\nimport moment from \"moment\";\r\nimport html2canvas from \"html2canvas\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { OBTENER_REPORTE_VENTAS_VENTA } from \"../../../../../gql/Ventas/ventas_generales\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  textTable: {\r\n    fontSize: \"12px\",\r\n  },\r\n}));\r\n\r\nexport default function ExportarRVPDF({ filtros }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [open, setOpen] = React.useState(false);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n  const [data, setData] = React.useState(false);\r\n  const [loadingPdf, setLoadingPdf] = React.useState(false) \r\n\r\n  const client = useApolloClient();\r\n\r\n  /* Queries */\r\n  const getProductos = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: OBTENER_REPORTE_VENTAS_VENTA,\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          filtros,\r\n          limit: 0,\r\n          offset: 0,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoading(false);\r\n      if (response.data) {\r\n        setData(response.data.obtenerVentasByVentaReportes)\r\n        setOpen(true);\r\n      };\r\n      if(response.error) setError(true);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(true);\r\n      console.log(error)\r\n    }\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    getProductos();\r\n    \r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const printDocument = () => {\r\n    setLoadingPdf(true);\r\n    const divInformation = document.getElementById(\r\n      \"filtros-reporte-ventas-container\"\r\n    );\r\n    html2canvas(divInformation).then((canvas) => {\r\n      const doc = new jsPDF(\"p\", \"mm\", \"letter\");\r\n      //Filter Information\r\n      const imgData = canvas.toDataURL(\"image/png\");\r\n      const imgProps = doc.getImageProperties(imgData);\r\n      const pdfWidth = doc.internal.pageSize.getWidth() - 5;\r\n      const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;\r\n      doc.addImage(imgData, \"JPEG\", 5, 0, pdfWidth, pdfHeight);\r\n      //Table information\r\n      doc.autoTable({\r\n        html: \"#tabla-reporte-ventas\",\r\n        theme: \"plain\",\r\n        margin: { left: 2, right: 1, top: 37 },\r\n        styles: {\r\n          fontSize: 8,\r\n        },\r\n        didDrawPage: function (data) {\r\n          console.log(data);\r\n          let footerStr = `Pagina ${data.pageNumber}`;\r\n          doc.setFontSize(10);\r\n          doc.text(footerStr, 195, 275);\r\n        },\r\n      });\r\n      doc.save(\"Reporte de ventas.pdf\");\r\n      setLoadingPdf(false);\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<CircularProgress size={20} color=\"inherit\" />}\r\n      >\r\n        Exportar PDF\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<InfoOutlined />}\r\n      >\r\n        Exportar PDF\r\n      </Button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<FaRegFilePdf />}\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        Exportar PDF\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xl\">\r\n        <DialogTitle>\r\n          <Box display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\">\r\n            <Button\r\n              startIcon={loadingPdf ? <CircularProgress size={20} color=\"inherit\" /> : <FaRegFilePdf />}\r\n              color=\"primary\"\r\n              onClick={() => printDocument()}\r\n            >\r\n              Exportar PDF\r\n            </Button>\r\n            <Box mx={1} />\r\n            <Button startIcon={<Close />} onClick={handleClose}>\r\n              Cerrar\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <ContentPDF data={data} filtros={filtros} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ContentPDF = ({ data, filtros }) => {\r\n  const classes = useStyles();\r\n  let total = 0;\r\n  data.docs.forEach((element) => {\r\n    total += element.total;\r\n  });\r\n\r\n  return (\r\n    <Box id=\"reporte-ventas-pdf-container\">\r\n      <FiltrosComponentPDF filtros={filtros} />\r\n      <Box mt={2} pb={5}>\r\n        <TableContainer>\r\n          <Table\r\n            size=\"small\"\r\n            stickyHeader\r\n            aria-label=\"a dense table\"\r\n            id=\"tabla-reporte-ventas\"\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Folio</TableCell>\r\n                <TableCell>Fecha</TableCell>\r\n                <TableCell width={100}>Cliente</TableCell>\r\n                <TableCell>Usuario</TableCell>\r\n                <TableCell>Caja</TableCell>\r\n                <TableCell>F. Pago</TableCell>\r\n                <TableCell>M. Pago</TableCell>\r\n                <TableCell>Cred. Pendiente</TableCell>\r\n                <TableCell>F. lim. cred.</TableCell>\r\n                <TableCell>Desc.</TableCell>\r\n                <TableCell>SubTotal</TableCell>\r\n                <TableCell>Total</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data.docs.map((data, index) => {\r\n                let forma_pago = \"-\";\r\n                if (data.forma_pago) {\r\n                  const resultForma = formaPago.filter(\r\n                    (res) => res.Value === data.forma_pago\r\n                  );\r\n                  forma_pago = resultForma[0];\r\n                }\r\n                return (\r\n                  <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                    <TableCell className={classes.textTable}>\r\n                      {data.folio}\r\n                    </TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n                    </TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      {data.cliente !== null\r\n                        ? data.cliente.nombre_cliente\r\n                        : \"Público general\"}\r\n                    </TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      {data.usuario.nombre}\r\n                    </TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      {data.id_caja.numero_caja}\r\n                    </TableCell>\r\n                    <TableCell\r\n                      className={classes.textTable}\r\n                    >{`${forma_pago.Name}`}</TableCell>\r\n                    <TableCell className={classes.textTable}>{`${\r\n                      data.credito ? \"Credito\" : \"Contado\"\r\n                    }`}</TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      {`$${\r\n                        data.credito\r\n                          ? formatoMexico(data.saldo_credito_pendiente)\r\n                          : 0\r\n                      }`}\r\n                    </TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      {data.credito\r\n                        ? moment(data.fecha_de_vencimiento_credito).format(\r\n                            \"DD/MM/YYYY\"\r\n                          )\r\n                        : \"-\"}\r\n                    </TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      {`$${data.descuento ? formatoMexico(data.descuento) : 0}`}\r\n                    </TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      ${formatoMexico(data.subTotal)}\r\n                    </TableCell>\r\n                    <TableCell className={classes.textTable}>\r\n                      ${formatoMexico(data.total)}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n              <TableRow>\r\n                {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((data) => {\r\n                  return <TableCell key={data} />;\r\n                })}\r\n                <TableCell>Total</TableCell>\r\n                <TableCell>${formatoMexico(total)}</TableCell>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst FiltrosComponentPDF = ({ filtros }) => {\r\n  const {\r\n    fecha_inicio,\r\n    fecha_fin,\r\n    usuario,\r\n    cliente,\r\n    caja,\r\n    publico_general,\r\n    metodo_pago,\r\n    forma_pago,\r\n    canceladas,\r\n    facturadas,\r\n    notas_credito,\r\n    vigentes,\r\n    vencidas,\r\n    liquidadas\r\n  } = filtros;\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const obtenerFormaPago = () => {\r\n    let formaP = \"todas\";\r\n    if (forma_pago) {\r\n      const forma = formaPago.filter((res) => res.Value === forma_pago);\r\n      formaP = forma[0].Name;\r\n    }\r\n\r\n    return formaP;\r\n  };\r\n  return (\r\n    <Box mx={2} id=\"filtros-reporte-ventas-container\">\r\n      <Box display=\"flex\" style={{ height: 80 }} alignItems=\"center\" mb={2}>\r\n        <img\r\n          src={sesion.empresa.imagen ? sesion.empresa.imagen : cafiLogo}\r\n          alt=\"cafi punto de venta\"\r\n          height=\"100%\"\r\n        />\r\n        <Box mx={2} />\r\n        <Typography variant=\"h6\">Reporte de ventas</Typography>\r\n      </Box>\r\n      <Grid container spacing={4}>\r\n        <Grid item>\r\n          <Box display=\"flex\">\r\n            <Typography>\r\n              <b>Fecha Inicio:</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>\r\n              {fecha_inicio && fecha_fin\r\n                ? formatoFechaCorta(fecha_inicio)\r\n                : \"-\"}\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Typography>\r\n              <b>Fecha Fin:</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>\r\n              {fecha_fin && fecha_inicio ? formatoFechaCorta(fecha_fin) : \"-\"}\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Typography>\r\n              <b>Vendedor:</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>{usuario ? usuario : \"todos\"}</Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Box display=\"flex\">\r\n            <Typography>\r\n              <b>Cliente:</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>\r\n              {publico_general\r\n                ? \"Público general\"\r\n                : cliente\r\n                ? cliente\r\n                : \"todos\"}\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Typography>\r\n              <b>Caja:</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>{caja ? caja : \"todas\"}</Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Typography>\r\n              <b>Sucursal:</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>{sesion.sucursal.nombre_sucursal}</Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Box display=\"flex\">\r\n            <Typography>\r\n              <b>Método de pago:</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>\r\n              {metodo_pago\r\n                ? metodo_pago === \"PPD\"\r\n                  ? \"crédito\"\r\n                  : \"Contado\"\r\n                : \"todos\"}\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            <Typography>\r\n              <b>Forma de pago:</b>\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>{obtenerFormaPago()}</Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Box display=\"flex\">\r\n            {canceladas ? <CheckBox /> : <CheckBoxOutlineBlankOutlined />}\r\n            <Box mx={0.5} />\r\n            <Typography>\r\n              <b>Canceladas</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            {facturadas ? <CheckBox /> : <CheckBoxOutlineBlankOutlined />}\r\n            <Box mx={0.5} />\r\n            <Typography>\r\n              <b>Facturadas</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            {notas_credito ? <CheckBox /> : <CheckBoxOutlineBlankOutlined />}\r\n            <Box mx={0.5} />\r\n            <Typography>\r\n              <b>Notas crédito</b>\r\n            </Typography>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item>\r\n          <Box display=\"flex\">\r\n            {vigentes ? <CheckBox /> : <CheckBoxOutlineBlankOutlined />}\r\n            <Box mx={0.5} />\r\n            <Typography>\r\n              <b>Vigentes</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            {vencidas ? <CheckBox /> : <CheckBoxOutlineBlankOutlined />}\r\n            <Box mx={0.5} />\r\n            <Typography>\r\n              <b>Vencidas</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box display=\"flex\">\r\n            {liquidadas ? <CheckBox /> : <CheckBoxOutlineBlankOutlined />}\r\n            <Box mx={0.5} />\r\n            <Typography>\r\n              <b>Pagadas</b>\r\n            </Typography>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n","import {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  CircularProgress,\r\n  DialogContent,\r\n  FormControl,\r\n  FormControlLabel,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport React, { Fragment, useState } from \"react\";\r\nimport TablaVentasFiltradas from \"./TablaPorVentasFiltradas\";\r\nimport { formaPago } from \"../../../Facturacion/catalogos\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport ErrorPage from \"../../../../../components/ErrorPage\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarVentas from \"./ExportarPorVentas\";\r\nimport { OBTENER_REPORTE_VENTAS_VENTA } from \"../../../../../gql/Ventas/ventas_generales\";\r\nimport ExportarRVPDF from \"./ExportarPorRVPDF\";\r\nimport CampoCajas from \"./CampoCajas\";\r\nimport {\r\n  CustomCheckboxCanceladas,\r\n  CustomCheckboxNotas,\r\n} from \"../CustomCheckBoxsStyles\";\r\n\r\nconst initial_state_filtros = {\r\n  fecha_inicio: \"\",\r\n  fecha_fin: \"\",\r\n  metodo_pago: \"\",\r\n  forma_pago: \"\",\r\n  cliente: \"\",\r\n  usuario: \"\",\r\n  folio: \"\",\r\n  caja: \"\",\r\n  tipo_emision: \"\",\r\n  canceladas: false,\r\n  facturadas: false,\r\n  notas_credito: false,\r\n  publico_general: false,\r\n  vencidas: false,\r\n  vigentes: false,\r\n  liquidadas: false,\r\n};\r\n\r\nexport default function FiltrosPorVenta() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [page, setPage] = useState(0);\r\n  const [filtro, setFiltro] = useState(initial_state_filtros);\r\n\r\n  const limit = 20;\r\n  const [filtros] = useDebounce(filtro, 500);\r\n\r\n  /* Queries */\r\n  const { loading, data, error, refetch } = useQuery(\r\n    OBTENER_REPORTE_VENTAS_VENTA,\r\n    {\r\n      variables: {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        filtros,\r\n        limit,\r\n        offset: page,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n      notifyOnNetworkStatusChange: true,\r\n      //pollInterval: 5000\r\n    }\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"80vh\"\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"h6\">Cargando...</Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    console.log(error);\r\n    return <ErrorPage error={error} />;\r\n  }\r\n\r\n  const { obtenerVentasByVentaReportes } = data;\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <CapturaDeDatos\r\n          refetch={refetch}\r\n          data={obtenerVentasByVentaReportes}\r\n          filtro={filtro}\r\n          setFiltro={setFiltro}\r\n          loading={loading}\r\n        />\r\n        <TablaVentasFiltradas\r\n          data={obtenerVentasByVentaReportes}\r\n          page={page}\r\n          setPage={setPage}\r\n          filtro={filtro}\r\n          refetch={refetch}\r\n          limit={limit}\r\n        />\r\n      </DialogContent>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst CapturaDeDatos = ({ refetch, data, filtro, setFiltro, loading }) => {\r\n  const limpiarFiltros = () => {\r\n    setFiltro(initial_state_filtros);\r\n  };\r\n\r\n  const obtenerCamposFiltro = (e) => {\r\n    const { name, value } = e.target;\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const obtenerChecksFiltro = (e) => {\r\n    const { name, checked } = e.target;\r\n    if (name === \"publico_general\") {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        cliente: \"\",\r\n      });\r\n      return;\r\n    }\r\n    setFiltro({\r\n      ...filtro,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecksVencidas = (e) => {\r\n    const { name, checked } = e.target;\r\n    if (name === \"vencidas\") {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vigentes: false,\r\n        liquidadas: false,\r\n      });\r\n    } else if (name === \"liquidadas\") {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vencidas: false,\r\n        vigentes: false,\r\n      });\r\n    } else {\r\n      setFiltro({\r\n        ...filtro,\r\n        [name]: checked,\r\n        vencidas: false,\r\n        liquidadas: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2}>\r\n          <Typography>Desde:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_inicio}\r\n          />\r\n          <Typography>Hasta:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_fin\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.fecha_fin}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Método de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"metodo_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.metodo_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier metodo</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"PPD\">{\"PPD(Crédito)\"}</MenuItem>\r\n              <MenuItem value=\"PUE\">{\"PUE(Contado)\"}</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n          <Typography>Forma de pago:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              name=\"forma_pago\"\r\n              onChange={obtenerCamposFiltro}\r\n              value={filtro.forma_pago}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Cualquier forma</em>\r\n              </MenuItem>\r\n              {formaPago.map((res, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={res.Value}\r\n                >{`${res.Value} - ${res.Name}`}</MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Cliente:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"cliente\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre cliente, clave cliente...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.cliente}\r\n          />\r\n          <Typography>Usuario en caja:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"usuario\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre usuario, número usuario...\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.usuario}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2}>\r\n          <Typography>Folio venta:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"folio\"\r\n            variant=\"outlined\"\r\n            placeholder=\"folio de la venta\"\r\n            onChange={obtenerCamposFiltro}\r\n            value={filtro.folio}\r\n          />\r\n          <CampoCajas setFiltro={setFiltro} filtro={filtro} />\r\n        </Grid>\r\n\r\n        <Grid item md={4} style={{ display: \"flex\", alignItems: \"center\" }}>\r\n          <Box display=\"flex\" flexWrap=\"wrap\">\r\n            <FormControlLabel\r\n              control={\r\n                <CustomCheckboxCanceladas\r\n                  checked={filtro.canceladas}\r\n                  onChange={obtenerChecksFiltro}\r\n                  name=\"canceladas\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Canceladas\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <CustomCheckboxNotas\r\n                  checked={filtro.notas_credito}\r\n                  onChange={obtenerChecksFiltro}\r\n                  name=\"notas_credito\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Notas crédito\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.facturadas}\r\n                  onChange={obtenerChecksFiltro}\r\n                  name=\"facturadas\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Facturadas\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.vencidas}\r\n                  onChange={obtenerChecksVencidas}\r\n                  name=\"vencidas\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Vencidas\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.vigentes}\r\n                  onChange={obtenerChecksVencidas}\r\n                  name=\"vigentes\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Vigentes\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.liquidadas}\r\n                  onChange={obtenerChecksFiltro}\r\n                  name=\"liquidadas\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Pagadas\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={filtro.publico_general}\r\n                  onChange={obtenerChecksFiltro}\r\n                  name=\"publico_general\"\r\n                  color=\"default\"\r\n                />\r\n              }\r\n              label=\"Público general\"\r\n            />\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      <Box\r\n        display=\"flex\"\r\n        alignItems=\"center\"\r\n        position=\"absolute\"\r\n        top={70}\r\n        right={10}\r\n      >\r\n        {/* <Box display=\"flex\" alignItems=\"center\">\r\n          <Box\r\n            border={1}\r\n            borderColor=\"#FF8A8A\"\r\n            bgcolor=\"#FFF4F4\"\r\n            height=\"20px\"\r\n            width=\"20px\"\r\n          />\r\n          <Box mx={0.5} />\r\n          <Typography>\r\n            <b>Canceladas</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Box\r\n            border={1}\r\n            borderColor=\"#FCCF53\"\r\n            bgcolor=\"#FFFAEC\"\r\n            height=\"20px\"\r\n            width=\"20px\"\r\n          />\r\n          <Box mx={0.5} />\r\n          <Typography>\r\n            <b>Notas de crédito</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box mx={1} /> */}\r\n        <Button\r\n          color=\"primary\"\r\n          startIcon={<ClearOutlined />}\r\n          onClick={() => limpiarFiltros()}\r\n        >\r\n          Limpiar filtros\r\n        </Button>\r\n        <Box mx={1} />\r\n        <ExportarVentas filtros={filtro} />\r\n        <Box mx={1} />\r\n        <ExportarRVPDF filtros={filtro} />\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n};\r\n","import { Button, Dialog, Slide, Toolbar } from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport React, { useState } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport FiltrosVenta from \"./TabByProductos/FiltrosVenta\";\r\nimport FiltrosPorVenta from \"./TabVentas/FiltrosPorVenta\";\r\nimport CartIcon from \"../../../../icons/ventas/cart-add.svg\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `simple-tab-${index}`,\r\n    \"aria-controls\": `simple-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  root: {\r\n    margin: \"0px 24px\"\r\n  }\r\n}));\r\n\r\nexport default function ReportesVentas() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={CartIcon}\r\n              alt=\"icono ventas\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Reportes Ventas\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes Ventas\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div className={classes.root}>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            aria-label=\"simple tabs example\"\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n          >\r\n            <Tab label=\"Reporte por ventas\" {...a11yProps(0)} />\r\n            <Tab label=\"Reporte por productos\" {...a11yProps(1)} />\r\n          </Tabs>\r\n        </div>\r\n        <TabPanel value={value} index={0}>\r\n          <FiltrosPorVenta />\r\n        </TabPanel>\r\n        <TabPanel value={value} index={1}>\r\n          <FiltrosVenta />\r\n        </TabPanel>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\n\r\nimport ReactExport from \"react-export-excel\";\r\n\r\nconst ExcelFile = ReactExport.ExcelFile;\r\nconst ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\r\nconst ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\r\n\r\nexport default function ExportarTraspasos({ data, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setValue(value);\r\n\r\n    if (!value) {\r\n      refetch({\r\n        limit: 20,\r\n        offset: 0,\r\n      });\r\n    } else {\r\n      refetch({\r\n        limit: 0,\r\n        offset: 0,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        size=\"large\"\r\n        startIcon={<RiFileExcel2Line />}\r\n        onClick={handleClickOpen}\r\n      >\r\n        Exportar Excel\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\r\n        <DialogTitle>{\"Exportar Reportes de almacen\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            -Exportar pagina actual: exportará la pagina actual\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            -Exportar todo: exportará todos los registros filtrados\r\n          </DialogContentText>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => handleChange(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Contenido Actual</MenuItem>\r\n              <MenuItem value={1}>Todos los registros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <ExportarExcelAction datosExcel={data.docs} />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ datosExcel }) => {\r\n  const traspasos = datosExcel.map((traspaso) => {\r\n    const trasp = {\r\n      producto: traspaso.producto.datos_generales.nombre_comercial,\r\n      cantidad: traspaso.cantidad,\r\n      unidad: traspaso.unidad,\r\n      fecha: formatoFechaCorta(traspaso.id_traspaso.fecha_registro),\r\n      concepto: traspaso.id_traspaso.concepto_traspaso.nombre_concepto,\r\n      almacen_origen:\r\n        traspaso.id_traspaso.almacen_origen !== null\r\n          ? traspaso.id_traspaso.almacen_origen.nombre_almacen\r\n          : \"\",\r\n      almacen_destino:\r\n        traspaso.id_traspaso.almacen_destino !== null\r\n          ? traspaso.id_traspaso.almacen_destino.nombre_almacen\r\n          : \"\",\r\n    };\r\n\r\n    return trasp;\r\n  });\r\n  return (\r\n    <ExcelFile\r\n      element={\r\n        <Button color=\"primary\" startIcon={<RiFileExcel2Line />}>\r\n          Exportar a Excel\r\n        </Button>\r\n      }\r\n      filename=\"Reporte de traspasos\"\r\n    >\r\n      <ExcelSheet data={traspasos} name=\"Reporte de traspasos\">\r\n        <ExcelColumn label=\"Producto\" value=\"producto\" />\r\n        <ExcelColumn label=\"Cantidad\" value=\"cantidad\" />\r\n        <ExcelColumn label=\"Unidad\" value=\"unidad\" />\r\n        <ExcelColumn label=\"Fecha\" value=\"fecha\" />\r\n        <ExcelColumn label=\"Concepto\" value=\"concepto\" />\r\n        <ExcelColumn label=\"Almacén Origen\" value=\"almacen_origen\" />\r\n        <ExcelColumn label=\"Almacén Destino\" value=\"almacen_destino\" />\r\n      </ExcelSheet>\r\n    </ExcelFile>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport { TablePagination } from \"@material-ui/core\";\r\n\r\nconst columns = [\r\n  { id: \"producto\", label: \"Producto\", minWidth: 200 },\r\n  { id: \"cantidad\", label: \"Cantidad\", minWidth: 50 },\r\n  { id: \"unidad\", label: \"Unidad\", minWidth: 50 },\r\n  { id: \"fecha\", label: \"Fecha \", minWidth: 50 },\r\n  { id: \"concepto\", label: \"Concepto \", minWidth: 100 },\r\n  { id: \"almacen_origen\", label: \"Almacén Origen\", minWidth: 100 },\r\n  { id: \"almacen_destino\", label: \"Almacén Destino\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"60vh\",\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  rootBusqueda: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function TablaAlmacenFiltradas({\r\n  data,\r\n  page,\r\n  setPage,\r\n  limit,\r\n}) {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n    /* refetch({\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: filtro,\r\n      offset: nextPage,\r\n    }); */\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ minWidth: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {data.docs.map((element, index) => {\r\n              return (\r\n                <TableRow key={index} role=\"checkbox\" tabIndex={-1}>\r\n                  <TableCell>\r\n                    {element.producto.datos_generales.nombre_comercial}\r\n                  </TableCell>\r\n\r\n                  <TableCell>{element.cantidad}</TableCell>\r\n                  <TableCell>{element.unidad}</TableCell>\r\n                  <TableCell>\r\n                    {formatoFechaCorta(element.id_traspaso.fecha_registro)}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {element.id_traspaso.concepto_traspaso.nombre_concepto}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {element.id_traspaso.almacen_origen !== null\r\n                      ? element.id_traspaso.almacen_origen.nombre_almacen\r\n                      : \" - \"}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {element.id_traspaso.almacen_destino !== null\r\n                      ? element.id_traspaso.almacen_destino.nombre_almacen\r\n                      : \" - \"}\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={data.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import React, { useState, Fragment } from \"react\";\r\n\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  Slide,\r\n  TextField,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport { OBTENER_USUARIOS } from \"../../../../gql/Catalogos/usuarios\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { ClearOutlined } from \"@material-ui/icons\";\r\nimport ExportarTraspasos from \"./ExportarTraspasos\";\r\nimport TablaAlmacenFiltradas from \"./TablaAlmacenFiltradas\";\r\nimport { useQuery } from \"@apollo/client\";\r\n\r\nimport {\r\n  OBTENER_ALMACENES,\r\n  OBTENER_TRASPASOS,\r\n} from \"../../../../gql/Almacenes/Almacen\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport AlmacenIcon from \"../../../../icons/almacen.svg\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n  CircularProgress: {\r\n    width: \"100%\",\r\n    height: 200,\r\n    marginTop: 100,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function ReportesAlmacen() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={AlmacenIcon}\r\n              alt=\"icono almacen\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Reportes Almacen\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes Almacen\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <RenderComponentQuery />\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst RenderComponentQuery = () => {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [almacenOrigen, setAlmacenOrigen] = useState(null);\r\n  const [almacenDestino, setAlmacenDestino] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [inputFilter, setFilter] = useState({\r\n    empresa: sesion.empresa._id,\r\n    sucursal: sesion.sucursal._id,\r\n    producto: \"\",\r\n    fecha_inicio: \"\",\r\n    fecha_final: \"\",\r\n    usuario: \"\",\r\n  });\r\n  const [page, setPage] = useState(0);\r\n  const limit = 20;\r\n\r\n  const [encargado, setEncargado] = useState(\"\");\r\n  const [value] = useDebounce(inputFilter, 1000);\r\n\r\n  let almacenes = [];\r\n  let traspasos = {docs:[], totalDocs: 0};\r\n  let usuarios = [];\r\n\r\n  const queryObtenerAlmacenes = useQuery(OBTENER_ALMACENES, {\r\n    variables: {\r\n      id: sesion.sucursal._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  const queryObtenerUsuarios = useQuery(OBTENER_USUARIOS, {\r\n    variables: {\r\n      empresa: `${sesion.empresa._id}`,\r\n      sucursal: `${sesion.sucursal._id}`,\r\n      eliminado: false,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n  \r\n  const traspasosAlmacenes = useQuery(OBTENER_TRASPASOS, {\r\n    variables: {\r\n      input: value,\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  const limpiarFiltros = () => {\r\n    try {\r\n      let filt = {\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n        producto: \"\",\r\n        fecha_inicio: \"\",\r\n        fecha_final: \"\",\r\n        usuario: \"\",\r\n      };\r\n\r\n      setFilter(filt);\r\n      setLoading(true);\r\n      traspasosAlmacenes.refetch({\r\n        input: filt,\r\n      });\r\n      setEncargado(\"\");\r\n      setAlmacenOrigen(null);\r\n      setAlmacenDestino(null);\r\n      setLoading(false);\r\n    } catch (error) {}\r\n  };\r\n\r\n  if (queryObtenerAlmacenes.data) {\r\n    almacenes = queryObtenerAlmacenes.data.obtenerAlmacenes;\r\n  }\r\n\r\n  const setDatosInput = (e) => {\r\n    let fil = {\r\n      ...inputFilter,\r\n      [e.target.name]: e.target.value,\r\n      almacen_destino: almacenDestino,\r\n      almacen_origen: almacenOrigen,\r\n    };\r\n    setFilter(fil);\r\n  };\r\n  const setQueryAlmacenOrigen = (alm) => {\r\n    let almDes = almacenDestino !== null ? almacenDestino._id : \"\";\r\n\r\n    if (alm._id !== \"\") {\r\n      setLoading(true);\r\n      let fil = {\r\n        ...inputFilter,\r\n        almacen_origen: alm._id,\r\n        almacen_destino: almDes,\r\n      };\r\n\r\n      traspasosAlmacenes.refetch({\r\n        input: fil,\r\n      });\r\n    }\r\n    setAlmacenOrigen(alm);\r\n    setLoading(false);\r\n  };\r\n  const setQueryAlmacenDestino = (alm) => {\r\n    let almOri = almacenOrigen !== null ? almacenOrigen._id : \"\";\r\n    if (alm._id !== \"\") {\r\n      let fil = {\r\n        ...inputFilter,\r\n        almacen_origen: almOri,\r\n        almacen_destino: alm._id,\r\n      };\r\n      setLoading(true);\r\n      traspasosAlmacenes.refetch({\r\n        input: fil,\r\n      });\r\n    }\r\n\r\n    setAlmacenDestino(alm);\r\n    setLoading(false);\r\n  };\r\n  const setEncargadoInput = (enc) => {\r\n    try {\r\n      let almDes = almacenDestino !== null ? almacenDestino._id : \"\";\r\n      let almOri = almacenOrigen !== null ? almacenOrigen._id : \"\";\r\n      let encId = enc !== \"\" ? enc._id : \"\";\r\n      let fil = {\r\n        ...inputFilter,\r\n        usuario: encId,\r\n        almacen_destino: almDes,\r\n        almacen_origen: almOri,\r\n      };\r\n\r\n      traspasosAlmacenes.refetch({\r\n        input: fil,\r\n      });\r\n      setEncargado(enc);\r\n      setLoading(false);\r\n    } catch (error) {}\r\n  };\r\n\r\n  if (traspasosAlmacenes.data) {\r\n    try {\r\n      traspasos = traspasosAlmacenes.data.obtenerTraspasos;\r\n    } catch (error) {}\r\n  }\r\n\r\n  if (queryObtenerUsuarios.data) {\r\n    try {\r\n      usuarios = queryObtenerUsuarios.data.obtenerUsuarios;\r\n    } catch (error) {}\r\n  }\r\n\r\n  return (\r\n    <DialogContent>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Fecha inicio:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_inicio\"\r\n            variant=\"outlined\"\r\n            value={inputFilter.fecha_inicio}\r\n            type=\"date\"\r\n            onChange={(e) => setDatosInput(e)}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Fecha fin:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"fecha_final\"\r\n            variant=\"outlined\"\r\n            type=\"date\"\r\n            onChange={(e) => setDatosInput(e)}\r\n            value={inputFilter.fecha_final}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Encargado</Typography>\r\n          <Box display=\"flex\">\r\n            <Autocomplete\r\n              id=\"encargado\"\r\n              size=\"small\"\r\n              options={usuarios}\r\n              getOptionLabel={(option) =>\r\n                option.nombre ? `${option.nombre}` : \"\"\r\n              }\r\n              fullWidth\r\n              renderInput={(params) => (\r\n                <TextField\r\n                  {...params}\r\n                  variant=\"outlined\"\r\n                  InputProps={{\r\n                    ...params.InputProps,\r\n                    endAdornment: (\r\n                      <Fragment>{params.InputProps.endAdornment}</Fragment>\r\n                    ),\r\n                  }}\r\n                />\r\n              )}\r\n              renderOption={(option) => (\r\n                <Fragment>{`${option.nombre}`}</Fragment>\r\n              )}\r\n              onChange={(_, data) => setEncargadoInput(data)}\r\n              getOptionSelected={(option, value) =>\r\n                option.nombre === value.nombre\r\n              }\r\n              value={encargado.nombre ? encargado : null}\r\n            />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Producto:</Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            name=\"producto\"\r\n            variant=\"outlined\"\r\n            placeholder=\"Nombre, código, clave...\"\r\n            onChange={(e) => setDatosInput(e)}\r\n            value={inputFilter.producto}\r\n          />\r\n        </Grid>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Almacen origen:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              id=\"form-almacen-origen\"\r\n              name=\"almacen_origen\"\r\n              onChange={(e) => setQueryAlmacenOrigen(e.target.value)}\r\n              value={almacenOrigen !== null ? almacenOrigen : \"\"}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Ninguno</em>\r\n              </MenuItem>\r\n              {almacenes.map((almacen) => (\r\n                <MenuItem key={almacen._id} value={almacen}>\r\n                  {almacen.nombre_almacen}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={2} xs={12}>\r\n          <Typography>Almacen destino:</Typography>\r\n          <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n            <Select\r\n              id=\"form-almacen-destino\"\r\n              name=\"almacen_destino\"\r\n              onChange={(e) => setQueryAlmacenDestino(e.target.value)}\r\n              value={almacenDestino !== null ? almacenDestino : \"\"}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Ninguno</em>\r\n              </MenuItem>\r\n              {almacenes.map((almacen) => (\r\n                <MenuItem key={almacen._id} value={almacen}>\r\n                  {almacen.nombre_almacen}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </Grid>\r\n        <Box display=\"flex\" mb={2}>\r\n          <Button\r\n            color=\"primary\"\r\n            startIcon={<ClearOutlined />}\r\n            onClick={() => limpiarFiltros()}\r\n          >\r\n            Limpiar filtros\r\n          </Button>\r\n          <Box mx={1} />\r\n          <ExportarTraspasos data={traspasos} refetch={traspasosAlmacenes.refetch} />\r\n        </Box>\r\n      </Grid>\r\n      <Box>\r\n        {traspasosAlmacenes.loading || loading ? (\r\n          <div className={classes.CircularProgress}>\r\n            <CircularProgress />\r\n          </div>\r\n        ) : (\r\n          <TablaAlmacenFiltradas data={traspasos} page={page}\r\n          setPage={setPage}\r\n          limit={limit} />\r\n        )}\r\n      </Box>\r\n    </DialogContent>\r\n  );\r\n};\r\n","/**\r\n * Una clase para interactuar con el plugin\r\n * \r\n * @author parzibyte\r\n * @see https://parzibyte.me/blog\r\n */\r\nconst C = {\r\n    AccionWrite: \"write\",\r\n    AccionCut: \"cut\",\r\n    AccionCash: \"cash\",\r\n    AccionCutPartial: \"cutpartial\",\r\n    AccionAlign: \"align\",\r\n    AccionFontSize: \"fontsize\",\r\n    AccionFont: \"font\",\r\n    AccionEmphasize: \"emphasize\",\r\n    AccionFeed: \"feed\",\r\n    AccionQr: \"qr\",\r\n    AlineacionCentro: \"center\",\r\n    AlineacionDerecha: \"right\",\r\n    AlineacionIzquierda: \"left\",\r\n    FuenteA: \"A\",\r\n    FuenteB: \"B\",\r\n    AccionBarcode128: \"barcode128\",\r\n    AccionBarcode39: \"barcode39\",\r\n    AccionBarcode93: \"barcode93\",\r\n    AccionBarcodeEAN: \"barcodeEAN\",\r\n    AccionBarcodeTwoOfFiveSinInterleaved: \"barcodeTwoOfFive\",\r\n    AccionBarcodeTwoOfFiveInterleaved: \"barcodeTwoOfFiveInterleaved\",\r\n    AccionBarcodeCodabar: \"barcodeCodabar\",\r\n    AccionBarcodeUPCA: \"barcodeUPCA\",\r\n    AccionBarcodeUPCE: \"barcodeUPCE\",\r\n    Medida80: 80,\r\n    Medida100: 100,\r\n    Medida156: 156,\r\n    Medida200: 200,\r\n    Medida300: 300,\r\n    Medida350: 350,\r\n};\r\n\r\nlet URL_PLUGIN = \"http://localhost:8000\";\r\n\r\nclass OperacionTicket {\r\n    constructor(accion, datos) {\r\n        this.accion = accion + \"\";\r\n        this.datos = datos + \"\";\r\n    }\r\n}\r\nexport class Impresora {\r\n    constructor(ruta) {\r\n        if (!ruta) ruta = URL_PLUGIN;\r\n        this.ruta = ruta;\r\n        this.operaciones = [];\r\n    }\r\n\r\n    static setImpresora(nombreImpresora, ruta) {\r\n        if (ruta) URL_PLUGIN = ruta;\r\n        return fetch(URL_PLUGIN + \"/impresora\", {\r\n                method: \"PUT\",\r\n                body: JSON.stringify(nombreImpresora),\r\n            })\r\n            .then(r => r.json())\r\n            .then(respuestaDecodificada => respuestaDecodificada === nombreImpresora);\r\n    }\r\n    static setImpresoraSilencioso(nombreImpresora, ruta) {\r\n        if (ruta) URL_PLUGIN = ruta;\r\n        return fetch(URL_PLUGIN + \"/impresora_silencioso\", {\r\n                method: \"PUT\",\r\n                body: JSON.stringify(nombreImpresora),\r\n            })\r\n            .then(r => r.json())\r\n            .then(respuestaDecodificada => respuestaDecodificada === nombreImpresora);\r\n        }\r\n    \r\n\r\n    static getImpresora(ruta) {\r\n        if (ruta) URL_PLUGIN = ruta;\r\n        return fetch(URL_PLUGIN + \"/impresora\")\r\n            .then(r => r.json());\r\n    }\r\n\r\n    static getImpresoras(ruta) {\r\n        if (ruta) URL_PLUGIN = ruta;\r\n        return fetch(URL_PLUGIN + \"/impresoras\")\r\n            .then(r => r.json());\r\n    }\r\n\r\n    static getImpresorasRemotas(ip) {\r\n        return fetch(URL_PLUGIN + \"/impresoras_remotas?ip=\" + ip)\r\n            .then(r => r.json());\r\n    }\r\n\r\n    cut() {\r\n        this.operaciones.push(new OperacionTicket(C.AccionCut, \"\"));\r\n    }\r\n\r\n    cash() {\r\n        this.operaciones.push(new OperacionTicket(C.AccionCash, \"\"));\r\n    }\r\n\r\n    cutPartial() {\r\n        this.operaciones.push(new OperacionTicket(C.AccionCutPartial, \"\"));\r\n    }\r\n\r\n    setFontSize(a, b) {\r\n        this.operaciones.push(new OperacionTicket(C.AccionFontSize, `${a},${b}`));\r\n    }\r\n\r\n    setFont(font) {\r\n        if (font !== C.FuenteA && font !== C.FuenteB) throw Error(\"Fuente inválida\");\r\n        this.operaciones.push(new OperacionTicket(C.AccionFont, font));\r\n    }\r\n    setEmphasize(val) {\r\n        if (isNaN(parseInt(val)) || parseInt(val) < 0) throw Error(\"Valor inválido\");\r\n        this.operaciones.push(new OperacionTicket(C.AccionEmphasize, val));\r\n    }\r\n    setAlign(align) {\r\n        if (align !== C.AlineacionCentro && align !== C.AlineacionDerecha && align !== C.AlineacionIzquierda) {\r\n            throw Error(`Alineación ${align} inválida`);\r\n        }\r\n        this.operaciones.push(new OperacionTicket(C.AccionAlign, align));\r\n    }\r\n\r\n    write(text) {\r\n        this.operaciones.push(new OperacionTicket(C.AccionWrite, text));\r\n    }\r\n\r\n    feed(n) {\r\n        if (!parseInt(n) || parseInt(n) < 0) {\r\n            throw Error(\"Valor para feed inválido\");\r\n        }\r\n        this.operaciones.push(new OperacionTicket(C.AccionFeed, n));\r\n    }\r\n\r\n    end() {\r\n        return fetch(this.ruta + \"/imprimir\", {\r\n                method: \"POST\",\r\n                body: JSON.stringify(this.operaciones),\r\n            })\r\n            .then(r => r.json());\r\n    }\r\n\r\n    imprimirEnImpresora(nombreImpresora) {\r\n        const payload = {\r\n            operaciones: this.operaciones,\r\n            impresora: nombreImpresora,\r\n        };\r\n        return fetch(this.ruta + \"/imprimir_en\", {\r\n                method: \"POST\",\r\n                body: JSON.stringify(payload),\r\n            })\r\n            .then(r => r.json());\r\n    }\r\n\r\n    qr(contenido) {\r\n        this.operaciones.push(new OperacionTicket(C.AccionQr, contenido));\r\n    }\r\n\r\n    validarMedida(medida) {\r\n        medida = parseInt(medida);\r\n        if (medida !== C.Medida80 &&\r\n            medida !== C.Medida100 &&\r\n            medida !== C.Medida156 &&\r\n            medida !== C.Medida200 &&\r\n            medida !== C.Medida300 &&\r\n            medida !== C.Medida350) {\r\n            throw Error(\"Valor para medida del barcode inválido\");\r\n        }\r\n    }\r\n\r\n    validarTipo(tipo) {\r\n        if (\r\n            [C.AccionBarcode128,\r\n                C.AccionBarcode39,\r\n                C.AccionBarcode93,\r\n                C.AccionBarcodeEAN,\r\n                C.AccionBarcodeTwoOfFiveInterleaved,\r\n                C.AccionBarcodeTwoOfFiveSinInterleaved,\r\n                C.AccionBarcodeCodabar,\r\n                C.AccionBarcodeUPCA,\r\n                C.AccionBarcodeUPCE,\r\n            ]\r\n            .indexOf(tipo) === -1\r\n        ) throw Error(\"Tipo de código de barras no soportado\");\r\n    }\r\n\r\n    barcode(contenido, medida, tipo) {\r\n        this.validarMedida(medida);\r\n        this.validarTipo(tipo);\r\n        let payload = contenido.concat(\",\").concat(medida.toString());\r\n        this.operaciones.push(new OperacionTicket(tipo, payload));\r\n    }\r\n    imprimirEnImpresoraConNombreEIp(nombreImpresora, ip) {\r\n        const payload = {\r\n            operaciones: this.operaciones,\r\n            impresora: nombreImpresora,\r\n            ip: ip,\r\n        };\r\n        return fetch(this.ruta + \"/imprimir_y_reenviar\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(payload),\r\n        })\r\n            .then(r => r.json());\r\n    }\r\n\r\n}","import { Impresora } from \"../../../../components/TicketPrinter/Impresora\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport table from \"text-table\";\r\nimport moment from \"moment\";\r\nconst RUTA_API = \"http://localhost:8000\";\r\n\r\nexport const imprimirTicketCorte = async (\r\n  corte,\r\n  montos,\r\n  fechaInicio,\r\n  fechaFin\r\n) => {\r\n  const {\r\n    monto_efectivo,\r\n    monto_tarjeta_debito,\r\n    monto_tarjeta_credito,\r\n    monto_transferencia,\r\n    monto_monedero,\r\n    monto_creditos,\r\n    monto_cheques,\r\n    monto_vales_despensa,\r\n  } = corte.montos_en_caja;\r\n\r\n  let tableHead = table([\r\n    [\"Concepto\", \"     \", \"Caja\", \"   \", \"Sistema\", \"Diferencia\"],\r\n  ]);\r\n\r\n  var tableBody = table([\r\n    [\r\n      \"EFECTIVO \",\r\n      `${formatoMexico(monto_efectivo.monto)}`,\r\n      ` ${formatoMexico(montos.monto_efectivo)}`,\r\n      `${formatoMexico(monto_efectivo.monto - montos.monto_efectivo)}`,\r\n    ],\r\n    [\r\n      \"T. DEBITO\",\r\n      `${formatoMexico(monto_tarjeta_debito.monto)}`,\r\n      `${formatoMexico(montos.monto_tarjeta_debito)}`,\r\n      `${formatoMexico(\r\n        monto_tarjeta_debito.monto - montos.monto_tarjeta_debito\r\n      )}`,\r\n    ],\r\n    [\r\n      \"T. CREDITO\",\r\n      `${formatoMexico(monto_tarjeta_credito.monto)}`,\r\n      `${formatoMexico(montos.monto_tarjeta_credito)}`,\r\n      `${formatoMexico(\r\n        monto_tarjeta_credito.monto - montos.monto_tarjeta_credito\r\n      )}`,\r\n    ],\r\n    [\r\n      \"TRANSFERENCIAS\",\r\n      `${formatoMexico(monto_transferencia.monto)}`,\r\n      `${formatoMexico(montos.monto_transferencia)}`,\r\n      ` ${formatoMexico(\r\n        monto_transferencia.monto - montos.monto_transferencia\r\n      )}`,\r\n    ],\r\n    [\r\n      \"MONEDERO\",\r\n      `${formatoMexico(monto_monedero.monto)}`,\r\n      `${formatoMexico(montos.monto_monedero)}`,\r\n      `${formatoMexico(monto_monedero.monto - montos.monto_monedero)}`,\r\n    ],\r\n    [\r\n      \"CREDITOS\",\r\n      `${formatoMexico(monto_creditos.monto)}`,\r\n      `${formatoMexico(montos.monto_creditos)}`,\r\n      `${formatoMexico(monto_creditos.monto - montos.monto_creditos)}`,\r\n    ],\r\n    [\r\n      \"CHEQUES\",\r\n      `${formatoMexico(monto_cheques.monto)}`,\r\n      `${formatoMexico(montos.monto_cheques)}`,\r\n      `${formatoMexico(monto_cheques.monto - montos.monto_cheques)}`,\r\n    ],\r\n    [\r\n      \"VALES DESP.\",\r\n      `${formatoMexico(monto_vales_despensa.monto)}`,\r\n      `${formatoMexico(montos.monto_vales_despensa)} `,\r\n      `${formatoMexico(\r\n        monto_vales_despensa.monto - montos.monto_vales_despensa\r\n      )}`,\r\n    ],\r\n  ]);\r\n\r\n  try {\r\n    let impresora = new Impresora(RUTA_API);\r\n    impresora.cut();\r\n    impresora.setFontSize(1, 1);\r\n    impresora.setEmphasize(0);\r\n    impresora.setAlign(\"center\");\r\n    impresora.write(\"Punto de venta CAFI\\n\");\r\n    impresora.write(\"****CORTE CAJA****\\n\");\r\n    impresora.write(\"Fecha y hora\\n\");\r\n    impresora.write(\r\n      `Del ${moment(fechaInicio).locale(\"es-mx\").format(\"lll\")}\\n`\r\n    );\r\n    impresora.write(`Al ${moment(fechaFin).locale(\"es-mx\").format(\"lll\")}\\n`);\r\n    impresora.feed(1);\r\n    impresora.write(`Usuario: ${corte.usuario_en_turno.nombre}\\n`);\r\n    impresora.write(\r\n      `No. usuario: ${corte.usuario_en_turno.numero_usuario} Caja: ${corte.numero_caja}\\n`\r\n    );\r\n    impresora.write(`Turno: ${corte.horario_en_turno}\\n`);\r\n    impresora.write(`Sucursal: ${corte.sucursal.nombre_sucursal}\\n`);\r\n    impresora.feed(1);\r\n    impresora.setFontSize(2, 1);\r\n    impresora.write(\"Montos\\n\");\r\n    impresora.feed(1);\r\n    impresora.setFontSize(1, 1);\r\n    impresora.setAlign(\"left\");\r\n    impresora.write(`${tableHead}\\n`);\r\n    impresora.write(\"________________________________________________\\n\");\r\n    impresora.write(`${tableBody}\\n`);\r\n    impresora.feed(3);\r\n    impresora.cut();\r\n    impresora.cutPartial(); // Pongo este y también cut porque en ocasiones no funciona con cut, solo con cutPartial\r\n\r\n    await impresora.end();\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Grid,\r\n  TablePagination,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport ReceiptIcon from \"@material-ui/icons/Receipt\";\r\nimport { OBTENER_CORTE_CAJA } from \"../../../../gql/Cajas/cajas\";\r\nimport moment from \"moment\";\r\nimport { useLazyQuery } from \"@apollo/client\";\r\nimport { formatoFechaCorta } from \"../../../../config/reuserFunctions\";\r\nimport { imprimirTicketCorte } from \"./PrintTicketCorte\";\r\n\r\nconst columns = [\r\n  { label: \"Fecha Corte\", minWidth: 100 },\r\n  { label: \"Hora Corte\", minWidth: 100 },\r\n  { label: \"Usuario\", minWidth: 100 },\r\n  { label: \"Turno Horario\", minWidth: 100 },\r\n  { label: \"Caja\", minWidth: 100 },\r\n  { label: \"Sucursal\", minWidth: 100 },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"65vh\",\r\n    \"& ::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  rootBusqueda: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function TablaCortesFiltradas({\r\n  loading,\r\n  cortes,\r\n  page,\r\n  setPage,\r\n  limit,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  return (\r\n    <Box>\r\n      <Paper className={classes.root}>\r\n        <TableContainer className={classes.container}>\r\n          <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column) => (\r\n                  <TableCell\r\n                    key={column.id}\r\n                    align=\"center\"\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {cortes.docs.map((row) => {\r\n                return <RowsRender key={row._id} corte={row} />;\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={cortes.totalDocs}\r\n          rowsPerPage={limit}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction RowsRender({ corte }) {\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [loadingPrint, setLoadingPrint] = useState(false);\r\n\r\n  const [obtenerCorte, { data, error, loading }] = useLazyQuery(\r\n    OBTENER_CORTE_CAJA,\r\n    {\r\n      variables: {\r\n        sucursal: sesion.sucursal._id,\r\n        empresa: sesion.empresa._id,\r\n        input: {\r\n          usuario: sesion._id,\r\n          caja: corte.id_caja,\r\n          token_turno_user: corte.token_turno_user,\r\n          number_user: sesion.numero_usuario,\r\n        },\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    }\r\n  );\r\n\r\n  let montos_sistema = [];\r\n  let fechaInicio = '';\r\n  let fechaFin = \"\";\r\n\r\n  if (data) {\r\n    montos_sistema = data.obtenerCorteCaja.montos_en_sistema;\r\n    fechaInicio = data.obtenerCorteCaja.fecha_inicio;\r\n    fechaFin = data.obtenerCorteCaja.fecha_fin;\r\n  }\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    obtenerCorte();\r\n  };\r\n\r\n  const handlePrintTicket = async () => {\r\n    setLoadingPrint(true);\r\n    await imprimirTicketCorte(corte, montos_sistema, fechaInicio, fechaFin);\r\n    setLoadingPrint(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <TableRow\r\n        hover\r\n        role=\"checkbox\"\r\n        handleClickOpen\r\n        onClick={handleClickOpen}\r\n        tabIndex={-1}\r\n        key={corte._id}\r\n      >\r\n        <TableCell align=\"center\">\r\n          {formatoFechaCorta(corte.fecha_salida.completa)}\r\n        </TableCell>\r\n        <TableCell align=\"center\">{corte.hora_salida.completa}</TableCell>\r\n        <TableCell align=\"center\">{corte.usuario_en_turno.nombre}</TableCell>\r\n        <TableCell align=\"center\">{corte.horario_en_turno}</TableCell>\r\n        <TableCell align=\"center\">{corte.numero_caja}</TableCell>\r\n        <TableCell align=\"center\">{corte.sucursal.nombre_sucursal}</TableCell>\r\n      </TableRow>\r\n\r\n      <Dialog\r\n        fullWidth={true}\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n      >\r\n        <DialogContent>\r\n          <InformacionCorteCaja\r\n            corte={corte}\r\n            montos_sistema={montos_sistema}\r\n            loading={loading}\r\n            fechaInicio={fechaInicio}\r\n            fechaFin={fechaFin}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            size=\"small\"\r\n            variant=\"contained\"\r\n            onClick={() => handlePrintTicket()}\r\n            disabled={loadingPrint}\r\n            startIcon={\r\n              loadingPrint ? (\r\n                <CircularProgress size={20} color=\"inherit\" />\r\n              ) : (\r\n                <ReceiptIcon />\r\n              )\r\n            }\r\n          >\r\n            Imprimir Ticket\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction InformacionCorteCaja({ corte, montos_sistema, loading, fechaInicio, fechaFin }) {\r\n  const classes = useStyles();\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"30vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  return (\r\n    <>\r\n      <Grid item lg={12} md={12} xs={12}>\r\n        <Box p={1} textAlign=\"center\">\r\n          <Typography variant=\"h5\">\r\n            <b>Reporte de Corte de Caja</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box p={1} textAlign=\"center\">\r\n          <Typography variant=\"h6\">\r\n            {`Del ${moment(fechaInicio).locale(\"es-mx\").format(\"LLL\")} al ${moment(fechaFin).locale(\"es-mx\").format(\"LLL\")}`}\r\n          </Typography>\r\n        </Box>\r\n      </Grid>\r\n      <Grid item lg={12} md={12} xs={12}>\r\n        <Box p={2} display=\"flex\" justifyContent=\"center\">\r\n          <Box p={1}>\r\n            <Typography>\r\n              <b>Usuario: </b> {corte.usuario_en_turno.nombre}\r\n            </Typography>\r\n          </Box>\r\n          <Box p={1}>\r\n            <Typography>\r\n              <b>No. de usuario: </b>\r\n              {corte.usuario_en_turno.numero_usuario}\r\n            </Typography>\r\n          </Box>\r\n\r\n          <Box p={1}>\r\n            <Typography>\r\n              <b>Horario en turno: </b>\r\n              {corte.horario_en_turno}\r\n            </Typography>\r\n          </Box>\r\n          <Box p={1}>\r\n            <Typography>\r\n              <b>Numero de caja: </b>\r\n              {corte.numero_caja}\r\n            </Typography>\r\n          </Box>\r\n          <Box p={1}>\r\n            <Typography>\r\n              <b>Sucursal: </b>\r\n              {corte.sucursal.nombre_sucursal}\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Grid>\r\n      <Grid>\r\n        <Paper className={classes.root}>\r\n          <TableContainer className={classes.container}>\r\n            <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell align=\"center\">CONCEPTO</TableCell>\r\n                  <TableCell align=\"center\">CAJERO</TableCell>\r\n                  <TableCell align=\"center\">SISTEMA</TableCell>\r\n                  <TableCell align=\"center\">DIFERENCIA</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                <TableCell align=\"center\">\r\n                  <b>MONTO EFECTIVO</b>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${corte.montos_en_caja.monto_efectivo.monto.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${montos_sistema.monto_efectivo.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  $\r\n                  {(\r\n                    corte.montos_en_caja.monto_efectivo.monto -\r\n                    montos_sistema.monto_efectivo\r\n                  ).toFixed(2)}\r\n                </TableCell>\r\n              </TableBody>\r\n              <TableBody>\r\n                <TableCell align=\"center\">\r\n                  <b>MONTO TARJETA DEBITO</b>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${corte.montos_en_caja.monto_tarjeta_debito.monto.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${montos_sistema.monto_tarjeta_debito.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  $\r\n                  {(\r\n                    corte.montos_en_caja.monto_tarjeta_debito.monto -\r\n                    montos_sistema.monto_tarjeta_debito\r\n                  ).toFixed(2)}\r\n                </TableCell>\r\n              </TableBody>\r\n              <TableBody>\r\n                <TableCell align=\"center\">\r\n                  <b>MONTO TARJETA DE CREDITO</b>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${corte.montos_en_caja.monto_tarjeta_credito.monto.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${montos_sistema.monto_tarjeta_credito.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  $\r\n                  {(\r\n                    corte.montos_en_caja.monto_tarjeta_credito.monto -\r\n                    montos_sistema.monto_tarjeta_credito\r\n                  ).toFixed(2)}\r\n                </TableCell>\r\n              </TableBody>\r\n              <TableBody>\r\n                <TableCell align=\"center\">\r\n                  <b>MONTO TRANSFERENCIAS</b>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${corte.montos_en_caja.monto_transferencia.monto.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${montos_sistema.monto_transferencia.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  $\r\n                  {(\r\n                    corte.montos_en_caja.monto_transferencia.monto -\r\n                    montos_sistema.monto_transferencia\r\n                  ).toFixed(2)}\r\n                </TableCell>\r\n              </TableBody>\r\n              <TableBody>\r\n                <TableCell align=\"center\">\r\n                  <b>MONTO EN MONEDERO</b>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${corte.montos_en_caja.monto_monedero.monto.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${montos_sistema.monto_monedero.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  $\r\n                  {(\r\n                    corte.montos_en_caja.monto_monedero.monto -\r\n                    montos_sistema.monto_monedero\r\n                  ).toFixed(2)}\r\n                </TableCell>\r\n              </TableBody>\r\n              <TableBody>\r\n                <TableCell align=\"center\">\r\n                  <b>MONTO EN CREDITOS</b>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${corte.montos_en_caja.monto_creditos.monto.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${montos_sistema.monto_creditos.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  $\r\n                  {(\r\n                    corte.montos_en_caja.monto_creditos.monto -\r\n                    montos_sistema.monto_creditos\r\n                  ).toFixed(2)}\r\n                </TableCell>\r\n              </TableBody>\r\n              <TableBody>\r\n                <TableCell align=\"center\">\r\n                  <b>MONTO EN CHEQUES</b>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${corte.montos_en_caja.monto_cheques.monto.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${montos_sistema.monto_cheques.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  $\r\n                  {(\r\n                    corte.montos_en_caja.monto_cheques.monto -\r\n                    montos_sistema.monto_cheques\r\n                  ).toFixed(2)}\r\n                </TableCell>\r\n              </TableBody>\r\n              <TableBody>\r\n                <TableCell align=\"center\">\r\n                  <b>MONTO EN VALE DE DESPENSA</b>\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${corte.montos_en_caja.monto_vales_despensa.monto.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  ${montos_sistema.monto_vales_despensa.toFixed(2)}\r\n                </TableCell>\r\n                <TableCell align=\"center\">\r\n                  $\r\n                  {(\r\n                    corte.montos_en_caja.monto_vales_despensa.monto -\r\n                    montos_sistema.monto_vales_despensa\r\n                  ).toFixed(2)}\r\n                </TableCell>\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        </Paper>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n","import { Button } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport ExcelFile from \"react-export-excel/dist/ExcelPlugin/components/ExcelFile\";\r\nimport ExcelSheet from \"react-export-excel/dist/ExcelPlugin/elements/ExcelSheet\";\r\nimport ExcelColumn from \"react-export-excel/dist/ExcelPlugin/elements/ExcelColumn\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport { RiFileExcel2Line } from \"react-icons/ri\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\n\r\nexport default function ExportExcel({ historialCortes, refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setValue(value);\r\n\r\n    if (!value) {\r\n      refetch({\r\n        limit: 20,\r\n        offset: 0,\r\n      });\r\n    } else {\r\n      refetch({\r\n        limit: 0,\r\n        offset: 0,\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"text\"\r\n        color=\"primary\"\r\n        startIcon={<RiFileExcel2Line />}\r\n        onClick={handleClickOpen}\r\n      >\r\n        Exportar Excel\r\n      </Button>\r\n      <Dialog open={open} onClose={handleClose} fullWidth maxWidth=\"xs\">\r\n        <DialogTitle>{\"Exportar Reporte de cortes de caja\"}</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            -Exportar pagina actual: exportará la pagina actual\r\n          </DialogContentText>\r\n          <DialogContentText>\r\n            -Exportar todo: exportará todos los registros filtrados\r\n          </DialogContentText>\r\n          <FormControl variant=\"outlined\" fullWidth>\r\n            <Select\r\n              value={value}\r\n              onChange={(e) => handleChange(e.target.value)}\r\n            >\r\n              <MenuItem value={0}>Contenido Actual</MenuItem>\r\n              <MenuItem value={1}>Todos los registros</MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <ExportarExcelAction datosExcel={historialCortes.docs} />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ExportarExcelAction = ({ datosExcel }) => {\r\n  const cortesCajaData = datosExcel.map((cortes) => {\r\n    const cortes_caja = {\r\n      fecha: cortes.fecha_salida.completa,\r\n      hora_movimiento: cortes.hora_salida.completa,\r\n      horario_turno: cortes.horario_en_turno,\r\n      sucursal: cortes.sucursal.nombre_sucursal,\r\n      nombre: cortes.usuario_en_turno.nombre,\r\n      numero_usuario: cortes.usuario_en_turno.numero_usuario,\r\n      concepto: \"Corte Caja\",\r\n      caja: cortes.numero_caja,\r\n      monto_efectivo: cortes.montos_en_caja.monto_efectivo.monto,\r\n      monto_creditos: cortes.montos_en_caja.monto_creditos.monto,\r\n      monto_tarjeta_debito: cortes.montos_en_caja.monto_tarjeta_debito.monto,\r\n      monto_tarjeta_credito: cortes.montos_en_caja.monto_tarjeta_credito.monto,\r\n      monto_monedero: cortes.montos_en_caja.monto_monedero.monto,\r\n      monto_cheques: cortes.montos_en_caja.monto_cheques.monto,\r\n      monto_transferencia: cortes.montos_en_caja.monto_transferencia.monto,\r\n      monto_vales_despensa: cortes.montos_en_caja.monto_vales_despensa.monto,\r\n    };\r\n\r\n    return cortes_caja;\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <ExcelFile\r\n        element={\r\n          <Button\r\n            variant=\"text\"\r\n            color=\"primary\"\r\n            aria-label=\"Guardar\"\r\n            startIcon={<RiFileExcel2Line />}\r\n          >\r\n            Exportar\r\n          </Button>\r\n        }\r\n        filename={`Reporte de Historial de Cortes`}\r\n      >\r\n        <ExcelSheet\r\n          data={cortesCajaData}\r\n          name={`Reporte de Historial de Cortes`}\r\n        >\r\n          <ExcelColumn label=\"Usuario\" value=\"nombre\" />\r\n          <ExcelColumn label=\"No. Usuario\" value=\"numero_usuario\" />\r\n          <ExcelColumn label=\"Sucursal\" value=\"sucursal\" />\r\n          <ExcelColumn label=\"Fecha Corte\" value=\"fecha\" />\r\n          <ExcelColumn label=\"Hora Corte\" value=\"hora_movimiento\" />\r\n          <ExcelColumn label=\"Horario Turno\" value=\"horario_turno\" />\r\n          <ExcelColumn label=\"Concepto\" value=\"concepto\" />\r\n          <ExcelColumn label=\"No. de Caja\" value=\"caja\" />\r\n          <ExcelColumn label=\"M. en Efectivo\" value=\"monto_efectivo\" />\r\n          <ExcelColumn label=\"M. en Creditos\" value=\"monto_creditos\" />\r\n          <ExcelColumn\r\n            label=\"M. en Tarjeta Debito\"\r\n            value=\"monto_tarjeta_debito\"\r\n          />\r\n          <ExcelColumn\r\n            label=\"M. en Tarjeta Credito\"\r\n            value=\"monto_tarjeta_credito\"\r\n          />\r\n          <ExcelColumn label=\"M. en Monedero\" value=\"monto_monedero\" />\r\n          <ExcelColumn label=\"M. en Cheques\" value=\"monto_cheques\" />\r\n          <ExcelColumn\r\n            label=\"M. en Transferencia\"\r\n            value=\"monto_transferencia\"\r\n          />\r\n          <ExcelColumn\r\n            label=\"M. en Vale Despensa\"\r\n            value=\"monto_vales_despensa\"\r\n          />\r\n        </ExcelSheet>\r\n      </ExcelFile>\r\n    </>\r\n  );\r\n};\r\n","import { Impresora } from \"./Impresora\";\r\nconst RUTA_API = \"http://localhost:8000\";\r\n\r\nexport const imprimirTicketVenta = async () => {\r\n  try {\r\n    let impresora = new Impresora(RUTA_API);\r\n    impresora.feed(1);\r\n    impresora.setAlign(\"center\");\r\n    impresora.write(\"***Ticket de prueba***\");\r\n    impresora.feed(3);\r\n    impresora.cut();\r\n    /* impresora.cutPartial(); // Pongo este y también cut porque en ocasiones no funciona con cut, solo con cutPartial */\r\n\r\n    await impresora.end();\r\n\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport { Impresora } from \"./Impresora\";\r\nimport SnackBarMessages from \"../SnackBarMessages\";\r\nimport { imprimirTicketVenta } from \"./ImpTicketPrueba\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport PrintIcon from '@material-ui/icons/Print';\r\n\r\nexport default function SelectPrinter({ handleClose, setPrint, print }) {\r\n  const [printers, setPrinters] = React.useState([]);\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [loadingPrinters, setLoadingPrinters] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n\r\n  const obtenerListaDeImpresoras = () => {\r\n    setLoadingPrinters(true);\r\n    Impresora.getImpresoras()\r\n      .then((listaDeImpresoras) => {\r\n        setLoadingPrinters(false);\r\n        setPrinters(listaDeImpresoras);\r\n      })\r\n      .catch((err) => {\r\n        setLoadingPrinters(false);\r\n        setPrint(null);\r\n        setAlert({\r\n          message: `Hubo error al cargar las impresoras`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      });\r\n  };\r\n\r\n  const handleChangePrint = (value) => {\r\n    setPrint(value);\r\n  };\r\n\r\n  const handleSetDefaultPrinter = () => {\r\n    setLoading(true);\r\n    Impresora.setImpresora(print)\r\n      .then((res) => {\r\n        setLoading(false);\r\n        if (res) {\r\n          localStorage.setItem(\"cafiTicketPrint\", print);\r\n          setAlert({\r\n            message: `Impresora ${print} establecida correctamente`,\r\n            status: \"success\",\r\n            open: true,\r\n          });\r\n          handleClose();\r\n        } else {\r\n          setAlert({\r\n            message: `No se pudo establecer la impresora con el nombre ${print}`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    obtenerListaDeImpresoras();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <DialogContent>\r\n        <Box display=\"flex\" justifyContent=\"center\">\r\n          <FormControl variant=\"outlined\" style={{width: 220}}>\r\n            <InputLabel htmlFor=\"print-list\">Selecciona impresora</InputLabel>\r\n            <Select\r\n              labelId=\"print-list\"\r\n              id=\"print-list-select\"\r\n              value={print ? print : \"\"}\r\n              onChange={(e) => handleChangePrint(e.target.value)}\r\n              label=\"Selecciona impresora\"\r\n              startAdornment={\r\n                <InputAdornment position=\"start\">\r\n                  {loadingPrinters ? (\r\n                    <CircularProgress size={20} color=\"primary\" />\r\n                  ) : (\r\n                    <div />\r\n                  )}\r\n                </InputAdornment>\r\n              }\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona una</em>\r\n              </MenuItem>\r\n              {printers.map((printer, index) => (\r\n                <MenuItem key={index} value={printer}>\r\n                  {printer}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n          <Box mx={1} />\r\n          <Button\r\n            variant=\"outlined\"\r\n            onClick={() => imprimirTicketVenta()}\r\n            disabled={!print}\r\n            startIcon={<PrintIcon />}\r\n          >\r\n            Prueba\r\n          </Button>\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={() => handleClose()} color=\"inherit\">\r\n          Cancelar\r\n        </Button>\r\n        <Button\r\n          onClick={() => handleSetDefaultPrinter()}\r\n          color=\"primary\"\r\n          disabled={loading}\r\n          startIcon={\r\n            loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n          }\r\n        >\r\n          Seleccionar\r\n        </Button>\r\n      </DialogActions>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport PrintIcon from \"@material-ui/icons/Print\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport SelectPrinter from \"./SelectPrinter\";\r\n\r\nexport default function TicketPrinterComponent({ turnoEnCurso, icon, text }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [print, setPrint] = React.useState(\r\n    localStorage.getItem(\"cafiTicketPrint\")\r\n  );\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        onClick={() => handleClickOpen()}\r\n        startIcon={\r\n          <Badge\r\n            badgeContent={1}\r\n            variant=\"dot\"\r\n            color={print ? \"default\" : \"secondary\"}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"left\",\r\n            }}\r\n          >\r\n            {icon ? (\r\n              <SettingsIcon style={{ fontSize: 20 }} />\r\n            ) : (\r\n              <PrintIcon style={{ fontSize: 20 }} />\r\n            )}\r\n          </Badge>\r\n        }\r\n        style={!turnoEnCurso ? { color: \"white\", borderColor: \"white\" } : null}\r\n      >\r\n        {text ? text : \"Impresora\"}\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        aria-labelledby=\"select-printer\"\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle id=\"select-printer\">\r\n          Configuración impresora de tickets\r\n        </DialogTitle>\r\n        <SelectPrinter\r\n          handleClose={handleClose}\r\n          print={print}\r\n          setPrint={setPrint}\r\n        />\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/cash-register.063f45da.svg\";","import {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  MenuItem,\r\n  Select,\r\n  Slide,\r\n  TextField,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\nimport React, { useState } from \"react\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport TablaComprasFiltradas from \"./TablaCortesFiltradas\";\r\nimport ExportExcel from \"./ExportExcel\";\r\n\r\nimport { useQuery } from \"@apollo/client\";\r\nimport {\r\n  OBTENER_CAJAS,\r\n  OBTENER_CORTES_CAJA,\r\n} from \"../../../../gql/Cajas/cajas\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport TicketPrinterComponent from \"../../../../components/TicketPrinter/TicketPrinter\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport CashRegisterIcon from \"../../../../icons/ventas/cash-register.svg\"\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    width: 100,\r\n  },\r\n}));\r\n\r\nexport default function ReportesCortes() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const [page, setPage] = useState(0);\r\n  const [open, setOpen] = useState(false);\r\n  const [datosFiltro, setDatosFiltro] = useState([]);\r\n  const [value] = useDebounce(datosFiltro, 500);\r\n  const limit = 20;\r\n  let cajas = [];\r\n  let historialCortes = [];\r\n\r\n  const cajasBase = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CORTES_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        fecha_consulta: datosFiltro.fecha_consulta\r\n          ? datosFiltro.fecha_consulta\r\n          : \"\",\r\n        usuario: value.usuario ? value.usuario : \"\",\r\n        numero_caja: datosFiltro.numero_caja\r\n          ? parseInt(datosFiltro.numero_caja)\r\n          : null,\r\n      },\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  if (cajasBase.loading === false && loading === false) {\r\n    cajas = cajasBase.data.obtenerCajasSucursal;\r\n    historialCortes = data.obtenerCortesDeCaja;\r\n  }\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatosFiltro({ ...datosFiltro, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  /* const filtrarProductos = (event) => {\r\n    event.preventDefault();\r\n    refetch();\r\n  }; */\r\n\r\n  const limpiarDatos = () => {\r\n    setDatosFiltro([]);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button fullWidth onClick={handleClickOpen}>\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={CashRegisterIcon}\r\n              alt=\"icono caja\"\r\n              style={{ width: 100 }}\r\n            />\r\n          </Box>\r\n          Reportes cortes de caja\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullScreen\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Reportes cortes de caja\r\n            </Typography>\r\n            <Box m={1}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon style={{ fontSize: 30 }} />\r\n              </Button>\r\n            </Box>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <DialogContent>\r\n          <Grid container spacing={3}>\r\n            <Grid item md={7} xs={12}>\r\n              <Grid container spacing={2}>\r\n                <Grid item md={4} xs={12}>\r\n                  <Typography>Fecha de corte:</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"fecha_consulta\"\r\n                    variant=\"outlined\"\r\n                    type=\"date\"\r\n                    onChange={obtenerDatos}\r\n                    value={\r\n                      datosFiltro.fecha_consulta\r\n                        ? datosFiltro.fecha_consulta\r\n                        : \"\"\r\n                    }\r\n                  />\r\n                </Grid>\r\n                <Grid item md={4} xs={12}>\r\n                  <Typography>Usuario:</Typography>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    name=\"usuario\"\r\n                    variant=\"outlined\"\r\n                    onChange={obtenerDatos}\r\n                    value={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n                  />\r\n                </Grid>\r\n                <Grid item md={4} xs={12}>\r\n                  <Typography>Caja:</Typography>\r\n                  <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n                    <Select\r\n                      id=\"form-producto-tipo\"\r\n                      name=\"numero_caja\"\r\n                      onChange={obtenerDatos}\r\n                      value={\r\n                        datosFiltro.numero_caja ? datosFiltro.numero_caja : \"\"\r\n                      }\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>Selecciona uno</em>\r\n                      </MenuItem>\r\n                      {cajas?.map((caja) => {\r\n                        return (\r\n                          <MenuItem\r\n                            key={caja.numero_caja}\r\n                            value={caja.numero_caja}\r\n                          >\r\n                            Caja {caja.numero_caja}\r\n                          </MenuItem>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              md={5}\r\n              xs={12}\r\n              style={{ display: \"flex\", justifyContent: \"flex-end\" }}\r\n            >\r\n              <Box height=\"100%\" display=\"flex\" alignItems=\"flex-end\">\r\n                <Button\r\n                  color=\"primary\"\r\n                  variant=\"text\"\r\n                  onClick={limpiarDatos}\r\n                  startIcon={<Close />}\r\n                >\r\n                  Limpiar Filtro\r\n                </Button>\r\n                <Box mx={1} />\r\n                <ExportExcel historialCortes={historialCortes} refetch={refetch} />\r\n                <Box mx={1} />\r\n                <TicketPrinterComponent turnoEnCurso={true} icon=\"config\" />\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={12} md={12} xs={12}>\r\n              <TablaComprasFiltradas\r\n                cortes={historialCortes}\r\n                loading={loading}\r\n                page={page}\r\n                setPage={setPage}\r\n                limit={limit}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const OBTENER_HISTORIAL_EGRESOS = gql`\r\n    query ObtenerHistorialEgresos($input: ObtenerHistorialEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        obtenerHistorialEgresos(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            folio_egreso\r\n            folio_factura\r\n            empresa_distribuidora\r\n            provedor\r\n            productos {\r\n                cantidad_productos\r\n                precio_unitario\r\n                producto\r\n                total\r\n            }\r\n            categoria\r\n            subCategoria\r\n            metodo_pago\r\n            fecha_compra\r\n            fecha_registro\r\n            fecha_vencimiento\r\n            observaciones\r\n            compra_credito\r\n            credito_pagado\r\n            saldo_credito_pendiente\r\n            saldo_total\r\n            numero_usuario_creador\r\n            nombre_usuario_creador\r\n            id_user\r\n            empresa\r\n            sucursal         \r\n        }\r\n    }\r\n`\r\n\r\nexport const CREAR_EGRESO = gql`\r\n    mutation CrearEgreso($input: CrearEgresosInput, $empresa: ID!, $sucursal: ID!){\r\n        crearEgreso(input: $input, empresa: $empresa, sucursal: $sucursal){\r\n            message\r\n        }\r\n    }\r\n`;","import React, { Fragment, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Box, Button, CircularProgress, Dialog, DialogActions, DialogContent, FormControl, Grid, MenuItem, Select, Slide, TextField, Typography } from '@material-ui/core';\r\nimport { useDebounce } from 'use-debounce/lib';\r\nimport { useQuery } from '@apollo/client';\r\nimport { OBTENER_HISTORIAL_EGRESOS } from '../../../../gql/Tesoreria/egresos';\r\nimport moment from 'moment';\r\nimport { formatoMexico } from '../../../../config/reuserFunctions';\r\n\r\nconst columns = [\r\n\t{ id: 'folio', label: 'Folio', minWidth: 170 },\r\n\t{ id: 'nombre', label: 'Usuario', minWidth: 170 },\r\n\t{ id: 'fecha', label: 'Fecha', minWidth: 170 },\r\n\t{ id: 'folioF', label: 'Folio Factura', minWidth: 170 },\r\n\t{ id: 'tipo', label: 'Tipo Compra', minWidth: 170 },\r\n];\r\n\r\nconst useStyles  = makeStyles((theme) => ({\r\n\t\troot: {\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '70vh'\r\n\t\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '100%'\r\n\t},\r\n    appBar: {\t\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tformInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t\t}\r\n\t},\r\n\tformInput: {\r\n\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(2)}px`\r\n\t},\r\n}));\r\n\r\nexport default function ListaEgresos() {\r\n    const sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tconst classes = useStyles();\r\n\tconst [datosFiltro, setDatosFiltro] = useState([]);\r\n\tconst [value] = useDebounce(datosFiltro, 500);\r\n\r\n\r\n\tconst { loading, data, error, refetch  } = useQuery( OBTENER_HISTORIAL_EGRESOS,{\r\n\t\tvariables: {\r\n\t\t\tinput: {\r\n                fecha_inicio: datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\",\r\n                fecha_fin: datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\",\r\n                usuario: value.usuario ? value.usuario : \"\", \r\n                tipo_movimiento: datosFiltro.tipo_movimiento ? (datosFiltro.tipo_movimiento === \"CREDITO\" ?  true : false) : null\r\n            },\r\n            empresa: sesion.empresa._id,\r\n\t\t\tsucursal: sesion.sucursal._id\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\trefetch();\r\n\t}, [refetch]);\r\n\r\n\t\r\n\tlet historialEgresos = [];\r\n\r\n\tif(data){\r\n\t\thistorialEgresos = data.obtenerHistorialEgresos\r\n\t}\r\n\r\n\tconst obtenerDatos =(e)=>{\r\n\t\tsetDatosFiltro({...datosFiltro, [e.target.name]: e.target.value})\r\n    };\r\n\r\n\tconst limpiarDatos = () => {\r\n\t\tsetDatosFiltro([]);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Grid>\r\n\t\t\t<Grid item lg={12} md={12} xs={12}>\r\n\t\t\t\t<div className={classes.formInputFlex}>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Inicio:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_inicio\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_inicio ? datosFiltro.fecha_inicio : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tFecha Fin:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"fecha_fin\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.fecha_fin ? datosFiltro.fecha_fin : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tUsuario:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tname=\"usuario\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\tvalue={datosFiltro.usuario ? datosFiltro.usuario : \"\"}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box width=\"100%\">\r\n\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\tTipo Egreso:\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tid=\"form-producto-tipo\"\r\n\t\t\t\t\t\t\t\tname=\"tipo_movimiento\"\r\n\t\t\t\t\t\t\t\tonChange={obtenerDatos}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<MenuItem value=\"TODOS\">\r\n\t\t\t\t\t\t\t\t\t<em>Selecciona uno</em>\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CONTADO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Contado\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t<MenuItem value='CREDITO'>\r\n\t\t\t\t\t\t\t\t\tEgreso Credito\r\n\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Box \r\n\t\t\t\t\t\twidth=\"100%\" \r\n\t\t\t\t\t\tdisplay=\"flex\" \r\n\t\t\t\t\t\tjustifyContent=\"center\" \r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tmt={2}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tonClick={limpiarDatos}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tLimpiar Filtro\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t</div>\r\n\t\t\t</Grid> \r\n\t\t\t<Box p={2}>\r\n\t\t\t\t<Paper className={classes.root}>\r\n\t\t\t\t\t<TableContainer className={classes.container}>\r\n\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t{columns.map((column) => (\r\n\t\t\t\t\t\t\t\t\t\t<TableCell key={column.id} align={column.align} style={{ minWidth: column.minWidth }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{column.label}\r\n\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{historialEgresos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<RowsEgresos row={row} loading={loading} key={index} />\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</Box>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction RowsEgresos({row, loading}){\r\n\r\n\tconst [open, setOpen] = useState(false);\r\n\r\n\tconst handleClickOpen =()=> setOpen(!open);\r\n\r\n\tif (loading) \r\n\treturn (\r\n\t\t<Box\r\n\t\tdisplay=\"flex\"\r\n\t\tflexDirection=\"column\"\r\n\t\tjustifyContent=\"center\"\r\n\t\talignItems=\"center\"\r\n\t\theight=\"80vh\"\r\n\t\t>\r\n\t\t\t<CircularProgress />\r\n\t\t</Box>\r\n\t);\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open} \r\n\t\t\t\tTransitionComponent={Transition} \r\n\t\t\t\tfullWidth \r\n\t\t\t\tmaxWidth=\"md\"\r\n\t\t\t>\r\n\t\t\t\t<DialogCaracteristicas row={row}  />\r\n\t\t\t\t<DialogActions>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant='outlined'\r\n\t\t\t\t\t\tcolor='secondary'\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCerrar\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</DialogActions>\r\n\t\t\t</Dialog>\r\n\t\t\t<TableRow \r\n\t\t\t\thover \r\n\t\t\t\ttabIndex={-1} \r\n\t\t\t\tkey={row.code}\r\n\t\t\t\tonClick={handleClickOpen}\r\n\t\t\t>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_egreso}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.nombre_usuario_creador}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.fecha_compra}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.folio_factura}\r\n\t\t\t\t</TableCell>\r\n\t\t\t\t<TableCell>\r\n\t\t\t\t\t{row.compra_credito === false ? \"Contado\" : \"Credito\"}\r\n\t\t\t\t</TableCell>\r\n\t\t\t</TableRow>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nfunction DialogCaracteristicas ({row}) {\r\n\r\n\treturn(\r\n\t\t<Fragment>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t<Grid item lg={12} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\" p={2}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t\t\tInformación de movimiento\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={5} xs={12}>\r\n\t\t\t\t\t\t<Box display=\"flex\" textAlign=\"left\" p={1}>\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t<b>Fecha Compra: </b> {moment(row.fecha_compra).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio movimiento: </b> {row.folio_egreso}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Usuario: </b> {row.nombre_usuario_creador}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Categoria: </b> {row.categoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Sub-Categoria: </b> {row.subCategoria}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Folio Factura: </b> {row.folio_factura}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Empresa: </b> {row.empresa_distribuidora}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Provedor: </b> {row.provedor}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Metodo de pago: </b> {row.metodo_pago}\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<b>Compra credito: </b> {row.compra_credito === false ? \"NO\" : \"Si\"}\r\n\t\t\t\t\t\t\t\t{row.compra_credito === false ? null : (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Fecha Vencimiento: </b> {row.fecha_vencimiento}\r\n\t\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t\t<b>Saldo Pendiente: </b> {row.saldo_credito_pendiente}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item lg={7} xs={12}>\r\n\t\t\t\t\t\t<Box textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\tProductos Adquiridos\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Paper style={{width: '100%', height: '30vh'}}>\r\n\t\t\t\t\t\t\t\t<TableContainer style={{maxHeight: '100%'}}>\r\n\t\t\t\t\t\t\t\t\t<Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n\t\t\t\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tCANTIDAD\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tPRODUCTO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tP. UNITARIO\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' style={{ minWidth: 100 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTOTAL\r\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t\t\t\t{row?.productos.map((row, index) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableRow \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thover \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={-1} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.cantidad_productos}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.producto}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.precio_unitario}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell align='center' >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{row.total}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t\t\t\t</TableContainer>\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box display='flex' justifyContent='flex-end' p={1}> \r\n\t\t\t\t\t\t\t<Typography variant='h6'>\r\n\t\t\t\t\t\t\t\tTotal: ${formatoMexico(row.saldo_total)}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</DialogContent>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport { Box, Grid, IconButton, InputBase } from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\n\r\nconst columns = [\r\n  { id: \"name\", label: \"Name\", minWidth: 170 },\r\n  { id: \"code\", label: \"ISO\\u00a0Code\", minWidth: 100 },\r\n  {\r\n    id: \"population\",\r\n    label: \"Population\",\r\n    minWidth: 170,\r\n    align: \"right\",\r\n    format: (value) => value.toLocaleString(\"en-US\"),\r\n  },\r\n  {\r\n    id: \"size\",\r\n    label: \"Size\\u00a0(km\\u00b2)\",\r\n    minWidth: 170,\r\n    align: \"right\",\r\n    format: (value) => value.toLocaleString(\"en-US\"),\r\n  },\r\n  {\r\n    id: \"density\",\r\n    label: \"Density\",\r\n    minWidth: 170,\r\n    align: \"right\",\r\n    format: (value) => value.toFixed(2),\r\n  },\r\n];\r\n\r\nfunction createData(name, code, population, size) {\r\n  const density = population / size;\r\n  return { name, code, population, size, density };\r\n}\r\n\r\nconst rows = [\r\n  createData(\"India\", \"IN\", 1324171354, 3287263),\r\n  createData(\"China\", \"CN\", 1403500365, 9596961),\r\n  createData(\"Italy\", \"IT\", 60483973, 301340),\r\n  createData(\"United States\", \"US\", 327167434, 9833520),\r\n  createData(\"Canada\", \"CA\", 37602103, 9984670),\r\n  createData(\"Australia\", \"AU\", 25475400, 7692024),\r\n  createData(\"Germany\", \"DE\", 83019200, 357578),\r\n  createData(\"Ireland\", \"IE\", 4857000, 70273),\r\n  createData(\"Mexico\", \"MX\", 126577691, 1972550),\r\n  createData(\"Japan\", \"JP\", 126317000, 377973),\r\n  createData(\"France\", \"FR\", 67022000, 640679),\r\n  createData(\"United Kingdom\", \"GB\", 67545757, 242495),\r\n  createData(\"Russia\", \"RU\", 146793744, 17098246),\r\n  createData(\"Nigeria\", \"NG\", 200962417, 923768),\r\n  createData(\"Brazil\", \"BR\", 210147125, 8515767),\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    maxHeight: \"100%\",\r\n  },\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  rootBusqueda: {\r\n    display: \"flex\",\r\n    paddingLeft: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function ListaTransferencias() {\r\n  const classes = useStyles();\r\n  const [page, setPage] = useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = useState(14);\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(+event.target.value);\r\n    setPage(0);\r\n  };\r\n\r\n  return (\r\n    <Grid>\r\n      <div className={classes.root}>\r\n        <Box m={2} display=\"flex\" justifyContent=\"space-between\">\r\n          <Box mr={5} minWidth=\"70%\">\r\n            <Paper className={classes.rootBusqueda}>\r\n              <InputBase\r\n                fullWidth\r\n                placeholder=\"Buscar transferencias...\"\r\n                // onChange={(e) => setValues(e.target.value)}\r\n                // onKeyPress={pressEnter}\r\n                // value={values}\r\n              />\r\n              <IconButton>\r\n                <Search />\r\n              </IconButton>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n      </div>\r\n      <Box p={2}>\r\n        <Paper className={classes.root}>\r\n          <TableContainer className={classes.container}>\r\n            <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n              <TableHead>\r\n                <TableRow>\r\n                  {columns.map((column) => (\r\n                    <TableCell\r\n                      key={column.id}\r\n                      align={column.align}\r\n                      style={{ minWidth: column.minWidth }}\r\n                    >\r\n                      {column.label}\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {rows\r\n                  .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                  .map((row) => {\r\n                    return (\r\n                      <TableRow\r\n                        hover\r\n                        role=\"checkbox\"\r\n                        tabIndex={-1}\r\n                        key={row.code}\r\n                      >\r\n                        {columns.map((column) => {\r\n                          const value = row[column.id];\r\n                          return (\r\n                            <TableCell key={column.id} align={column.align}>\r\n                              {column.format && typeof value === \"number\"\r\n                                ? column.format(value)\r\n                                : value}\r\n                            </TableCell>\r\n                          );\r\n                        })}\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n          <TablePagination\r\n            rowsPerPageOptions={[10, 25, 100]}\r\n            component=\"div\"\r\n            count={rows.length}\r\n            rowsPerPage={rowsPerPage}\r\n            page={page}\r\n            onChangePage={handleChangePage}\r\n            onChangeRowsPerPage={handleChangeRowsPerPage}\r\n          />\r\n        </Paper>\r\n      </Box>\r\n    </Grid>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport { Box, ListItemIcon, Menu, MenuItem } from '@material-ui/core';\r\nimport {FcSurvey } from 'react-icons/fc';\r\n\r\nimport ListaEgresos from './ListaEgresos';\r\nimport ListaTransferencias from './ListaTransferencias';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tposition: 'relative'\r\n\t},\r\n\ttitle: {\r\n\t\tmarginLeft: theme.spacing(2),\r\n\t\tflex: 1\r\n\t},\r\n    icon: {\r\n\t\twidth: 100\r\n\t},\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\twidth: '100%',\r\n\t\theight: '100vh',\r\n\t\tbackgroundColor: theme.palette.background.paper\r\n\t},\r\n\trootBusqueda: {\r\n\t\tdisplay: 'flex',\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n\treturn <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ReportesTesoreria() {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [ventana, setVentana] = useState('');\r\n\tconst [ open, setOpen ] = useState(false);\r\n\r\n\tconst handleClickOpen = () => setOpen(!open);\r\n\r\n\tconst [anchorEl, setAnchorEl] = useState(null);\r\n\r\n\tconst handleClick = (event) => {\r\n\t\tsetAnchorEl(event.currentTarget);\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetAnchorEl(null);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\">\r\n\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" >\r\n                        <FcSurvey style={{fontSize: 100}}/>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\tReportes Tesoreria\r\n\t\t\t\t</Box>\r\n\t\t\t</Button>\r\n\t\t\t<Menu\r\n\t\t\t\t id=\"customized-menu\"\r\n\t\t\t\tanchorEl={anchorEl}\r\n\t\t\t\tkeepMounted\r\n\t\t\t\topen={Boolean(anchorEl)}\r\n\t\t\t\tonClose={handleClose}\r\n\t\t\t>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('egresos')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Egresos\r\n\t\t\t\t</MenuItem>\r\n\t\t\t\t<MenuItem onClick={ ()=>{\r\n\t\t\t\t\t\thandleClickOpen()\r\n\t\t\t\t\t\tsetVentana('transferencias')\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t<FcSurvey style={{fontSize: 35}} />\r\n\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\tHistorial Transferencias\r\n\t\t\t\t</MenuItem>\r\n\t\t\t</Menu>\r\n\t\t\t\r\n\t\t\t<Dialog fullScreen open={open} onClose={handleClickOpen} TransitionComponent={Transition}>\r\n\t\t\t\t<AppBar className={classes.appBar}>\r\n\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t\t\t\t\tHistotorial de {ventana}\r\n\t\t\t\t\t\t</Typography>\r\n                        <Box m={1}>\r\n\t\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} size=\"large\">\r\n\t\t\t\t\t\t\t\t<CloseIcon style={{fontSize: 30}} />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Toolbar>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tventana === 'egresos' ? (\r\n\t\t\t\t\t\t\t<ListaEgresos />\r\n\t\t\t\t\t\t) : ventana === 'transferencias' ?(\r\n\t\t\t\t\t\t\t<ListaTransferencias />\t\t\t\r\n\t\t\t\t\t\t) :(\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Box>\r\n\t\t\t\t\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Container, Grid, Box } from '@material-ui/core';\r\nimport Cajas from './Cajas/Cajas';\r\nimport ReportesTurnosUsuarios from './TurnosUsuarios/ReportesTurnosUsuarios';\r\nimport ReportesCompras from './Compras/ReportesCompras';\r\nimport ReportesVentas from './Ventas/ReportesVentas';\r\nimport ReportesAlmacen from './Almacenes/ReportesAlmacen';\r\nimport ReportesCortes from './Cortes/ReportesCortes';\r\nimport ReportesTesoreria from './Tesoreria/Reporte_Tesoreria';\r\n\r\nexport default function Reportes() {\r\n\tconst permisosUsuario = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<Grid container spacing={3} justifyContent=\"center\">\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_historial_cajas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<Cajas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_turnos.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTurnosUsuarios />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_compras.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCompras />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_ventas.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesVentas />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.rerporte_almacen.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesAlmacen />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{permisosUsuario.accesos.reportes.reporte_corte_caja.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesCortes />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{/* {permisosUsuario.accesos.reportes.reporte_tesoreria.ver === false ? (null) : (\r\n\t\t\t\t\t<Grid item lg={2} >\r\n\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n\t\t\t\t\t\t\t<ReportesTesoreria />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)} */}\r\n\t\t\t</Grid>\r\n\t\t</Container>\r\n\t);\r\n}","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport { FcShop, FcPaid, FcSurvey, FcNews } from \"react-icons/fc\";\r\nimport { Box, Tab, Tabs, AppBar } from \"@material-ui/core\";\r\nimport Empresa from \"./Empresa/Empresa\";\r\nimport Compras from \"./Compras/Compras\";\r\nimport Catalogos from \"./Catalogos/Catalogos\";\r\nimport IndexTesoreria from \"./Tesoreria/IndexTesoreria\";\r\nimport Facturacion from \"./Facturacion/Facturacion\";\r\nimport Almacenes from \"./Almacenes/Almacenes\";\r\nimport { withRouter } from \"react-router\";\r\nimport Reportes from \"./Reportes/Reportes\";\r\nimport AlmacenImg from \"../../icons/almacen.svg\"\r\nimport MoneyImg from \"../../icons/money.svg\"\r\nimport FacturaImg from \"../../icons/factura.svg\"\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-force-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-force-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} my={6} minHeight=\"50vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-force-tab-${index}`,\r\n    \"aria-controls\": `scrollable-force-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    height: \"94vh\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n  iconSvg: {\r\n    width: 100,\r\n  },\r\n  iconSvgVenta: {\r\n    width: 90,\r\n  },\r\n}));\r\n\r\nfunction AdminInicio(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n  const handleChangeIndex = (index) => {\r\n    setValue(index);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {/* <Toolbar /> */}\r\n      <Box>\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n            centered /* variant=\"scrollable\" */\r\n            scrollButtons=\"on\"\r\n          >\r\n            <Tab\r\n              label=\"Mi empresa\"\r\n              icon={<FcShop className={classes.icon} />}\r\n              {...a11yProps(0)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Catalogos\"\r\n              icon={<FcNews className={classes.icon} />}\r\n              {...a11yProps(1)}\r\n            />\r\n            <Tab\r\n              label=\"Almacenes\"\r\n              icon={\r\n                <img\r\n                  src={AlmacenImg}\r\n                  alt=\"icono almacen\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(2)}\r\n            />\r\n\r\n            <Tab\r\n              label=\"Compras\"\r\n              icon={<FcPaid className={classes.icon} />}\r\n              {...a11yProps(3)}\r\n            />\r\n            {/*  <Tab\r\n              label=\"Ventas\"\r\n              icon={\r\n                <img\r\n                  src=\"cart-add.svg\"\r\n                  alt=\"icono ventas\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(4)}\r\n              onClick={() => props.history.push(\"/ventas/venta-general\")}\r\n            /> */}\r\n            <Tab\r\n              label=\"Reportes\"\r\n              icon={<FcSurvey className={classes.icon} />}\r\n              {...a11yProps(4)}\r\n            />\r\n            <Tab\r\n              label=\"Tesoreria\"\r\n              icon={\r\n                <img\r\n                  src={MoneyImg}\r\n                  alt=\"icono money\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(5)}\r\n            />\r\n            <Tab\r\n              label=\"Facturación\"\r\n              icon={\r\n                <img\r\n                  src={FacturaImg}\r\n                  alt=\"icono factura\"\r\n                  className={classes.iconSvg}\r\n                />\r\n              }\r\n              {...a11yProps(6)}\r\n            />\r\n          </Tabs>\r\n        </AppBar>\r\n        <SwipeableViews\r\n          axis={theme.direction === \"rtl\" ? \"x-reverse\" : \"x\"}\r\n          index={value}\r\n          onChangeIndex={handleChangeIndex}\r\n        >\r\n          <TabPanel value={value} index={0}>\r\n            <Empresa />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={1}>\r\n            <Catalogos />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={2}>\r\n            <Almacenes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={3}>\r\n            <Compras />\r\n          </TabPanel>\r\n          {/* <TabPanel value={value} index={4}>\r\n            ventas\r\n          </TabPanel> */}\r\n          <TabPanel value={value} index={4}>\r\n            <Reportes />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={5}>\r\n            <IndexTesoreria />\r\n          </TabPanel>\r\n          <TabPanel value={value} index={6}>\r\n            <Facturacion />\r\n          </TabPanel>\r\n        </SwipeableViews>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(AdminInicio);\r\n","import React, { createContext, useState } from 'react';\r\n\r\nexport const VentasContext = createContext();\r\n\r\nexport const VentasProvider = ({ children }) => {\r\n    const [DatosVentasActual, setDatosVentasActual] = useState({\r\n        subTotal: 0,\r\n        total: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n        monedero: 0,\r\n        // tipo_cambio: {},\r\n      });\r\n    const [datosProductoVentas, setDatosProductoVentas] = useState(\r\n        {\r\n            _id: null,\r\n            cantidad: null,\r\n            codigo_barras: null,\r\n            concepto: null,\r\n            default: null,\r\n            descuento: null,\r\n            descuento_activo: null,\r\n            id_producto: {},\r\n            precio: null,\r\n            unidad: null,\r\n            unidad_principal: null\r\n        }\r\n    );\r\n    \r\n    const [productosVentas, setProductosVentas] = useState([]);\r\n    const [datosVentas, setDatosVentas] = useState(\r\n        {\r\n            productos: [],\r\n            cliente: {},\r\n            subtotal: 0,\r\n            impuestos: 0,\r\n            total: 0,\r\n            usuario: {}\r\n        }\r\n    );\r\n\r\n    const [ productoCambioPrecio, setProductoCambioPrecio ] = useState({});\r\n    const [ precioSelectProductoVenta, setPrecioSelectProductoVenta ] = useState([]);\r\n    const [ clientesVentas, setClientesVentas ] = useState([]);\r\n    const [ turnoActivo, setTurnoActivo ] = useState();\r\n    const [ ubicacionTurno, setUbicacionTurno ] = useState('');\r\n\r\n    const [ update, setUpdate ] = useState(false);\r\n    const [ error, setError ] = useState(false);\r\n    const [ alert, setAlert ] = useState({ message: \"\", status: \"\", open: false });\r\n    const [ abrirTurnosDialog, setAbrirTurnosDialog ] = useState(false);\r\n    const [ updateClientVenta, setUpdateClientVenta ] = useState(false);\r\n    const [ venta_retomada, setVentaRetomada] = useState(null);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    // const [precioSeleccionadoTabla, setPrecioSeleccionadoTabla] = useState(false);\r\n\r\n    const [updateTablaVentas, setUpdateTablaVentas] = useState(false);\r\n    const [openBackDrop, setOpenBackDrop] = useState(false);\r\n    const [openBuscarProducto, setOpenBuscarProducto] = useState(false);\r\n\r\n\treturn (\r\n\t\t<VentasContext.Provider value={\r\n            { \r\n                alert, \r\n                setAlert,\r\n                update,\r\n                setUpdate,\r\n                error,\r\n                setError,\r\n                datosProductoVentas,\r\n                setDatosProductoVentas,\r\n                productosVentas,\r\n                setProductosVentas,\r\n                datosVentas,\r\n                setDatosVentas,\r\n                abrirTurnosDialog, \r\n                setAbrirTurnosDialog,\r\n                setUpdateClientVenta,\r\n                updateClientVenta,\r\n                setProductoCambioPrecio,\r\n                productoCambioPrecio,\r\n                setPrecioSelectProductoVenta,\r\n                precioSelectProductoVenta,\r\n                setUpdateTablaVentas,\r\n                updateTablaVentas,\r\n                setOpen,\r\n                open,\r\n                clientesVentas, \r\n                setClientesVentas,\r\n                turnoActivo, \r\n                setTurnoActivo,\r\n                ubicacionTurno, \r\n                setUbicacionTurno,\r\n                DatosVentasActual, setDatosVentasActual,\r\n                // precioSeleccionadoTabla,\r\n                // setPrecioSeleccionadoTabla\r\n                setOpenBackDrop,\r\n                openBackDrop,\r\n                venta_retomada, \r\n                setVentaRetomada,\r\n                openBuscarProducto,\r\n                setOpenBuscarProducto\r\n            }\r\n        }>\r\n\t\t\t{children}\r\n\t\t</VentasContext.Provider>\r\n\t);\r\n};","\r\nimport React, { useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { CloudDownload } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../components/SnackBarMessages\";\r\nimport { ACTUALIZAR_BD_LOCAL } from \"../../gql/Catalogos/usuarios\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n    VentasContext,\r\n  } from \"../../context/Ventas/ventasContext\";\r\n\r\nexport default function ComponentGetDataDBCloud ({isOnline, classes, empresa, sucursal}) {\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [actualizarBDLocal] = useMutation(ACTUALIZAR_BD_LOCAL);\r\n    const { setOpenBackDrop } = useContext(VentasContext);\r\n \r\n    const getData = async () =>{  \r\n      try {\r\n        setOpenBackDrop(true);\r\n        const resp = await actualizarBDLocal({\r\n          variables: {\r\n            empresa:empresa._id,\r\n            sucursal: sucursal._id\r\n          }\r\n        });\r\n        let {message} = resp.data.actualizarBDLocal;\r\n        \r\n       \r\n        console.log(resp)\r\n        setOpenBackDrop(false);\r\n        setAlert({ message: message, status:'success', open: true })\r\n      } catch (error) {\r\n        console.log(error)\r\n        if (error.networkError.result) {\r\n          console.log(error.networkError.result.errors);\r\n        } else if (error.graphQLErrors) {\r\n          console.log(error.graphQLErrors.message);\r\n        }\r\n        setOpenBackDrop(false);\r\n      \r\n      }\r\n    }\r\n    return (\r\n      <Box display=\"flex\" alignItems={'center'}  >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {\r\n        (isOnline) ?\r\n        <Button\r\n          onClick={() => getData()}\r\n          startIcon={<CloudDownload htmlColor=\"black\" style={{fontSize: 20 }} />}\r\n          className={classes.buttonIcon}\r\n          style={\r\n            { color: \"black\", \r\n            borderColor: \"white\",\r\n            \r\n            }\r\n          }\r\n        >\r\n          \r\n          Actualizar base de datos local\r\n        </Button> \r\n        :\r\n        <div />\r\n      }\r\n      </Box> \r\n    );\r\n  };","\r\nimport React, { useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { CloudDownload } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../components/SnackBarMessages\";\r\nimport { ACTUALIZAR_BD_LOCAL } from \"../../gql/Catalogos/usuarios\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\n\r\nexport default function ComponentGetDataDBCloudViewAdmin ({isOnline, classes, empresa, sucursal}) {\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [actualizarBDLocal] = useMutation(ACTUALIZAR_BD_LOCAL);\r\n    const {\r\n      setLoadingPage\r\n    } = useContext(AccesosContext);\r\n  \r\n    const getData = async () =>{  \r\n      try {\r\n        setLoadingPage(true);\r\n        const resp = await actualizarBDLocal({\r\n          variables: {\r\n            empresa:empresa._id,\r\n            sucursal: sucursal._id\r\n          }\r\n        });\r\n        let {message} = resp.data.actualizarBDLocal;\r\n  \r\n        setLoadingPage(false);\r\n        setAlert({ message: message, status:'success', open: true })\r\n\r\n      } catch (error) {\r\n        console.log(error)\r\n        setLoadingPage(false);\r\n        if (error.networkError.result) {\r\n          console.log(error.networkError.result.errors);\r\n        } else if (error.graphQLErrors) {\r\n          console.log(error.graphQLErrors.message);\r\n        }\r\n        \r\n      \r\n      }\r\n    }\r\n    return (\r\n      <Box display=\"flex\" alignItems={'center'}  >\r\n\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      {\r\n        (isOnline) ?\r\n        <Button\r\n          onClick={() => getData()}\r\n          startIcon={<CloudDownload htmlColor=\"black\" style={{fontSize: 20 }} />}\r\n          className={classes.buttonIcon}\r\n          style={\r\n            { color: \"black\", \r\n            borderColor: \"white\",\r\n            \r\n            }\r\n          }\r\n        >\r\n          \r\n          Actualizar base de datos local\r\n        </Button> \r\n        :\r\n        <div />\r\n      }\r\n     \r\n      </Box> \r\n    );\r\n  };","import React, { useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Backup } from \"@material-ui/icons\";\r\nimport SnackBarMessages from \"../../components/SnackBarMessages\";\r\nimport { SUBIR_VENTAS_CLOUD } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useMutation } from \"@apollo/client\"; \r\nimport {\r\n    VentasContext,\r\n  } from \"../../context/Ventas/ventasContext\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\n\r\nexport default function ComponentVentasToCloud({ventasToCloud, isOnline, classes}) {\r\n    const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n    const [subirVentasCloud] = useMutation(SUBIR_VENTAS_CLOUD);\r\n    const { removeStorageVentas, saveVentasToCloudFail } = useContext(AccesosContext);\r\n    const { setOpenBackDrop } = useContext(VentasContext);\r\n    \r\n    const subir_ventas_cloud= async () => {\r\n      try {\r\n        setOpenBackDrop(true);\r\n        const up_ventas = await subirVentasCloud({variables: {arrayVentasCloud:ventasToCloud}});\r\n        let {message, done, ventas_fail} = up_ventas.data.subirVentasCloud;\r\n    \r\n        if(done){\r\n          removeStorageVentas();\r\n        }else{\r\n          console.log(up_ventas.data.subirVentasCloud)\r\n          saveVentasToCloudFail(ventas_fail);\r\n        }\r\n       \r\n        \r\n        setOpenBackDrop(false);\r\n        setAlert({ message: message, status: (done) ? 'success' : 'error'  ,open: true })\r\n        //localStorage.removeItem('ventasToCloud')\r\n      } catch (error) {\r\n        setOpenBackDrop(false);\r\n        console.log(error)\r\n        if (error.networkError.result) {\r\n          console.log(error.networkError.result.errors);\r\n        } else if (error.graphQLErrors) {\r\n          console.log(error.graphQLErrors.message);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return (\r\n        <Box display=\"flex\" alignItems={'center'} >\r\n          <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n              <Button\r\n                onClick={() => subir_ventas_cloud()}\r\n                className={classes.buttonIcon}\r\n                startIcon={\r\n                  (ventasToCloud.length) ? \r\n                    <Badge\r\n                      badgeContent={1}\r\n                      variant=\"dot\"\r\n                      color=\"secondary\"\r\n                      anchorOrigin={{\r\n                        vertical: \"top\",\r\n                        horizontal: \"left\",\r\n                      }}\r\n                    >\r\n                      <Backup  style={{fontSize: 20}} />\r\n                    </Badge>\r\n                    :\r\n                    <Backup  style={{fontSize: 20}} />\r\n                  }\r\n                disabled={(ventasToCloud.length > 0 && isOnline) ? false : true }\r\n                style={\r\n                  ventasToCloud.ventasToCloud ? { color: \"white\", borderColor: \"white\" } : null\r\n                }\r\n              >\r\n                \r\n                Guardar ventas en la nube\r\n              </Button>\r\n        </Box>\r\n    );\r\n  };","import React, { useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { Wifi, WifiOff } from \"@material-ui/icons\";\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport ComponentGetDataDBCloud from './ComponentGetDataDBCloud';\r\nimport ComponentGetDataDBCloudAdmin from './ComponentGetDataDBCloudAdmin';\r\nimport ComponentVentasToCloud from './ComponentVentasToCloud';\r\n\r\nexport default function ComponentOnline ({isOnline, classes, ventasToCloud, sesion, fromVentas}) {\r\n    const [openMenu, setOpenMenu] = useState(null);\r\n    const handleClick = (event) => {\r\n      setOpenMenu(event.currentTarget);\r\n    };\r\n    const handleClose = () =>{\r\n      setOpenMenu(null);\r\n    }\r\n  \r\n    return (\r\n        <Box display=\"flex\" alignItems={'center'}  >\r\n          <Button\r\n            onClick={handleClick}\r\n        \r\n            className={classes.buttonIcon}\r\n            style={\r\n              { color: \"white\", \r\n              borderColor: \"white\",\r\n              \r\n              }\r\n            }\r\n          >\r\n          {\r\n            (isOnline) ? \r\n              (ventasToCloud.length) ? \r\n                <Badge\r\n                  badgeContent={1}\r\n                  variant=\"dot\"\r\n                  color=\"secondary\"\r\n                  anchorOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"left\",\r\n                  }}\r\n                >\r\n                  <Wifi htmlColor=\"#81c784\" style={{fontSize: 20}} />\r\n                </Badge>\r\n              :\r\n                <Wifi htmlColor=\"#81c784\" style={{fontSize: 20}} />\r\n            :\r\n            <WifiOff htmlColor=\"#bdbdbd\"  style={{fontSize: 20}} />\r\n          }\r\n           \r\n          </Button>\r\n          {\r\n            (fromVentas) ? \r\n              <Menu\r\n              id=\"simple-menu\"\r\n              anchorEl={openMenu}\r\n              keepMounted\r\n              open={openMenu}\r\n              onClose={handleClose}\r\n              >\r\n            \r\n                <MenuItem onClick={handleClose}>\r\n                  <ComponentVentasToCloud ventasToCloud={ventasToCloud} isOnline={isOnline} classes={classes} />\r\n                </MenuItem>\r\n          \r\n                <MenuItem onClick={handleClose}>\r\n                  <ComponentGetDataDBCloud isOnline={isOnline} classes={classes} empresa={sesion.empresa} sucursal={sesion.sucursal} /> \r\n                </MenuItem>\r\n             \r\n              </Menu>\r\n           :\r\n           <Menu\r\n            id=\"simple-menu\"\r\n            anchorEl={openMenu}\r\n            keepMounted\r\n            open={openMenu}\r\n            onClose={handleClose}\r\n            >\r\n              <MenuItem onClick={handleClose}>\r\n                <ComponentGetDataDBCloudAdmin isOnline={isOnline} classes={classes} empresa={sesion.empresa} sucursal={sesion.sucursal} /> \r\n              </MenuItem>                                                                \r\n            </Menu>   \r\n          }  \r\n        </Box>\r\n    );\r\n  };","import React,{useContext} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Avatar, Box, Typography, Grid, CircularProgress } from \"@material-ui/core\";\r\nimport PowerSettingsNewIcon from \"@material-ui/icons/PowerSettingsNew\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { grey } from \"@material-ui/core/colors\";\r\nimport { Cached, ShoppingCart } from \"@material-ui/icons\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport ComponentOnline from \"../../components/Connection/ComponentOnline\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport BackDrop from \"../../components/Layouts/BackDrop\";\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appbar: {\r\n    backgroundColor: theme.palette.navbar,\r\n    color: grey[800],\r\n    height: \"5vh\",\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n  avatar: {\r\n    height: 24,\r\n    width: 24,\r\n  },\r\n}));\r\n\r\nfunction NavegacionAdmin(props) {\r\n  const classes = useStyles();\r\n  const token = localStorage.getItem(\"sesionCafi\");\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [reloadPage, setReloadPage] = React.useState(false);\r\n  const {\r\n    isOnline,\r\n    ventasToCloud,\r\n    loadingPage, \r\n    setLoadingPage\r\n  } = useContext(AccesosContext);\r\n  let usuario;\r\n\r\n  if (token !== null) usuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const signOut = () => {\r\n    localStorage.removeItem(\"sesionCafi\");\r\n    localStorage.removeItem(\"tokenCafi\");\r\n    localStorage.removeItem(\"ListaEnEspera\");\r\n    props.history.push(\"/\");\r\n  };\r\n\r\n  const reloadApp = () =>{\r\n    setReloadPage(true);\r\n    window.location.reload()\r\n  }\r\n\r\n  return (\r\n    <Grid container alignItems=\"center\">\r\n      <Grid item md={6}>\r\n        <Box display=\"flex\" mx={1}>\r\n          <Avatar\r\n            alt=\"Remy Sharp\"\r\n            className={classes.avatar}\r\n            src={usuario.imagen}\r\n          />\r\n          <Box mx={1} />\r\n            <Typography color=\"textSecondary\">\r\n              Bienvenido {`${usuario.nombre}`}\r\n            </Typography>\r\n        </Box>\r\n      </Grid>\r\n      <Grid item md={6} style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n      <ComponentOnline isOnline={isOnline} classes={classes} ventasToCloud={ventasToCloud} sesion={sesion} fromVentas={false}/>\r\n        <Box display=\"flex\" alignItems={'center'}>\r\n        <Button\r\n          onClick={() => reloadApp()}\r\n          startIcon={reloadPage ? <CircularProgress color=\"inherit\" size={20} /> : <Cached />}\r\n        />\r\n        <Button\r\n          component={Link}\r\n          to=\"/ventas/venta-general\"\r\n          size=\"medium\"\r\n          className={classes.menuButton}\r\n          startIcon={<ShoppingCart />}\r\n        >\r\n          Panel de venta\r\n        </Button>\r\n        {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n          <Button\r\n            color=\"secondary\"\r\n            size=\"medium\"\r\n            className={classes.menuButton}\r\n            variant=\"text\"\r\n            disabled={true}\r\n            startIcon={<PowerSettingsNewIcon />}\r\n          >\r\n            TURNO ACTIVO\r\n          </Button>\r\n        ) : (\r\n          <CerrarSesionDialog signOut={signOut} />\r\n        )}\r\n        </Box>\r\n      </Grid>\r\n      <BackDrop loading={loadingPage} setLoading={setLoadingPage} />\r\n    </Grid>\r\n  );\r\n}\r\n\r\nconst CerrarSesionDialog = ({ signOut }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const classes = useStyles();\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        color=\"secondary\"\r\n        size=\"medium\"\r\n        className={classes.menuButton}\r\n        startIcon={<PowerSettingsNewIcon />}\r\n        variant=\"text\"\r\n        onClick={handleClickOpen}\r\n      >\r\n        Cerrar sesión\r\n      </Button>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n      >\r\n        <DialogTitle>¿Seguro que deseas cerrar sesión?</DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={signOut} color=\"secondary\" variant=\"contained\">\r\n            Cerrar sesión\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(NavegacionAdmin);\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = '22%';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tappBar: {\r\n\t\tzIndex: theme.zIndex.drawer + 1,\r\n\t\t// backgroundColor: theme.palette.navbar,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawer: {\r\n\t\twidth: drawerWidth,\r\n\t\tflexShrink: 0,\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerColor:{\r\n\t\theight: '95vh',\r\n\t\tbackgroundColor: 'white',\r\n\t},\r\n\tdrawerPaper: {\r\n\t\twidth: drawerWidth,\r\n\t\tbackgroundColor: theme.palette.navbar\r\n\t},\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\theight: '100%'\r\n\t},\r\n\tnavigationTop:{\r\n\t\theight: \"100%\"\r\n\t},\r\n\ticonSizeSuperior: {\r\n\t\tfontSize: 30,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondSuperior: {\r\n\t\twidth: 20,\r\n\t},\r\n\ticonSizeInferior: {\r\n\t\tfontSize: 50,\r\n        color: theme.palette.info.main\r\n\t},\r\n    iconSizeSecondInferior: {\r\n\t\twidth: 40,\r\n\t},\r\n\ticonSizeSecondInferiorGrande: {\r\n\t\twidth: 100\r\n\t},\r\n\ticonSizeInferiorGrande:{\r\n\t\tfontSize: 110,\r\n        color: theme.palette.info.main\r\n\t},\r\n\tavatar: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tmarginLeft: theme.spacing(1)\r\n\t},\r\n\tborderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n\t},\r\n\tbuttonIcon: {\r\n\t\tminWidth: '100%',\r\n\t\t\r\n\t}\r\n}));\r\n\r\nexport default useStyles;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot:{\r\n        marginTop: theme.spacing(2)\r\n    },\r\n    rootPrecioProductos:{\r\n        minHeight: '40vh',\r\n    },\r\n    containerImage:{\r\n        maxWidth: 100,\r\n        maxHeight: 100,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    imagen:{\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        justifyItems: 'ceter'\r\n    },\r\n    rootBusqueda: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootBusquedaProductos: {\r\n        height: 35,\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: theme.spacing(1),\r\n        // marginTop: theme.spacing(1)\r\n\t},\r\n    rootFecha: {\r\n        height: 40,\r\n        maxWidth: 150,\r\n\t\tdisplay: 'flex',\r\n\t},\r\n    formInputFlex: {\r\n\t\tdisplay: 'flex',\r\n\t\t'& > *': {\r\n\t\t\tmargin: `${theme.spacing(1)}px ${theme.spacing(.5)}px`\r\n\t\t},\r\n\t\t'& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n        paddingTop: 0,\r\n        alignItems: \"center\",\r\n        justifyItems: \"center\"\r\n\t},\r\n    titulos: {\r\n        fontWeight: 500,\r\n        '& .obligatorio': {\r\n\t\t\tcolor: 'red'\r\n\t\t},\r\n    },\r\n\tformInput: {\r\n\t\t// margin: `${theme.spacing(1)}px ${theme.spacing(1)}px`\r\n\t},\r\n    iconSize: {\r\n\t\twidth: 28,\r\n\t},\r\n    iconSizeDialogs:{\r\n        width: 50,\r\n    },\r\n    iconSizeDialogsPequeno:{\r\n        width: 50,\r\n    },\r\n    containerImagenesProducto:{\r\n        height: \"150px\",\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    imagenProducto:{\r\n        maxHeight: '100%',\r\n        maxWidth: '100%'\r\n    },\r\n    borderBoton:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '50%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n\tborderBotonChico:{\r\n\t\tminWidth: '100%',\r\n\t\theight: '100%',\r\n        border: '.6px solid #DBDBDB'\r\n    },\r\n    input: {\r\n        \"& input[type=number]\": {\r\n          \"-moz-appearance\": \"textfield\",\r\n        },\r\n        \"& input[type=number]::-webkit-outer-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n        \"& input[type=number]::-webkit-inner-spin-button\": {\r\n          \"-webkit-appearance\": \"none\",\r\n          margin: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default useStyles","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { CircularProgress, IconButton, TextField } from \"@material-ui/core\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport { CREAR_CUENTA } from \"../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CrearNuevaCuenta({ refetch }) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [cuenta, setCuenta] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [crearCuenta] = useMutation(CREAR_CUENTA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChangeCuenta = (value) => setCuenta(value);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!cuenta) return;\r\n    try {\r\n      setLoading(true);\r\n      await crearCuenta({\r\n        variables: {\r\n          input: {\r\n            cuenta,\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          },\r\n        },\r\n      });\r\n      setAlert({\r\n        message: \"Guardado\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      setAlert({\r\n        message: \"Hubo un error\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton color=\"primary\" onClick={handleClickOpen}>\r\n        <Add />\r\n      </IconButton>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle>Nueva cuenta</DialogTitle>\r\n        <DialogContent>\r\n          <form id=\"crear-cuenta-form\" onSubmit={handleSubmit}>\r\n            <TextField\r\n              label=\"Cuenta\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              onChange={(e) => handleChangeCuenta(e.target.value)}\r\n              value={cuenta}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" disabled={loading}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            form=\"crear-cuenta-form\"\r\n            type=\"submit\"\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={20} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { TextField, CircularProgress, IconButton } from \"@material-ui/core\";\r\nimport Done from \"@material-ui/icons/Done\";\r\nimport SnackBarMessages from \"../../../../components/SnackBarMessages\";\r\nimport { CREAR_SUBCUENTA } from \"../../../../gql/Catalogos/centroCostos\";\r\nimport { useMutation } from \"@apollo/client\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CrearNuevaSubcuenta({\r\n  cuenta,\r\n  refetch,\r\n  setCuenta,\r\n  datosMovimiento,\r\n  setDatosMovimiento,\r\n}) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [subcuenta, setSubcuenta] = React.useState(\"\");\r\n  const [loading, setLoading] = React.useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [alert, setAlert] = React.useState({\r\n    message: \"\",\r\n    status: \"\",\r\n    open: false,\r\n  });\r\n\r\n  /* const inputRef = React.useRef(null); */\r\n\r\n  const [crearSubcuenta] = useMutation(CREAR_SUBCUENTA);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setSubcuenta(\"\");\r\n  };\r\n\r\n  const handleChangeSubcuenta = (value) => setSubcuenta(value);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"algo\");\r\n    if (!subcuenta) return;\r\n    try {\r\n      setLoading(true);\r\n      await crearSubcuenta({\r\n        variables: {\r\n          input: {\r\n            subcuenta,\r\n          },\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          idCuenta: cuenta.cuenta._id,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: \"Guardado\",\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setCuenta({\r\n        ...cuenta,\r\n        subcuentas: [\r\n          ...cuenta.subcuentas,\r\n          { _id: \"\", subcuenta: subcuenta.toUpperCase() },\r\n        ],\r\n      });\r\n      setDatosMovimiento({\r\n        ...datosMovimiento,\r\n        concepto: subcuenta.toUpperCase(),\r\n      });\r\n      setLoading(false);\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      setAlert({\r\n        message: \"Hubo un error\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  /*  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (open) {\r\n      if (e.keyCode === 86 || e.keyCode === 67) {\r\n        inputRef.current.focus();\r\n      }\r\n    }\r\n  } */\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        color=\"primary\"\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!cuenta.cuenta}\r\n      >\r\n        <Add />\r\n      </IconButton>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleClose()}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle>Nueva Subcuenta</DialogTitle>\r\n        <DialogContent>\r\n          <form id=\"crear-subcuenta-form\" onSubmit={handleSubmit}>\r\n            <TextField\r\n              id=\"subcuenta-venta\"\r\n              label=\"Subcuenta\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              fullWidth\r\n              onChange={(e) => handleChangeSubcuenta(e.target.value)}\r\n              value={subcuenta}\r\n              /* inputRef={inputRef} */\r\n              inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n            />\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleClose()}\r\n            color=\"inherit\"\r\n            disabled={loading}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            form=\"crear-subcuenta-form\"\r\n            type=\"submit\"\r\n            color=\"primary\"\r\n            startIcon={\r\n              loading ? (\r\n                <CircularProgress size={20} color=\"inherit\" />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n            disabled={loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/cash-register2.6e732a6a.svg\";","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  FormControl,\r\n  FormControlLabel,\r\n  InputLabel,\r\n  MenuItem,\r\n  Radio,\r\n  RadioGroup,\r\n  Select,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { OBTENER_CUENTAS } from \"../../../../gql/Catalogos/centroCostos\";\r\nimport {\r\n  CREAR_HISTORIAL_CAJA,\r\n  OBTENER_PRE_CORTE_CAJA,\r\n} from \"../../../../gql/Cajas/cajas\";\r\nimport useStyles from \"../../styles\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../../context/Ventas/ventasContext\";\r\nimport { Done } from \"@material-ui/icons\";\r\nimport CrearNuevaCuenta from \"./crearNuevaCuenta\";\r\nimport CrearNuevaSubcuenta from \"./CrearSubcuenta\";\r\nimport CashReg2Icon from \"../../../../icons/ventas/cash-register2.svg\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DepositoRetiroCaja() {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [CrearHistorialCaja] = useMutation(CREAR_HISTORIAL_CAJA);\r\n\r\n  moment.locale(\"es\");\r\n  const classes = useStyles();\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n  const [open, setOpen] = useState(false);\r\n  const [error_data, setError] = useState(false);\r\n  const [cargando, setCargando] = useState(false);\r\n  const [datosMovimiento, setDatosMovimiento] = useState({\r\n    tipo_movimiento: \"DEPOSITO\",\r\n  });\r\n  const [cuenta, setCuenta] = useState({ cuenta: \"\", subcuentas: [] });\r\n\r\n  const { loading, data, error, refetch } = useQuery(OBTENER_CUENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n    },\r\n  });\r\n\r\n  const input = {\r\n    horario_en_turno: \"ABRIR TURNO\",\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    id_usuario: sesion._id,\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n  };\r\n\r\n  const preCorteDeCaja = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: input,\r\n    },\r\n  });\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    preCorteDeCaja.refetch();\r\n  };\r\n\r\n  var dineroEnCaja = 0;\r\n\r\n  if (!data || !preCorteDeCaja.data) {\r\n    return <ComponenteSinConexion />;\r\n  } else {\r\n    dineroEnCaja =\r\n      preCorteDeCaja.data.obtenerPreCorteCaja.monto_efectivo_precorte;\r\n  }\r\n\r\n  if (loading || error || preCorteDeCaja.loading || preCorteDeCaja.error)\r\n    return <ComponenteSinConexion />;\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 68) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  const obtenerCuenta = (_, child) => {\r\n    const { cuenta } = child.props;\r\n    setCuenta({ cuenta: cuenta, subcuentas: cuenta.subcuentas });\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    const { value, name } = e.target;\r\n    setDatosMovimiento({ ...datosMovimiento, [name]: value });\r\n  };\r\n\r\n  const enviarDatos = async () => {\r\n    setCargando(true);\r\n    try {\r\n      if (!turnoEnCurso && sesion?.turno_en_caja_activo === false) {\r\n        setCargando(false);\r\n        setAlert({\r\n          message: `Por el momento no hay ningun turno activo.`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return null;\r\n      } else {\r\n        if (\r\n          !datosMovimiento.tipo_movimiento ||\r\n          !datosMovimiento.monto_efectivo ||\r\n          !datosMovimiento.concepto\r\n        ) {\r\n          setError(true);\r\n          setCargando(false);\r\n          setAlert({\r\n            message: `Por favor complete los datos.`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n          return null;\r\n        } else {\r\n          if (\r\n            datosMovimiento.tipo_movimiento === \"RETIRO\" &&\r\n            dineroEnCaja < parseFloat(datosMovimiento.monto_efectivo)\r\n          ) {\r\n            setCargando(false);\r\n            setAlert({\r\n              message:\r\n                \"Lo sentimos no hay dinero suficiente en la caja para esta acción.\",\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n            return null;\r\n          }\r\n          const input = {\r\n            tipo_movimiento: datosMovimiento.tipo_movimiento,\r\n            concepto: datosMovimiento.concepto,\r\n            numero_caja: parseInt(turnoEnCurso.numero_caja),\r\n            id_Caja: turnoEnCurso.id_caja,\r\n            horario_turno: turnoEnCurso.horario_en_turno,\r\n            rol_movimiento: \"CAJA\",\r\n            hora_moviento: {\r\n              hora: moment().locale(\"es-mx\").format(\"hh\"),\r\n              minutos: moment().locale(\"es-mx\").format(\"mm\"),\r\n              segundos: moment().locale(\"es-mx\").format(\"ss\"),\r\n              completa: moment().locale(\"es-mx\").format(\"HH:mm:ss\"),\r\n            },\r\n            fecha_movimiento: {\r\n              year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n              mes: moment().locale(\"es-mx\").format(\"DD\"),\r\n              dia: moment().locale(\"es-mx\").format(\"MM\"),\r\n              no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n              no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n              completa: moment().locale(\"es-mx\").format(),\r\n            },\r\n            id_User: sesion._id,\r\n            numero_usuario_creador: sesion.numero_usuario,\r\n            nombre_usuario_creador: sesion.nombre,\r\n            montos_en_caja: {\r\n              monto_efectivo: {\r\n                monto: parseFloat(datosMovimiento.monto_efectivo),\r\n                metodo_pago: \"01\",\r\n              },\r\n              monto_tarjeta_debito: {\r\n                monto: 0,\r\n                metodo_pago: \"28\",\r\n              },\r\n              monto_tarjeta_credito: {\r\n                monto: 0,\r\n                metodo_pago: \"04\",\r\n              },\r\n              monto_creditos: {\r\n                monto: 0,\r\n                metodo_pago: \"99\",\r\n              },\r\n              monto_monedero: {\r\n                monto: 0,\r\n                metodo_pago: \"05\",\r\n              },\r\n              monto_transferencia: {\r\n                monto: 0,\r\n                metodo_pago: \"03\",\r\n              },\r\n              monto_cheques: {\r\n                monto: 0,\r\n                metodo_pago: \"02\",\r\n              },\r\n              monto_vales_despensa: {\r\n                monto: 0,\r\n                metodo_pago: \"08\",\r\n              },\r\n            },\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n          };\r\n          await CrearHistorialCaja({\r\n            variables: {\r\n              empresa: sesion.empresa._id,\r\n              sucursal: sesion.sucursal._id,\r\n              input,\r\n            },\r\n          });\r\n          setAlert({\r\n            message: `Nuevo movimiento registrado`,\r\n            status: \"success\",\r\n            open: true,\r\n          });\r\n          handleClickOpen();\r\n          setCargando(false);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      setCargando(false);\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  const handleTipoMovimiento = (e, tipo_movimiento) => {\r\n    setDatosMovimiento({ ...datosMovimiento, tipo_movimiento });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => {\r\n          handleClickOpen();\r\n        }}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={CashReg2Icon}\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Deposito/Retiro</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + D</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Box display=\"flex\" textAlign=\"center\">\r\n            <Box display=\"flex\" justifyContent=\"center\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src={CashReg2Icon}\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={1}>\r\n                <Box>\r\n                  <Typography variant=\"h6\">Deposito/Retiro Caja</Typography>\r\n                </Box>\r\n                <Box display=\"flex\" textAlign=\"right\">\r\n                  <Box textAlign=\"right\">\r\n                    <Typography variant=\"caption\">\r\n                      {moment().locale(\"es-mx\").format(\"MM/DD/YYYY\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>{moment().locale(\"es-mx\").format(\"h:mm\")} hrs.</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>Caja: </b>\r\n                      {turnoEnCurso?.numero_caja}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n            <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n                disabled={cargando}\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <Box m={2}>\r\n            {sesion.turno_en_caja_activo === true ? (\r\n              <Fragment>\r\n                <Box width=\"100%\">\r\n                  <FormControl component=\"fieldset\">\r\n                    <RadioGroup\r\n                      row\r\n                      aria-label=\"position\"\r\n                      name=\"position\"\r\n                      value={datosMovimiento.tipo_movimiento}\r\n                      onChange={handleTipoMovimiento}\r\n                    >\r\n                      <FormControlLabel\r\n                        value=\"DEPOSITO\"\r\n                        control={<Radio color=\"primary\" />}\r\n                        label=\"Deposito\"\r\n                      />\r\n                      <FormControlLabel\r\n                        value=\"RETIRO\"\r\n                        control={<Radio color=\"primary\" />}\r\n                        label=\"Retiro\"\r\n                      />\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                </Box>\r\n                <Box width=\"100%\">\r\n                  <Typography>Monto:</Typography>\r\n                  <Box display=\"flex\">\r\n                    <TextField\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      type=\"number\"\r\n                      name=\"monto_efectivo\"\r\n                      onChange={obtenerDatos}\r\n                      id=\"form-producto-codigo-barras\"\r\n                      variant=\"outlined\"\r\n                      error={error_data && !datosMovimiento.monto_efectivo}\r\n                    />\r\n                  </Box>\r\n                </Box>\r\n                <Box width=\"100%\">\r\n                  <Box my={1}>\r\n                    <Typography>Concepto de Movimiento:</Typography>\r\n                  </Box>\r\n                  <Box display=\"flex\" alignItems=\"center\" mb={2}>\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      error={error_data && !datosMovimiento.concepto}\r\n                    >\r\n                      <InputLabel id=\"label-select-cuenta\">Cuenta</InputLabel>\r\n                      <Select\r\n                        id=\"concepto-deposito-cuenta\"\r\n                        onChange={obtenerCuenta}\r\n                        name=\"cuenta\"\r\n                        labelId=\"label-select-cuenta\"\r\n                        label=\"Cuenta\"\r\n                        value={cuenta.cuenta.cuenta ? cuenta.cuenta.cuenta : \"\"}\r\n                      >\r\n                        <MenuItem value=\"\">\r\n                          <em>Selecciona uno</em>\r\n                        </MenuItem>\r\n                        {data?.obtenerCuentas.map((cuenta, index) => {\r\n                          return (\r\n                            <MenuItem\r\n                              key={index}\r\n                              value={cuenta.cuenta}\r\n                              cuenta={cuenta}\r\n                            >\r\n                              {cuenta.cuenta}\r\n                            </MenuItem>\r\n                          );\r\n                        })}\r\n                      </Select>\r\n                    </FormControl>\r\n                    <CrearNuevaCuenta refetch={refetch} />\r\n                  </Box>\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <FormControl\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      size=\"small\"\r\n                      error={error_data && !datosMovimiento.concepto}\r\n                    >\r\n                      <InputLabel id=\"label-select-subcuenta\">\r\n                        Subcuenta\r\n                      </InputLabel>\r\n                      <Select\r\n                        id=\"concepto-deposito-subcuenta\"\r\n                        onChange={obtenerDatos}\r\n                        name=\"concepto\"\r\n                        labelId=\"label-select-subcuenta\"\r\n                        label=\"Subcuenta\"\r\n                        value={\r\n                          datosMovimiento.concepto\r\n                            ? datosMovimiento.concepto\r\n                            : \"\"\r\n                        }\r\n                      >\r\n                        <MenuItem value=\"\">\r\n                          <em>Selecciona uno</em>\r\n                        </MenuItem>\r\n                        {cuenta.subcuentas.map((subcuenta, index) => {\r\n                          return (\r\n                            <MenuItem key={index} value={subcuenta.subcuenta}>\r\n                              {subcuenta.subcuenta}\r\n                            </MenuItem>\r\n                          );\r\n                        })}\r\n                      </Select>\r\n                    </FormControl>\r\n                    <CrearNuevaSubcuenta cuenta={cuenta} refetch={refetch} setCuenta={setCuenta} datosMovimiento={datosMovimiento} setDatosMovimiento={setDatosMovimiento} />\r\n                  </Box>\r\n                </Box>\r\n              </Fragment>\r\n            ) : (\r\n              <Box textAlign=\"center\" p={2}>\r\n                <Typography variant=\"h6\">\r\n                  <b>Por el momento no hay un turno en sesión</b>\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            disabled={cargando}\r\n            startIcon={\r\n              cargando ? (\r\n                <CircularProgress color=\"inherit\" size={20} />\r\n              ) : (\r\n                <Done />\r\n              )\r\n            }\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst ComponenteSinConexion = () => {\r\n  return (\r\n    <Button\r\n      disabled\r\n      style={{\r\n        textTransform: \"none\",\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        pointerEvents: \"none\",\r\n        opacity: 0.5,\r\n      }}\r\n    >\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <img\r\n            src={CashReg2Icon}\r\n            alt=\"icono caja\"\r\n            style={{ width: 20 }}\r\n          />\r\n        </Box>\r\n        <Typography variant=\"body2\">\r\n          <b>Deposito/Retiro</b>\r\n        </Typography>\r\n        <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n          <b>Alt + D</b>\r\n        </Typography>\r\n      </Box>\r\n    </Button>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogActions,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  InputAdornment,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { REGISTRAR_TURNOS } from \"../../../gql/Ventas/abrir_cerrar_turno\";\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nmoment.locale(\"es\");\r\n\r\nfunction CerrarTurno(props) {\r\n  const { handleClickOpen, setLoading, loading } = props;\r\n  const [CrearRegistroDeTurno] = useMutation(REGISTRAR_TURNOS);\r\n  const { setAlert, /* setTurnoActivo, */ ubicacionTurno } = useContext(\r\n    VentasContext\r\n  );\r\n  const [error, setError] = useState(false);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const classes = useStyles();\r\n  const [montoTurno, setMontoTurno] = useState([]);\r\n  const [cerrarTurno, setCerrarTurno] = useState([]);\r\n  const [montoResguardo, setMontoResguardo] = useState(0);\r\n  const [montoRetiro, setMontoRetiro] = useState(0);\r\n  const [montosTotales, setMontosTotales] = useState(0);\r\n\r\n  const obtenerCamposMontos = (e) => {\r\n    const montos = { ...montoTurno, [e.target.name]: e.target.value };\r\n    setMontoTurno(montos);\r\n\r\n    let sum = 0;\r\n    for (const property in montos) {\r\n      sum += parseFloat(montos[property]);\r\n    }\r\n    setMontosTotales(sum);\r\n  };\r\n\r\n  const obtenerCampos = (e) => {\r\n    setCerrarTurno({ ...cerrarTurno, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const obtenerMontoResguardo = (e) => {\r\n    const montoEfectivo = parseFloat(montoTurno.monto_efectivo);\r\n    const montoResguardo = parseFloat(e.target.value);\r\n    const montoTranferir = montoEfectivo - montoResguardo;\r\n\r\n    if (Math.sign(montoTranferir) === -1) {\r\n      return;\r\n    }\r\n\r\n    /* if(montoResguardo > ) */\r\n    setMontoResguardo(montoResguardo);\r\n    //setMontoRetiro(montoTranferir);\r\n  };\r\n\r\n  const obtenerMontoTransfer = (e) => {\r\n    const montoEfectivo = parseFloat(montoTurno.monto_efectivo);\r\n    const montoTranferir = parseFloat(e.target.value);\r\n    const montoResguardo = montoEfectivo - montoTranferir;\r\n\r\n    if (Math.sign(montoResguardo) === -1) {\r\n      return;\r\n    }\r\n\r\n    //setMontoResguardo(montoResguardo);\r\n    setMontoRetiro(montoTranferir);\r\n  };\r\n\r\n  const input = {\r\n    horario_en_turno: cerrarTurno.horario_en_turno,\r\n    concepto: \"CERRAR TURNO\",\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n    numero_caja: turnoEnCurso ? turnoEnCurso?.numero_caja.toString() : \"\",\r\n    comentarios: cerrarTurno.comentarios,\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    empresa: sesion.empresa._id,\r\n    sucursal: sesion.sucursal._id,\r\n    id_usuario: sesion._id,\r\n    usuario_en_turno: {\r\n      nombre: sesion.nombre,\r\n      telefono: sesion.telefono,\r\n      numero_usuario: sesion.numero_usuario,\r\n      email: sesion.email,\r\n    },\r\n    hora_entrada: {\r\n      hora: \"\",\r\n      minutos: \"\",\r\n      segundos: \"\",\r\n      completa: \"\",\r\n    },\r\n    hora_salida: {\r\n      hora: moment().locale(\"es-mx\").format(\"hh\"),\r\n      minutos: moment().locale(\"es-mx\").format(\"mm\"),\r\n      segundos: moment().locale(\"es-mx\").format(\"ss\"),\r\n      completa: moment().locale(\"es-mx\").format(\"HH:mm:ss\"),\r\n    },\r\n    fecha_entrada: {\r\n      year: \"\",\r\n      mes: \"\",\r\n      dia: \"\",\r\n      no_semana_year: \"\",\r\n      no_dia_year: \"\",\r\n      completa: \"\",\r\n    },\r\n    fecha_salida: {\r\n      year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n      mes: moment().locale(\"es-mx\").format(\"MM\"),\r\n      dia: moment().locale(\"es-mx\").format(\"DD\"),\r\n      no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n      no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n      completa: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n    },\r\n    fecha_movimiento: moment().locale(\"es-mx\").format(),\r\n    montoRetiro,\r\n    montos_en_caja: {\r\n      monto_efectivo: {\r\n        monto: parseFloat(montoResguardo),\r\n        metodo_pago: \"01\",\r\n      },\r\n      monto_tarjeta_debito: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_tarjeta_debito ? montoTurno.monto_tarjeta_debito : 0\r\n        ),\r\n        metodo_pago: \"28\",\r\n      },\r\n      monto_tarjeta_credito: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_tarjeta_credito\r\n            ? montoTurno.monto_tarjeta_credito\r\n            : 0\r\n        ),\r\n        metodo_pago: \"04\",\r\n      },\r\n      monto_creditos: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_creditos ? montoTurno.monto_creditos : 0\r\n        ),\r\n        metodo_pago: \"99\",\r\n      },\r\n      monto_monedero: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_puntos ? montoTurno.monto_puntos : 0\r\n        ),\r\n        metodo_pago: \"05\",\r\n      },\r\n      monto_transferencia: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_transferencia ? montoTurno.monto_transferencia : 0\r\n        ),\r\n        metodo_pago: \"03\",\r\n      },\r\n      monto_cheques: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_cheques ? montoTurno.monto_cheques : 0\r\n        ),\r\n        metodo_pago: \"02\",\r\n      },\r\n      monto_vales_despensa: {\r\n        monto: parseFloat(\r\n          montoTurno.monto_vales_despensa ? montoTurno.monto_vales_despensa : 0\r\n        ),\r\n        metodo_pago: \"08\",\r\n      },\r\n    },\r\n  };\r\n\r\n  let arraySesion = {\r\n    accesos: sesion.accesos,\r\n    email: sesion.email,\r\n    empresa: sesion.empresa,\r\n    estado: sesion.estado,\r\n    exp: sesion.exp,\r\n    iat: sesion.iat,\r\n    imagen: sesion.imagen,\r\n    nombre: sesion.nombre,\r\n    numero_usuario: sesion.numero_usuario,\r\n    sucursal: sesion.sucursal,\r\n    telefono: sesion.telefono,\r\n    turno_en_caja_activo: false,\r\n    _id: sesion._id,\r\n  };\r\n\r\n  const actualizarTurnoSesion = (ubicacionTurno) => {\r\n    if (ubicacionTurno === \"SESION\") {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n      props.history.push(\"/\");\r\n    } else {\r\n      localStorage.setItem(\"sesionCafi\", JSON.stringify(arraySesion));\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n    }\r\n  };\r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!cerrarTurno.horario_en_turno) {\r\n        setError(true);\r\n        setLoading(false);\r\n        setAlert({\r\n          message: `Por favor elija que turno está cerrando`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      } else {\r\n        await CrearRegistroDeTurno({\r\n          variables: {\r\n            activa: false,\r\n            input,\r\n            isOnline:true\r\n          },\r\n        });\r\n        setAlert({\r\n          message: `Turno cerrado`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n\r\n        actualizarTurnoSesion(ubicacionTurno);\r\n        /* setLoading(false); */\r\n        /*  setTurnoActivo(true); */\r\n        window.location.reload();\r\n      }\r\n    } catch (error) {\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <Box mb={2}>\r\n          <Typography>\r\n            <b>Montos a Depositar</b>\r\n          </Typography>\r\n        </Box>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Monto Efectivo:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_efectivo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              /* defaultValue={0} */\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={(e) => {\r\n                obtenerCamposMontos(e);\r\n                setMontoResguardo(parseFloat(e.target.value));\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}> Creditos:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_creditos\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              /* defaultValue={0} */\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Tarjetas y Transferencias:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_tarjeta_debito\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          {/* <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              {\" \"}\r\n              Tarjeta Credito:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_tarjeta_credito\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid> */}\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Monedero:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_puntos\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n         {/*  <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Transferencias:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_transferencia\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid> */}\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>Cheques:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_cheques\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              /* defaultValue={0} */\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              Vales de despensa:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_vales_despensa\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              /* defaultValue={0} */\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerCamposMontos}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n        <Box mt={2} display=\"flex\">\r\n          <Typography>\r\n            <b>Monto total efectivo: </b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography>${formatoMexico(montoTurno.monto_efectivo)}</Typography>\r\n        </Box>\r\n        <Box mb={2} display=\"flex\">\r\n          <Typography>\r\n            <b>Montos totales: </b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography>${formatoMexico(montosTotales)}</Typography>\r\n        </Box>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <Typography className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span> Turno:\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              size=\"small\"\r\n              error={error && !cerrarTurno.horario_en_turno}\r\n            >\r\n              <Select\r\n                onChange={obtenerCampos}\r\n                id=\"form-producto-tipo\"\r\n                name=\"horario_en_turno\"\r\n                value={\r\n                  cerrarTurno.horario_en_turno\r\n                    ? cerrarTurno.horario_en_turno\r\n                    : \"\"\r\n                }\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={6} style={{display: \"none\"}}>\r\n            <Typography className={classes.titulos}>\r\n              Mantener en caja:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_reguardo\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              value={montoResguardo}\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerMontoResguardo}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={6} style={{display: \"none\"}}>\r\n            <Typography className={classes.titulos}>\r\n              Retirar de caja:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              name=\"monto_transferencia\"\r\n              variant=\"outlined\"\r\n              size=\"small\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              value={montoRetiro}\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">$</InputAdornment>\r\n                ),\r\n              }}\r\n              color=\"primary\"\r\n              onChange={obtenerMontoTransfer}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography className={classes.titulos}>Comentarios:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              multiline\r\n              onChange={obtenerCampos}\r\n              rows={2}\r\n              size=\"small\"\r\n              name=\"comentarios\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </Box>\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default withRouter(CerrarTurno);\r\n","import React, { useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  Divider,\r\n  makeStyles,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CerrarTurno from \"./CerrarTurno\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport TurnosIcon from \"../../../icons/ventas/shift.svg\"\r\n\r\nmoment.locale(\"es\");\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function Turnos() {\r\n  const {\r\n    abrirTurnosDialog,\r\n    setAbrirTurnosDialog,\r\n    /* setTurnoActivo, */\r\n  } = useContext(VentasContext);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [loading, setLoading] = useState(false);\r\n  const classes = useStyles();\r\n\r\n  const handleClickOpen = () => {\r\n    setAbrirTurnosDialog(!abrirTurnosDialog);\r\n    /* setTurnoActivo(true); */\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 85) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => handleClickOpen()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box\r\n          display=\"flex\"\r\n          flexDirection=\"column\"\r\n          style={{ height: \"100%\", width: \"100%\" }}\r\n        >\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={TurnosIcon}\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cerrar turno</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + U</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n        open={abrirTurnosDialog}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Box display=\"flex\">\r\n              <img\r\n                src={TurnosIcon}\r\n                alt=\"icono almacen\"\r\n                className={classes.iconSvg}\r\n              />\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box>\r\n                <Box>\r\n                  <Typography variant=\"h6\">Cerrar turno</Typography>\r\n                </Box>\r\n                <Box display=\"flex\" textAlign=\"right\">\r\n                  <Box textAlign=\"right\">\r\n                    <Typography variant=\"caption\">\r\n                      {moment().locale(\"es-mx\").format(\"MM/DD/YYYY\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>{moment().locale(\"es-mx\").format(\"h:mm\")} hrs.</b>\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"right\" ml={2}>\r\n                    <Typography variant=\"caption\">\r\n                      <b>Caja: </b>\r\n                      {turnoEnCurso?.numero_caja}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n              size=\"large\"\r\n              disabled={loading}\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <CerrarTurno\r\n          setLoading={setLoading}\r\n          loading={loading}\r\n          handleClickOpen={handleClickOpen}\r\n        />\r\n        {/* <ContenidoTurnos handleClickOpen={handleClickOpen} value={value} /> */}\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\n/* \r\nconst ContenidoTurnos = ({ handleClickOpen, value }) => {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  if (loading) return <BackdropComponent loading={loading} />;\r\n\r\n  return (\r\n    <DialogContent style={{ padding: 0 }}>\r\n      {sesion?.turno_en_caja_activo === true && turnoEnCurso ? (\r\n        <TabPanel style={{ padding: 0 }} value={value} index={0}>\r\n          <CerrarTurno\r\n            setLoading={setLoading}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TabPanel>\r\n      ) : (\r\n        <TabPanel value={value} index={0}>\r\n          <AbrirTurno\r\n            loading={loading}\r\n            setLoading={setLoading}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TabPanel>\r\n      )}\r\n    </DialogContent>\r\n  );\r\n}; */\r\n","import { Impresora } from \"../../../../components/TicketPrinter/Impresora\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport moment from \"moment\";\r\nconst RUTA_API = \"http://localhost:8000\";\r\n\r\nexport const imprimirTicketPrecorte = async (datos) => {\r\n  try {\r\n    const { monto, turno, sesion } = datos;\r\n\r\n    let impresora = new Impresora(RUTA_API);\r\n    impresora.setFontSize(1, 1);\r\n    impresora.setEmphasize(0);\r\n    impresora.setAlign(\"center\");\r\n    impresora.write(\"Punto de venta CAFI\\n\");\r\n    impresora.write(\"****PRE CORTE CAJA****\\n\");\r\n    impresora.feed(1);\r\n    impresora.write(`Caja ${turno.numero_caja}\\n`);\r\n    impresora.write(`Usuario: ${sesion.nombre}\\n`);\r\n    impresora.write(\r\n      `Fecha: ${moment()\r\n        .locale(\"es-mx\")\r\n        .format(\"DD/MM/YYYY\")} Hora: ${moment()\r\n        .locale(\"es-mx\")\r\n        .format(\"LTS\")}\\n`\r\n    );\r\n    impresora.feed(1);\r\n    impresora.setFontSize(2,1);\r\n    impresora.write(\"Monto total en caja\\n\")\r\n    impresora.setFontSize(2,2);\r\n    impresora.write(`$ ${formatoMexico(monto)}\\n`);\r\n    impresora.setFontSize(1, 1);\r\n    impresora.feed(3);\r\n    impresora.cut();\r\n    impresora.cutPartial(); // Pongo este y también cut porque en ocasiones no funciona con cut, solo con cutPartial\r\n\r\n    await impresora.end();\r\n\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Grid,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport moment from \"moment\";\r\nimport useStyles from \"../../styles\";\r\nimport \"moment/locale/es\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_PRE_CORTE_CAJA } from \"../../../../gql/Cajas/cajas\";\r\nimport { AccesosContext } from \"../../../../context/Accesos/accesosCtx\";\r\nimport { formatoMexico } from \"../../../../config/reuserFunctions\";\r\nimport { imprimirTicketPrecorte } from \"./PrintTicketPrecorte\";\r\nimport Receipt from \"@material-ui/icons/Receipt\";\r\nimport CorteIcon from \"../../../../icons/ventas/cash-register.svg\"\r\nmoment.locale(\"es\");\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreCorteCaja() {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const {\r\n    reloadVerPreCorte,\r\n    setReloadVerPreCorte,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const input = {\r\n    horario_en_turno: \"ABRIR TURNO\",\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    id_usuario: sesion._id,\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n  };\r\n\r\n  const { loading, error, data, refetch } = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: input,\r\n    },\r\n  });\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [loadingTicket, setLoadingTicket] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.pre_corte.ver === true) {\r\n      setOpen(!open);\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"pre_corte\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadVerPreCorte === true) {\r\n      setOpen(!open);\r\n      setReloadVerPreCorte(false);\r\n    }\r\n  }, [reloadVerPreCorte]);\r\n\r\n  if (!data || error || loading) {\r\n    return <ComponenteSinConexion />;\r\n  }\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 79) {\r\n      handleClickOpen();\r\n      refetch();\r\n    }\r\n  }\r\n\r\n  const printTicket = async () => {\r\n    setLoadingTicket(true);\r\n    const datos = {\r\n      turno: turnoEnCurso,\r\n      sesion,\r\n      monto: data?.obtenerPreCorteCaja?.monto_efectivo_precorte\r\n        ? data?.obtenerPreCorteCaja?.monto_efectivo_precorte\r\n        : 0.0,\r\n    };\r\n    await imprimirTicketPrecorte(datos);\r\n    setLoadingTicket(true);\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => {\r\n          handleClickOpen();\r\n          refetch();\r\n        }}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={CorteIcon}\r\n              alt=\"icono caja\"\r\n              style={{ width: 20 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Pre corte caja</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + O</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={() => setOpen(!open)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container>\r\n            <Grid item lg={10}>\r\n              <Box display=\"flex\" alignItems=\"center\">\r\n                <Box>\r\n                  <img\r\n                    src={CorteIcon}\r\n                    alt=\"icono caja\"\r\n                    className={classes.iconSizeDialogs}\r\n                  />\r\n                </Box>\r\n                <Box ml={2}>\r\n                  <Box textAlign=\"left\">\r\n                    <Typography variant=\"h6\">Pre-Corte de Caja</Typography>\r\n                  </Box>\r\n                  <Box display=\"flex\">\r\n                    <Box textAlign=\"right\">\r\n                      <Typography variant=\"caption\">\r\n                        {moment().locale(\"es-mx\").format(\"MM/DD/YYYY\")}\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box textAlign=\"right\" ml={2}>\r\n                      <Typography variant=\"caption\">\r\n                        <b>{moment().locale(\"es-mx\").format(\"h:mm\")} hrs.</b>\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                </Box>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={2}>\r\n              <Box\r\n                ml={4}\r\n                display=\"flex\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"flex-end\"\r\n              >\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={() => setOpen(!open)}\r\n                  size=\"large\"\r\n                >\r\n                  <CloseIcon />\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid>\r\n            <Box p={2}>\r\n              {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n                <>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Usuario: </b> {sesion.nombre}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Caja: </b>{\" \"}\r\n                      {turnoEnCurso ? turnoEnCurso.numero_caja : \"\"}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\">\r\n                      <b>Fecha y hora al precorte: </b>\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle1\">\r\n                      {moment()\r\n                        .locale(\"es-mx\")\r\n                        .format(\"MMMM D YYYY, h:mm:ss a\")}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Box textAlign=\"center\" p={2}>\r\n                    <Typography variant=\"h6\">\r\n                      <b>Monto total en efectivo: </b>\r\n                    </Typography>\r\n                    <Typography variant=\"h3\" style={{ color: \"green\" }}>\r\n                      <b>\r\n                        $\r\n                        {data?.obtenerPreCorteCaja?.monto_efectivo_precorte\r\n                          ? formatoMexico(\r\n                              data?.obtenerPreCorteCaja?.monto_efectivo_precorte\r\n                            )\r\n                          : 0.0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </>\r\n              ) : (\r\n                <Box textAlign=\"center\" p={2}>\r\n                  <Typography variant=\"h6\">\r\n                    <b>Por el momento no hay un turno en sesión</b>\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          {sesion.turno_en_caja_activo === true && turnoEnCurso ? (\r\n            <Button\r\n              onClick={() => printTicket()}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              autoFocus\r\n              disabled={loadingTicket}\r\n              startIcon={\r\n                loadingTicket ? (\r\n                  <CircularProgress size={20} color=\"inherit\" />\r\n                ) : (\r\n                  <Receipt />\r\n                )\r\n              }\r\n            >\r\n              Imprimir\r\n            </Button>\r\n          ) : null}\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst ComponenteSinConexion = () => {\r\n  return (\r\n    <Button\r\n      style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n      disabled={true}\r\n    >\r\n      <Box display=\"flex\" flexDirection=\"column\">\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n          <img\r\n            src={CorteIcon}\r\n            alt=\"icono caja\"\r\n            style={{ width: 20 }}\r\n          />\r\n        </Box>\r\n        <Box>\r\n          <Typography variant=\"body2\">\r\n            <b>Pre corte caja</b>\r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n            <b>Alt + O</b>\r\n          </Typography>\r\n        </Box>\r\n      </Box>\r\n    </Button>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Snackbar,\r\n  Typography,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { FcExpired } from \"react-icons/fc\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nmoment.locale(\"es\");\r\n\r\nexport default function VentaEnEspera() {\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const ventaLS = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const agregarVentaEnEspera = () => {\r\n    let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let datos = localStorage.getItem(\"ListaEnEspera\");\r\n\r\n    if (datosVenta !== null) {\r\n      if (datos === null) {\r\n        localStorage.setItem(\r\n          \"ListaEnEspera\",\r\n          JSON.stringify([{ datosVenta, fecha: moment().locale(\"es-mx\").format(\"MM/DD/YYYY\") }])\r\n        );\r\n        cleanData();\r\n        handleClickOpen();\r\n      } else {\r\n        let data = JSON.parse(datos);\r\n        data.push({ datosVenta, fecha: moment().locale(\"es-mx\").format(\"MM/DD/YYYY\") });\r\n        localStorage.setItem(\"ListaEnEspera\", JSON.stringify(data));\r\n        cleanData();\r\n        handleClickOpen();\r\n      }\r\n    }\r\n  };\r\n\r\n  const cleanData = () => {\r\n    localStorage.removeItem(\"DatosVentas\");\r\n    localStorage.removeItem(\"VentaOriginal\");\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    setDatosVentasActual({\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    });\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 69) {\r\n      agregarVentaEnEspera();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        onClick={() => agregarVentaEnEspera()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso || !ventaLS || (ventaLS && ventaLS.nota_credito)}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcExpired style={{ fontSize: 25 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>En espera</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + E</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={open}\r\n        autoHideDuration={3000}\r\n        onClose={handleClickOpen}\r\n        message=\"Compra agregada en espera\"\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  Divider,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormHelperText,\r\n  Grid,\r\n  InputAdornment,\r\n  makeStyles,\r\n  MenuItem,\r\n  OutlinedInput,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport CatalogosProductosSAT from \"../../sucursales/Catalogos/Producto/DatosGenerales/CatalogoProductosSAT\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  titulos: {\r\n    fontWeight: 500,\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function RegistroInformacionRapido({\r\n  setAbrirTallaColor,\r\n  setCantidad,\r\n  cantidad,\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n}) {\r\n  const {\r\n    datos_generales,\r\n    precios,\r\n    setPrecios,\r\n    setDatosGenerales,\r\n    validacion,\r\n  } = useContext(RegProductoContext);\r\n  const {\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    setUnidadVentaSecundaria,\r\n    unidadVentaSecundaria,\r\n    update,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const obtenerCampos = (e) => {\r\n    if (e.target.name === \"codigo_barras\") {\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        codigo_barras: e.target.value,\r\n      });\r\n    }\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n\r\n    if (e.target.value === \"CALZADO\" || e.target.value === \"ROPA\") {\r\n      setAbrirTallaColor(true);\r\n    }\r\n  };\r\n\r\n  const checkFarmacia = (e) => {\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      receta_farmacia: e.target.checked,\r\n    });\r\n  };\r\n\r\n  const obtenerChecks = (e) => {\r\n    if (e.target.name === \"granel\" && e.target.checked) {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Kg\",\r\n          codigo_unidad: \"KGM\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Kg\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Costal\",\r\n        codigo_unidad: \"KGM\",\r\n      });\r\n    } else {\r\n      setPrecios({\r\n        ...precios,\r\n        [e.target.name]: e.target.checked,\r\n        inventario: {\r\n          ...precios.inventario,\r\n          unidad_de_inventario: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n        unidad_de_compra: {\r\n          ...precios.unidad_de_compra,\r\n          unidad: \"Pz\",\r\n          codigo_unidad: \"H87\",\r\n        },\r\n      });\r\n      setUnidadVentaXDefecto({\r\n        ...unidadVentaXDefecto,\r\n        unidad: \"Pz\",\r\n        codigo_unidad: \"H87\",\r\n      });\r\n      setUnidadVentaSecundaria({\r\n        ...unidadVentaSecundaria,\r\n        unidad: \"Caja\",\r\n        codigo_unidad: \"XBX\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    setDatosGenerales({\r\n      ...datos_generales,\r\n      codigo_barras,\r\n    });\r\n    setUnidadVentaXDefecto({\r\n      ...unidadVentaXDefecto,\r\n      codigo_barras,\r\n    });\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={2}>\r\n        <Typography>\r\n          <b>Información General</b>\r\n        </Typography>\r\n      </Box>\r\n      <Divider />\r\n      <Grid container spacing={2}>\r\n        <Grid item md={3} xs={12}>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            size=\"small\"\r\n            name=\"codigo_barras\"\r\n            fullWidth\r\n          >\r\n            <Typography className={classes.titulos}>Código de barras</Typography>\r\n            <OutlinedInput\r\n              disabled={update && datos_generales.codigo_barras}\r\n              style={{ padding: 0 }}\r\n              id=\"form-producto-codigo-barras\"\r\n              name=\"codigo_barras\"\r\n              value={\r\n                datos_generales.codigo_barras\r\n                  ? datos_generales.codigo_barras\r\n                  : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  <Button\r\n                    disabled={update && datos_generales.codigo_barras}\r\n                    onClick={() => GenCodigoBarras()}\r\n                    /* edge=\"end\" */\r\n                    color=\"primary\"\r\n                    variant=\"outlined\"\r\n                    size=\"large\"\r\n                  >\r\n                    Generar\r\n                  </Button>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Clave alterna\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.clave_alterna}\r\n            name=\"clave_alterna\"\r\n            id=\"form-producto-clave-alterna\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.clave_alterna ? datos_generales.clave_alterna : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Nombre comercial\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.nombre_comercial}\r\n            name=\"nombre_comercial\"\r\n            id=\"form-producto-nombre-comercial\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.nombre_comercial\r\n                ? datos_generales.nombre_comercial\r\n                : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3} xs={12}>\r\n          <CatalogosProductosSAT\r\n            refetch={refetch}\r\n            codigos={obtenerConsultasProducto.codigos}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={datos_generales.tipo_producto === \"OTROS\" ? 4 : 8}\r\n          xs={12}\r\n        >\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Nombre genérico\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.nombre_generico}\r\n            name=\"nombre_generico\"\r\n            id=\"form-producto-nombre-generico\"\r\n            variant=\"outlined\"\r\n            value={\r\n              datos_generales.nombre_generico\r\n                ? datos_generales.nombre_generico\r\n                : \"\"\r\n            }\r\n            helperText={validacion.message}\r\n            onChange={obtenerCampos}\r\n            inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n          />\r\n        </Grid>\r\n        <Grid\r\n          item\r\n          md={datos_generales.tipo_producto === \"OTROS\" ? 2 : 4}\r\n          xs={12}\r\n        >\r\n          <Typography className={classes.titulos}>\r\n            <span className=\"obligatorio\">* </span>Tipo de producto\r\n          </Typography>\r\n          <FormControl\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            size=\"small\"\r\n            error={validacion.error && !datos_generales.tipo_producto}\r\n          >\r\n            <Select\r\n              id=\"form-producto-tipo\"\r\n              name=\"tipo_producto\"\r\n              value={\r\n                datos_generales.tipo_producto\r\n                  ? datos_generales.tipo_producto\r\n                  : \"\"\r\n              }\r\n              onChange={obtenerCampos}\r\n            >\r\n              <MenuItem value=\"\">\r\n                <em>Selecciona uno</em>\r\n              </MenuItem>\r\n              <MenuItem value=\"ROPA\">ROPA</MenuItem>\r\n              <MenuItem value=\"CALZADO\">CALZADO</MenuItem>\r\n              <MenuItem value=\"OTROS\">OTROS</MenuItem>\r\n            </Select>\r\n            <FormHelperText>{validacion.message}</FormHelperText>\r\n          </FormControl>\r\n        </Grid>\r\n        {datos_generales.tipo_producto === \"OTROS\" ? (\r\n          <Fragment>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography className={classes.titulos}>\r\n                <span className=\"obligatorio\">* </span>Cantidad en Almacen\r\n              </Typography>\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                error={validacion.error && !cantidad}\r\n                name=\"cantidad\"\r\n                type=\"number\"\r\n                id=\"form-producto-nombre-generico\"\r\n                variant=\"outlined\"\r\n                value={cantidad ? cantidad : \"\"}\r\n                helperText={validacion.message}\r\n                onChange={(e) => setCantidad(parseInt(e.target.value))}\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography  className={classes.titulos}>Granel</Typography>\r\n              <FormControlLabel\r\n                control={<Checkbox onChange={obtenerChecks} name=\"granel\" />}\r\n                label=\"Vender a granel\"\r\n              />\r\n            </Grid>\r\n            <Grid item md={2} xs={12}>\r\n              <Typography  className={classes.titulos}>Medicamento</Typography>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    // checked={datos_generales.receta_farmacia ? datos_generales.receta_farmacia : false}\r\n                    onChange={checkFarmacia}\r\n                    name=\"receta_farmacia\"\r\n                  />\r\n                }\r\n                label=\"Necesita receta\"\r\n                name=\"receta_farmacia\"\r\n              />\r\n            </Grid>\r\n          </Fragment>\r\n        ) : null}\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useRef, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\nimport { Box, Chip, IconButton, Tooltip, Zoom } from \"@material-ui/core\";\r\nimport { Cached, Close, Edit } from \"@material-ui/icons\";\r\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\r\n\r\nconst compareFunction = (a, b) => {\r\n  if (a.medida.talla && b.medida.talla) {\r\n    return a.medida.talla.localeCompare(b.medida.talla);\r\n  }\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  paper: {\r\n    width: \"100%\",\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  container: {\r\n    maxHeight: \"65vh\",\r\n  },\r\n  tableRow: {\r\n    \"&.Mui-selected, &.Mui-selected:hover\": {\r\n      backgroundColor: fade(theme.palette.primary.main, 0.1),\r\n    },\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: \"rect(0 0 0 0)\",\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: \"hidden\",\r\n    padding: 0,\r\n    position: \"absolute\",\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    height: 30,\r\n    width: 30,\r\n    borderRadius: \"15%\",\r\n  },\r\n}));\r\n\r\nexport default function TablaPresentaciones({ from, setOnUpdate, onUpdate }) {\r\n  const classes = useStyles();\r\n  const { presentaciones } = useContext(RegProductoContext);\r\n\r\n  let mostrar_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper className={classes.paper}>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            size=\"small\"\r\n            aria-label=\"enhanced table\"\r\n            stickyHeader\r\n          >\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Existencia</TableCell>\r\n                <TableCell>Código de barras</TableCell>\r\n                <TableCell width={200}>Nombre</TableCell>\r\n                <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                <TableCell padding=\"checkbox\">Color</TableCell>\r\n                <TableCell>Precio</TableCell>\r\n                {from && from === \"compra\" ? (\r\n                  <TableCell padding=\"checkbox\">Existente</TableCell>\r\n                ) : null}\r\n                <TableCell padding=\"checkbox\">Cantidad</TableCell>\r\n                <TableCell padding=\"checkbox\">Editar</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {mostrar_presentaciones.map((producto, index) => {\r\n                return (\r\n                  <RenderPresentacionesRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    index={index}\r\n                    from={from}\r\n                    setOnUpdate={setOnUpdate}\r\n                    onUpdate={onUpdate}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderPresentacionesRows = ({\r\n  producto,\r\n  index,\r\n  from,\r\n  setOnUpdate,\r\n  onUpdate,\r\n}) => {\r\n  const { presentaciones, setPresentaciones, preciosP, precios } = useContext(\r\n    RegProductoContext\r\n  );\r\n  const [disabledInput, setDisabledInput] = useState(true);\r\n  const classes = useStyles();\r\n  const textfield = useRef(null);\r\n\r\n  const copy_presentaciones = [...presentaciones].sort((a, b) =>\r\n    compareFunction(a, b)\r\n  );\r\n  const copy_element_presentacion = { ...copy_presentaciones[index] };\r\n  const copy_producto = { ...producto };\r\n\r\n  if (from && from === \"compra\") {\r\n    copy_producto.cantidad = 0;\r\n  }\r\n\r\n  const handleEditCancel = () => {\r\n    if (!copy_producto.cantidad) {\r\n      copy_element_presentacion.cantidad = 0;\r\n    }\r\n    if (!copy_producto.precio) {\r\n      copy_element_presentacion.precio = preciosP[0].precio_neto;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n    setDisabledInput(true);\r\n  };\r\n\r\n  const obtenerDatos = (event) => {\r\n    const { value, name } = event.target;\r\n    console.log(name);\r\n    if (name === \"cantidad\") {\r\n      if (!value) {\r\n        copy_element_presentacion.cantidad = \"\";\r\n        copy_element_presentacion.existencia = false;\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.cantidad = parseFloat(value);\r\n      copy_element_presentacion.existencia = true;\r\n    } else if (name === \"precio\") {\r\n      let { iva, ieps } = precios;\r\n      if (!value) {\r\n        copy_element_presentacion.precio = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      let precio_neto = parseFloat(value);\r\n      let varIVA = iva < 10 ? `0${iva}` : iva;\r\n      let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n\r\n      let suma_impuestos =\r\n        parseFloat(`0.${varIVA}`) + parseFloat(`0.${varIEPS}`);\r\n      let precio_venta = parseFloat(precio_neto / (suma_impuestos + 1));\r\n      let iva_precio = parseFloat(precio_venta * parseFloat(`0.${varIVA}`));\r\n      let ieps_precio = parseFloat(precio_venta * parseFloat(`0.${varIEPS}`));\r\n      let PUCSI = precios.unidad_de_compra.precio_unitario_sin_impuesto;\r\n      let utilidad = parseFloat(((precio_venta - PUCSI) / PUCSI) * 100);\r\n      copy_element_presentacion.precio_unidad.precio_venta = parseFloat(\r\n        precio_venta.toFixed(2)\r\n      );\r\n      copy_element_presentacion.precio_unidad.precio_neto = parseFloat(\r\n        precio_neto.toFixed(2)\r\n      );\r\n      copy_element_presentacion.precio_unidad.utilidad = parseFloat(\r\n        utilidad.toFixed(2)\r\n      );\r\n      copy_element_presentacion.precio_unidad.iva_precio = parseFloat(\r\n        iva_precio.toFixed(2)\r\n      );\r\n      copy_element_presentacion.precio_unidad.ieps_precio = parseFloat(\r\n        ieps_precio.toFixed(2)\r\n      );\r\n\r\n      copy_element_presentacion.precio = parseFloat(value);\r\n    } else {\r\n      if (!value) {\r\n        copy_element_presentacion.codigo_barras = \"\";\r\n        copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n        setPresentaciones(copy_presentaciones);\r\n        return;\r\n      }\r\n      copy_element_presentacion.codigo_barras = value;\r\n    }\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const GenCodigoBarras = () => {\r\n    const max = 999999999999;\r\n    const min = 100000000000;\r\n    const codigo_barras = Math.floor(\r\n      Math.random() * (max - min + 1) + min\r\n    ).toString();\r\n    copy_element_presentacion.codigo_barras = codigo_barras;\r\n    copy_presentaciones.splice(index, 1, copy_element_presentacion);\r\n    setPresentaciones(copy_presentaciones);\r\n  };\r\n\r\n  const actionButton = () => {\r\n    if (!disabledInput) {\r\n      handleEditCancel();\r\n      /* quitar del array\t */\r\n      onUpdate.splice(onUpdate.length - 1, 1);\r\n      setOnUpdate([...onUpdate]);\r\n    } else {\r\n      setDisabledInput(!disabledInput);\r\n      /*  agregar al array */\r\n      setOnUpdate([...onUpdate, index]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TableRow hover selected={!disabledInput} className={classes.tableRow}>\r\n      <TableCell align=\"center\">\r\n        <Checkbox checked={copy_producto.existencia} color=\"primary\" />\r\n      </TableCell>\r\n      <TableCell width={220}>\r\n        <Box display=\"flex\">\r\n          <Input\r\n            inputRef={textfield}\r\n            onChange={(e) => obtenerDatos(e)}\r\n            /* disabled={disabledInput} */\r\n            value={copy_producto.codigo_barras}\r\n            type=\"number\"\r\n            name=\"precio\"\r\n            disabled={!copy_producto.nuevo ? true : disabledInput}\r\n          />\r\n          {copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : copy_producto.nuevo ? (\r\n            <IconButton\r\n              color=\"primary\"\r\n              size=\"small\"\r\n              onClick={() => GenCodigoBarras()}\r\n            >\r\n              <Cached />\r\n            </IconButton>\r\n          ) : null}\r\n        </Box>\r\n      </TableCell>\r\n      <TableCell width={200}>{copy_producto.nombre_comercial}</TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.medida._id ? (\r\n          <Chip label={copy_producto.medida.talla} color=\"primary\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        {copy_producto.color._id ? (\r\n          <Tooltip\r\n            title={copy_producto.color.nombre}\r\n            placement=\"top\"\r\n            arrow\r\n            TransitionComponent={Zoom}\r\n          >\r\n            <div\r\n              className={classes.colorContainer}\r\n              style={{\r\n                backgroundColor: copy_producto.color.hex,\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        ) : null}\r\n      </TableCell>\r\n      <TableCell width={110}>\r\n        <Input\r\n          inputRef={textfield}\r\n          onChange={(e) => obtenerDatos(e)}\r\n          disabled={disabledInput}\r\n          value={copy_producto.precio}\r\n          type=\"tel\"\r\n          name=\"precio\"\r\n        />\r\n      </TableCell>\r\n      {from && from === \"compra\" ? (\r\n        <TableCell padding=\"checkbox\">{producto.cantidad}</TableCell>\r\n      ) : null}\r\n      <TableCell padding=\"checkbox\">\r\n        <Input\r\n          inputRef={textfield}\r\n          onChange={(e) => obtenerDatos(e)}\r\n          disabled={disabledInput}\r\n          value={copy_producto.cantidad}\r\n          type=\"tel\"\r\n          name=\"cantidad\"\r\n        />\r\n      </TableCell>\r\n      <TableCell padding=\"checkbox\">\r\n        <IconButton size=\"small\" onClick={() => actionButton()}>\r\n          {!disabledInput ? <Close /> : <Edit />}\r\n        </IconButton>\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { useContext, useState, useEffect, useCallback } from \"react\";\r\nimport { Typography, Divider, Tooltip } from \"@material-ui/core\";\r\nimport { Box, Grid } from \"@material-ui/core\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nimport { Done } from \"@material-ui/icons\";\r\nimport TablaPresentaciones from \"./TablaPresentaciones\";\r\nimport { RegProductoContext } from \"../../../../context/Catalogos/CtxRegProducto\";\r\n// import { AlmacenProvider } from '../../../../context/Almacenes/crearAlmacen';\r\n// import ContainerRegistroAlmacen from '../../../sucursales/Almacenes/RegistroAlmacen/ContainerRegistroAlmacen';\r\nimport CrearColorProducto from \"../../../sucursales/Catalogos/Producto/TallasColores/crearColor\";\r\nimport CrearTallasProducto from \"../../../sucursales/Catalogos/Producto/TallasColores/crearTalla\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    border: \"1px solid rgba(0,0,0, .3)\",\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    height: 50,\r\n    width: 50,\r\n    margin: 1,\r\n    borderRadius: \"15%\",\r\n    cursor: \"pointer\",\r\n  },\r\n}));\r\n\r\nconst GenCodigoBarras = () => {\r\n  return Math.floor(\r\n    Math.random() * (999999999999 - 100000000000 + 1) + 100000000000\r\n  ).toString();\r\n};\r\n\r\nexport default function TallasColoresRapidos({\r\n  obtenerConsultasProducto,\r\n  refetch,\r\n  datos,\r\n  from,\r\n}) {\r\n  const {\r\n    // almacen_inicial,\r\n    // setAlmacenInicial,\r\n    presentaciones,\r\n    datos_generales,\r\n  } = useContext(RegProductoContext);\r\n  const { colores, tallas, calzados } = obtenerConsultasProducto;\r\n  const [medidasSeleccionadas, setMedidasSeleccionadas] = useState([]);\r\n  const [coloresSeleccionados, setColoresSeleccionados] = useState([]);\r\n  const medidas =\r\n    datos_generales.tipo_producto === \"ROPA\" ? [...tallas] : [...calzados];\r\n  const [onUpdate, setOnUpdate] = useState([]);\r\n\r\n  const obtenerColoresSeleccinados = useCallback(() => {\r\n    let colors = [];\r\n    let medidas = [];\r\n    const copy_presentaciones = [...presentaciones];\r\n\r\n    copy_presentaciones.forEach((element) => {\r\n      if (element.color._id) colors.push(element.color);\r\n      if (element.medida._id) medidas.push(element.medida);\r\n    });\r\n\r\n    var hashColor = {};\r\n    var hashMedida = {};\r\n    const colores_existentes = colors.filter((color) => {\r\n      var existColor = !hashColor[color._id];\r\n      hashColor[color._id] = true;\r\n      return existColor;\r\n    });\r\n    const medidas_existentes = medidas.filter((medida) => {\r\n      var existMedida = !hashMedida[medida._id];\r\n      hashMedida[medida._id] = true;\r\n      return existMedida;\r\n    });\r\n\r\n    setColoresSeleccionados([...colores_existentes]);\r\n    setMedidasSeleccionadas([...medidas_existentes]);\r\n  }, [presentaciones]);\r\n\r\n  // const obtenerAlmacenes = (event, child) => {\r\n  // \tsetAlmacenInicial({\r\n  // \t\t...almacen_inicial,\r\n  // \t\t[event.target.name]: event.target.value,\r\n  // \t\t[child.props.name]: child.props.id\r\n  // \t});\r\n  // };\r\n\r\n  useEffect(() => {\r\n    obtenerColoresSeleccinados();\r\n  }, [obtenerColoresSeleccinados]);\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={2}>\r\n        <Grid item md={9}>\r\n          <TablaPresentaciones\r\n            from={from}\r\n            setOnUpdate={setOnUpdate}\r\n            onUpdate={onUpdate}\r\n          />\r\n        </Grid>\r\n        <Grid item md={3}>\r\n          <Box\r\n            width=\"100%\"\r\n            my={2}\r\n            style={\r\n              onUpdate.length > 0\r\n                ? {\r\n                    pointerEvents: \"none\",\r\n                    opacity: 0.4,\r\n                  }\r\n                : null\r\n            }\r\n          >\r\n            <Typography>\r\n              {datos_generales.tipo_producto === \"ROPA\" ? \"Talla\" : \"Número\"}\r\n            </Typography>\r\n            <CrearTallasProducto\r\n              setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n              refetch={refetch}\r\n            />\r\n            <Grid container>\r\n              {medidas.map((talla, index) => (\r\n                <RenderTallas\r\n                  key={index}\r\n                  talla={talla}\r\n                  coloresSeleccionados={coloresSeleccionados}\r\n                  medidasSeleccionadas={medidasSeleccionadas}\r\n                  setMedidasSeleccionadas={setMedidasSeleccionadas}\r\n                  // datos={datos}\r\n                />\r\n              ))}\r\n            </Grid>\r\n          </Box>\r\n          <Divider />\r\n          <Box\r\n            width=\"100%\"\r\n            mt={1}\r\n            style={\r\n              onUpdate.length > 0\r\n                ? {\r\n                    pointerEvents: \"none\",\r\n                    opacity: 0.4,\r\n                  }\r\n                : null\r\n            }\r\n          >\r\n            <Typography>Color</Typography>\r\n            <CrearColorProducto refetch={refetch} />\r\n            <Grid container>\r\n              {colores.map((color, index) => (\r\n                <Colores\r\n                  key={index}\r\n                  color={color}\r\n                  coloresSeleccionados={coloresSeleccionados}\r\n                  setColoresSeleccionados={setColoresSeleccionados}\r\n                  medidasSeleccionadas={medidasSeleccionadas}\r\n                  // datos={datos}\r\n                />\r\n              ))}\r\n            </Grid>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTallas = ({\r\n  talla,\r\n  coloresSeleccionados,\r\n  medidasSeleccionadas,\r\n  setMedidasSeleccionadas,\r\n  // datos\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    setPresentaciones,\r\n    presentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  // const seleccionarMedidas = useCallback(\r\n  // \t() => {\r\n  // \t\tmedidasSeleccionadas.forEach((res) => {\r\n  // \t\t\tif (res._id === talla._id) setSelected(true);\r\n  // \t\t});\r\n  // \t},\r\n  // \t[ talla._id, medidasSeleccionadas ]\r\n  // );\r\n\r\n  // useEffect(\r\n  // \t() => {\r\n  // \t\tif (datos.medidas_registradas) {\r\n  // \t\t\treturn seleccionarMedidas();\r\n  // \t\t}\r\n  // \t},\r\n  // \t[ seleccionarMedidas ]\r\n  // );\r\n\r\n  const handleAddTallas = (value) => {\r\n    const medidas_seleccionadas_temp = [...medidasSeleccionadas];\r\n\r\n    if (!selected) {\r\n      medidas_seleccionadas_temp.push(talla);\r\n      setSelected(value);\r\n    } else {\r\n      medidas_seleccionadas_temp.forEach((res, index) => {\r\n        if (res._id === talla._id) {\r\n          medidas_seleccionadas_temp.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.medida._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!coloresSeleccionados.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        let varIVA = iva < 10 ? `0${iva}` : iva;\r\n        let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n        );\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: producto_medida,\r\n          color: { nombre: \"\", hex: \"\" },\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n            ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !coloresSeleccionados.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI NO HAY COLORES REGISTRADOS PERO YA HAY TALLAS SE AGREGAN MAS */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.medida._id === producto_medida._id\r\n        );\r\n        let varIVA = iva < 10 ? `0${iva}` : iva;\r\n        let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: producto_medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI HAY COLORES SE LE AGREGA TALLA POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < medidas_seleccionadas_temp.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: medidas_seleccionadas_temp[k],\r\n            color: array_medidad_finales[i].color,\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      medidas_seleccionadas_temp.length > 0\r\n    ) {\r\n      /* YA HAY COLORES Y MEDIDAS EN LAS PRESENTACIONES, SE AGREGAN NORMAL */\r\n      for (let i = 0; i < medidas_seleccionadas_temp.length; i++) {\r\n        const producto_medida = medidas_seleccionadas_temp[i];\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          const producto_color = coloresSeleccionados[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let varIVA = iva < 10 ? `0${iva}` : iva;\r\n          let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n          let iva_precio = parseFloat(\r\n            preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      coloresSeleccionados.length > 0 &&\r\n      !medidas_seleccionadas_temp.length\r\n    ) {\r\n      /* SI NO HAY TALLAS SE VUELVE A LISTAR LOS COLORES QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.medida._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: {},\r\n            color: objeto_presentaciones_final.color,\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n    setMedidasSeleccionadas([...medidas_seleccionadas_temp]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <div\r\n        className={classes.colorContainer}\r\n        onClick={() => handleAddTallas(!selected)}\r\n        style={\r\n          selected\r\n            ? {\r\n                backgroundColor: theme.palette.primary.main,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <Typography\r\n          variant=\"button\"\r\n          style={{\r\n            color: theme.palette.getContrastText(\r\n              selected ? theme.palette.primary.main : \"#FFFFFF\"\r\n            ),\r\n            fontSize: 16,\r\n          }}\r\n        >\r\n          {talla.talla}\r\n        </Typography>\r\n      </div>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nconst Colores = ({\r\n  color,\r\n  coloresSeleccionados,\r\n  setColoresSeleccionados,\r\n  medidasSeleccionadas,\r\n  datos,\r\n}) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const {\r\n    presentaciones,\r\n    setPresentaciones,\r\n    datos_generales,\r\n    preciosP,\r\n    precios,\r\n    presentaciones_eliminadas,\r\n    setPresentacionesEliminadas,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const [selected, setSelected] = useState(false);\r\n\r\n  // const seleccionarColores = useCallback(\r\n  // \t() => {\r\n  // \t\tcoloresSeleccionados.forEach((res) => {\r\n  // \t\t\tif (res._id === color._id) setSelected(true);\r\n  // \t\t});\r\n  // \t},\r\n  // \t[ color._id, coloresSeleccionados ]\r\n  // );\r\n\r\n  // useEffect(\r\n  // \t() => {\r\n  // \t\tif (datos.medidas_registradas) {\r\n  // \t\t\treturn seleccionarColores();\r\n  // \t\t}\r\n  // \t},\r\n  // \t[ seleccionarColores ]\r\n  // );\r\n\r\n  const obtenerColores = (value) => {\r\n    if (!selected) {\r\n      coloresSeleccionados.push(color);\r\n      setSelected(value);\r\n    } else {\r\n      coloresSeleccionados.forEach((res, index) => {\r\n        if (res._id === color._id) {\r\n          coloresSeleccionados.splice(index, 1);\r\n          setSelected(value);\r\n          presentaciones.forEach((presentacion) => {\r\n            if (!presentacion.nuevo) {\r\n              if (presentacion.color._id === res._id) {\r\n                setPresentacionesEliminadas([\r\n                  ...presentaciones_eliminadas,\r\n                  presentacion,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n    let presentacion_temp = [];\r\n    const array_medidad_finales = [...presentaciones];\r\n    const { iva, ieps } = precios;\r\n\r\n    if (!medidasSeleccionadas.length && !array_medidad_finales.length) {\r\n      /* SI NO HAY COLORES NI VALORES EN EL ARRAY FINAL SE AGREGA EL PRIMER ELEMENTO */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        let varIVA = iva < 10 ? `0${iva}` : iva;\r\n        let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n        );\r\n        presentacion_temp.push({\r\n          _id: \"\",\r\n          existencia: false,\r\n          codigo_barras: GenCodigoBarras(),\r\n          nombre_comercial: datos_generales.nombre_comercial,\r\n          medida: {},\r\n          color: producto_color,\r\n          precio: preciosP[0].precio_neto,\r\n          cantidad: 0,\r\n          nuevo: true,\r\n          precio_unidad: {\r\n            numero_precio: 1,\r\n            precio_venta: preciosP[0].precio_venta,\r\n            precio_neto: preciosP[0].precio_neto,\r\n            unidad_mayoreo: 0,\r\n            iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n            ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n            utilidad: preciosP[0].utilidad,\r\n            unidad_maxima: false,\r\n          },\r\n        });\r\n      }\r\n    } else if (\r\n      !medidasSeleccionadas.length &&\r\n      array_medidad_finales.length > 0\r\n    ) {\r\n      /* SI YA HAY COLORES REGISTRADOS SE AGREGAN MAS */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        const result = array_medidad_finales.filter(\r\n          (res) => res.color._id === producto_color._id\r\n        );\r\n        let varIVA = iva < 10 ? `0${iva}` : iva;\r\n        let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n        let iva_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n        );\r\n        let ieps_precio = parseFloat(\r\n          preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n        );\r\n        if (result.length) {\r\n          presentacion_temp.push(result[0]);\r\n        } else {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: false,\r\n            codigo_barras: GenCodigoBarras(),\r\n            nombre_comercial: datos_generales.nombre_comercial,\r\n            medida: {},\r\n            color: producto_color,\r\n            precio: preciosP[0].precio_neto,\r\n            cantidad: 0,\r\n            nuevo: true,\r\n            precio_unidad: {\r\n              numero_precio: 1,\r\n              precio_venta: preciosP[0].precio_venta,\r\n              precio_neto: preciosP[0].precio_neto,\r\n              unidad_mayoreo: 0,\r\n              iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n              ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n              utilidad: preciosP[0].utilidad,\r\n              unidad_maxima: false,\r\n            },\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length === 1 &&\r\n      value\r\n    ) {\r\n      /* SI YA HAY TALLAS SE LE AGREGA EL COLOR POR PRIMERA VEZ */\r\n      for (let i = 0; i < array_medidad_finales.length; i++) {\r\n        for (let k = 0; k < coloresSeleccionados.length; k++) {\r\n          presentacion_temp.push({\r\n            _id: \"\",\r\n            existencia: array_medidad_finales[i].existencia,\r\n            codigo_barras: array_medidad_finales[i].codigo_barras,\r\n            nombre_comercial: array_medidad_finales[i].nombre_comercial,\r\n            medida: array_medidad_finales[i].medida,\r\n            color: coloresSeleccionados[k],\r\n            precio: array_medidad_finales[i].precio,\r\n            cantidad: array_medidad_finales[i].cantidad,\r\n            nuevo: true,\r\n            precio_unidad: array_medidad_finales[i].precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      coloresSeleccionados.length > 0\r\n    ) {\r\n      /* YA HAY TALLAS Y MEIDAS EN LAS PRESENTACIONES, SE REGISTRAN NORMAL */\r\n      for (let i = 0; i < coloresSeleccionados.length; i++) {\r\n        const producto_color = coloresSeleccionados[i];\r\n        for (let k = 0; k < medidasSeleccionadas.length; k++) {\r\n          const producto_medida = medidasSeleccionadas[k];\r\n          const presentacion_existente = array_medidad_finales.filter(\r\n            (producto_array_final) =>\r\n              producto_array_final.medida._id === producto_medida._id &&\r\n              producto_color._id === producto_array_final.color._id\r\n          );\r\n          let varIVA = iva < 10 ? `0${iva}` : iva;\r\n          let varIEPS = ieps < 10 ? `0${ieps}` : ieps;\r\n          let iva_precio = parseFloat(\r\n            preciosP[0].precio_venta * parseFloat(`0.${varIVA}`)\r\n          );\r\n          let ieps_precio = parseFloat(\r\n            preciosP[0].precio_venta * parseFloat(`0.${varIEPS}`)\r\n          );\r\n          if (!presentacion_existente.length) {\r\n            presentacion_temp.push({\r\n              _id: \"\",\r\n              existencia: false,\r\n              codigo_barras: GenCodigoBarras(),\r\n              nombre_comercial: datos_generales.nombre_comercial,\r\n              medida: producto_medida,\r\n              color: producto_color,\r\n              precio: preciosP[0].precio_neto,\r\n              cantidad: 0,\r\n              nuevo: true,\r\n              precio_unidad: {\r\n                numero_precio: 1,\r\n                precio_venta: preciosP[0].precio_venta,\r\n                precio_neto: preciosP[0].precio_neto,\r\n                unidad_mayoreo: 0,\r\n                iva_precio: parseFloat(iva_precio.toFixed(2)),\r\n                ieps_precio: parseFloat(ieps_precio.toFixed(2)),\r\n                utilidad: preciosP[0].utilidad,\r\n                unidad_maxima: false,\r\n              },\r\n            });\r\n          } else {\r\n            presentacion_temp.push(presentacion_existente[0]);\r\n          }\r\n        }\r\n      }\r\n    } else if (\r\n      medidasSeleccionadas.length > 0 &&\r\n      !coloresSeleccionados.length\r\n    ) {\r\n      /* SI NO HAY COLORES SE VUELVE A LISTAR LAS TALLAS QUE YA ESTABAN EN PRESENTACIONES */\r\n      const presentaciones_existentes = array_medidad_finales.filter(\r\n        (producto) => producto.color._id\r\n      );\r\n      if (presentaciones_existentes.length) {\r\n        for (let x = 0; x < array_medidad_finales.length; x++) {\r\n          const objeto_presentaciones_final = array_medidad_finales[x];\r\n          presentacion_temp.push({\r\n            _id: objeto_presentaciones_final._id,\r\n            existencia: objeto_presentaciones_final.existencia,\r\n            codigo_barras: objeto_presentaciones_final.codigo_barras,\r\n            nombre_comercial: objeto_presentaciones_final.nombre_comercial,\r\n            medida: objeto_presentaciones_final.medida,\r\n            color: { nombre: \"\", hex: \"\" },\r\n            precio: objeto_presentaciones_final.precio,\r\n            cantidad: objeto_presentaciones_final.cantidad,\r\n            nuevo: true,\r\n            precio_unidad: objeto_presentaciones_final.precio_unidad,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    setColoresSeleccionados([...coloresSeleccionados]);\r\n    setPresentaciones(presentacion_temp);\r\n  };\r\n\r\n  return (\r\n    <Grid item>\r\n      <Tooltip\r\n        title={color.nombre}\r\n        placement=\"top\"\r\n        arrow\r\n        TransitionComponent={Zoom}\r\n      >\r\n        <div\r\n          className={classes.colorContainer}\r\n          style={{\r\n            backgroundColor: color.hex,\r\n            color: theme.palette.getContrastText(color.hex),\r\n          }}\r\n          onClick={() => obtenerColores(!selected)}\r\n        >\r\n          {selected ? <Done /> : null}\r\n        </div>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  makeStyles,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { LOGEAR_USUARIO_ACCESOS } from \"../../gql/Catalogos/usuarios\";\r\nimport BackdropComponent from \"../Layouts/BackDrop\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(0.5)}px`,\r\n    },\r\n    \"& .obligatorio\": {\r\n      color: \"red\",\r\n    },\r\n    paddingTop: 0,\r\n    alignItems: \"center\",\r\n    justifyItems: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function Acceso() {\r\n  const classes = useStyles();\r\n  const client = useApolloClient();\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const {\r\n    departamentos,\r\n    abrirPanelAcceso,\r\n    setAbrirPanelAcceso,\r\n    setReloadProductoRapido,\r\n    setReloadAdministrador,\r\n    setReloadCancelarVenta,\r\n    setReloadVerPrecios,\r\n    setReloadVerPreCorte,\r\n    setReloadEliminarVentaEspera,\r\n    setReloadCrearCotizacion,\r\n  } = useContext(AccesosContext);\r\n\r\n  const [datosUser, setDatosUser] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleClickClose = async () => {\r\n    setDatosUser([]);\r\n    setAbrirPanelAcceso(false);\r\n  };\r\n\r\n  const obtenerDatos = (e) => {\r\n    setDatosUser({ ...datosUser, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const input = {\r\n    numero_usuario: parseInt(datosUser.numero_usuario),\r\n    password: datosUser.password,\r\n    departamento: departamentos.departamento,\r\n    subDepartamento: departamentos.subDepartamento,\r\n    tipo_acceso: departamentos.tipo_acceso,\r\n  };\r\n\r\n  const obtenerQuery = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: LOGEAR_USUARIO_ACCESOS,\r\n        variables: { input },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      console.log(response);\r\n      if (response.data.obtenerAccesoPermiso.permiso_concedido === true) {\r\n        SwitchPermisos(response.data.obtenerAccesoPermiso.subDepartamento);\r\n        setAlert({\r\n          message: \"Permiso Autorizado\",\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n        setDatosUser([]);\r\n        setAbrirPanelAcceso(false);\r\n        setLoading(false);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const SwitchPermisos = (subDepartamento) => {\r\n    switch (subDepartamento) {\r\n      case \"administrador\":\r\n        setReloadAdministrador(true);\r\n        break;\r\n      case \"producto_rapido\":\r\n        setReloadProductoRapido(true);\r\n        break;\r\n      case \"cancelar_venta\":\r\n        setReloadCancelarVenta(true);\r\n        break;\r\n      case \"precios_productos\":\r\n        setReloadVerPrecios(true);\r\n        break;\r\n      case \"pre_corte\":\r\n        setReloadVerPreCorte(true);\r\n        break;\r\n      case \"cotizaciones\":\r\n        setReloadCrearCotizacion(true);\r\n        break;\r\n      case \"eliminar_ventas\":\r\n        setReloadEliminarVentaEspera(true);\r\n        break;\r\n      default:\r\n        setAlert({\r\n          message: \"Permiso no autorizado\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Dialog\r\n        maxWidth=\"xs\"\r\n        open={abrirPanelAcceso}\r\n        onClose={handleClickClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <BackdropComponent loading={loading} />\r\n        <Box p={3}>\r\n          <Box display=\"flex\" p={1}>\r\n            <Box flexGrow={1}>\r\n              <Typography>\r\n                <b>Por favor autoriza con tu usuario y contraseña</b>\r\n              </Typography>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => handleClickClose()}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Numero Usuario:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  name=\"numero_usuario\"\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  onChange={obtenerDatos}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n          <div className={classes.formInputFlex}>\r\n            <Box width=\"100%\">\r\n              <Typography>\r\n                <b>Contrasena:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  variant=\"outlined\"\r\n                  onChange={obtenerDatos}\r\n                />\r\n              </Box>\r\n            </Box>\r\n          </div>\r\n        </Box>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            size=\"medium\"\r\n            variant=\"contained\"\r\n            onClick={() => obtenerQuery()}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/tiempo-rapido.ed3208bb.svg\";","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Backdrop,\r\n  Badge,\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  makeStyles,\r\n  Slide,\r\n  Tab,\r\n  Tabs,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport RegistroInfoAdidional from \"../../sucursales/Catalogos/Producto/PreciosVenta/registrarInfoAdicional\";\r\nimport RegistroInformacionRapido from \"./RegistroInformacionRapido\";\r\nimport { NavigateBefore, NavigateNext } from \"@material-ui/icons\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\nimport {\r\n  initial_state_datos_generales,\r\n  initial_state_precios,\r\n  initial_state_preciosP,\r\n  initial_state_unidadVentaXDefecto,\r\n  initial_state_presentaciones,\r\n  initial_state_unidadVentaSecundaria,\r\n} from \"../../../context/Catalogos/initialStatesProducto\";\r\nimport { cleanTypenames } from \"../../../config/reuserFunctions\";\r\nimport TallasColoresRapidos from \"./TallasColoresRapidos/TallasColoresRapidos\";\r\nimport { RegProductoContext } from \"../../../context/Catalogos/CtxRegProducto\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport {\r\n  CREAR_PRODUCTO_RAPIDO,\r\n  OBTENER_CONSULTAS,\r\n} from \"../../../gql/Catalogos/productos\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport Acceso from \"../../../components/AccesosPassword/Acceso\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { validateJsonEdit } from \"../../sucursales/Catalogos/Producto/validateDatos\";\r\nimport ArticuloIcon from \"../../../icons/ventas/tiempo-rapido.svg\"\r\nimport DetallesIcon from \"../../../icons/portapapeles.svg\"\r\nimport ColoresIcon from \"../../../icons/tallas-colores.svg\"\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`tabpanel-reg-product-${index}`}\r\n      aria-labelledby={`reg-product-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3} height=\"70vh\">\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `reg-product-tab-${index}`,\r\n    \"aria-controls\": `tabpanel-reg-product-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formInputFlex: {\r\n    display: \"flex\",\r\n    \"& > *\": {\r\n      margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n    },\r\n  },\r\n  iconSizeDialogs: {\r\n    width: 80,\r\n  },\r\n  formInput: {\r\n    margin: `${theme.spacing(1)}px ${theme.spacing(2)}px`,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  iconSvg: {\r\n    width: 50,\r\n  },\r\n  dialogContent: {\r\n    padding: 0,\r\n  },\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: \"#fff\",\r\n  },\r\n  iconSizeSecondSuperior: {\r\n    width: 20,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ArticuloRapido() {\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(0);\r\n  const [cargando, setCargando] = useState(false);\r\n\r\n  const {\r\n    datos_generales,\r\n    setDatosGenerales,\r\n    precios,\r\n    setPrecios,\r\n    validacion,\r\n    setValidacion,\r\n    setPreciosP,\r\n    preciosP,\r\n    setUnidadesVenta,\r\n    unidadVentaXDefecto,\r\n    setUnidadVentaXDefecto,\r\n    unidadVentaSecundaria,\r\n    setUnidadVentaSecundaria,\r\n    setCentroDeCostos,\r\n    presentaciones,\r\n    setPresentaciones,\r\n  } = useContext(RegProductoContext);\r\n\r\n  const { setAlert, open, setOpen , updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadProductoRapido,\r\n    setReloadProductoRapido,\r\n    setAbrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  let datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [crearProductoRapido] = useMutation(CREAR_PRODUCTO_RAPIDO);\r\n\r\n  const { data, refetch, loading, error } = useQuery(OBTENER_CONSULTAS, {\r\n    variables: { empresa: sesion.empresa._id, sucursal: sesion.sucursal._id },\r\n  });\r\n\r\n  const resetInitialStates = () => {\r\n    setDatosGenerales(initial_state_datos_generales);\r\n    setPrecios(initial_state_precios);\r\n    setUnidadVentaXDefecto(initial_state_unidadVentaXDefecto);\r\n    setUnidadVentaSecundaria(initial_state_unidadVentaSecundaria);\r\n    setPreciosP(initial_state_preciosP);\r\n    setUnidadesVenta([]);\r\n    setCentroDeCostos({});\r\n    setValidacion({ error: false, message: \"\" });\r\n    setPresentaciones([]);\r\n    setValue(0);\r\n  };\r\n\r\n  const [abrirTallaColor, setAbrirTallaColor] = useState(false);\r\n\r\n  const [cantidad, setCantidad] = useState(0);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n    resetInitialStates();\r\n    setAbrirTallaColor(false);\r\n  };\r\n\r\n  const AceesoProductoRapido = () => {\r\n    if (sesion.accesos.ventas.producto_rapido.ver === true) {\r\n      handleClickOpen();\r\n    } else {\r\n      setAbrirPanelAcceso(true);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"producto_rapido\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadProductoRapido === true) {\r\n      handleClickOpen();\r\n      setReloadProductoRapido(false);\r\n    }\r\n  }, [reloadProductoRapido]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      refetch();\r\n    };\r\n  }, []);\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 82) {\r\n      AceesoProductoRapido();\r\n    }\r\n  }\r\n\r\n  if (loading | !data || error)\r\n    return (\r\n      <Button\r\n        disabled\r\n        value=\"articulo-rapido\"\r\n        style={{\r\n          textTransform: \"none\",\r\n          height: \"100%\",\r\n          width: \"100%\",\r\n          pointerEvents: \"none\",\r\n          opacity: 0.5,\r\n        }}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={ArticuloIcon}\r\n              alt=\"icono caja2\"\r\n              className={classes.iconSizeSecondSuperior}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"body2\">\r\n            <b>Producto Rapido</b>\r\n          </Typography>\r\n          <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n            <b>Alt + R</b>\r\n          </Typography>\r\n        </Box>\r\n      </Button>\r\n    );\r\n\r\n  const { obtenerConsultasProducto } = data;\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const saveData = async () => {\r\n    setCargando(true);\r\n    if (datos_generales.tipo_producto === \"OTROS\" && cantidad < 1) {\r\n      return setValidacion(true);\r\n    } else {\r\n      if (\r\n        !datos_generales.clave_alterna ||\r\n        !datos_generales.tipo_producto ||\r\n        !datos_generales.nombre_generico ||\r\n        !datos_generales.nombre_comercial ||\r\n        !precios.precio_de_compra.precio_con_impuesto ||\r\n        !precios.precio_de_compra.precio_sin_impuesto ||\r\n        !precios.unidad_de_compra.cantidad\r\n      ) {\r\n        return setValidacion(true);\r\n      }\r\n    }\r\n    /* if (unidadesVenta.length === 0) {\r\n      unidadesVenta.push(unidadVentaXDefecto);\r\n    } else {\r\n      const unidadxdefecto = unidadesVenta.filter(\r\n        (unidades) => unidades.default\r\n      );\r\n      if (unidadxdefecto.length === 0) unidadesVenta.push(unidadVentaXDefecto);\r\n    } */\r\n    let copy_unidadesVenta = [\r\n      { ...unidadVentaXDefecto },\r\n      { ...unidadVentaSecundaria },\r\n    ];\r\n    precios.precios_producto = preciosP;\r\n\r\n    if (datos_generales.tipo_producto === \"OTROS\" && cantidad < 1) {\r\n      setPresentaciones(initial_state_presentaciones);\r\n      setCantidad(0);\r\n    }\r\n\r\n    const data = {\r\n      datos_generales: await validateJsonEdit(\r\n        datos_generales,\r\n        \"datos_generales\"\r\n      ),\r\n      precios,\r\n      unidades_de_venta: await validateJsonEdit(\r\n        copy_unidadesVenta,\r\n        \"unidades_de_venta\"\r\n      ),\r\n      presentaciones,\r\n      cantidad,\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      usuario: sesion._id,\r\n    };\r\n\r\n    try {\r\n      const input = cleanTypenames(data);\r\n      const result = await crearProductoRapido({\r\n        variables: {\r\n          input,\r\n        },\r\n      });\r\n      resetInitialStates();\r\n      refetch();\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n      setAlert({\r\n        message: `¡Listo ${result.data.crearProductoRapido.message}!`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n    } catch (error) {\r\n      resetInitialStates();\r\n      refetch();\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      setCargando(false);\r\n      handleClickOpen();\r\n      console.log(error);\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const saveButton = (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"primary\"\r\n      onClick={() => saveData()}\r\n      size=\"large\"\r\n      startIcon={<DoneIcon />}\r\n      disabled={\r\n        datos_generales.tipo_producto === \"OTROS\"\r\n          ? !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !cantidad ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n            ? true\r\n            : false\r\n          : !datos_generales.clave_alterna ||\r\n            !datos_generales.tipo_producto ||\r\n            !datos_generales.nombre_generico ||\r\n            !datos_generales.nombre_comercial ||\r\n            !precios.precio_de_compra.precio_con_impuesto ||\r\n            !precios.precio_de_compra.precio_sin_impuesto ||\r\n            !precios.unidad_de_compra.cantidad\r\n          ? true\r\n          : false\r\n      }\r\n    >\r\n      Guardar\r\n    </Button>\r\n  );\r\n\r\n  const ButtonActions = () => {\r\n    if (value === 1) {\r\n      return saveButton;\r\n    } else {\r\n      if (\r\n        datos_generales.tipo_producto === \"OTROS\" ||\r\n        !datos_generales.tipo_producto\r\n      ) {\r\n        return saveButton;\r\n      } else {\r\n        return (\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => setValue(value + 1)}\r\n            size=\"large\"\r\n            endIcon={<NavigateNext />}\r\n            disableElevation\r\n          >\r\n            Siguiente\r\n          </Button>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Acceso />\r\n      <Button\r\n        onClick={() => {\r\n          AceesoProductoRapido();\r\n        }}\r\n        value=\"articulo-rapido\"\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso || (datosVentas && datosVentas.nota_credito)}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <img\r\n              src={ArticuloIcon}\r\n              alt=\"icono caja2\"\r\n              className={classes.iconSizeSecondSuperior}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Producto Rapido</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + R</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={(_, reason) => {\r\n          if (reason !== \"backdropClick\") {\r\n            handleClickOpen();\r\n          }\r\n        }}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display=\"flex\">\r\n            <Box display=\"flex\" flexGrow={1} justifyContent=\"space-between\">\r\n              <Tabs\r\n                value={value}\r\n                onChange={handleChange}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"on\"\r\n                indicatorColor=\"primary\"\r\n                textColor=\"primary\"\r\n                aria-label=\"scrollable force tabs example\"\r\n              >\r\n                <Tab\r\n                  label=\"Datos generales\"\r\n                  icon={\r\n                    <Badge\r\n                      color=\"secondary\"\r\n                      badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                      anchorOrigin={{\r\n                        vertical: \"bottom\",\r\n                        horizontal: \"right\",\r\n                      }}\r\n                      invisible={\r\n                        validacion.error && validacion.vista1 ? false : true\r\n                      }\r\n                    >\r\n                      <img\r\n                        src={DetallesIcon}\r\n                        alt=\"icono registro\"\r\n                        className={classes.iconSvg}\r\n                      />\r\n                    </Badge>\r\n                  }\r\n                  {...a11yProps(0)}\r\n                />\r\n                {abrirTallaColor === false ||\r\n                datos_generales.tipo_producto === \"OTROS\" ? null : (\r\n                  <Tab\r\n                    label=\"Tallas y colores\"\r\n                    icon={\r\n                      <Badge\r\n                        color=\"secondary\"\r\n                        badgeContent={<Typography variant=\"h6\">!</Typography>}\r\n                        anchorOrigin={{\r\n                          vertical: \"bottom\",\r\n                          horizontal: \"right\",\r\n                        }}\r\n                        invisible={\r\n                          validacion.error && validacion.vista7 ? false : true\r\n                        }\r\n                      >\r\n                        <img\r\n                          src={ColoresIcon}\r\n                          alt=\"icono colores\"\r\n                          className={classes.iconSvg}\r\n                        />\r\n                      </Badge>\r\n                    }\r\n                    {...a11yProps(6)}\r\n                  />\r\n                )}\r\n              </Tabs>\r\n            </Box>\r\n            <Box p={2}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => {\r\n                  handleClickOpen();\r\n                  resetInitialStates();\r\n                }}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <DialogContent className={classes.dialogContent}>\r\n          <Backdrop className={classes.backdrop} open={cargando}>\r\n            <CircularProgress color=\"inherit\" />\r\n          </Backdrop>\r\n          <div className={classes.root}>\r\n            <TabPanel value={value} index={0}>\r\n              <RegistroInformacionRapido\r\n                setAbrirTallaColor={setAbrirTallaColor}\r\n                setCantidad={setCantidad}\r\n                cantidad={cantidad}\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n              <RegistroInfoAdidional />\r\n            </TabPanel>\r\n            <TabPanel value={value} index={1}>\r\n              <TallasColoresRapidos\r\n                obtenerConsultasProducto={obtenerConsultasProducto}\r\n                refetch={refetch}\r\n              />\r\n            </TabPanel>\r\n          </div>\r\n        </DialogContent>\r\n        <DialogActions\r\n          style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n        >\r\n          <Box p={1}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"primary\"\r\n              onClick={() => setValue(value - 1)}\r\n              size=\"large\"\r\n              startIcon={<NavigateBefore />}\r\n              disabled={value === 0}\r\n            >\r\n              Anterior\r\n            </Button>\r\n          </Box>\r\n          <Box p={1}>\r\n            <ButtonActions />\r\n          </Box>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport { RegProductoProvider } from '../../../context/Catalogos/CtxRegProducto'\r\nimport ArticuloRapido from './ArticuloRapido'\r\n \r\nexport default function ProductoRapidoIndex({handleClickOpen}){\r\n\r\n    return (\r\n        <RegProductoProvider>\r\n            <ArticuloRapido handleClickOpen={handleClickOpen} />\r\n        </RegProductoProvider>\r\n    )\r\n}","export default __webpack_public_path__ + \"static/media/lista-de-espera.e4c7510d.svg\";","import {gql} from \"@apollo/client\";\r\n\r\nexport const CREAR_COTIZACION = gql `\r\n  mutation crearCotizacion(\r\n    $input: CrearVentasInput!\r\n    $empresa: ID!\r\n    $sucursal: ID!\r\n    $usuario: ID!\r\n    $caja: ID!\r\n  ) {\r\n    crearCotizacion(\r\n      input: $input\r\n      empresa: $empresa\r\n      sucursal: $sucursal\r\n      usuario: $usuario\r\n      caja: $caja\r\n    ) {\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CONSULTAR_COTIZACIONES = gql `\r\n  query obtenerCotizaciones($empresa: ID!, $sucursal: ID!) {\r\n    obtenerCotizaciones(empresa: $empresa, sucursal: $sucursal) {\r\n      _id\r\n      folio\r\n      descuento\r\n      ieps\r\n      impuestos\r\n      iva\r\n      monedero\r\n      subTotal\r\n      total\r\n      venta_cliente\r\n      credito\r\n      descuento_general {\r\n        cantidad_descontado\r\n        porciento\r\n        precio_con_descuento\r\n      }\r\n      descuento_general_activo\r\n      dias_de_credito_venta\r\n      fecha_de_vencimiento_credito\r\n      fecha_vencimiento_cotizacion\r\n      cliente {\r\n        _id\r\n        numero_cliente\r\n        clave_cliente\r\n        nombre_cliente\r\n        rfc\r\n        telefono\r\n        celular\r\n        email\r\n        razon_social\r\n      }\r\n      productos {\r\n        _id\r\n         inventario_general {\r\n            cantidad_existente\r\n            unidad_inventario\r\n            codigo_unidad\r\n            cantidad_existente_maxima\r\n            unidad_maxima\r\n            id_almacen_general\r\n          }\r\n        iva_total_producto\r\n        ieps_total_producto\r\n        impuestos_total_producto\r\n        subtotal_total_producto\r\n        total_total_producto  \r\n        id_producto {\r\n          _id\r\n          datos_generales {\r\n            codigo_barras\r\n            clave_alterna\r\n            tipo_producto\r\n            nombre_comercial\r\n            nombre_generico\r\n            descripcion\r\n            id_categoria\r\n            categoria\r\n            subcategoria\r\n            id_subcategoria\r\n            id_departamento\r\n            departamento\r\n            id_marca\r\n            marca\r\n            clave_producto_sat {\r\n              Name\r\n              Value\r\n            }\r\n            receta_farmacia\r\n          }\r\n         \r\n          precios {\r\n            ieps\r\n            ieps_activo\r\n            inventario {\r\n              inventario_minimo\r\n              inventario_maximo\r\n              unidad_de_inventario\r\n              codigo_unidad\r\n            }\r\n            iva\r\n            iva_activo\r\n            monedero\r\n            monedero_electronico\r\n            precio_de_compra {\r\n              precio_con_impuesto\r\n              precio_sin_impuesto\r\n              iva\r\n              ieps\r\n            }\r\n            precios_producto {\r\n              numero_precio\r\n              precio_neto\r\n              precio_venta\r\n              iva_precio\r\n              ieps_precio\r\n              unidad_mayoreo\r\n              utilidad\r\n              precio_general\r\n              cantidad_unidad\r\n              unidad_maxima\r\n            }\r\n            unidad_de_compra {\r\n              cantidad\r\n              precio_unitario_con_impuesto\r\n              precio_unitario_sin_impuesto\r\n              unidad\r\n              codigo_unidad\r\n            }\r\n           \r\n          }\r\n          imagenes {\r\n            url_imagen\r\n            location_imagen\r\n            key_imagen\r\n            extencion_imagen\r\n          }\r\n        \r\n         \r\n          \r\n         \r\n          \r\n        }\r\n        concepto\r\n        cantidad\r\n        medida {\r\n          _id\r\n          talla\r\n          tipo\r\n        }\r\n        color {\r\n          _id\r\n          nombre\r\n          hex\r\n        }\r\n        cantidad_venta\r\n        granel_producto {\r\n          granel\r\n          valor\r\n        }\r\n        precio\r\n        precio_a_vender\r\n        precio_actual_producto\r\n        default\r\n        unidad\r\n        codigo_unidad\r\n        \r\n        precio_unidad {\r\n          numero_precio\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          unidad_mayoreo\r\n          utilidad\r\n          precio_general\r\n          cantidad_unidad\r\n          unidad_maxima\r\n        }\r\n        precio_actual_object {\r\n          cantidad_unidad\r\n          numero_precio\r\n          unidad_maxima\r\n          unidad_mayoreo\r\n          precio_general\r\n          precio_neto\r\n          precio_venta\r\n          iva_precio\r\n          ieps_precio\r\n          utilidad\r\n          porciento\r\n          dinero_descontado\r\n        }\r\n      \r\n      }\r\n      id_caja{\r\n        _id\r\n        numero_caja\r\n        activa\r\n      }\r\n      usuario{\r\n        _id\r\n        numero_usuario\r\n        nombre\r\n      }\r\n      year_registro\r\n      numero_semana_year\r\n      numero_mes_year\r\n      fecha_registro\r\n  \r\n    }\r\n  }\r\n`;","import React, { useEffect, useState } from 'react';\r\nimport { jsPDF } from 'jspdf';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport html2canvas from 'html2canvas';\r\nimport { Box, Button, Container, Typography } from '@material-ui/core';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport AccountBoxIcon from \"@material-ui/icons/AccountBox\";\r\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\r\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n\tformatoFechaCorta,\r\n\tformatoMexico,\r\n  } from \"../../../config/reuserFunctions\";\r\n//import { formatoFechaCertificado } from '../../../../config/reuserFunction';\r\n//import Spin from '../../../../components/Spin/spin';\r\n//import MessageSnackbar from '../../../../components/Snackbar/snackbar';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\t/* top: 0,\r\n\t\tleft: 0, */\r\n\t\tzIndex: 9999,\r\n\t\tposition: 'absolute',\r\n\t\twidth: '250mm',\r\n\t\tminHeight: '210mm',\r\n\t\tbackgroundPosition: 'center',\r\n\t\tbackgroundSize: 'cover',\r\n\t\t/* border: 'solid 1px black' */\r\n\t\t/* display: 'none' */\r\n\t},\r\n\tnombre: {\r\n\t\tmarginTop: theme.spacing(54),\r\n\t\tmarginLeft: theme.spacing(61)\r\n\t},\r\n\ttextoSecundario: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t\tmarginLeft: theme.spacing(55),\r\n\t\twidth: 600\r\n\t},\r\n\tfirma: {\r\n\t\tmarginTop: theme.spacing(12),\r\n\t\tmarginLeft: theme.spacing(76)\r\n\t},\r\n\tintructor: {\r\n\t\tmarginTop: theme.spacing(1),\r\n\t\tmarginLeft: theme.spacing(85)\r\n\t},\r\n\tcodigo: {\r\n\t\tmarginTop: theme.spacing(1),\r\n\t\tmarginLeft: theme.spacing(126)\r\n\t}\r\n}));\r\n\r\nexport default function CotizacionPdf(props) {\r\n\tconst [ cotizacion, setCotizacion ] = useState(props.cotizacion);\r\n\tconst [ show, setShow ] = useState(false);\r\n\tconst classes = useStyles();\r\n/* \tconst [ loading, setLoading ] = useState(false);\r\n\tconst [ snackbar, setSnackbar ] = useState({\r\n\t\topen: false,\r\n\t\tmensaje: '',\r\n\t\tstatus: ''\r\n\t}); */\r\n\r\n\tuseEffect(() => {\r\n\t  if(show){\r\n\t\t  printDocument();\r\n\t  }\r\n\t}, [show])\r\n\t\r\n\t\r\n\tconst printDocument = () => {\r\n\r\n\t\tconst divInformation = document.getElementById('divInformation');\r\n\t\t/* const divTitleProductos = document.getElementById('divTitleProductos'); */\r\n\t\t/* console.log(divInformation) */\r\n\t\tsetShow(false);\r\n\t\tconst pdf = new jsPDF('p', 'mm', 'letter');\r\n\t\t//Information\r\n\t\thtml2canvas(divInformation).then((canvas) => {\r\n\r\n\t\t\tconst imgData = canvas.toDataURL('image/png');\r\n\t\t\r\n\t\t\tconst imgProps = pdf.getImageProperties(imgData);\r\n\r\n\t\t\tconst pdfWidth = pdf.internal.pageSize.getWidth() - 5 ;\r\n             \r\n\t\t\tconst pdfHeight = imgProps.height * pdfWidth / imgProps.width;\r\n\r\n\t\t\tpdf.addImage(imgData, 'JPEG', 2, 5, pdfWidth, pdfHeight);\r\n\t\t\tpdf.addPage();\r\n\t\t\t// pdf.output('dataurlnewwindow');\r\n\t\t\tpdf.save('cotizacion' + cotizacion.folio + '.pdf');\r\n\r\n\t\t}); \r\n\t\t//Productos\r\n\t/* \thtml2canvas(divTitleProductos).then((canvas) => {\r\n\r\n\t\t\tconst imgData = canvas.toDataURL('image/png');\r\n\t\t\r\n\t\t\tconst imgProps = pdf.getImageProperties(imgData);\r\n\r\n\t\t\tconst pdfWidth = pdf.internal.pageSize.getWidth() - 5 ;\r\n             \r\n\t\t\tconst pdfHeight = imgProps.height * pdfWidth / imgProps.width;\r\nconsole.log('PDF' , pdfWidth, ',',imgProps.height );\r\n\t\t\t\r\n\t\t\tpdf.addImage(imgData, 'JPEG', 2, 50, pdfWidth, pdfHeight);\r\n\t\t\t// pdf.output('dataurlnewwindow');\r\n\t\t\t\r\n\t\t}); */\r\n\t\t\r\n\t};\r\n\r\n\t//if (loading) return <Spin loading={loading} />;\r\n\r\n\treturn (\r\n\t\t<Box mt={1}>\r\n\t\t\t{/* <MessageSnackbar\r\n\t\t\t\topen={snackbar.open}\r\n\t\t\t\tmensaje={snackbar.mensaje}\r\n\t\t\t\tstatus={snackbar.status}\r\n\t\t\t\tsetSnackbar={setSnackbar}\r\n\t\t\t/> */}\r\n\t\t\t<Box display=\"flex\" justifyContent=\"center\" m={1} mb={0}>\r\n\t\t\t\t<Button variant=\"outlined\" color=\"primary\" onClick={() => setShow(true)} startIcon={<GetAppIcon />}>\r\n\t\t\t\t\tDescargar PDF\r\n\t\t\t\t</Button>\r\n\t\t\t</Box>\r\n\t\t\t<Container >\r\n\t\t\t\t{\r\n\t\t\t\t\t(show) ? \r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<CotizacionInformation cotizacion={cotizacion} classes={classes} /> \r\n\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<div/>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t</Container>\r\n\t\t</Box>\r\n\t);\r\n}\r\n\r\nconst CotizacionInformation = ({ cotizacion, classes}) => {\r\n\t\r\n\r\n/* \tif (!cotizacion) {\r\n\t\treturn null;\r\n\t} */\r\n\t\r\n\treturn (\r\n        <div id=\"divInformation\" className={classes.root} >\r\n\t\t\t\r\n\t\t\t<Box style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n\t\t{/* \t<Typography>\r\n                <b>Caja: </b>\r\n                {` ${cotizacion.id_caja.numero_caja}`}\r\n                </Typography>\r\n            <Box>\r\n               \r\n                <Box mx={1} />\r\n                <Typography>\r\n                <b>Usuario en caja:</b> {` ${cotizacion.usuario.nombre}`}\r\n                </Typography>\r\n            </Box> */}\r\n            <Box>\r\n                <Typography align=\"right\">\r\n                <b>Folio:</b>\r\n                {` ${cotizacion.folio}`}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <Typography>\r\n                <b>Fecha:</b>\r\n                {` ${formatoFechaCorta(cotizacion.fecha_registro)}`}\r\n                </Typography>\r\n            </Box>\r\n           \r\n        </Box>\r\n    \r\n        {(cotizacion.cliente) ? (\r\n          <Box my={1}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <Avatar>\r\n                <AccountBoxIcon size={12} />\r\n              </Avatar>\r\n              <Box mx={1} />\r\n              <Box>\r\n                <Typography size={18}>Cliente</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box my={1}>\r\n              <Paper variant=\"outlined\">\r\n                <TableContainer>\r\n                  <Table size=\"small\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell>Numero de Cliente</TableCell>\r\n                        <TableCell>Nombre</TableCell>\r\n                        <TableCell>Clave</TableCell>\r\n                        <TableCell>Telefono</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      <TableRow>\r\n                        <TableCell>{cotizacion.cliente.numero_cliente}</TableCell>\r\n                        <TableCell>{cotizacion.cliente.nombre_cliente}</TableCell>\r\n                        <TableCell>{cotizacion.cliente.clave_cliente}</TableCell>\r\n                        <TableCell>{cotizacion.cliente.telefono}</TableCell>\r\n                      </TableRow>\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        ) : null}\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <AttachMoneyIcon size={12}/>\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography size={18}>Venta</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Venta Crédito</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>Monedero</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow>\r\n                      <TableCell>{cotizacion.credito ? \"SI\" : \"NO\"}</TableCell>\r\n                      <TableCell>\r\n                        ${cotizacion.descuento ? formatoMexico(cotizacion.descuento) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${cotizacion.monedero ? formatoMexico(cotizacion.monedero) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${cotizacion.iva ? formatoMexico(cotizacion.iva) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${cotizacion.ieps ? formatoMexico(cotizacion.ieps) : 0}\r\n                      </TableCell>\r\n                      <TableCell>${formatoMexico(cotizacion.subTotal)}</TableCell>\r\n                      <TableCell>${formatoMexico(cotizacion.impuestos)}</TableCell>\r\n                      <TableCell>{formatoMexico(cotizacion.total)}</TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <ShoppingCartIcon  size={12} />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography size={18}>Artículos</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer >\r\n                <Table size=\"small\">\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t{/* <TableCell>Cód. de barras</TableCell> */}\r\n\t\t\t\t\t\t<TableCell>Producto</TableCell>\r\n\t\t\t\t\t\t{/* <TableCell>Med.</TableCell>\r\n\t\t\t\t\t\t<TableCell>Uni.</TableCell> */}\r\n\t\t\t\t\t\t<TableCell>Cant.</TableCell>\r\n\t\t\t\t\t\t<TableCell>Precio</TableCell>\r\n\t\t\t\t\t\t<TableCell>Desc.</TableCell>\r\n\t\t\t\t\t\t<TableCell>IVA</TableCell>\r\n\t\t\t\t\t\t<TableCell>IEPS</TableCell>\r\n\t\t\t\t\t\t<TableCell>SubTotal.</TableCell>\r\n\t\t\t\t\t\t<TableCell>Impues.</TableCell>\r\n\t\t\t\t\t\t<TableCell>Total</TableCell>\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n                  \r\n\r\n\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t{cotizacion.productos.map((row, index) => {return(\r\n\t\t\t\t\t\t\t<TableRow key={index}>\r\n\t\t\t\t\t\t{/* \t<TableCell>\r\n\t\t\t\t\t\t\t\t{row.id_producto.datos_generales.codigo_barras}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</TableCell> */}\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t{row.id_producto.datos_generales.nombre_comercial}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t{/* \t<ComponenteMedidaColor producto={row} />\r\n\t\t\t\t\t\t\t<TableCell>{row.unidad}</TableCell> */}\r\n\t\t\t\t\t\t\t<TableCell>{row.cantidad_venta}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t${formatoMexico(row.precio_a_vender)}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<ComponenteDescuento producto={cotizacion} />\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t$\r\n\t\t\t\t\t\t\t\t{row.iva_total_producto\r\n\t\t\t\t\t\t\t\t? formatoMexico(row.iva_total_producto)\r\n\t\t\t\t\t\t\t\t: \"0.00\"}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>\r\n\t\t\t\t\t\t\t\t$\r\n\t\t\t\t\t\t\t\t{row.ieps_total_producto\r\n\t\t\t\t\t\t\t\t? formatoMexico(row.ieps_total_producto)\r\n\t\t\t\t\t\t\t\t: \"0.00\"}\r\n\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>${formatoMexico(row.subtotal_total_producto)}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>${formatoMexico(row.impuestos_total_producto)}</TableCell>\r\n\t\t\t\t\t\t\t<TableCell>${formatoMexico(row.total_total_producto)}</TableCell>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t)})}\r\n\t\t\t\t\t</TableBody>\r\n\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n\t\t</div>\r\n\t);\r\n\t\r\n};\r\n\r\n/* const EncabezadoTablaProductos = (cotizacion, classes) => {\r\n\treturn(\r\n\t\t<div id=\"divTitleProductos\" className={classes.root} >\r\n\t\t\r\n\t\t  </div>\r\n\t)\r\n} */\r\n\r\n/* const CotizacionRowProducto = (cotizacion) =>{\r\n\t\r\n}\r\n */\r\n/* const ComponenteMedidaColor = ({ producto }) => {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n  \r\n\tif (producto.color.nombre && producto.medida.talla) {\r\n\t  return (\r\n\t\t<TableCell align=\"center\">\r\n\t\t  <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n\t\t\t<div\r\n\t\t\t  className={classes.colorContainer}\r\n\t\t\t  style={{\r\n\t\t\t\tbackgroundColor: producto.color.hex,\r\n\t\t\t\tcolor: theme.palette.getContrastText(producto.color.hex),\r\n\t\t\t  }}\r\n\t\t\t>\r\n\t\t\t  {producto.medida.talla}\r\n\t\t\t</div>\r\n\t\t  </Tooltip>\r\n\t\t</TableCell>\r\n\t  );\r\n\t} else {\r\n\t  return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n\t}\r\n  }; */\r\n  \r\n  const ComponenteDescuento = ({ producto }) => {\r\n\tif (producto.descuento_general_activo === true) {\r\n\t  const { dinero_descontado, porciento } = producto.descuento_general;\r\n\t  return (\r\n\t\t<TableCell>\r\n\t\t  {`$${formatoMexico(dinero_descontado)} - %${porciento}`}\r\n\t\t</TableCell>\r\n\t  );\r\n\t} else {\r\n\t  return <TableCell>{\"$0.00\"}</TableCell>;\r\n\t}\r\n  };\r\n  ","import React from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport AccountBoxIcon from \"@material-ui/icons/AccountBox\";\r\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\r\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport CotizacionPdf from \"./CotizacionPdf\";\r\n//import { Done } from \"@material-ui/icons\";\r\n//import CancelarFolio from \"./CancelarFolio\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    /* border: \"1px solid rgba(0,0,0, .3)\", */\r\n    /* marginLeft: 8, */\r\n    height: 28,\r\n    width: 28,\r\n    borderRadius: \"15%\",\r\n    fontSize: 18,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DetalleCotizacion({ venta, open, handleClose, refetch }) {\r\n  if (!venta) return null;\r\n    console.log(venta);\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      fullWidth\r\n      maxWidth=\"xl\"\r\n    \r\n    >\r\n      <DialogTitle>\r\n      \r\n        <Box style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <Box>\r\n                <Typography>\r\n                <b>Caja: </b>\r\n                {` ${venta.id_caja.numero_caja}`}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <Typography>\r\n                <b>Usuario en caja:</b> {` ${venta.usuario.nombre}`}\r\n                </Typography>\r\n            </Box>\r\n            <Box>\r\n                <Typography align=\"right\">\r\n                <b>Folio:</b>\r\n                {` ${venta.folio}`}\r\n                </Typography>\r\n                <Box mx={1} />\r\n                <Typography>\r\n                <b>Fecha:</b>\r\n                {` ${formatoFechaCorta(venta.fecha_registro)}`}\r\n                </Typography>\r\n            </Box>\r\n           \r\n        </Box>\r\n        <Box style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\r\n            <CotizacionPdf isIcon={false} cotizacion={venta} />\r\n        </Box>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {(venta.cliente) ? (\r\n          <Box my={1}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <Avatar>\r\n                <AccountBoxIcon />\r\n              </Avatar>\r\n              <Box mx={1} />\r\n              <Box>\r\n                <Typography variant=\"h6\">Cliente</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box my={1}>\r\n              <Paper variant=\"outlined\">\r\n                <TableContainer>\r\n                  <Table size=\"small\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell>Numero de Cliente</TableCell>\r\n                        <TableCell>Nombre</TableCell>\r\n                        <TableCell>Clave</TableCell>\r\n                        <TableCell>Telefono</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      <TableRow>\r\n                        <TableCell>{venta.cliente.numero_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.nombre_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.clave_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.telefono}</TableCell>\r\n                      </TableRow>\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        ) : null}\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <AttachMoneyIcon />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography variant=\"h6\">Venta</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Venta Crédito</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>Monedero</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow>\r\n                      <TableCell>{venta.credito ? \"SI\" : \"NO\"}</TableCell>\r\n                      <TableCell>\r\n                        ${venta.descuento ? formatoMexico(venta.descuento) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.monedero ? formatoMexico(venta.monedero) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.iva ? formatoMexico(venta.iva) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.ieps ? formatoMexico(venta.ieps) : 0}\r\n                      </TableCell>\r\n                      <TableCell>${formatoMexico(venta.subTotal)}</TableCell>\r\n                      <TableCell>${formatoMexico(venta.impuestos)}</TableCell>\r\n                      <TableCell>{formatoMexico(venta.total)}</TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <ShoppingCartIcon />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography variant=\"h6\">Artículos</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Código de barras</TableCell>\r\n                      <TableCell>Producto</TableCell>\r\n                      <TableCell>Medida</TableCell>\r\n                      <TableCell>Unidad</TableCell>\r\n                      <TableCell>Cantidad</TableCell>\r\n                      <TableCell>Precio</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {venta.productos.map((row, index) => {return(\r\n                      <TableRow key={index}>\r\n                        <TableCell>\r\n                            {row.id_producto.datos_generales.codigo_barras}\r\n                         {/* {row.id_unidad_venta.codigo_barras} */}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {row.id_producto.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <ComponenteMedidaColor producto={row} />\r\n                        <TableCell>{row.unidad}</TableCell>\r\n                        <TableCell>{row.cantidad_venta}</TableCell>\r\n                        <TableCell>\r\n                          ${formatoMexico(row.precio_a_vender)}\r\n                        </TableCell>\r\n                        <ComponenteDescuento producto={venta} />\r\n                        <TableCell>\r\n                          $\r\n                          {row.iva_total_producto\r\n                            ? formatoMexico(row.iva_total_producto)\r\n                            : \"0.00\"}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          $\r\n                          {row.ieps_total_producto\r\n                            ? formatoMexico(row.ieps_total_producto)\r\n                            : \"0.00\"}\r\n                        </TableCell>\r\n                        <TableCell>${formatoMexico(row.subtotal_total_producto)}</TableCell>\r\n                        <TableCell>${formatoMexico(row.impuestos_total_producto)}</TableCell>\r\n                        <TableCell>${formatoMexico(row.total_total_producto)}</TableCell>\r\n                      </TableRow>\r\n                    )})}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n      </DialogContent>\r\n     {/*  <DialogActions\r\n        style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n      >\r\n        <CancelarFolio\r\n          venta={venta}\r\n          handleCloseInfoVenta={handleClose}\r\n          refetch={refetch}\r\n          selected={venta}\r\n        />\r\n        <Button\r\n          onClick={handleClose}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          startIcon={<Done />}\r\n        >\r\n          Aceptar\r\n        </Button>\r\n      </DialogActions> */}\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nconst ComponenteMedidaColor = ({ producto }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  if (producto.color.nombre && producto.medida.talla) {\r\n    return (\r\n      <TableCell align=\"center\">\r\n        <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n          <div\r\n            className={classes.colorContainer}\r\n            style={{\r\n              backgroundColor: producto.color.hex,\r\n              color: theme.palette.getContrastText(producto.color.hex),\r\n            }}\r\n          >\r\n            {producto.medida.talla}\r\n          </div>\r\n        </Tooltip>\r\n      </TableCell>\r\n    );\r\n  } else {\r\n    return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n  }\r\n};\r\n\r\nconst ComponenteDescuento = ({ producto }) => {\r\n  if (producto.descuento_general_activo === true) {\r\n    const { dinero_descontado, porciento } = producto.descuento_general;\r\n    return (\r\n      <TableCell>\r\n        {`$${formatoMexico(dinero_descontado)} - %${porciento}`}\r\n      </TableCell>\r\n    );\r\n  } else {\r\n    return <TableCell>{\"$0.00\"}</TableCell>;\r\n  }\r\n};\r\n","import React, { Fragment, useState, useContext, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\n/* import Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\"; */\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport { Box, CircularProgress, IconButton } from \"@material-ui/core\";\r\n//import DeleteIcon from '@material-ui/icons/Delete';\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\r\n//import {formatoFecha} from '../../../config/reuserFunctions';\r\nimport moment from \"moment\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport { CONSULTAR_COTIZACIONES } from \"../../../gql/Ventas/cotizaciones\";\r\nimport DetalleCotizacion from \"./DetalleCotizacion\";\r\n\r\nconst columns = [\r\n  { id: \"folio\", label: \"Folio\", minWidth: 20, align: \"center\" },\r\n  { id: \"cliente\", label: \"Cliente\", minWidth: 100 },\r\n  { id: \"fecha\", label: \"Fecha\", minWidth: 80, align: \"center\" },\r\n  {\r\n    id: \"fechaVencimiento\",\r\n    label: \"Fecha de vencimiento\",\r\n    minWidth: 60,\r\n    align: \"center\",\r\n  },\r\n  { id: \"productos\", label: \"Productos\", minWidth: 50, align: \"center\" },\r\n  { id: \"total\", label: \"Total\", minWidth: 50, align: \"center\" },\r\n];\r\n/* \r\nfunction createData(folio, cliente, fecha, total) {\r\n\treturn { folio, cliente, fecha, total};\r\n}\r\n */\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"70vh\",\r\n  },\r\n});\r\n\r\nexport default function CotizacionesPendientes({ setOpen }) {\r\n  const classes = useStyles();\r\n  //const [ page, setPage ] = React.useState(0);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  //const [ rowsPerPage, setRowsPerPage ] = React.useState(10);\r\n  const [view, setView] = useState(false);\r\n  const [selected, setSelected] = useState(\"\");\r\n\r\n  const { data, refetch, loading } = useQuery(CONSULTAR_COTIZACIONES, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      refetch();\r\n    } catch (error) {}\r\n  }, []);\r\n\r\n  let rows = [];\r\n  const handleCloseView = () => {\r\n    setView(false);\r\n  };\r\n  /* \tconst handleChangePage = (event, newPage) => {\r\n\t\tsetPage(newPage);\r\n\t};\r\n\r\n\tconst handleChangeRowsPerPage = (event) => {\r\n\t\tsetRowsPerPage(+event.target.value);\r\n\t\tsetPage(0);\r\n\t}; */\r\n  const handleModalCotizacion = () => {\r\n    setOpen(false);\r\n  };\r\n  if (data) rows = data.obtenerCotizaciones;\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"70vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"medium\" aria-label=\"enhanced table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ width: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              <TableCell align=\"center\" style={{ width: 35 }}>\r\n                Retomar\r\n              </TableCell>\r\n              {/* \t<TableCell align='center' style={{ width: 35 }}>\r\n\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t</TableCell> */}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.map((row) => {\r\n              return (\r\n                <CotizacionRow\r\n                  cotizacion={row}\r\n                  handleModalCotizacion={handleModalCotizacion}\r\n                  setView={setView}\r\n                  setSelected={setSelected}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n        <DetalleCotizacion\r\n          venta={selected}\r\n          open={view}\r\n          handleClose={handleCloseView}\r\n          refetch={refetch}\r\n        />\r\n      </TableContainer>\r\n      {/* \t<TablePagination\r\n\t\t\t\trowsPerPageOptions={[ 10, 25, 100 ]}\r\n\t\t\t\tcomponent=\"div\"\r\n\t\t\t\tcount={rows.length}\r\n\t\t\t\trowsPerPage={rowsPerPage}\r\n\t\t\t\tpage={page}\r\n\t\t\t\tonChangePage={handleChangePage}\r\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\r\n\t\t\t/> */}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst CotizacionRow = ({\r\n  cotizacion,\r\n  index,\r\n  handleModalCotizacion,\r\n  setSelected,\r\n  setView,\r\n}) => {\r\n  const [openMessage, setOpenMessage] = useState({ message: \"\", open: false });\r\n  //const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n\r\n  const AgregarVentaDeNuevo = () => {\r\n    try {\r\n      //\t(_cotizacion.fecha_vencimiento_cotizacion\r\n      console.log(cotizacion.productos);\r\n      let objectToSave = JSON.stringify({\r\n        cliente:\r\n          cotizacion.cliente.nombre_cliente === null ? {} : cotizacion.cliente,\r\n        descuento: cotizacion.descuento,\r\n        ieps: cotizacion.ieps,\r\n        impuestos: cotizacion.impuestos,\r\n        iva: cotizacion.iva,\r\n        monedero: cotizacion.monedero,\r\n        productos: cotizacion.productos,\r\n        subTotal: cotizacion.subTotal,\r\n        total: cotizacion.total,\r\n        venta_cliente: false,\r\n        tipo_emision: cotizacion.tipo_emision\r\n          ? cotizacion.tipo_emision\r\n          : \"TICKET\",\r\n      });\r\n\r\n      //Veriricar si hay una\r\n      if (datosVenta === null) {\r\n        //setOpenMessage({message: 'agregarVentaDeNuevo', open:true});\r\n\r\n        if (\r\n          moment(cotizacion.fecha_vencimiento_cotizacion).isBefore(\r\n            moment().locale(\"es-mx\").format(\"YYYY MM DD\")\r\n          )\r\n        ) {\r\n          setOpenMessage({\r\n            message: \"La cotización seleccionada ya tiene la fecha vencida.\",\r\n            open: true,\r\n          });\r\n          return;\r\n        }\r\n        localStorage.setItem(\"DatosVentas\", objectToSave);\r\n        handleModalCotizacion();\r\n        updateDataStorage();\r\n      } else {\r\n        setOpenMessage({\r\n          message: \"No puedes agregar una venta cuando ya está una en curso.\",\r\n          open: true,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(\"agregarVentaDeNuevo\", error);\r\n    }\r\n  };\r\n\r\n  const openDetail = (click) => {\r\n    try {\r\n      if (click === 2) {\r\n        console.log(cotizacion);\r\n        setSelected(cotizacion);\r\n        setView(true);\r\n      }\r\n    } catch (error) {}\r\n  };\r\n  const updateDataStorage = () => {\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n  };\r\n  const handleClickOpen = () => {\r\n    try {\r\n      setOpenMessage(!openMessage.open);\r\n    } catch (error) {}\r\n  };\r\n\r\n  try {\r\n    /* \tfunction borrarCotizacion() {\r\n\t\t\tif (sesion.accesos.ventas.eliminar_ventas.ver === true) {\r\n\t\t\t  let nueva_venta_espera = [...listaEnEspera];\r\n\t\t\t  nueva_venta_espera.splice(index, 1);\r\n\t\t\t  if (nueva_venta_espera.length === 0) {\r\n\t\t\t\tlocalStorage.removeItem(\"ListaEnEspera\");\r\n\t\t\t  } else {\r\n\t\t\t\tlocalStorage.setItem(\r\n\t\t\t\t  \"ListaEnEspera\",\r\n\t\t\t\t  JSON.stringify(nueva_venta_espera)\r\n\t\t\t\t);\r\n\t\t\t  }\r\n\t\t\t  setUpdateTablaVentas(!updateTablaVentas);\r\n\t\t\t} else {\r\n\t\t\t  return null;\r\n\t\t\t}\r\n\t\t  }\r\n\t\tconst verificarPermisos = () => {\r\n\t\t\tif (sesion.accesos.ventas.eliminar_ventas.ver === true) {\r\n\t\t\t\tborrarCotizacion();\r\n\t\t\t} else {\r\n\t\t\t  setAbrirPanelAcceso(!abrirPanelAcceso);\r\n\t\t\t  setDepartamentos({\r\n\t\t\t\tdepartamento: \"ventas\",\r\n\t\t\t\tsubDepartamento: \"eliminar_ventas\",\r\n\t\t\t\ttipo_acceso: \"ver\",\r\n\t\t\t  });\r\n\t\t\t}\r\n\t\t  }; */\r\n    return (\r\n      <>\r\n        <TableRow\r\n          hover\r\n          role=\"checkbox\"\r\n          tabIndex={-1}\r\n          key={cotizacion.code}\r\n          onClick={(e) => openDetail(e.detail)}\r\n        >\r\n          <TableCell align=\"center\">{cotizacion.folio}</TableCell>\r\n          <TableCell>\r\n            {cotizacion.cliente.nombre_cliente\r\n              ? cotizacion.cliente.nombre_cliente\r\n              : \"Público general\"}\r\n          </TableCell>\r\n          <TableCell align=\"center\">{cotizacion.fecha_registro}</TableCell>\r\n          <TableCell align=\"center\">\r\n            {cotizacion.fecha_vencimiento_cotizacion}\r\n          </TableCell>\r\n          <TableCell align=\"center\">{cotizacion.productos.length}</TableCell>\r\n          <TableCell align=\"center\">{cotizacion.total}</TableCell>\r\n          <TableCell align=\"center\">\r\n            <RegresarVenta\r\n              AgregarVentaDeNuevo={AgregarVentaDeNuevo}\r\n              openMessage={openMessage}\r\n              handleClickOpen={handleClickOpen}\r\n            />\r\n          </TableCell>\r\n\r\n          {/* <TableCell align=\"center\">\r\n\t\t\t\t\t<EliminarVentaEspera verificarPermisos={verificarPermisos} />\r\n\t\t\t\t\t</TableCell> */}\r\n\r\n          {/* <TableCell align='center' >\r\n\t\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t    <AutorenewIcon fontSize=\"medium\" />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell> */}\r\n          {/* \t<TableCell align='center' >\r\n\t\t\t\t\t\t<IconButton aria-label=\"delete\" size='small'>\r\n\t\t\t\t\t\t\t<DeleteIcon fontSize=\"small\" />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell> */}\r\n        </TableRow>\r\n      </>\r\n    );\r\n  } catch (error) {}\r\n};\r\n\r\nconst RegresarVenta = ({\r\n  openMessage,\r\n  handleClickOpen,\r\n  AgregarVentaDeNuevo,\r\n}) => {\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        aria-label=\"regresar\"\r\n        color=\"primary\"\r\n        size=\"small\"\r\n        onClick={AgregarVentaDeNuevo}\r\n      >\r\n        <AutorenewIcon fontSize=\"medium\" />\r\n      </IconButton>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={openMessage.open}\r\n        autoHideDuration={5000}\r\n        onClose={handleClickOpen}\r\n        message={openMessage.message}\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\n/*  const EliminarCotizacion = ({ verificarPermisos }) => {\r\n\tconst [openModal, setOpenModal] = useState(false);\r\n  \r\n\tconst handleClickOpen = () => setOpenModal(true);\r\n\tconst handleClose = () => setOpenModal(false);\r\n  \r\n\treturn (\r\n\t  <Fragment>\r\n\t\t<IconButton\r\n\t\t  aria-label=\"delete\"\r\n\t\t  size=\"small\"\r\n\t\t  onClick={() => handleClickOpen()}\r\n\t\t>\r\n\t\t  <DeleteIcon fontSize=\"medium\" />\r\n\t\t</IconButton>\r\n\t\t<Dialog onClose={() => handleClose()} open={openModal}>\r\n\t\t  <DialogTitle>Se eliminara esta venta en espera</DialogTitle>\r\n\t\t  <DialogActions>\r\n\t\t\t<Button color=\"inherit\" size=\"small\" onClick={() => handleClose()}>\r\n\t\t\t  Cancelar\r\n\t\t\t</Button>\r\n\t\t\t<Button\r\n\t\t\t  color=\"secondary\"\r\n\t\t\t  size=\"small\"\r\n\t\t\t  onClick={() => verificarPermisos()}\r\n\t\t\t>\r\n\t\t\t  Eliminar\r\n\t\t\t</Button>\r\n\t\t  </DialogActions>\r\n\t\t</Dialog>\r\n\t  </Fragment>\r\n\t);\r\n  }; */\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport ListaIcon from \"../../../icons/ventas/lista-de-espera.svg\"\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport CotizacionesPendientes from \"./CotizacionesPendientes\";\r\n\r\nimport { FcCurrencyExchange } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ListaCotizaciones() {\r\n  const [open, setOpen] = useState(false);\r\n  //const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => handleClickOpen()}\r\n        style={{ textTransform: \"none\", height: \"100%\", width: \"100%\" }}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box display=\"flex\" flexDirection=\"column\">\r\n          <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <FcCurrencyExchange style={{ fontSize: 25 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cotizaciones</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + T</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        fullWidth\r\n        open={open}\r\n        maxWidth={\"md\"}\r\n        onClose={() => setOpen(false)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display={\"flex\"}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box p={2} display={\"flex\"} alignItems={\"center\"}>\r\n                <img\r\n                  src={ListaIcon}\r\n                  alt=\"icono caja2\"\r\n                  style={{ width: 38 }}\r\n                />\r\n              </Box>\r\n              <Box p={1} display={\"flex\"} alignItems={\"center\"}>\r\n                <Typography variant=\"h6\">Cotizaciones pendientes</Typography>\r\n              </Box>\r\n            </Box>\r\n            {/*  <Box mt={2} textAlign=\"right\">\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  {moment().locale(\"es-mx\").format(\"L\")}\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  {moment().locale(\"es-mx\").format(\"LT\")} hrs.\r\n                </Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">{sesion?.nombre}</Typography>\r\n              </Box>\r\n              <Box textAlign=\"right\">\r\n                <Typography variant=\"caption\">\r\n                  Caja {!turnoEnCurso ? null : turnoEnCurso.numero_caja}\r\n                </Typography>\r\n              </Box>\r\n            </Box> */}\r\n            <Box p={3} pb={0} pt={2}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <DialogContent style={{ padding: 0 }}>\r\n          <CotizacionesPendientes setOpen={setOpen} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { Divider, BottomNavigation } from \"@material-ui/core\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport { withRouter } from \"react-router\";\r\nimport useStyles from \"./styles\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\n\r\nimport DepositoRetiroCaja from \"../../pages/ventas/Operaciones/DepositoRetiros/DepositoRetiroCaja\";\r\nimport Turnos from \"../../pages/ventas/AbrirCerrarTurno/Turnos\";\r\nimport PreCorteCaja from \"../../pages/ventas/Operaciones/Precorte/PreCorteCaja\";\r\nimport VentaEnEspera from \"../../pages/ventas/Operaciones/VentaEnEspera\";\r\nimport ProductoRapidoIndex from \"../../pages/ventas/ArticuloRapido/indexArticuloRapido\";\r\n\r\nimport SnackBarMessages from \"../SnackBarMessages\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport Acceso from \"../AccesosPassword/Acceso\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport ListaCotizaciones from \"../../pages/ventas/Cotizacion/ListaCotizaciones\";\r\n\r\nfunction NavegacionVentas(props) {\r\n  const {\r\n    alert,\r\n    setAlert\r\n  } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadAdministrador,\r\n    setReloadAdministrador,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const classes = useStyles();\r\n  const [value, setValue] = useState(\"venta-general\");\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  /* const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\")); */\r\n\r\n  moment.locale(\"es\");\r\n\r\n  /* const signOut = () => {\r\n    if (sesion.turno_en_caja_activo === true && turnoEnCurso) {\r\n      setAbrirTurnosDialog(!abrirTurnosDialog);\r\n      setUbicacionTurno(\"SESION\");\r\n    } else {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      props.history.push(\"/\");\r\n    }\r\n  }; */\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 112) {\r\n      Administrador();\r\n    }\r\n  }\r\n\r\n  function Administrador() {\r\n    if (sesion.accesos.ventas.administrador.ver === true) {\r\n      props.history.push(\"/admin\");\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"administrador\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (reloadAdministrador === true) {\r\n      props.history.push(\"/admin\");\r\n      setReloadAdministrador(false);\r\n    }\r\n  }, [reloadAdministrador]);\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      <Acceso setReloadAdministrador={setReloadAdministrador} />\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <BottomNavigation\r\n        value={value}\r\n        onChange={(event, newValue) => {\r\n          setValue(newValue);\r\n        }}\r\n        className={classes.navigationTop}\r\n      >\r\n        <ProductoRapidoIndex />\r\n        <Divider orientation=\"vertical\" />\r\n        <ListaCotizaciones />\r\n        <Divider orientation=\"vertical\" />\r\n        <DepositoRetiroCaja />\r\n        <Divider orientation=\"vertical\" />\r\n        <Turnos />\r\n        <Divider orientation=\"vertical\" />\r\n        <PreCorteCaja />\r\n        <Divider orientation=\"vertical\" />\r\n        <VentaEnEspera />\r\n      </BottomNavigation>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default withRouter(NavegacionVentas);\r\n","import React from \"react\";\r\n\r\nimport AbonosClientes from '../../sucursales/Tesoreria/Abonos/Clientes/AbonosClientes';\r\nimport {AbonosProvider} from \"../../../context/Tesoreria/abonosCtx\";\r\n\r\n\r\nexport default function Abonos() {\r\n\r\n  return (\r\n    <>\r\n    <AbonosProvider>\r\n      <AbonosClientes fromVentas={true} />\r\n    </AbonosProvider>  \r\n    </>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport {\r\n  Box,\r\n  CircularProgress,\r\n  IconButton,\r\n  TablePagination,\r\n  Tooltip,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\n\r\nconst columns = [\r\n  { id: \"add\", label: \"\", width: 30, align: \"center\" },\r\n  { id: \"clave\", label: \"Clave\", minWidth: 40, align: \"center\" },\r\n  { id: \"codigo\", label: \"C. Barras\", minWidth: 40, align: \"center\" },\r\n  { id: \"descripcion\", label: \"Nombre/Descrip.\", minWidth: 330 },\r\n  /* { id: \"medida\", label: \"Medida\", minWidth: 40, align: \"center\" },\r\n  { id: \"color\", label: \"Color\", minWidth: 40, align: \"center\" }, */\r\n  {\r\n    id: \"medida-color\",\r\n    label: \"Color y Talla\",\r\n    minWidth: 200,\r\n    align: \"center\",\r\n  },\r\n  { id: \"existencia\", label: \"Exist.\", minWidth: 30, align: \"center\" },\r\n  { id: \"unidad\", label: \"Unidad\", minWidth: 30, align: \"center\" },\r\n  { id: \"precio\", label: \"Precio\", minWidth: 30, align: \"center\" },\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n    marginTop: 15,\r\n  },\r\n  container: {\r\n    height: \"42vh\",\r\n  },\r\n  colorContainer: {\r\n    /* border: \"1px solid rgba(0,0,0, .3)\", */\r\n    /* marginLeft: 8, */\r\n    height: 28,\r\n    width: 28,\r\n    borderRadius: \"15%\",\r\n    fontSize: 18,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\n\r\nexport default function ListaProductos({\r\n  productosBusqueda,\r\n  setProductoSeleccionado,\r\n  productoSeleccionado,\r\n  loading,\r\n  agregarProductos,\r\n  page,\r\n  setPage,\r\n  limit\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n\r\n  const handleTableSelect = (e, producto) => {\r\n    if (e.detail === 2 || e === \"button\") {\r\n      setProductoSeleccionado(producto);\r\n      agregarProductos(producto);\r\n      return;\r\n    }\r\n    setProductoSeleccionado(producto);\r\n  };\r\n\r\n  /* const loadMoreItems = (e) => {\r\n    const { scrollHeight, scrollTop, clientHeight } = e.target;\r\n    if (scrollHeight - parseInt(scrollTop + 1) === clientHeight) {\r\n      if (dataDocs.length < totalDocs && moreItems) {\r\n        console.log(\"ya\");\r\n        let newPage = page + 1;\r\n        setPage(newPage);\r\n        getProductos(\"\", newPage);\r\n      }\r\n    }\r\n  }; */\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  }\r\n\r\n  return (\r\n    <Paper variant=\"outlined\" className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column) => (\r\n                <TableCell\r\n                  key={column.id}\r\n                  align={column.align}\r\n                  style={{ width: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {productosBusqueda.docs.map((producto, index) => {\r\n              return (\r\n                <RowsProductos\r\n                  key={index}\r\n                  producto={producto}\r\n                  handleTableSelect={handleTableSelect}\r\n                  productoSeleccionado={productoSeleccionado}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <TablePagination\r\n          rowsPerPageOptions={[]}\r\n          component=\"div\"\r\n          count={productosBusqueda.totalDocs}\r\n          rowsPerPage={limit}\r\n          page={page}\r\n          onPageChange={handleChangePage}\r\n        />\r\n    </Paper>\r\n  );\r\n}\r\n\r\nfunction RowsProductos({ producto, handleTableSelect, productoSeleccionado }) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  try {\r\n    let ComponenteMedidaColor = () => {\r\n      if (producto.color && producto.medida) {\r\n        return (\r\n          <TableCell\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              height: \"56px\",\r\n            }}\r\n          >\r\n            <Tooltip\r\n              title={`${producto.medida.talla} - ${producto.color.nombre}`}\r\n              placement=\"top\"\r\n              arrow\r\n            >\r\n              <div\r\n                className={classes.colorContainer}\r\n                style={{\r\n                  backgroundColor: producto.color.hex,\r\n                  color: theme.palette.getContrastText(producto.color.hex),\r\n                }}\r\n              >\r\n                <Typography noWrap>{producto.medida.talla}</Typography>\r\n              </div>\r\n            </Tooltip>\r\n          </TableCell>\r\n        );\r\n      } else {\r\n        return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n      }\r\n    };\r\n\r\n    let ComponentCantidad = () => {\r\n      let cantidad = \"\";\r\n      //console.log(producto)\r\n      if (producto.id_producto.datos_generales.tipo_producto === \"OTROS\") {\r\n        cantidad =\r\n          producto.unidad === \"Costal\" || producto.unidad === \"Caja\"\r\n            ? producto.inventario_general[0].cantidad_existente_maxima\r\n            : producto.inventario_general[0].cantidad_existente;\r\n      } else {\r\n        cantidad = producto.cantidad;\r\n      }\r\n      return <TableCell align=\"center\">{cantidad}</TableCell>;\r\n    };\r\n\r\n    return (\r\n      <Fragment>\r\n        <TableRow\r\n          hover\r\n          role=\"checkbox\"\r\n          tabIndex={-1}\r\n          key={producto._id}\r\n          onClick={(e) => handleTableSelect(e, producto)}\r\n          selected={productoSeleccionado._id === producto._id}\r\n        >\r\n          <TableCell align=\"center\">\r\n            <IconButton\r\n              size=\"small\"\r\n              color=\"primary\"\r\n              onClick={(e) => handleTableSelect(\"button\", producto)}\r\n            >\r\n              <Add />\r\n            </IconButton>\r\n          </TableCell>\r\n          <TableCell align=\"center\">\r\n            {producto.id_producto.datos_generales.clave_alterna}\r\n          </TableCell>\r\n          <TableCell align=\"center\">\r\n            {producto.codigo_barras ? producto.codigo_barras : \"N/A\"}\r\n          </TableCell>\r\n          <TableCell>\r\n            {producto.id_producto.datos_generales.nombre_comercial}\r\n          </TableCell>\r\n          {/* <ComponenteMedida />\r\n          <ComponenteColor /> */}\r\n          <ComponenteMedidaColor />\r\n          <ComponentCantidad />\r\n          <TableCell align=\"center\">{producto.unidad}</TableCell>\r\n          <TableCell align=\"center\">\r\n            ${producto.precio ? formatoMexico(producto.precio) : 0}\r\n          </TableCell>\r\n        </TableRow>\r\n      </Fragment>\r\n    );\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport PhotoLibraryIcon from \"@material-ui/icons/PhotoLibrary\";\r\n\r\nimport {\r\n  TableContainer,\r\n  Table,\r\n  Box,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Grid,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\n\r\nexport default function InformacionProducto({\r\n  producto,\r\n  productoSeleccionado,\r\n}) {\r\n  const classes = useStyles();\r\n\r\n  /* console.log(producto);\r\n  console.log(productoSeleccionado); */\r\n  /* if (productoSeleccionado.length === 0) return null; */\r\n\r\n  return (\r\n    <Grid container alignItems=\"center\">\r\n      <Grid item md={2} style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n        {productoSeleccionado?.id_producto?.imagenes.length > 0 ? (\r\n          <Box className={classes.containerImage}>\r\n            <img\r\n              alt=\"Imagen producto\"\r\n              src={productoSeleccionado?.id_producto?.imagenes[0].url_imagen}\r\n              className={classes.imagen}\r\n            />\r\n          </Box>\r\n        ) : (\r\n          <Box p={4} display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n            <PhotoLibraryIcon style={{ fontSize: 40 }} />\r\n          </Box>\r\n        )}\r\n      </Grid>\r\n      <Grid item md={10}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <Typography>\r\n              <b>Nombre:</b>\r\n            </Typography>\r\n\r\n            <Typography>\r\n              {productoSeleccionado.id_producto\r\n                ? productoSeleccionado.id_producto.datos_generales\r\n                    .nombre_comercial\r\n                : \"-\"}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography>\r\n              <b>Codigo Barras:</b>\r\n            </Typography>\r\n            <Typography>\r\n              {productoSeleccionado.codigo_barras\r\n                ? productoSeleccionado.codigo_barras\r\n                : \"N/A\"}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography align=\"center\">\r\n              <b>Cantidad:</b>\r\n            </Typography>\r\n            <Typography align=\"center\">\r\n              {productoSeleccionado.cantidad\r\n                ? productoSeleccionado.cantidad\r\n                : \"-\"}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={1} xs={12}>\r\n            <Typography align=\"center\">\r\n              <b>Unidad:</b>\r\n            </Typography>\r\n            <Typography align=\"center\">\r\n              {productoSeleccionado.unidad ? productoSeleccionado.unidad : \"-\"}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography align=\"center\">\r\n              <b>Descuento:</b>\r\n            </Typography>\r\n            <Typography align=\"center\">\r\n              {productoSeleccionado.descuento\r\n                ? productoSeleccionado.descuento.precio_neto\r\n                : 0}\r\n            </Typography>\r\n          </Grid>\r\n          <Grid item md={2} xs={12}>\r\n            <Typography align=\"center\">\r\n              <b>% Descuento:</b>\r\n            </Typography>\r\n            <Typography align=\"center\">\r\n              {productoSeleccionado.descuento\r\n                ? productoSeleccionado.descuento.precio_neto\r\n                : 0}\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid item md={12} lg={12}>\r\n        <PreciosDeVentaCompras\r\n          precios={productoSeleccionado?.id_producto?.precios?.precios_producto}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nfunction PreciosDeVentaCompras({ precios }) {\r\n  return (\r\n    <Box>\r\n      <TableContainer>\r\n        <Table aria-label=\"simple table\" size=\"small\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Numero precio</TableCell>\r\n              {[1, 2, 3, 4, 5, 6].map((numero, index) => (\r\n                <TableCell style={{ minWidth: 100 }} key={index}>\r\n                  {numero}\r\n                </TableCell>\r\n              ))}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {[\"Precios de venta\"].map((tipo, index) => (\r\n              <TableRow key={index}>\r\n                <TableCell style={{ border: 0 }}>\r\n                  <b>{tipo}</b>\r\n                </TableCell>\r\n                {precios?.map((data, index) => (\r\n                  <TableCell key={index} style={{ border: 0 }}>\r\n                    ${data?.precio_neto ? formatoMexico(data.precio_neto) : 0}\r\n                  </TableCell>\r\n                ))}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState, useEffect, useMemo } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Typography,\r\n  Slide,\r\n  IconButton,\r\n  DialogTitle,\r\n  TextField,\r\n  InputAdornment,\r\n  Snackbar,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { FcSearch } from \"react-icons/fc\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaProductos from \"./ListaProductos\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { CONSULTA_PRODUCTOS_VENTAS } from \"../../../gql/Ventas/ventas_generales\";\r\nimport InformacionProducto from \"./InformacionProducto\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport {\r\n  calculatePrices2,\r\n  findProductArray,\r\n  verifiPrising,\r\n} from \"../../../config/reuserFunctions\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function BuscarProducto() {\r\n  const classes = useStyles();\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  let datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    openBuscarProducto,\r\n    setOpenBuscarProducto,\r\n  } = useContext(VentasContext);\r\n\r\n  const [open_message, setOpenMessage] = useState(false);\r\n  const [searchProducto, setSearchProducto] = useState({ producto: \"\" });\r\n  const [productoSeleccionado, setProductoSeleccionado] = useState([]);\r\n  const [page, setPage] = useState(0);\r\n  const limit = 10;\r\n  /* const [granelBase, setGranelBase] = useState({\r\n    granel: false,\r\n    valor: 0,\r\n  }); */\r\n  const inputProductos = React.useRef(null);\r\n  const [value] = useDebounce(searchProducto, 500);\r\n\r\n  const { data, refetch, loading } = useQuery(CONSULTA_PRODUCTOS_VENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: {\r\n        producto: value.producto ? value.producto : \"\",\r\n      },\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n\r\n  let productosBusqueda = [];\r\n\r\n  if (data) productosBusqueda = data.obtenerProductosVentas;\r\n\r\n  const obtenerDatos = (e) => {\r\n    setSearchProducto({ ...searchProducto, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setProductoSeleccionado([]);\r\n    //productosBusqueda = [];\r\n    setOpenBuscarProducto(!openBuscarProducto);\r\n    setSearchProducto({ producto: \"\" });\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 80) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    refetch();\r\n  }, [updateTablaVentas]);\r\n\r\n  useMemo(() => {\r\n    setPage(0);\r\n  }, [value])\r\n  \r\n  const without_inventary = sesion.empresa.vender_sin_inventario;\r\n\r\n  const agregarProductos = async (producto) => {\r\n    if (producto.concepto === \"medidas\") {\r\n      //cantidad\r\n      if (!without_inventary && producto.cantidad === 0) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    } else {\r\n      //inventario_general\r\n      if (\r\n        !without_inventary &&\r\n        producto.inventario_general[0].cantidad_existente === 0\r\n      ) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    }\r\n\r\n    let granel_base = {\r\n      granel: false,\r\n      valor: 0,\r\n    };\r\n    if (producto.unidad === \"Kg\" || producto.unidad === \"Costal\") {\r\n      granel_base = {\r\n        granel: true,\r\n        valor: 1,\r\n      };\r\n    }\r\n\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({\r\n        newP,\r\n        cantidad: 0,\r\n        granel: granel_base,\r\n        origen: \"Ventas1\",\r\n        precio_boolean: false,\r\n      });\r\n\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n      new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n      new_prices.newP.impuestos_total_producto = parseFloat(\r\n        new_prices.impuestoCalculo\r\n      );\r\n      new_prices.newP.subtotal_total_producto = parseFloat(\r\n        new_prices.subtotalCalculo\r\n      );\r\n      new_prices.newP.total_total_producto = parseFloat(\r\n        new_prices.totalCalculo\r\n      );\r\n\r\n      //agregar producto al inicio del arreglo\r\n      productosVentasTemp.splice(0, 0, new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_prices.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_prices.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_prices.impuestoCalculo),\r\n        iva:\r\n          parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_prices.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_prices.monederoCalculo),\r\n      };\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      const {\r\n        cantidad_venta,\r\n        ...newP\r\n      } = producto_encontrado.producto_found.producto;\r\n\r\n      /* newP.cantidad_venta = parseInt(cantidad_venta) + 1; */\r\n      if (granel_base.granel) {\r\n        granel_base = {\r\n          granel: true,\r\n          valor: newP.granel_producto.valor + granel_base.valor,\r\n        };\r\n      }\r\n      newP.cantidad_venta = granel_base.granel\r\n        ? 1\r\n        : parseInt(cantidad_venta) + 1;\r\n\r\n      /* newP.cantidad_venta = granel_base.granel\r\n        ? cantidad_venta\r\n        : parseInt(cantidad_venta) + 1; */\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta,\r\n          granel: 1, //newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n        });\r\n\r\n        const calculo_sumar = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta: granel_base.granel ? 1 : parseInt(cantidad_venta) + 1, //newP.cantidad_venta,\r\n          granel: granel_base, //newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: verify_prising.object_prising,\r\n        });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n\r\n        newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(\r\n          calculo_sumar.impuestoCalculo\r\n        );\r\n        newP.subtotal_total_producto = parseFloat(\r\n          calculo_sumar.subtotalCalculo\r\n        );\r\n        newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n\r\n        newP.precio_actual_object = {\r\n          cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n            ? verify_prising.object_prising.cantidad_unidad\r\n            : null,\r\n          numero_precio: verify_prising.object_prising.numero_precio\r\n            ? verify_prising.object_prising.numero_precio\r\n            : null,\r\n          unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n            ? verify_prising.object_prising.unidad_maxima\r\n            : null,\r\n          precio_general: verify_prising.object_prising.precio_general\r\n            ? verify_prising.object_prising.precio_general\r\n            : null,\r\n          precio_neto: verify_prising.object_prising.precio_neto\r\n            ? verify_prising.object_prising.precio_neto\r\n            : null,\r\n          precio_venta: verify_prising.object_prising.precio_venta\r\n            ? verify_prising.object_prising.precio_venta\r\n            : null,\r\n          iva_precio: verify_prising.object_prising.iva_precio\r\n            ? verify_prising.object_prising.iva_precio\r\n            : null,\r\n          ieps_precio: verify_prising.object_prising.ieps_precio\r\n            ? verify_prising.object_prising.ieps_precio\r\n            : null,\r\n          utilidad: verify_prising.object_prising.utilidad\r\n            ? verify_prising.object_prising.utilidad\r\n            : null,\r\n          porciento: verify_prising.object_prising.porciento\r\n            ? verify_prising.object_prising.porciento\r\n            : null,\r\n          dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n            ? verify_prising.object_prising.dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        };\r\n      } else {\r\n        // console.log(\"Entro\");\r\n        const productoPrecioFinal = newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.precio_unidad.precio_neto;\r\n\r\n        const new_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad: 1,\r\n          granel: newP.granel_producto,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: granel_base.granel ? 1 : parseInt(cantidad_venta) + 1, //newP.cantidad_venta,\r\n          granel: granel_base,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n        new_prices.newP.ieps_total_producto = parseFloat(\r\n          new_prices.iepsCalculo\r\n        );\r\n        new_prices.newP.impuestos_total_producto = parseFloat(\r\n          new_prices.impuestoCalculo\r\n        );\r\n        new_prices.newP.subtotal_total_producto = parseFloat(\r\n          new_prices.subtotalCalculo\r\n        );\r\n        new_prices.newP.total_total_producto = parseFloat(\r\n          new_prices.totalCalculo\r\n        );\r\n\r\n        /*  new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        // console.log(new_prices);\r\n\r\n        new_prices.newP.iva_total_producto =\r\n          parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.ieps_total_producto =\r\n          parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.impuestos_total_producto =\r\n          parseFloat(new_prices.impuestoCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.subtotal_total_producto =\r\n          parseFloat(new_prices.subtotalCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.total_total_producto =\r\n          parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta); */\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_prices.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_prices.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_prices.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_prices.monederoCalculo,\r\n        };\r\n\r\n        /* CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) +\r\n            parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        }; */\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n        tipo_emision: venta_actual.tipo_emision\r\n          ? venta_actual.tipo_emision\r\n          : \"TICKET\",\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    /* handleClickOpen(); */\r\n    inputProductos.current.focus();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || (datosVentas && datosVentas.nota_credito)}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcSearch style={{ fontSize: 45 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Productos</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + P</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        open={openBuscarProducto}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <Snackbar\r\n          anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n          open={open_message}\r\n          onClose={() => setOpenMessage(false)}\r\n          message=\"Producto sin existencias\"\r\n          autoHideDuration={3000}\r\n        />\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"space-between\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography variant=\"h6\">Buscar productos</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              placeholder=\"Buscar producto\"\r\n              name=\"producto\"\r\n              size=\"small\"\r\n              fullWidth\r\n              value={searchProducto.producto}\r\n              onChange={obtenerDatos}\r\n              autoFocus\r\n              inputRef={inputProductos}\r\n              InputProps={{\r\n                endAdornment: (\r\n                  <InputAdornment position=\"end\">\r\n                    <IconButton>\r\n                      <Search />\r\n                    </IconButton>\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n          </Box>\r\n          <ListaProductos\r\n            productosBusqueda={productosBusqueda}\r\n            productoSeleccionado={productoSeleccionado}\r\n            setProductoSeleccionado={setProductoSeleccionado}\r\n            loading={loading}\r\n            agregarProductos={agregarProductos}\r\n            page={page}\r\n            setPage={setPage}\r\n            limit={limit}\r\n          />\r\n          <Box mb={2}>\r\n            <InformacionProducto productoSeleccionado={productoSeleccionado} />\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Grid,\r\n  IconButton,\r\n  InputAdornment,\r\n  InputBase,\r\n  makeStyles,\r\n  Paper,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport ListaClientes from \"../../sucursales/Catalogos/Cliente/ListaClientes\";\r\nimport CrearCliente from \"../../sucursales/Catalogos/Cliente/CrearCliente\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { FcBusinessman } from \"react-icons/fc\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  appBar: {\r\n    position: \"relative\",\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  icon: {\r\n    fontSize: 100,\r\n  },\r\n}));\r\n\r\nexport default function ClientesVentas() {\r\n  const classes = useStyles();\r\n  let turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [values, setValues] = useState(\"\");\r\n\r\n  const pressEnter = (e) => {\r\n    if (e.key === \"Enter\") setValues(e.target.defaultValue);\r\n  };\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 67) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  }, [turnoEnCurso]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        style={{\r\n          height: \"100%\",\r\n          width: \"100%\",\r\n          border: \".6px solid #DBDBDB\",\r\n        }}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso}\r\n      >\r\n        <Box>\r\n          <Box\r\n            style={\r\n              !turnoEnCurso\r\n                ? {\r\n                    pointerEvents: \"none\",\r\n                    opacity: 0.5,\r\n                  }\r\n                : null\r\n            }\r\n          >\r\n            <FcBusinessman style={{ fontSize: 45 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Clientes</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>aLT + C</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <FcBusinessman style={{ fontSize: 45 }} />\r\n              <Box mx={1} />\r\n              <Typography variant=\"h6\">Clientes</Typography>\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon style={{ fontSize: 30 }} />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Grid container spacing={2}>\r\n            <Grid item md={6} xs={8}>\r\n              <TextField\r\n                fullWidth\r\n                placeholder=\"Buscar cliente...\"\r\n                onChange={(e) => setValues(e.target.value)}\r\n                onKeyPress={pressEnter}\r\n                value={values}\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                InputProps={{\r\n                  endAdornment: (\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton onClick={() => setValues(values)}>\r\n                        <Search />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  ),\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid\r\n              item\r\n              md={6}\r\n              xs={4}\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"flex-end\",\r\n                alignItems: \"center\",\r\n              }}\r\n            >\r\n              <CrearCliente\r\n                tipo=\"CLIENTE\"\r\n                accion=\"registrar\"\r\n                ventas={true}\r\n                handleClickOpen={handleClickOpen}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Box mt={1} height=\"70vh\">\r\n            <ListaClientes\r\n              tipo=\"CLIENTE\"\r\n              filtro={values}\r\n              ventas={true}\r\n              handleClickOpen={handleClickOpen}\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  DialogContent,\r\n  InputAdornment,\r\n  Grid,\r\n  Paper,\r\n  TextField,\r\n  Typography,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport { CREAR_COTIZACION } from \"../../../gql/Ventas/cotizaciones\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport {\r\n  formatoMexico,\r\n  generateCodeNumerico,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport BackdropComponent from \"../../../components/Layouts/BackDrop\";\r\nimport RemoveCircleTwoToneIcon from \"@material-ui/icons/RemoveCircleTwoTone\";\r\n\r\nexport default function NuevaCotizacion({ setOpen }) {\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const [CrearCotizacion] = useMutation(CREAR_COTIZACION);\r\n\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n  } = useContext(VentasContext);\r\n  const [newCotizacion, setNewCotizacion] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [preciosDescuentos, setPreciosDescuentos] = useState({\r\n    productos: datosVentas?.productos,\r\n    subTotal: datosVentas?.subTotal,\r\n    impuestos: datosVentas?.impuestos,\r\n    iva: datosVentas?.iva,\r\n    ieps: datosVentas?.ieps,\r\n    total: datosVentas?.total,\r\n  });\r\n  const [totalDescount, setTotalDescount] = useState(\r\n    preciosDescuentos\r\n      ? preciosDescuentos?.descuento_general?.precio_con_descuento\r\n      : datosVentas?.total\r\n  );\r\n  const [porcentaje, setPorcentaje] = useState(\r\n    preciosDescuentos?.descuento_general?.porciento\r\n      ? preciosDescuentos?.descuento_general?.porciento\r\n      : 0\r\n  );\r\n  let descuento_general = [];\r\n\r\n  let original_datos_Ventas = datosVentas;\r\n\r\n  const classes = useStyles();\r\n\r\n  const obtenerDatos = (e) => {\r\n    setNewCotizacion({ ...newCotizacion, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const crearCotizacion = async () => {\r\n    try {\r\n      if (!newCotizacion.fecha_vencimiento) {\r\n        setAlert({\r\n          message: `Por favor completa los datos necesarios`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return null;\r\n      } else {\r\n        setLoading(true);\r\n        await CrearCotizacion({\r\n          variables: {\r\n            input: {\r\n              folio: generateCodeNumerico(8),\r\n              descuento: preciosDescuentos.descuento,\r\n              ieps: preciosDescuentos.ieps,\r\n              impuestos: preciosDescuentos.impuestos,\r\n              iva: preciosDescuentos.iva,\r\n              monedero: datosVentas.monedero,\r\n              subTotal: preciosDescuentos.subTotal,\r\n              total: preciosDescuentos.total,\r\n              venta_cliente: datosVentas.cliente ? true : false,\r\n              montos_en_caja: {},\r\n              //credito: newCotizacion.tipo_venta === 'CREDITO' ? true : false,\r\n              descuento_general_activo: porcentaje > 0 ? true : false,\r\n              descuento_general: {\r\n                porciento: parseFloat(porcentaje),\r\n                precio_con_descuento: preciosDescuentos.total,\r\n                cantidad_descontado: parseFloat(totalDescount),\r\n              },\r\n              dias_de_credito_venta: \"\",\r\n              fecha_de_vencimiento_credito: \"\",\r\n              fecha_vencimiento_cotizacion: newCotizacion.fecha_vencimiento,\r\n              cliente: datosVentas.cliente ? datosVentas.cliente : {},\r\n              productos: preciosDescuentos.productos,\r\n              /* inventario_general: datosVentas.inventario_general, */\r\n            },\r\n            empresa: sesion.empresa._id,\r\n            sucursal: sesion.sucursal._id,\r\n            usuario: sesion._id,\r\n            caja: turnoEnCurso.id_caja,\r\n          },\r\n        });\r\n\r\n        setAlert({\r\n          message: `La cotización se realizó correctamente.`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      }\r\n      setOpen(false);\r\n      setLoading(false);\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n\r\n      setDatosVentasActual({\r\n        subTotal: 0,\r\n        total: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n        monedero: 0,\r\n      });\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setAlert({\r\n        message: `Algo salió mal.`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      if (error.networkError.result) {\r\n        console.log(error.networkError.result.errors);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  const obtenerPorciento = (e) => {\r\n    let newValue = e.target.value;\r\n\r\n    setPorcentaje(newValue);\r\n    if (e !== \"\") {\r\n      let ventaSubtotal = original_datos_Ventas?.subTotal;\r\n      const val =\r\n        newValue < 10\r\n          ? parseFloat(`0.0${newValue.replace(\".\", \"\")}`)\r\n          : parseFloat(`0.${newValue.replace(\".\", \"\")}`);\r\n      const porsent = ventaSubtotal * val;\r\n      setTotalDescount(porsent.toFixed(2));\r\n    }\r\n  };\r\n\r\n  const obtenerPrecioText = (e) => {\r\n    try {\r\n      var valorText = e.target.value !== \"\" ? parseFloat(e.target.value) : \"\";\r\n      var ventaSubtotal = original_datos_Ventas?.subTotal;\r\n      setTotalDescount(valorText);\r\n      var porcentaje =\r\n        valorText === \"\"\r\n          ? 0\r\n          : parseFloat(((valorText / ventaSubtotal) * 100).toFixed(2));\r\n      var descuento = valorText === \"\" ? 0 : parseFloat(porcentaje.toFixed(2));\r\n      setPorcentaje(descuento);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const eliminarDescuento = () => {\r\n    try {\r\n      descuento_general = {\r\n        productos: datosVentas?.productos,\r\n        subTotal: datosVentas?.subTotal,\r\n        impuestos: datosVentas?.impuestos,\r\n        iva: datosVentas?.iva,\r\n        ieps: datosVentas?.ieps,\r\n        total: datosVentas?.total,\r\n      };\r\n      setPorcentaje(0);\r\n      setTotalDescount(\"\");\r\n      setPreciosDescuentos(descuento_general);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleCalculateNewDiscountVenta = () => {\r\n    //let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    //Declarar la variables necesarias (total, subTotal, impuestos, iva ieps, productosFinal)\r\n    let total = 0,\r\n      subTotal = 0,\r\n      impuestos = 0,\r\n      iva = 0,\r\n      ieps = 0,\r\n      descuento = 0;\r\n    let productosFinal = [];\r\n    //Activar loading\r\n\r\n    //Obtener productos\r\n    const productStorage = original_datos_Ventas?.productos;\r\n    //Mapearlos\r\n    for (let i = 0; i < productStorage.length; i++) {\r\n      //Obtener el producto valor i\r\n      const product = productStorage[i];\r\n      let precio_actual_object = {};\r\n      const porsentajeNewDescuento = parseFloat(porcentaje);\r\n\r\n      const dineroDescontadoDescuento =\r\n        porsentajeNewDescuento > 1\r\n          ? porsentajeNewDescuento >= 10\r\n            ? parseFloat(\r\n                (\r\n                  product.precio_actual_object.precio_venta *\r\n                  parseFloat(`0.${porsentajeNewDescuento}`)\r\n                ).toFixed(2)\r\n              )\r\n            : parseFloat(\r\n                (\r\n                  (product.precio_actual_object.precio_venta *\r\n                    parseFloat(`0.${porsentajeNewDescuento}`)) /\r\n                  10\r\n                ).toFixed(2)\r\n              )\r\n          : parseFloat(\r\n              (product.precio_actual_object.precio_venta *\r\n                porsentajeNewDescuento) /\r\n                100\r\n            );\r\n      //Calcular los nuevos precios\r\n      const newPrecioVentaProduct = parseFloat(\r\n        (\r\n          product.precio_actual_object.precio_venta - dineroDescontadoDescuento\r\n        ).toFixed(2)\r\n      );\r\n      const newIvaProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(\r\n            `0.${\r\n              product.id_producto.precios.iva < 10\r\n                ? `0${product.id_producto.precios.iva}`\r\n                : product.id_producto.precios.iva\r\n            }`\r\n          )\r\n        ).toFixed(2)\r\n      );\r\n\r\n      const newIepsProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(\r\n            `0.${\r\n              product.id_producto.precios.ieps < 10\r\n                ? `0${product.id_producto.precios.ieps}`\r\n                : product.id_producto.precios.ieps\r\n            }`\r\n          )\r\n        ).toFixed(2)\r\n      );\r\n\r\n      const newPrecioNetoProduct = parseFloat(\r\n        (newPrecioVentaProduct + newIvaProduct + newIepsProduct).toFixed(2)\r\n      );\r\n      const newUtilidadProduct = parseFloat(\r\n        (\r\n          ((newPrecioVentaProduct -\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) /\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) *\r\n          100\r\n        ).toFixed(2)\r\n      );\r\n\r\n      precio_actual_object = {\r\n        cantidad_unidad: 1,\r\n        dinero_descontado: dineroDescontadoDescuento,\r\n        ieps_precio: newIepsProduct,\r\n        iva_precio: newIvaProduct,\r\n        numero_precio: product.precio_actual_object.numero_precio,\r\n        porciento: product.precio_actual_object.porciento\r\n          ? parseFloat(\r\n              (\r\n                parseFloat(product.precio_actual_object.porciento) +\r\n                parseFloat(porcentaje)\r\n              ).toFixed(2)\r\n            )\r\n          : parseFloat(porcentaje),\r\n        precio_general: 0,\r\n        precio_neto: newPrecioNetoProduct,\r\n        precio_venta: newPrecioVentaProduct,\r\n        unidad_maxima: false,\r\n        utilidad: newUtilidadProduct,\r\n      };\r\n\r\n      if (product.precio_actual_object.unidad_maxima) {\r\n        //Aqui se calcula la unidad por mayoreo (Cajas y costales)\r\n        precio_actual_object.cantidad_unidad =\r\n          product.precio_actual_object.cantidad_unidad;\r\n        precio_actual_object.precio_general =\r\n          newPrecioNetoProduct *\r\n          parseFloat(product.precio_actual_object.cantidad_unidad);\r\n        precio_actual_object.unidad_maxima = true;\r\n      }\r\n      const valorGranel =\r\n        product.granel_producto.granel === true\r\n          ? parseFloat(product.granel_producto.valor)\r\n          : 1;\r\n      //Guardar el nuevo producto en el arreglo\r\n      const ieps_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.ieps_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const impuestos_total_producto = parseFloat(\r\n        (\r\n          (precio_actual_object.ieps_precio + precio_actual_object.iva_precio) *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const iva_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.iva_precio *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const subtotal_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_venta *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const total_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_neto *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const descuentoProducto = parseFloat(\r\n        (\r\n          parseFloat(precio_actual_object.dinero_descontado) *\r\n          valorGranel *\r\n          product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n\r\n      productosFinal.push({\r\n        ...product,\r\n        precio_actual_object,\r\n        ieps_total_producto,\r\n        impuestos_total_producto,\r\n        iva_total_producto,\r\n        subtotal_total_producto,\r\n        total_total_producto,\r\n      });\r\n      //Sumar los valores\r\n      total += total_total_producto;\r\n      subTotal += subtotal_total_producto;\r\n      impuestos += impuestos_total_producto;\r\n      iva += iva_total_producto;\r\n      ieps += ieps_total_producto;\r\n      descuento += descuentoProducto;\r\n    }\r\n\r\n    descuento_general = {\r\n      productos: productosFinal,\r\n      impuestos,\r\n      subTotal,\r\n      iva,\r\n      ieps,\r\n      total,\r\n      descuento,\r\n    };\r\n    setPreciosDescuentos(descuento_general);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    try {\r\n      handleCalculateNewDiscountVenta();\r\n    } catch (error) {}\r\n  }, [porcentaje]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <DialogContent>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={3} xs={12}>\r\n            <Typography>\r\n              <b>Usuario:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                disabled={true}\r\n                variant=\"outlined\"\r\n                onChange={obtenerDatos}\r\n                value={sesion ? sesion.nombre : \"\"}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={datosVentas?.cliente?.nombre_cliente ? 2 : 3} xs={12}>\r\n            <Typography>\r\n              <b>Cliente:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                disabled={true}\r\n                onChange={obtenerDatos}\r\n                variant=\"outlined\"\r\n                value={\r\n                  datosVentas?.cliente?.nombre_cliente\r\n                    ? datosVentas?.cliente?.nombre_cliente\r\n                    : \"Público General\"\r\n                }\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          {datosVentas?.cliente?.nombre_cliente ? (\r\n            <Grid item md={2} xs={12}>\r\n              <Typography>\r\n                <b>No. Cliente:</b>\r\n              </Typography>\r\n              <Box display=\"flex\">\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  disabled={true}\r\n                  onChange={obtenerDatos}\r\n                  variant=\"outlined\"\r\n                  value={datosVentas ? datosVentas.cliente?.numero_cliente : \"\"}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          ) : null}\r\n\r\n          <Grid item md={datosVentas?.cliente?.nombre_cliente ? 2 : 3} xs={12}>\r\n            <Typography>\r\n              <b>Fecha:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <TextField\r\n                fullWidth\r\n                size=\"small\"\r\n                disabled={true}\r\n                onChange={obtenerDatos}\r\n                variant=\"outlined\"\r\n                value={moment().locale(\"es-mx\").format(\"L\")}\r\n              />\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={3} xs={12}>\r\n            <Typography>\r\n              <b>Fecha Vencimiento:</b>\r\n            </Typography>\r\n            <Box display=\"flex\">\r\n              <TextField\r\n                fullWidth\r\n                type=\"date\"\r\n                onChange={obtenerDatos}\r\n                size=\"small\"\r\n                name=\"fecha_vencimiento\"\r\n                variant=\"outlined\"\r\n              />\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n        <BackdropComponent loading={loading} />\r\n\r\n        <Grid container spacing={3}>\r\n          <Grid item md={6} xs={12}>\r\n            <Box mt={4}>\r\n              <Paper elevation={3}>\r\n                <Box textAlign={\"center\"}>\r\n                  <Typography style={{ fontSize: 17 }}>\r\n                    <b>Agregar descuento</b>\r\n                  </Typography>\r\n                  <Alert severity=\"info\">\r\n                    El descuento se aplica apartir del <b>SUBTOTAL</b>\r\n                  </Alert>\r\n                </Box>\r\n                <Box p={2}>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item md={6}>\r\n                      <Typography>\r\n                        <b>Porcentaje:</b>\r\n                      </Typography>\r\n                      <TextField\r\n                        fullWidth\r\n                        size=\"small\"\r\n                        name=\"descuento\"\r\n                        id=\"form-venta-porsentaje-descuento\"\r\n                        variant=\"outlined\"\r\n                        value={porcentaje}\r\n                        onChange={(e) => obtenerPorciento(e)}\r\n                        type=\"number\"\r\n                        disabled={false}\r\n                        InputProps={{\r\n                          startAdornment: (\r\n                            <InputAdornment position=\"start\">%</InputAdornment>\r\n                          ),\r\n                        }}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item md={6}>\r\n                      <Typography>\r\n                        <b>Dinero a descontar</b>\r\n                      </Typography>\r\n                      <TextField\r\n                        fullWidth\r\n                        size=\"small\"\r\n                        type=\"number\"\r\n                        name=\"precioConDescuento\"\r\n                        onChange={obtenerPrecioText}\r\n                        value={totalDescount}\r\n                        className={classes.input}\r\n                        variant=\"outlined\"\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  <Box mt={2} display=\"flex\" justifyContent=\"flex-end\">\r\n                    <Button\r\n                      variant=\"text\"\r\n                      color=\"secondary\"\r\n                      size=\"medium\"\r\n                      onClick={eliminarDescuento}\r\n                      startIcon={<RemoveCircleTwoToneIcon />}\r\n                    >\r\n                      Quitar descuento\r\n                    </Button>\r\n                  </Box>\r\n                </Box>\r\n              </Paper>\r\n            </Box>\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Box mt={3} width=\"100%\">\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 17 }}>\r\n                  <b>No. Productos: </b> {datosVentas?.productos.length}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 17 }}>\r\n                  <b>Subtotal:</b> $\r\n                  {preciosDescuentos.subTotal\r\n                    ? formatoMexico(preciosDescuentos.subTotal)\r\n                    : 0}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 17 }}>\r\n                  <b>Impuestos:</b> $\r\n                  {preciosDescuentos.impuestos\r\n                    ? formatoMexico(preciosDescuentos.impuestos)\r\n                    : 0}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 16 }}>\r\n                  <b>IVA:</b> $\r\n                  {preciosDescuentos.iva\r\n                    ? formatoMexico(preciosDescuentos.iva)\r\n                    : 0}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 16 }}>\r\n                  <b>IEPS:</b> $\r\n                  {preciosDescuentos.ieps\r\n                    ? formatoMexico(preciosDescuentos.ieps)\r\n                    : 0}\r\n                </Typography>\r\n              </Box>\r\n              <Box m={1}>\r\n                <Typography style={{ fontSize: 17 }}>\r\n                  <b>Descuento:</b>{\" \"}\r\n                  <b style={{ color: \"green\" }}>\r\n                    ${totalDescount ? formatoMexico(totalDescount) : 0}\r\n                  </b>\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box display=\"flex\">\r\n              <Typography style={{ fontSize: 27 }}>\r\n                {`Total: `}\r\n                <b>\r\n                  $\r\n                  {preciosDescuentos.total\r\n                    ? formatoMexico(preciosDescuentos.total)\r\n                    : 0}\r\n                </b>\r\n              </Typography>\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          onClick={crearCotizacion}\r\n        >\r\n          Guardar\r\n        </Button>\r\n      </DialogActions>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { FcCurrencyExchange } from \"react-icons/fc\";\r\nimport NuevaCotizacion from \"./NuevaCotizacion\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nimport useStyles from \"../styles\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\nexport default function Cotizacion({ type }) {\r\n  moment.locale(\"es\");\r\n  const classes = useStyles();\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [tipoVentana, setTipoVentana] = useState(type);\r\n\r\n  const {\r\n    reloadCrearCotizacion,\r\n    setReloadCrearCotizacion,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const { setAlert } = useContext(VentasContext);\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = (tipo) => {\r\n    if (!datosVentas) {\r\n      setAlert({\r\n        message: `Lo sentimos no hay productos que cotizar`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      return null;\r\n    } else {\r\n      if (sesion?.accesos.ventas.cotizaciones.ver === true) {\r\n        setOpen(!open);\r\n      } else {\r\n        console.log(\"pedir permiso\");\r\n        setAbrirPanelAcceso(!abrirPanelAcceso);\r\n        setDepartamentos({\r\n          departamento: \"ventas\",\r\n          subDepartamento: \"cotizaciones\",\r\n          tipo_acceso: \"ver\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadCrearCotizacion === true) {\r\n      setReloadCrearCotizacion(false);\r\n      setTipoVentana(\"GENERAR\");\r\n      setOpen(!open);\r\n    }\r\n  }, [reloadCrearCotizacion]);\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 84) {\r\n      handleClickOpen(\"\", false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={() => handleClickOpen(tipoVentana)}\r\n        disabled={!turnoEnCurso || !datosVentas || (datosVentas && datosVentas.nota_credito)}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcCurrencyExchange style={{ fontSize: 50 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Generar cotizacion</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        open={open}\r\n        maxWidth={tipoVentana === \"GENERAR\" ? \"md\" : \"lg\"}\r\n        onClose={() => setOpen(false)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <AppBar position=\"static\" color=\"default\" elevation={0}>\r\n          <Box display={\"flex\"}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box p={2} display={\"flex\"} alignItems={\"center\"}>\r\n                <FcCurrencyExchange style={{ fontSize: 38 }} />\r\n              </Box>\r\n              <Box p={1} display={\"flex\"} alignItems={\"center\"}>\r\n                <Typography style={{ fontSize: 18 }}>\r\n                  Nueva Cotización\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box p={2}>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"medium\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </AppBar>\r\n        <NuevaCotizacion setOpen={setOpen} />\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/shopping-cart.e10aaa76.svg\";","import React, { Fragment, useContext, useState } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport ShoppinIcon from \"../../../icons/ventas/shopping-cart.svg\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarVenta() {\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    setVentaRetomada,\r\n    setPrecioSelectProductoVenta\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 118 && datosVenta) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  const cancelarVenta = () => {\r\n    localStorage.removeItem(\"DatosVentas\");\r\n    localStorage.removeItem(\"VentaOriginal\");\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    setDatosVentasActual({\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    });\r\n    setPrecioSelectProductoVenta([]);\r\n    setVentaRetomada(datosVenta);\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || !datosVenta}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src={ShoppinIcon}\r\n              alt=\"icono cancelarventa\"\r\n              style={{ width: 35 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>{datosVenta && datosVenta.nota_credito ? \"Cancelar Nota\" : \"Cancelar Venta\"}</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F7</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box\r\n              display=\"flex\"\r\n              alignItems=\"center\"\r\n              justifyContent=\"center\"\r\n              flexGrow={1}\r\n            >\r\n              <Box>\r\n                <img\r\n                  src={ShoppinIcon}\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box>\r\n                <Typography variant=\"h5\">Cancelar Venta</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box ml={10} mb={7} display=\"flex\" alignItems=\"center\">\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Box p={2}>\r\n            <Typography variant=\"h5\">\r\n              ¿Esta seguro que desea cancelar?\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => cancelarVenta()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            autoFocus\r\n          >\r\n            Aceptar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/money.c7672de2.svg\";","export default __webpack_public_path__ + \"static/media/tarjeta-de-credito.a640b329.svg\";","export default __webpack_public_path__ + \"static/media/transferencia-bancaria.76b9df2d.svg\";","export default __webpack_public_path__ + \"static/media/cheque.7fb9372b.png\";","import React, { useState, useEffect, Fragment } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport { Box, TextField, Typography } from \"@material-ui/core\";\r\nimport { FcShop } from \"react-icons/fc\";\r\nimport MoneyIcon from \"../../../icons/ventas/money.svg\"\r\nimport TarjetaIcon from \"../../../icons/ventas/tarjeta-de-credito.svg\"\r\nimport TransfeIcon from \"../../../icons/transferencia-bancaria.svg\"\r\nimport ChequeIcon from \"../../../icons/ventas/cheque.png\"\r\n\r\nexport default function ObtenerMontos({\r\n  montos,\r\n  setMontos,\r\n  totales,\r\n  setTotales,\r\n  venta_credito,\r\n  montoEnCaja,\r\n  setMontoEnCaja,\r\n  datosCliente,\r\n}) {\r\n  const classes = useStyles();\r\n  const [efectivoConstante, setEfectivoConstante] = useState(totales.total);\r\n\r\n  let venta_original = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const total_venta = venta_original\r\n    ? parseFloat(venta_original.total.toFixed(2))\r\n    : 0;\r\n\r\n  const handlerChangeValue = (e, location) => {\r\n    const { value } = e.target;\r\n    switch (location) {\r\n      case \"EFECTIVO\":\r\n        setMontos({ ...montos, efectivo: value });\r\n        setEfectivoConstante(value);\r\n        break;\r\n      case \"TARJETA\":\r\n        setMontos({ ...montos, tarjeta: value });\r\n        break;\r\n\r\n      case \"PUNTOS\":\r\n        const valor = value !== \"\" ? parseInt(value) : 0;\r\n        if (valor <= datosCliente.monedero_electronico) {\r\n          setMontos({\r\n            ...montos,\r\n            puntos: value,\r\n            efectivo: efectivoConstante - valor,\r\n          });\r\n          setTotales({ ...totales, total: total_venta - valor });\r\n        }\r\n        break;\r\n      case \"TRANSFERENCIA\":\r\n        setMontos({ ...montos, transferencia: value });\r\n        break;\r\n      case \"CHEQUE\":\r\n        setMontos({ ...montos, cheque: value });\r\n        break;\r\n      default:\r\n        return alert(\"Error de pago\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (venta_credito) return;\r\n    let monto_caja = 0;\r\n    let monto_pagado =\r\n      parseFloat(montos.efectivo) +\r\n      parseFloat(montos.tarjeta) +\r\n      parseFloat(montos.puntos) +\r\n      parseFloat(montos.transferencia) +\r\n      parseFloat(montos.cheque);\r\n    let cambio_caja = parseFloat(monto_pagado) - total_venta;\r\n\r\n    monto_caja = parseFloat(montos.efectivo - cambio_caja);\r\n\r\n    setMontoEnCaja(monto_caja);\r\n    setTotales({\r\n      ...totales,\r\n      monto_pagado,\r\n      cambio: (monto_pagado - totales.total) - montos.puntos,\r\n    });\r\n  }, [montos]);\r\n\r\n  const clearFieldOnFocus = (e) => {\r\n    const { name, value } = e.target;\r\n    const val = parseFloat(value);\r\n    switch (name) {\r\n      case \"EFECTIVO\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, efectivo: 0 });\r\n          setEfectivoConstante(0);\r\n        }\r\n        break;\r\n      case \"TARJETA\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, tarjeta: 0 });\r\n        }\r\n        break;\r\n      case \"PUNTOS\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, puntos: 0 });\r\n        }\r\n        break;\r\n      case \"TRANSFERENCIA\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, transferencia: 0 });\r\n        }\r\n        break;\r\n      case \"CHEQUE\":\r\n        if (val === 0) {\r\n          setMontos({ ...montos, cheque: 0 });\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const validateCantidadesCorrectas = (e) => {\r\n    const { name, value } = e.target;\r\n    const monto = parseFloat(montoEnCaja);\r\n    switch (name) {\r\n      case \"EFECTIVO\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, efectivo: 0 });\r\n          setEfectivoConstante(0);\r\n        }\r\n        break;\r\n      case \"TARJETA\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, tarjeta: 0 });\r\n        } else if (monto < 0) {\r\n          setMontos({ ...montos, tarjeta: 0 });\r\n        }\r\n        break;\r\n      case \"PUNTOS\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, puntos: 0 });\r\n        } else if (\r\n          monto < 0 &&\r\n          parseFloat(montos.puntos) !== parseFloat(total_venta)\r\n        ) {\r\n          setMontos({ ...montos, puntos: 0 });\r\n        }\r\n        break;\r\n      case \"TRANSFERENCIA\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, transferencia: 0 });\r\n        } else if (monto < 0) {\r\n          setMontos({ ...montos, transferencia: 0 });\r\n        }\r\n        break;\r\n      case \"CHEQUE\":\r\n        if (value === \"\") {\r\n          setMontos({ ...montos, cheque: 0 });\r\n        } else if (monto < 0) {\r\n          setMontos({ ...montos, cheque: 0 });\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className={classes.formInputFlex}>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box>\r\n            <img\r\n              src={MoneyIcon}\r\n              alt=\"icono ventas\"\r\n              className={classes.iconSizeDialogsPequeno}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"caption\">Efectivo</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"EFECTIVO\"\r\n              id=\"form-producto-efectivo\"\r\n              variant=\"outlined\"\r\n              value={montos.efectivo}\r\n              onChange={(e) => handlerChangeValue(e, \"EFECTIVO\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n              autoFocus\r\n              disabled={venta_credito}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box>\r\n            <img\r\n              src={TarjetaIcon}\r\n              alt=\"icono ventas\"\r\n              className={classes.iconSizeDialogsPequeno}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"caption\">Tarjeta</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"TARJETA\"\r\n              variant=\"outlined\"\r\n              value={montos.tarjeta}\r\n              onChange={(e) => handlerChangeValue(e, \"TARJETA\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n              disabled={venta_credito}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box>\r\n            <FcShop style={{ fontSize: 50, cursor: \"pointer\" }} />\r\n          </Box>\r\n          <Typography variant=\"caption\">Puntos</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"PUNTOS\"\r\n              variant=\"outlined\"\r\n              value={montos.puntos}\r\n              onChange={(e) => handlerChangeValue(e, \"PUNTOS\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n              disabled={venta_credito}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box p={0}>\r\n            <img\r\n              src={TransfeIcon}\r\n              alt=\"icono ventas\"\r\n              className={classes.iconSizeDialogsPequeno}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"caption\">Transferencia</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"TRANSFERENCIA\"\r\n              variant=\"outlined\"\r\n              value={montos.transferencia}\r\n              onChange={(e) => handlerChangeValue(e, \"TRANSFERENCIA\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n              disabled={venta_credito}\r\n            />\r\n          </Box>\r\n        </Box>\r\n        <Box width=\"25%\" textAlign=\"center\">\r\n          <Box p={0}>\r\n            <img\r\n              src={ChequeIcon}\r\n              alt=\"icono ventas\"\r\n              className={classes.iconSizeDialogsPequeno}\r\n            />\r\n          </Box>\r\n          <Typography variant=\"caption\">Cheque</Typography>\r\n          <Box display=\"flex\">\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"CHEQUE\"\r\n              variant=\"outlined\"\r\n              value={montos.cheque}\r\n              onChange={(e) => handlerChangeValue(e, \"CHEQUE\")}\r\n              onBlur={validateCantidadesCorrectas}\r\n              onFocus={clearFieldOnFocus}\r\n              disabled={venta_credito}\r\n            />\r\n          </Box>\r\n        </Box>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\n\r\nimport { Box, Grid, Typography } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\n\r\nexport default function InfoTotalesVenta({\r\n  montos,\r\n  totales,\r\n  datosCliente,\r\n  monedero,\r\n  //monederoTotal,\r\n}) {\r\n  return (\r\n    <Fragment>\r\n      <Grid item md={6} xs={12}>\r\n        <Box display=\"flex\">\r\n          <Typography variant=\"subtitle1\">\r\n            <b>Cliente:</b>\r\n          </Typography>\r\n          <Box mr={1} />\r\n          <Typography variant=\"subtitle1\" noWrap>\r\n            {datosCliente.nombre_cliente\r\n              ? datosCliente.nombre_cliente\r\n              : \"Público General\"}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\">\r\n          <Typography variant=\"subtitle1\">\r\n            <b>Dinero disponible:</b>\r\n          </Typography>\r\n          <Box mr={1} />\r\n          <Typography variant=\"subtitle1\">\r\n            $\r\n            {!datosCliente.monedero_electronico\r\n              ? 0.0\r\n              : formatoMexico(\r\n                  datosCliente.monedero_electronico - montos.puntos\r\n                )}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\">\r\n          <Typography variant=\"subtitle1\">\r\n            <b>Dinero elec. a generar:</b>{` ${monedero ? formatoMexico(monedero) : 0.0}`}\r\n          </Typography>\r\n        </Box>\r\n        \r\n        {/* <Box display=\"flex\">\r\n          <Box display=\"flex\" alignItems={\"center\"} mr={2}>\r\n            <Box mt={0.5} mr={0.5}>\r\n              <FcSalesPerformance style={{ fontSize: 19 }} />\r\n            </Box>\r\n            <Typography variant=\"subtitle1\">\r\n              <b>Total puntos que tendrá:</b>\r\n            </Typography>\r\n          </Box>\r\n          <Typography variant=\"subtitle1\">\r\n            $\r\n            {monederoTotal ? formatoMexico(monederoTotal - montos.puntos) : 0.0}\r\n          </Typography>\r\n        </Box> */}\r\n      </Grid>\r\n      <Grid item md={6} xs={12}>\r\n        {/* <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Monto pagado:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {formatoMexico(totales.monto_pagado)}\r\n          </Typography>\r\n        </Box> \r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Subtotal:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {formatoMexico(totales.subtotal)}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Impuestos:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {formatoMexico(totales.impuestos)}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Total:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">$ {formatoMexico(totales.total)}</Typography>\r\n        </Box> */}\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\">\r\n          <Typography style={{ fontSize: \"17px\" }}>\r\n            <b>Descuento:</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography variant=\"h6\">\r\n            $ {totales.descuento ? formatoMexico(totales.descuento) : 0}\r\n          </Typography>\r\n        </Box>\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\">\r\n          <Typography align=\"left\" style={{ fontSize: \"25px\" }}>\r\n            <b>{Math.sign(totales.cambio) === 1 ? \"Cambio:\" : \"Faltante:\"}</b>\r\n          </Typography>\r\n          <Box mx={1} />\r\n          <Typography\r\n            style={\r\n              Math.sign(totales.cambio) === 1\r\n                ? { fontSize: 25, color: \"#4caf50\" }\r\n                : Math.sign(totales.cambio) === 0\r\n                ? { fontSize: 25, color: \"#000\" }\r\n                : { fontSize: 25, color: \"#f6685e\" }\r\n            }\r\n          >\r\n            <b>$ {totales.cambio ? formatoMexico(totales.cambio) : 0}</b>\r\n          </Typography>\r\n        </Box>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, Fragment } from \"react\";\r\nimport { Grid, TextField, Typography } from \"@material-ui/core\";\r\n/* import { Edit } from \"@material-ui/icons\"; */\r\nimport moment from \"moment\";\r\n\r\nexport default function CreditoVenta({\r\n  montos,\r\n  setMontos,\r\n  totales,\r\n  setTotales,\r\n  venta_credito,\r\n  setMontoEnCaja,\r\n  datosCliente,\r\n  setDatosCliente,\r\n  venta_base,\r\n  /* editarCliente,\r\n  setEditarCliente, */\r\n  fechaVencimientoDate,\r\n  setfechaVencimientoDate,\r\n  setAbonoMinimo,\r\n  abono_minimo,\r\n}) {\r\n  let venta_original = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const total_venta = venta_original\r\n    ? parseFloat(venta_original.total.toFixed(2))\r\n    : 0;\r\n\r\n  useEffect(() => {\r\n    setfechaVencimientoDate(\r\n      moment()\r\n        .add(\r\n          datosCliente.dias_credito ? parseInt(datosCliente.dias_credito) : 0,\r\n          \"days\"\r\n        )\r\n        .format(\"YYYY-MM-DD\")\r\n    );\r\n  }, [datosCliente, datosCliente.dias_credito]);\r\n\r\n  useEffect(() => {\r\n    if (venta_credito) {\r\n      setMontos({\r\n        efectivo: 0,\r\n        tarjeta: 0,\r\n        puntos: 0,\r\n        transferencia: 0,\r\n        cheque: 0,\r\n      });\r\n      setTotales({\r\n        ...totales,\r\n\r\n        cambio: 0,\r\n        monto_pagado: total_venta,\r\n      });\r\n      setMontoEnCaja(0);\r\n    } else {\r\n      setMontos({\r\n        ...montos,\r\n        efectivo: total_venta,\r\n      });\r\n      setMontoEnCaja(total_venta);\r\n    }\r\n  }, [venta_credito]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid item xs={12}>\r\n        <Grid container spacing={1}>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Dias de Crédito:</b>\r\n            </Typography>\r\n\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datosCliente.dias_credito === null\r\n                  ? 0\r\n                  : datosCliente.dias_credito\r\n              }\r\n              onChange={(e) =>\r\n                setDatosCliente({\r\n                  ...datosCliente,\r\n                  dias_credito: e.target.value,\r\n                })\r\n              }\r\n              /* disabled={!editarCliente} */\r\n              disabled\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Límite de Crédito:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datosCliente.limite_credito === null\r\n                  ? 0\r\n                  : datosCliente.limite_credito\r\n              }\r\n              /* disabled={!editarCliente} */\r\n              disabled\r\n            />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Crédito Disponible:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              value={\r\n                datosCliente.credito_disponible === null\r\n                  ? 0\r\n                  : datosCliente.credito_disponible\r\n              }\r\n              disabled\r\n            />\r\n          </Grid>\r\n          {/* <Grid item md={2} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Total a Crédito:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              //disabled={!editarCliente} \r\n              disabled\r\n              value={total_venta}\r\n            />\r\n          </Grid> */}\r\n          <Grid item md={6} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Abono mínimo:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"abono_minimo\"\r\n              id=\"form-abono_minim\"\r\n              variant=\"outlined\"\r\n              onChange={(e) => setAbonoMinimo(e.target.value)}\r\n              value={abono_minimo}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} xs={12}>\r\n            <Typography variant=\"caption\">\r\n              <b>Fecha de Vencimiento:</b>\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"codigo_barras\"\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              value={fechaVencimientoDate}\r\n              onChange={(e) => {\r\n                const modelDate = moment(e.target.value).add(1, \"days\");\r\n                const hoy = moment();\r\n                const diasDiff = modelDate.diff(hoy, \"days\");\r\n                setfechaVencimientoDate(e.target.value);\r\n                setDatosCliente({\r\n                  ...datosCliente,\r\n                  dias_credito: diasDiff,\r\n                });\r\n              }}\r\n              /* disabled={!editarCliente} */\r\n              disabled\r\n            />\r\n          </Grid>\r\n          {/* <Grid item md={2} xs={12}>\r\n            <Box display=\"flex\" alignItems=\"flex-end\" height=\"100%\">\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                size=\"large\"\r\n                onClick={() => setEditarCliente(true)}\r\n              >\r\n                <Edit />\r\n              </Button>\r\n            </Box>\r\n          </Grid> */}\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useState, Fragment, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Grid,\r\n  Slide,\r\n  TextField,\r\n  Typography,\r\n  InputAdornment,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport LocalOfferIcon from \"@material-ui/icons/LocalOffer\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function DescuentoVenta({\r\n  venta_base,\r\n  setVentaBase,\r\n  totales,\r\n  setTotales,\r\n  montos,\r\n  setMontos,\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  //States descuento venta\r\n  const [descuentoAplicarVenta, setDescuentoAplicarVenta] = useState(0);\r\n  const [descuentoPorsentajeVenta, setDescuentoPorsentajeVenta] = useState(0);\r\n  const [variables, setVariables] = useState({\r\n    productos: venta_base.productos,\r\n    total: totales.total,\r\n    subTotal: totales.subtotal,\r\n    impuestos: totales.impuestos,\r\n    iva: venta_base.iva,\r\n    ieps: venta_base.ieps,\r\n    descuento: totales.descuento,\r\n    descuento_general_activo: false,\r\n    descuento_general: {\r\n      cantidad_descontado: 0,\r\n      porciento: 0,\r\n      precio_con_descuento: 0,\r\n    },\r\n  });\r\n\r\n  let venta_original = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const subtotal_venta = venta_original\r\n    ? parseFloat(venta_original.subTotal.toFixed(2))\r\n    : 0;\r\n\r\n  const handleClickOpen = () => setOpen(true);\r\n  const handleClose = () => setOpen(false);\r\n\r\n  const handlerChangeDiscountVenta = (PRICE) => {\r\n    /* const { value } = e.target; */\r\n    const value = PRICE.toString();\r\n    if (value && value !== \"0\") {\r\n      const nuevo_subtotal = subtotal_venta;\r\n      const descuento =\r\n        ((nuevo_subtotal - parseFloat(value)) * 100) / subtotal_venta - 100;\r\n      const positiveDiscount = Math.abs(descuento);\r\n      const descuento_porcentaje = parseFloat(positiveDiscount.toFixed(2));\r\n      setDescuentoPorsentajeVenta(descuento_porcentaje);\r\n      handleCalculateNewDiscountVenta(descuento_porcentaje, value);\r\n      return;\r\n    }\r\n    setVariables({\r\n      productos: venta_original.productos,\r\n      total: venta_original.total,\r\n      subTotal: venta_original.subTotal,\r\n      impuestos: venta_original.impuestos,\r\n      iva: venta_original.iva,\r\n      ieps: venta_original.ieps,\r\n      descuento: venta_original.descuento,\r\n      descuento_general_activo: false,\r\n      descuento_general: {\r\n        cantidad_descontado: 0,\r\n        porciento: 0,\r\n        precio_con_descuento: 0,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleChangePorsentDiscount = (PERCENT) => {\r\n    const value = PERCENT.toString();\r\n    if (value && value !== \"0\") {\r\n      const ventaSubtotal = subtotal_venta;\r\n      const val =\r\n        value < 10\r\n          ? parseFloat(`0.0${value.replace(\".\", \"\")}`)\r\n          : parseFloat(value) === 100\r\n          ? 1\r\n          : parseFloat(`0.${value.replace(\".\", \"\")}`);\r\n      const dineroDescuento = ventaSubtotal * val;\r\n      setDescuentoAplicarVenta(dineroDescuento.toFixed(2));\r\n      handleCalculateNewDiscountVenta(value, dineroDescuento.toFixed(2));\r\n      return;\r\n    }\r\n    setVariables({\r\n      productos: venta_original.productos,\r\n      total: venta_original.total,\r\n      subTotal: venta_original.subTotal,\r\n      impuestos: venta_original.impuestos,\r\n      iva: venta_original.iva,\r\n      ieps: venta_original.ieps,\r\n      descuento: venta_original.descuento,\r\n      descuento_general_activo: false,\r\n      descuento_general: {\r\n        cantidad_descontado: 0,\r\n        porciento: 0,\r\n        precio_con_descuento: 0,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleCalculateNewDiscountVenta = (\r\n    descuentoPorsentaje,\r\n    descuentoPrecio\r\n  ) => {\r\n    let venta = { ...venta_original };\r\n    const productStorage = venta.productos;\r\n    //Declarar la variables necesarias (total, subTotal, impuestos, iva ieps, productosFinal)\r\n    let total = 0,\r\n      subTotal = 0,\r\n      impuestos = 0,\r\n      iva = 0,\r\n      ieps = 0,\r\n      descuento = 0;\r\n    let productosFinal = [];\r\n    //Activar loading\r\n\r\n    //Mapearlos\r\n    for (let i = 0; i < productStorage.length; i++) {\r\n      //Obtener el producto valor i\r\n      const product = productStorage[i];\r\n      let precio_actual_object = {};\r\n      const porsentajeNewDescuento = parseFloat(descuentoPorsentaje);\r\n      const dineroDescontadoDescuento = parseFloat(descuentoPrecio);\r\n      /* const dineroDescontadoDescuento = parseFloat(\r\n        product.precio_actual_object.precio_venta *\r\n          parseFloat((`0.${porsentajeNewDescuento}`).toFixed(2))\r\n      );\r\n */\r\n\r\n      /* const dineroDescontadoDescuento =\r\n        porsentajeNewDescuento > 1\r\n          ? porsentajeNewDescuento >= 10\r\n            ? parseFloat(\r\n                (\r\n                  product.precio_actual_object.precio_venta *\r\n                  parseFloat(`0.${porsentajeNewDescuento}`)\r\n                ).toFixed(2)\r\n              )\r\n            : parseFloat(\r\n                (\r\n                  (product.precio_actual_object.precio_venta *\r\n                    parseFloat(`0.${porsentajeNewDescuento}`)) /\r\n                  10\r\n                ).toFixed(2)\r\n              )\r\n          : parseFloat(\r\n              (product.precio_actual_object.precio_venta *\r\n                porsentajeNewDescuento) /\r\n                100\r\n            ); */\r\n      //Calcular los nuevos precios\r\n      const newPrecioVentaProduct = parseFloat(\r\n        (\r\n          (product.precio_actual_object.precio_venta * product.cantidad_venta) - dineroDescontadoDescuento\r\n        ).toFixed(2)\r\n      ); //aqui no se multiplicaba => * product.cantidad_venta\r\n      const newIvaProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(\r\n            `0.${\r\n              product.id_producto.precios.iva < 10\r\n                ? `0${product.id_producto.precios.iva}`\r\n                : product.id_producto.precios.iva\r\n            }`\r\n          )\r\n        ).toFixed(2)\r\n      );\r\n\r\n      const newIepsProduct = parseFloat(\r\n        (\r\n          newPrecioVentaProduct *\r\n          parseFloat(\r\n            `0.${\r\n              product.id_producto.precios.ieps < 10\r\n                ? `0${product.id_producto.precios.ieps}`\r\n                : product.id_producto.precios.ieps\r\n            }`\r\n          )\r\n        ).toFixed(2)\r\n      );\r\n\r\n      const newPrecioNetoProduct = parseFloat(\r\n        (newPrecioVentaProduct + newIvaProduct + newIepsProduct).toFixed(2)\r\n      );\r\n      const newUtilidadProduct = parseFloat(\r\n        (\r\n          ((newPrecioVentaProduct -\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) /\r\n            product.id_producto.precios.precio_de_compra.precio_sin_impuesto) *\r\n          100\r\n        ).toFixed(2)\r\n      );\r\n\r\n      precio_actual_object = {\r\n        cantidad_unidad: 1,\r\n        dinero_descontado: dineroDescontadoDescuento,\r\n        ieps_precio: newIepsProduct,\r\n        iva_precio: newIvaProduct,\r\n        numero_precio: product.precio_actual_object.numero_precio,\r\n        porciento: product.precio_actual_object.porciento\r\n          ? parseFloat(\r\n              (\r\n                parseFloat(product.precio_actual_object.porciento) +\r\n                parseFloat(descuentoPorsentajeVenta)\r\n              ).toFixed(2)\r\n            )\r\n          : parseFloat(descuentoPorsentajeVenta),\r\n        precio_general: 0,\r\n        precio_neto: newPrecioNetoProduct,\r\n        precio_venta: newPrecioVentaProduct,\r\n        unidad_maxima: false,\r\n        utilidad: newUtilidadProduct,\r\n      };\r\n\r\n      if (product.precio_actual_object.unidad_maxima) {\r\n        //Aqui se calcula la unidad por mayoreo (Cajas y costales)\r\n        precio_actual_object.cantidad_unidad =\r\n          product.precio_actual_object.cantidad_unidad;\r\n        precio_actual_object.precio_general =\r\n          newPrecioNetoProduct *\r\n          parseFloat(product.precio_actual_object.cantidad_unidad);\r\n        precio_actual_object.unidad_maxima = true;\r\n      }\r\n      const valorGranel =\r\n        product.granel_producto.granel === true\r\n          ? parseFloat(product.granel_producto.valor)\r\n          : 1;\r\n      //Guardar el nuevo producto en el arreglo\r\n      const ieps_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.ieps_precio *\r\n          valorGranel //aqui se multiplicaba por cantidad => * product.cantidad_venta\r\n        ).toFixed(2)\r\n      ); \r\n      const impuestos_total_producto = parseFloat(\r\n        (\r\n          (precio_actual_object.ieps_precio + precio_actual_object.iva_precio) *\r\n          valorGranel //aqui se multiplicaba por cantidad => * product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const iva_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.iva_precio *\r\n          valorGranel //aqui se multiplicaba por cantidad => * product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const subtotal_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_venta *\r\n          valorGranel //aqui se multiplicaba por cantidad => * product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const total_total_producto = parseFloat(\r\n        (\r\n          precio_actual_object.precio_neto *\r\n          valorGranel //aqui se multiplicaba por cantidad => * product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n      const descuentoProducto = parseFloat(\r\n        (\r\n          parseFloat(precio_actual_object.dinero_descontado) *\r\n          valorGranel //aqui se multiplicaba por cantidad => * product.cantidad_venta\r\n        ).toFixed(2)\r\n      );\r\n\r\n      productosFinal.push({\r\n        ...product,\r\n        precio_actual_object,\r\n        ieps_total_producto,\r\n        impuestos_total_producto,\r\n        iva_total_producto,\r\n        subtotal_total_producto,\r\n        total_total_producto,\r\n        descuento_activo: true,\r\n        descuento: {\r\n          cantidad_unidad: product.precio_actual_object.cantidad_unidad,\r\n          numero_precio: product.precio_actual_object.numero_precio,\r\n          unidad_maxima: product.precio_actual_object.unidad_maxima,\r\n          precio_general: product.precio_actual_object.precio_general,\r\n          precio_neto: newPrecioNetoProduct,\r\n          precio_venta: newPrecioVentaProduct,\r\n          iva_precio: newIvaProduct,\r\n          ieps_precio: newIepsProduct,\r\n          utilidad: newUtilidadProduct,\r\n          dinero_descontado: descuentoProducto,\r\n          porciento: product.precio_actual_object.porciento\r\n            ? parseFloat(\r\n                (\r\n                  parseFloat(product.precio_actual_object.porciento) +\r\n                  parseFloat(porsentajeNewDescuento)\r\n                ).toFixed(2)\r\n              )\r\n            : parseFloat(porsentajeNewDescuento),\r\n        },\r\n      });\r\n      //Sumar los valores\r\n      total += total_total_producto;\r\n      subTotal += subtotal_total_producto;\r\n      impuestos += impuestos_total_producto;\r\n      iva += iva_total_producto;\r\n      ieps += ieps_total_producto;\r\n      descuento += descuentoProducto;\r\n    }\r\n    setVariables({\r\n      productos: productosFinal,\r\n      total,\r\n      subTotal,\r\n      impuestos,\r\n      iva,\r\n      ieps,\r\n      descuento,\r\n      descuento_general_activo: true,\r\n      descuento_general: {\r\n        cantidad_descontado: descuento,\r\n        porciento: parseFloat(descuentoPorsentajeVenta),\r\n        precio_con_descuento: total,\r\n      },\r\n    });\r\n  };\r\n\r\n  const aplicarDescuento = () => {\r\n    let venta = { ...venta_original };\r\n    const {\r\n      productos,\r\n      total,\r\n      subTotal,\r\n      impuestos,\r\n      iva,\r\n      ieps,\r\n      descuento,\r\n      descuento_general_activo,\r\n      descuento_general,\r\n    } = variables;\r\n    /* localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...venta,\r\n        productos: productosFinal,\r\n        total,\r\n        subTotal,\r\n        impuestos,\r\n        iva,\r\n        ieps,\r\n        descuento,\r\n      })\r\n    ); */\r\n    setVentaBase({\r\n      ...venta,\r\n      productos,\r\n      total,\r\n      subTotal,\r\n      impuestos,\r\n      iva,\r\n      ieps,\r\n      descuento,\r\n      descuento_general_activo,\r\n      descuento_general,\r\n    });\r\n    setTotales({ ...totales, total, subtotal: subTotal, impuestos, descuento });\r\n    setMontos({ ...montos, efectivo: total });\r\n    handleClose();\r\n  };\r\n\r\n  const handleInvalidInput = (e) => {\r\n    const { value } = e.target;\r\n    if (!value || value === \"0\" || parseFloat(value) === 0) {\r\n      setVariables({\r\n        productos: venta_original.productos,\r\n        total: venta_original.total,\r\n        subTotal: venta_original.subTotal,\r\n        impuestos: venta_original.impuestos,\r\n        iva: venta_original.iva,\r\n        ieps: venta_original.ieps,\r\n        descuento: venta_original.descuento,\r\n        descuento_general_activo: false,\r\n        descuento_general: {\r\n          cantidad_descontado: 0,\r\n          porciento: 0,\r\n          precio_con_descuento: 0,\r\n        },\r\n      });\r\n      setDescuentoAplicarVenta(0);\r\n      setDescuentoPorsentajeVenta(0);\r\n    }\r\n  };\r\n\r\n  //states para calcular con estos y no se recalcule cuando se ejecuten las funciones\r\n  const [precioVariable, setPrecioVariable] = useState(0);\r\n  const [porcentVariable, setPorcentVariable] = useState(0);\r\n\r\n  const [PRICE] = useDebounce(precioVariable, 700);\r\n  const [PERCENT] = useDebounce(porcentVariable, 700);\r\n\r\n  useEffect(() => {\r\n    handlerChangeDiscountVenta(descuentoAplicarVenta);\r\n  }, [PRICE]);\r\n\r\n  useEffect(() => {\r\n    handleChangePorsentDiscount(descuentoPorsentajeVenta);\r\n  }, [PERCENT]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        size=\"large\"\r\n        variant=\"outlined\"\r\n        color=\"primary\"\r\n        startIcon={<Typography variant=\"h4\"><b>%</b></Typography>}\r\n        onClick={handleClickOpen}\r\n        disabled={!venta_base}\r\n      >\r\n        Descuento\r\n      </Button>\r\n\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n        open={open}\r\n        onClose={handleClose}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box textAlign=\"center\" display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h5\">Descuento</Typography>\r\n            <Button\r\n              color=\"secondary\"\r\n              variant=\"contained\"\r\n              size=\"small\"\r\n              onClick={handleClose}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Alert severity=\"info\">\r\n            El descuento se aplica en el <b>SUBTOTAL</b> de la venta.\r\n          </Alert>\r\n          <Box my={1}>\r\n            <Grid container spacing={2} justifyContent=\"center\">\r\n              <Grid item md={6} xs={12}>\r\n                <Typography>\r\n                  <b>Dinero a descontar:</b>\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  name=\"dinero-descuento\"\r\n                  id=\"form-venta-dinero-descuento\"\r\n                  value={descuentoAplicarVenta}\r\n                  /* onChange={(e) => handlerChangeDiscountVenta(e)} */\r\n                  onChange={(e) => {\r\n                    setDescuentoAplicarVenta(e.target.value);\r\n                    setPrecioVariable(e.target.value);\r\n                  }}\r\n                  variant=\"outlined\"\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">$</InputAdornment>\r\n                    ),\r\n                  }}\r\n                  onBlur={handleInvalidInput}\r\n                />\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n                <Typography>\r\n                  <b>Porcentaje:</b>\r\n                </Typography>\r\n\r\n                <TextField\r\n                  fullWidth\r\n                  size=\"small\"\r\n                  id=\"form-venta-porsentaje-descuento\"\r\n                  variant=\"outlined\"\r\n                  value={descuentoPorsentajeVenta}\r\n                  /* onChange={(e) => handleChangePorsentDiscount(e)} */\r\n                  onChange={(e) => {\r\n                    setDescuentoPorsentajeVenta(e.target.value);\r\n                    setPorcentVariable(e.target.value);\r\n                  }}\r\n                  type=\"number\"\r\n                  InputProps={{\r\n                    startAdornment: (\r\n                      <InputAdornment position=\"start\">%</InputAdornment>\r\n                    ),\r\n                  }}\r\n                  onBlur={handleInvalidInput}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Grid container spacing={2}>\r\n              <Grid item md={2} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  IVA\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.iva)}</b>\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={2} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  IEPS\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.ieps)}</b>\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={3} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  Subtotal\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.subTotal)}</b>\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={2} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  Impuestos\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.impuestos)}</b>\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item md={3} xs={12}>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  Total\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\" align=\"center\">\r\n                  <b>${formatoMexico(variables.total)}</b>\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => aplicarDescuento()}\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            color=\"primary\"\r\n            autoFocus\r\n            startIcon={<Done />}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import { Impresora } from \"../../../components/TicketPrinter/Impresora\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../sucursales/Facturacion/catalogos\";\r\nimport moment from \"moment\";\r\nimport table from 'text-table';\r\nconst RUTA_API = \"http://localhost:8000\";\r\n\r\nexport const imprimirTicketVenta = async (datos) => {\r\n  try {\r\n    const { ventaFinal, monto_pagado, turno, sesion } = datos;\r\n    //sacar la forma de pago\r\n    let forma_pago = \"\";\r\n    formaPago.forEach((element) => {\r\n      if (ventaFinal.forma_pago === element.Value) forma_pago = element.Name;\r\n    });\r\n    // obtener direccion\r\n    let direccion = \"\";\r\n    let municipio = \"\";\r\n    let pais = \"\";\r\n    const { direccionFiscal } = sesion.empresa;\r\n    if (\r\n      direccionFiscal &&\r\n      direccionFiscal.calle &&\r\n      direccionFiscal.no_ext &&\r\n      direccionFiscal.municipio &&\r\n      direccionFiscal.estado &&\r\n      direccionFiscal.pais\r\n    ) {\r\n      direccion = `${direccionFiscal.calle} #${direccionFiscal.no_ext}`;\r\n      municipio = `${direccionFiscal.municipio}, ${direccionFiscal.estado}`;\r\n      pais = direccionFiscal.pais;\r\n    }\r\n\r\n    let tableHead = table([\r\n      ['Articulo      ', 'Cantidad', 'Precio', 'Importe']\r\n    ],{ align: [ 'l', 'r' ] });\r\n\r\n    let tableBody = [{align: [ 'l', 'r' ]}];\r\n\r\n    let tableTotal = table([\r\n      [`SUBTOTAL:  `, `${formatoMexico(ventaFinal.subTotal)}`],\r\n      [`IMPUESTOS:  `, `${formatoMexico(ventaFinal.impuestos)}`],\r\n      [`TOTAL:  `, `${formatoMexico(ventaFinal.total)}`],\r\n    ],{align: [ 'l', 'r' ]})\r\n    let tablePago = table([\r\n      [`Pago con: ${forma_pago}`, `${formatoMexico(monto_pagado)}`],\r\n      [`Su cambio:  `, `${formatoMexico(ventaFinal.cambio)}`],\r\n    ],{align: [ 'l', 'r' ]})\r\n\r\n    ventaFinal.productos.forEach((res) => {\r\n      const { nombre_comercial } = res.id_producto.datos_generales;\r\n      tableBody.push([`${nombre_comercial}`, `${res.cantidad_venta} ${res.unidad}`, ` ${formatoMexico(res.precio_actual_object.precio_neto)}`, `${formatoMexico(res.precio_a_vender)}`])\r\n    });\r\n\r\n    tableBody = table(tableBody);\r\n\r\n    let impresora = new Impresora(RUTA_API);\r\n    impresora.cutPartial();\r\n    impresora.setFontSize(1, 1);\r\n    impresora.setEmphasize(0);\r\n    impresora.write(\"Punto de venta CAFI\\n\");\r\n    impresora.write(`RFC ${sesion.empresa.rfc}\\n`);\r\n    impresora.write(`Regimen fiscal ${sesion.empresa.regimen_fiscal}\\n`);\r\n    impresora.write(`Domicilio: ${direccion}\\n`);\r\n    impresora.write(`${municipio}\\n`);\r\n    impresora.write(`${pais}\\n`);\r\n    impresora.feed(1);\r\n    impresora.write(\"****Ticket de venta****\\n\");\r\n    impresora.write(`Caja ${turno.numero_caja}\\n`);\r\n    impresora.write(`Folio: ${ventaFinal.folio}\\n`);\r\n    impresora.write(\r\n      `Fecha: ${moment()\r\n        .locale(\"es-mx\")\r\n        .format(\"DD/MM/YYYY\")} Hora: ${moment()\r\n        .locale(\"es-mx\")\r\n        .format(\"LTS\")}\\n`\r\n    );\r\n    impresora.feed(1);\r\n    impresora.write(\"=======================================\\n\");\r\n    impresora.setAlign(\"right\");\r\n    impresora.write(`${tableHead}\\n`);\r\n    impresora.write(\"_______________________________________\\n\");\r\n    impresora.write(`${tableBody}\\n`);\r\n    impresora.write(\"----------------------------------------\\n\");\r\n    impresora.write(`${tableTotal}\\n`);\r\n    impresora.write(\"----------------------------------------\\n\");\r\n    impresora.write(`${tablePago}\\n`);\r\n    impresora.write(\"========================================\\n\");\r\n    impresora.feed(1);\r\n    impresora.setAlign(\"center\");\r\n    impresora.write(\"***Gracias por su compra***\");\r\n    impresora.feed(3);\r\n    impresora.cut();\r\n    /* impresora.cutPartial(); // Pongo este y también cut porque en ocasiones no funciona con cut, solo con cutPartial */\r\n\r\n    await impresora.end();\r\n\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","const puerto = \"8080\";\r\n\r\nexport const abrirCajonQuery = async (impresora) => {\r\n  try {\r\n    const result = await fetch(\r\n      `http://localhost:${puerto}/?impresora=${impresora}`\r\n    );\r\n    const resultDecodificada = await result.json();\r\n    if (result.status === 200) {\r\n      return { success: true, message: \"Cajon abierto\" };\r\n    } else {\r\n      return { success: false, message: resultDecodificada };\r\n    }\r\n  } catch (error) {\r\n    console.log(error)\r\n    return { success: false, message: \"Error al abrir cajon, No se detecto impresora\" };\r\n  }\r\n};\r\n","export default __webpack_public_path__ + \"static/media/cart.20c27a2c.svg\";","import React, { useState, useContext, Fragment } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport ClearIcon from \"@material-ui/icons/Clear\";\r\nimport { Close, Done } from \"@material-ui/icons\";\r\nimport {\r\n  formatoMexico,\r\n  NumerosaLetras,\r\n  numerosRandom,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { formaPago } from \"../../sucursales/Facturacion/catalogos\";\r\nimport { calcularMonedero } from \"./calcularMonedero\";\r\nimport { CREAR_VENTA } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport ObtenerMontos from \"./Montos\";\r\nimport InfoTotalesVenta from \"./InfoVentaTotales\";\r\nimport CreditoVenta from \"./Credito\";\r\nimport DescuentoVenta from \"./Descuento\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport { imprimirTicketVenta } from \"./PrintTicketVenta\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\nimport { abrirCajonQuery } from \"../../../components/TicketPrinter/AbrirCajon\";\r\nimport CartIcon from \"../../../icons/ventas/cart.svg\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst initial_state_montos = {\r\n  efectivo: 0,\r\n  tarjeta: 0,\r\n  puntos: 0,\r\n  transferencia: 0,\r\n  cheque: 0,\r\n};\r\n\r\nconst initial_state_totales = {\r\n  subtotal: 0,\r\n  impuestos: 0,\r\n  total: 0,\r\n  descuento: 0,\r\n  cambio: 0,\r\n  monto_pagado: 0,\r\n};\r\n\r\nexport default function CerrarVenta() {\r\n  const classes = useStyles();\r\n  const [cambio, setCambio] = useState(false);\r\n  const sesionUsuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const impresora = localStorage.getItem(\"cafiTicketPrint\");\r\n  const [open, setOpen] = useState(false);\r\n  //Datos del context\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    setOpenBackDrop,\r\n    setVentaRetomada,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n  const { isOnline, saveVentasToCloud } = useContext(AccesosContext);\r\n  //States de los montos a pagar\r\n  const [montos, setMontos] = useState(initial_state_montos);\r\n  const [totales, setTotales] = useState(initial_state_totales);\r\n  const [venta_credito, setVentaCredito] = useState(false);\r\n  const [credito_disponible, setCreditoDisponible] = useState(false);\r\n  const [fechaVencimientoDate, setfechaVencimientoDate] = useState(\"\");\r\n  const [limite_superado, setLimiteSuperado] = useState(false);\r\n  const [monederoTotal, setMonederoTotal] = useState(0);\r\n  const [montoEnCaja, setMontoEnCaja] = useState(0);\r\n  const [venta_base, setVentaBase] = useState(0);\r\n  const [editarCliente, setEditarCliente] = useState(false);\r\n  const [datosCliente, setDatosCliente] = useState({});\r\n  const [monedero, setMonedero] = useState(0);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [abono_minimo, setAbonoMinimo] = useState(0);\r\n  const [fecha_venta, setFechaVenta] = useState(\"\");\r\n\r\n  const [createVenta] = useMutation(CREAR_VENTA);\r\n\r\n  const handleClickOpen = () => {\r\n    if (!open) {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      setVentaBase(venta);\r\n      const { cliente, subTotal, impuestos, total } = venta;\r\n\r\n      const datos_cliente = venta && cliente ? cliente : {};\r\n      if (datos_cliente.credito_disponible) {\r\n        setCreditoDisponible(true);\r\n      } else {\r\n        setCreditoDisponible(false);\r\n      }\r\n      setDatosCliente(datos_cliente);\r\n      setMontoEnCaja(venta === null ? 0 : parseFloat(total.toFixed(2)));\r\n      setTotales({\r\n        subtotal: venta === null ? 0 : parseFloat(subTotal.toFixed(2)),\r\n        impuestos: venta === null ? 0 : parseFloat(impuestos.toFixed(2)),\r\n        total: venta === null ? 0 : parseFloat(total.toFixed(2)),\r\n        descuento: 0,\r\n        cambio: 0,\r\n        monto_pagado: venta === null ? 0 : parseFloat(total.toFixed(2)),\r\n      });\r\n      setMontos({\r\n        efectivo: venta === null ? 0 : parseFloat(total.toFixed(2)),\r\n        tarjeta: 0,\r\n        puntos: 0,\r\n        transferencia: 0,\r\n        cheque: 0,\r\n      });\r\n      const monedero_generado = calcularMonedero(venta);\r\n      setMonedero(parseFloat(monedero_generado));\r\n      setMonederoTotal(\r\n        !cliente.monedero_electronico\r\n          ? parseFloat(monedero_generado)\r\n          : parseFloat(cliente.monedero_electronico) +\r\n              parseFloat(monedero_generado)\r\n      );\r\n    }\r\n    setOpen(!open);\r\n  };\r\n\r\n  const hancleClickCerrarVentaCambio = () => {\r\n    setCambio(true);\r\n\r\n    //Limpiar el storage de ventas\r\n    localStorage.removeItem(\"DatosVentas\");\r\n    localStorage.removeItem(\"VentaOriginal\");\r\n    //Actualizar la tabla de ventas\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n    setDatosVentasActual({\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    });\r\n  };\r\n\r\n  const handleCloseCambio = () => {\r\n    //limpiar states\r\n    setCambio(false);\r\n    resetStates();\r\n  };\r\n\r\n  const resetStates = () => {\r\n    setDatosCliente({});\r\n    setMonedero(0);\r\n    setfechaVencimientoDate(\"\");\r\n    setMonederoTotal(0);\r\n    setVentaBase(0);\r\n    setEditarCliente(false);\r\n    setVentaCredito(false);\r\n\r\n    //States de los montos a pagar\r\n    setMontoEnCaja(0);\r\n    setTotales(initial_state_totales);\r\n    setMontos(initial_state_montos);\r\n    setVentaRetomada(null);\r\n    setAbonoMinimo(0);\r\n    setFechaVenta(\"\");\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const tecla_escape = event.keyCode;\r\n    if (tecla_escape === 27 && datosVenta) {\r\n      handleClickOpen();\r\n    } /* else if (tecla_escape === 13 && open && venta_base){\r\n      console.log(\"ejecuta 1\");\r\n      handleClickFinishVenta();\r\n      return\r\n    } */ else if (\r\n      tecla_escape === 13 &&\r\n      cambio &&\r\n      !open\r\n    ) {\r\n      handleCloseCambio();\r\n    }\r\n  }\r\n\r\n  const handleClickFinishVenta = async () => {\r\n    if (venta_credito && venta_base.total > datosCliente.credito_disponible) {\r\n      setLimiteSuperado(true);\r\n      return;\r\n    }\r\n    if (totales.cambio < 0) return;\r\n    setLimiteSuperado(false);\r\n    try {\r\n      setOpenBackDrop(true);\r\n      //Obtener datos del storage\r\n      const sesion = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n      const usuario = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n      //Obtener ventad final\r\n      const ventaFinal = { ...venta_base };\r\n      //Generar folio\r\n      const folio = numerosRandom(100000000000, 999999999999);\r\n      //Agregar folio venta\r\n      ventaFinal.folio = `${folio}`;\r\n      //Agregar los montos en caja\r\n      const montosEnCaja = {\r\n        monto_efectivo: {\r\n          monto: parseFloat(montos.efectivo),\r\n          metodo_pago: formaPago[0].Value,\r\n        },\r\n        monto_tarjeta_debito: {\r\n          monto: parseFloat(montos.tarjeta),\r\n          metodo_pago: formaPago[3].Value,\r\n        },\r\n        monto_tarjeta_credito: {\r\n          monto: 0,\r\n          metodo_pago: formaPago[3].Value,\r\n        },\r\n        monto_creditos: {\r\n          monto: venta_credito ? ventaFinal.total : 0,\r\n          metodo_pago: \"99\",\r\n        },\r\n        monto_monedero: {\r\n          monto: parseFloat(montos.puntos),\r\n          metodo_pago: formaPago[4].Value,\r\n        },\r\n        monto_transferencia: {\r\n          monto: parseFloat(montos.transferencia),\r\n          metodo_pago: formaPago[2].Value,\r\n        },\r\n        monto_cheques: {\r\n          monto: parseFloat(montos.cheque),\r\n          metodo_pago: formaPago[1].Value,\r\n        },\r\n        monto_vales_despensa: {\r\n          monto: 0,\r\n          metodo_pago: formaPago[6].Value,\r\n        },\r\n      };\r\n\r\n      const abonoMinimo = parseFloat(abono_minimo);\r\n      ventaFinal.montos_en_caja = montosEnCaja;\r\n      //Colocamos si es venta a credito\r\n      ventaFinal.credito = venta_credito;\r\n      ventaFinal.abono_minimo = venta_credito && abonoMinimo ? abonoMinimo : 0;\r\n      //Agregar descuentos de ventas\r\n      ventaFinal.descuento_general_activo = ventaFinal.descuento_general_activo\r\n        ? ventaFinal.descuento_general_activo\r\n        : false;\r\n      ventaFinal.descuento_general = ventaFinal.descuento_general\r\n        ? ventaFinal.descuento_general\r\n        : null;\r\n      //Declarar dias de credito como false\r\n      ventaFinal.dias_de_credito_venta = datosCliente\r\n        ? datosCliente.dias_credito\r\n        : null;\r\n      ventaFinal.fecha_de_vencimiento_credito = fechaVencimientoDate;\r\n      ventaFinal.fecha_vencimiento_cotizacion = null;\r\n      ventaFinal.cambio = totales.cambio;\r\n      //Editar cliente\r\n      ventaFinal.editar_cliente = editarCliente;\r\n      //Agregando los puntos finales\r\n      //si pago con puntos y su compra genero puntos, hacer que no genere esos puntos\r\n      ventaFinal.puntos_totales_venta =\r\n        parseFloat(montos.puntos) > 0\r\n          ? monederoTotal - monedero\r\n          : monederoTotal;\r\n      //poner metodo y forma de pago\r\n      ventaFinal.metodo_pago = venta_credito ? \"PPD\" : \"PUE\";\r\n      let numero_mayor = 0;\r\n      let forma_pago;\r\n\r\n      if (venta_credito) {\r\n        forma_pago = \"99\";\r\n      } else {\r\n        Object.keys(montosEnCaja).forEach((key) => {\r\n          if (montosEnCaja[key].monto > numero_mayor) {\r\n            numero_mayor = montosEnCaja[key].monto;\r\n            forma_pago = montosEnCaja[key].metodo_pago;\r\n          }\r\n        });\r\n      }\r\n\r\n      if (fecha_venta) ventaFinal.fecha_venta = fecha_venta;\r\n\r\n      ventaFinal.forma_pago = forma_pago;\r\n      ventaFinal.turno = sesion.horario_en_turno;\r\n\r\n      //Enviar los datos\r\n      let ventaTo = await createVenta({\r\n        variables: {\r\n          input: ventaFinal,\r\n          empresa: sesion.empresa,\r\n          sucursal: sesion.sucursal,\r\n          usuario: usuario._id,\r\n          caja: sesion.id_caja,\r\n          isOnline: isOnline,\r\n        },\r\n      });\r\n      if (!isOnline) {\r\n        //guardarEnStorageVentas\r\n\r\n        saveVentasToCloud({\r\n          ...ventaTo.data.createVenta.datos_to_save_storage,\r\n          empresa: sesion.empresa,\r\n          sucursal: sesion.sucursal,\r\n          cliente: ventaFinal.cliente,\r\n          productos: ventaFinal.productos,\r\n          puntos_totales_venta: ventaFinal.puntos_totales_venta,\r\n          usuario: usuario._id,\r\n          caja: ventaFinal.caja,\r\n          credito: ventaFinal.credito,\r\n          forma_pago: ventaFinal.forma_pago,\r\n          tipo_venta: ventaFinal.tipo_venta,\r\n          montos_en_caja: ventaFinal.montos_en_caja,\r\n        });\r\n        setOpenBackDrop(false);\r\n        setOpen(false);\r\n      }\r\n\r\n      //print ticket\r\n      if (ventaFinal.tipo_emision === \"TICKET\") {\r\n        let datos = {\r\n          ventaFinal,\r\n          monto_pagado: numero_mayor,\r\n          turno: sesion,\r\n          sesion: sesionUsuario,\r\n        };\r\n        await imprimirTicketVenta(datos);\r\n      }\r\n      const resultCajon = await abrirCajonQuery(impresora);\r\n      if (resultCajon.success === true) {\r\n        setAlert({\r\n          message: `Cajon abierto`,\r\n          status: \"success\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setAlert({\r\n          message: `Error al abrir cajon: ${resultCajon.message}`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      //Quitar loading\r\n      setOpenBackDrop(false);\r\n      setOpen(false);\r\n      hancleClickCerrarVentaCambio();\r\n    } catch (error) {\r\n      setOpenBackDrop(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n      console.log(error);\r\n      if (error.networkError.result) {\r\n        console.log(error.networkError.result.errors);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!turnoEnCurso || !datosVenta}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img src={CartIcon} alt=\"icono ventas\" style={{ width: 38 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Pagar</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>ESC</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"sm\"\r\n        open={open}\r\n        onClose={() => handleClickOpen()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: \"top\",\r\n            horizontal: \"center\",\r\n          }}\r\n          open={limite_superado}\r\n          autoHideDuration={5000}\r\n          onClose={() => setLimiteSuperado(false)}\r\n          message=\"La cantidad total de la venta supera el crédito disponible del cliente\"\r\n          action={\r\n            <IconButton\r\n              size=\"small\"\r\n              aria-label=\"close\"\r\n              color=\"inherit\"\r\n              onClick={() => setLimiteSuperado(false)}\r\n            >\r\n              <Close fontSize=\"small\" />\r\n            </IconButton>\r\n          }\r\n        />\r\n        <DialogTitle>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Box>\r\n              <img src={CartIcon} alt=\"icono ventas\" style={{ width: 40 }} />\r\n            </Box>\r\n            <Box mx={2} flexGrow={1}>\r\n              <Typography variant=\"h5\">Terminar Venta</Typography>\r\n            </Box>\r\n            <Box mx={2}>\r\n              <TextField\r\n                size=\"small\"\r\n                variant=\"outlined\"\r\n                type=\"date\"\r\n                defaultValue={moment().locale(\"es-mx\").format(\"YYYY-MM-DD\")}\r\n                InputProps={{\r\n                  inputProps: {\r\n                    max: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n                  },\r\n                }}\r\n                onChange={(e) => setFechaVenta(e.target.value)}\r\n                disabled={!sesionUsuario.accesos.ventas.administrador.ver}\r\n              />\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClickOpen()}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            <Typography style={{ fontSize: \"18px\" }}>\r\n              <b>{venta_credito ? \"Total a crédito\" : \"Total a pagar\"}</b>\r\n            </Typography>\r\n\r\n            <Typography variant=\"h2\" style={{ color: \"#4caf50\" }}>\r\n              <b>$ {formatoMexico(totales.total)}</b>\r\n            </Typography>\r\n            <Typography style={{ color: \"#4caf50\" }}>\r\n              <b>{NumerosaLetras(totales.total)}</b>\r\n            </Typography>\r\n          </Box>\r\n          <ObtenerMontos\r\n            montos={montos}\r\n            setMontos={setMontos}\r\n            totales={totales}\r\n            setTotales={setTotales}\r\n            venta_credito={venta_credito}\r\n            montoEnCaja={montoEnCaja}\r\n            setMontoEnCaja={setMontoEnCaja}\r\n            datosCliente={datosCliente}\r\n          />\r\n          <Box my={1}>\r\n            <Grid container spacing={2} justifyContent=\"space-between\">\r\n              <InfoTotalesVenta\r\n                montos={montos}\r\n                totales={totales}\r\n                datosCliente={datosCliente}\r\n                monedero={monedero}\r\n                monederoTotal={monederoTotal}\r\n              />\r\n\r\n              <Box display={venta_credito ? \"flex\" : \"none\"}>\r\n                <CreditoVenta\r\n                  montos={montos}\r\n                  setMontos={setMontos}\r\n                  totales={totales}\r\n                  setTotales={setTotales}\r\n                  venta_credito={venta_credito}\r\n                  venta_base={venta_base}\r\n                  setMontoEnCaja={setMontoEnCaja}\r\n                  datosCliente={datosCliente}\r\n                  setDatosCliente={setDatosCliente}\r\n                  editarCliente={editarCliente}\r\n                  setEditarCliente={setEditarCliente}\r\n                  fechaVencimientoDate={fechaVencimientoDate}\r\n                  setfechaVencimientoDate={setfechaVencimientoDate}\r\n                  setAbonoMinimo={setAbonoMinimo}\r\n                  abono_minimo={abono_minimo}\r\n                />\r\n              </Box>\r\n            </Grid>\r\n          </Box>\r\n        </DialogContent>\r\n\r\n        <DialogActions style={{ justifyContent: \"space-between\" }}>\r\n          <Box display={\"flex\"} justifyContent=\"flex-start\">\r\n            <Box pr={1}>\r\n              {venta_credito ? (\r\n                <Button\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  onClick={() => {\r\n                    setVentaCredito(false);\r\n                    setEditarCliente(false);\r\n                  }}\r\n                  startIcon={<ClearIcon />}\r\n                >\r\n                  Cancelar\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  size=\"large\"\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={() => {\r\n                    setVentaCredito(true);\r\n                  }}\r\n                  startIcon={\r\n                    <Typography variant=\"h4\">\r\n                      <b>$</b>\r\n                    </Typography>\r\n                  }\r\n                  disabled={!credito_disponible || !venta_base}\r\n                >\r\n                  Credito\r\n                </Button>\r\n              )}\r\n            </Box>\r\n            <DescuentoVenta\r\n              venta_base={venta_base}\r\n              setVentaBase={setVentaBase}\r\n              montos={montos}\r\n              setMontos={setMontos}\r\n              totales={totales}\r\n              setTotales={setTotales}\r\n            />\r\n          </Box>\r\n          <Button\r\n            onClick={() => {\r\n              handleClickFinishVenta();\r\n            }}\r\n            size=\"large\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            autoFocus\r\n            disabled={!venta_base || totales.cambio < 0}\r\n            startIcon={<Done />}\r\n          >\r\n            Terminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Dialog\r\n        open={cambio}\r\n        onClose={() => handleCloseCambio()}\r\n        TransitionComponent={Transition}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle style={{ textAlign: \"center\" }}>\r\n          <Alert\r\n            severity=\"success\"\r\n            action={\r\n              <IconButton\r\n                onClick={() => handleCloseCambio()}\r\n                size=\"small\"\r\n                color=\"inherit\"\r\n                autoFocus\r\n              >\r\n                <Close style={{ fontSize: \"25px\" }} />\r\n              </IconButton>\r\n            }\r\n          >\r\n            Venta finalizada\r\n          </Alert>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box mb={2}>\r\n            <Typography variant=\"h6\" align=\"center\">\r\n              Su cámbio\r\n            </Typography>\r\n            <Typography variant=\"h3\" align=\"center\">\r\n              ${formatoMexico(totales.cambio)}\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","export const calcularMonedero = (venta) => {\r\n    let suma = 0;\r\n    if (venta) {\r\n      venta.productos.forEach((element) => {\r\n        if (element.id_producto.precios.monedero) {\r\n          //multiplicacion del puntos de este producto con el total de este\r\n          const { monedero_electronico } = element.id_producto.precios;\r\n          const resultado = monedero_electronico * element.precio_a_vender;\r\n          suma += resultado;\r\n        }\r\n      });\r\n    }\r\n    return suma;\r\n  };","import React, { useState, useContext, Fragment, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  Paper,\r\n  Slide,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n  Checkbox,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport useStyles from \"../styles\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport {\r\n  findProductArray,\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport MoneyIcon from \"../../../icons/ventas/money.svg\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function PreciosProductos() {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  // const [selected, setSelected] = useState([]);\r\n\r\n  const [preciosProductos, setPreciosProductos] = useState({});\r\n\r\n  const {\r\n    productoCambioPrecio,\r\n    precioSelectProductoVenta,\r\n    setPrecioSelectProductoVenta,\r\n    setUpdateTablaVentas,\r\n    updateTablaVentas,\r\n  } = useContext(VentasContext);\r\n\r\n  const {\r\n    reloadVerPrecios,\r\n    setReloadVerPrecios,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const [selectPrisingProduct, setSelectPrisingProduct] = useState(\r\n    precioSelectProductoVenta.length > 0 ? precioSelectProductoVenta[0] : {}\r\n  );\r\n\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.precios_productos.ver === true) {\r\n      setOpen(!open);\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"precios_productos\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setPreciosProductos(productoCambioPrecio);\r\n  }, [productoCambioPrecio]);\r\n\r\n  useEffect(() => {\r\n    if (reloadVerPrecios === true) {\r\n      setOpen(!open);\r\n      setReloadVerPrecios(false);\r\n    }\r\n  }, [reloadVerPrecios]);\r\n\r\n  const handleAceptChangePrising = async () => {\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    if (\r\n      selectPrisingProduct.precio_neto > 0 ||\r\n      precioSelectProductoVenta.length > 0\r\n    ) {\r\n      const newProductoPrecioNuevo = { ...productoCambioPrecio };\r\n      const newProductoPrecioActual = { ...productoCambioPrecio };\r\n\r\n      const producto_encontrado = await findProductArray(productoCambioPrecio);\r\n\r\n      if (producto_encontrado.found) {\r\n        const new_resta = await calculatePrices2({\r\n          newP: newProductoPrecioNuevo,\r\n          cantidad: newProductoPrecioNuevo.cantidad_venta,\r\n          precio_boolean: true,\r\n          precio: newProductoPrecioNuevo.precio_actual_object,\r\n          granel: newProductoPrecioNuevo.granel_producto,\r\n          origen: \"\",\r\n        });\r\n\r\n        /* console.log(precioSelectProductoVenta[0]); */\r\n        const new_suma = await calculatePrices2({\r\n          newP: newProductoPrecioActual,\r\n          cantidad: newProductoPrecioActual.cantidad_venta,\r\n          precio_boolean: true,\r\n          precio: precioSelectProductoVenta[0],\r\n          granel: newProductoPrecioActual.granel_producto,\r\n          origen: \"Tabla\",\r\n        });\r\n\r\n        newProductoPrecioActual.precio_a_vender =\r\n          precioSelectProductoVenta[0].precio_neto;\r\n        newProductoPrecioActual.precio_seleccionado = true;\r\n        newProductoPrecioActual.precio_actual_producto = parseFloat(\r\n          precioSelectProductoVenta[0].precio_neto.toFixed(2)\r\n        );\r\n        newProductoPrecioActual.precio_actual_object =\r\n          precioSelectProductoVenta[0];\r\n\r\n        newProductoPrecioActual.iva_total_producto = parseFloat(\r\n          new_suma.ivaCalculo\r\n        );\r\n        newProductoPrecioActual.ieps_total_producto = parseFloat(\r\n          new_suma.iepsCalculo\r\n        );\r\n        newProductoPrecioActual.impuestos_total_producto = parseFloat(\r\n          new_suma.impuestoCalculo\r\n        );\r\n        newProductoPrecioActual.subtotal_total_producto = parseFloat(\r\n          new_suma.subtotalCalculo\r\n        );\r\n        newProductoPrecioActual.total_total_producto = parseFloat(\r\n          new_suma.totalCalculo\r\n        );\r\n\r\n        newProductoPrecioActual.precio_actual_object = {\r\n          cantidad_unidad: precioSelectProductoVenta[0].cantidad_unidad\r\n            ? precioSelectProductoVenta[0].cantidad_unidad\r\n            : null,\r\n          numero_precio: precioSelectProductoVenta[0].numero_precio\r\n            ? precioSelectProductoVenta[0].numero_precio\r\n            : null,\r\n          unidad_maxima: precioSelectProductoVenta[0].unidad_maxima\r\n            ? precioSelectProductoVenta[0].unidad_maxima\r\n            : null,\r\n          precio_general: precioSelectProductoVenta[0].precio_general\r\n            ? precioSelectProductoVenta[0].precio_general\r\n            : null,\r\n          precio_neto: precioSelectProductoVenta[0].precio_neto\r\n            ? precioSelectProductoVenta[0].precio_neto\r\n            : null,\r\n          precio_venta: precioSelectProductoVenta[0].precio_venta\r\n            ? precioSelectProductoVenta[0].precio_venta\r\n            : null,\r\n          iva_precio: precioSelectProductoVenta[0].iva_precio\r\n            ? precioSelectProductoVenta[0].iva_precio\r\n            : null,\r\n          ieps_precio: precioSelectProductoVenta[0].ieps_precio\r\n            ? precioSelectProductoVenta[0].ieps_precio\r\n            : null,\r\n          utilidad: precioSelectProductoVenta[0].utilidad\r\n            ? precioSelectProductoVenta[0].utilidad\r\n            : null,\r\n          porciento: precioSelectProductoVenta[0].porciento\r\n            ? precioSelectProductoVenta[0].porciento\r\n            : null,\r\n          dinero_descontado: precioSelectProductoVenta[0].dinero_descontado\r\n            ? precioSelectProductoVenta[0].dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newProductoPrecioActual\r\n        );\r\n\r\n        /* console.log(\"venta >>\", venta_existente.subTotal);\r\n\r\n        console.log(\"resta >>\", new_resta.subtotalCalculo);\r\n\r\n        console.log(\"suma >>\", new_suma.subtotalCalculo); */\r\n\r\n        const CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_suma.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_suma.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_suma.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_suma.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_suma.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_suma.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_suma.monederoCalculo,\r\n        };\r\n\r\n        //Guardarlo en el localStorage\r\n        localStorage.setItem(\r\n          \"DatosVentas\",\r\n          JSON.stringify({\r\n            ...CalculosData,\r\n            cliente:\r\n              venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n            venta_cliente:\r\n              venta_actual.venta_cliente === true\r\n                ? venta_actual.venta_cliente\r\n                : false,\r\n            productos: productosVentasTemp,\r\n            tipo_emision: venta_actual.tipo_emision\r\n              ? venta_actual.tipo_emision\r\n              : \"TICKET\",\r\n          })\r\n        );\r\n        // newProductoPrecio = {...newProductoPrecio};\r\n        setUpdateTablaVentas(!updateTablaVentas);\r\n        setPrecioSelectProductoVenta([]);\r\n        setPreciosProductos({});\r\n        //Cerrar modal\r\n        handleClickOpen();\r\n      } else {\r\n        console.log(\"Producto no encontrado\");\r\n      }\r\n    } else {\r\n      setAlert({\r\n        message: \"Este precio no es valido.\",\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClick = (precio) => {\r\n    let newSelected = [];\r\n    newSelected = newSelected.concat([], precio);\r\n    setSelectPrisingProduct(precio);\r\n    setPrecioSelectProductoVenta(newSelected);\r\n  };\r\n\r\n  const isSelected = (name) => precioSelectProductoVenta.indexOf(name) !== -1;\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 114) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || !precioSelectProductoVenta.length || (datosVentas && datosVentas.nota_credito)}\r\n      >\r\n        <Box>\r\n          <Box\r\n            style={\r\n              !turnoEnCurso || !precioSelectProductoVenta.length || (datosVentas && datosVentas.nota_credito)\r\n                ? {\r\n                    pointerEvents: \"none\",\r\n                    opacity: 0.5,\r\n                  }\r\n                : null\r\n            }\r\n          >\r\n            <img\r\n              src={MoneyIcon}\r\n              alt=\"icono money\"\r\n              style={{ fontSize: 25 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Precios</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F3</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={() => setOpen(!open)}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"space-between\">\r\n            <Typography variant=\"h6\">Precios de Producto</Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={() => setOpen(!open)}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box my={1}>\r\n            <Typography variant=\"h6\" align=\"center\">\r\n              {productoCambioPrecio\r\n                ? productoCambioPrecio?.id_producto?.datos_generales\r\n                    ?.nombre_comercial\r\n                : \"\"}\r\n            </Typography>\r\n          </Box>\r\n          <Paper variant=\"outlined\">\r\n            <TableContainer>\r\n              <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell padding=\"checkbox\"></TableCell>\r\n                    <TableCell>No. Precio</TableCell>\r\n                    <TableCell>Precio neto</TableCell>\r\n                    <TableCell>Unidad mayoreo</TableCell>\r\n                    <TableCell>Utilidad</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {preciosProductos?.id_producto?.precios?.precios_producto?.map(\r\n                    (precio, index) => {\r\n                      const isItemSelected = isSelected(precio);\r\n                      const labelId = `enhanced-table-checkbox-${index}`;\r\n                      return (\r\n                        <RenderTableRows\r\n                          key={index}\r\n                          precio={precio}\r\n                          isItemSelected={isItemSelected}\r\n                          labelId={labelId}\r\n                          handleClick={handleClick}\r\n                        />\r\n                      );\r\n                    }\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          </Paper>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => handleAceptChangePrising()}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({ precio, isItemSelected, labelId, handleClick }) => {\r\n  const doubleClick = (e) => {\r\n    if (precio.precio_neto <= 0) return;\r\n    try {\r\n      if (e.detail === 2) {\r\n        handleClick(precio);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={precio.numero_precio}\r\n        selected={isItemSelected}\r\n        hover\r\n        onClick={(e) => doubleClick(e)}\r\n      >\r\n        <TableCell padding=\"checkbox\">\r\n          <Checkbox\r\n            disabled={precio.precio_neto <= 0}\r\n            onClick={(event) => {\r\n              handleClick(precio);\r\n            }}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell align={\"center\"}>{precio.numero_precio}</TableCell>\r\n        <TableCell align={\"center\"}>\r\n          {precio.precio_neto > 0 ? formatoMexico(precio.precio_neto) : 0}\r\n        </TableCell>\r\n        <TableCell align={\"center\"}>{precio.unidad_mayoreo}</TableCell>\r\n        <TableCell align={\"center\"}>{precio.utilidad} %</TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport AutorenewIcon from \"@material-ui/icons/Autorenew\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { useEffect } from \"react\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nimport Close from \"@material-ui/icons/Close\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\n\r\nconst columns = [\r\n  /* { id: \"folio\", label: \"Folio\", minWidth: 20, align: \"center\" }, */\r\n  { id: \"fecha\", label: \"Fecha\", minWidth: 20, align: \"center\" },\r\n  { id: \"cliente\", label: \"Cliente\", minWidth: 330, align: \"center\" },\r\n  { id: \"productos\", label: \"Productos\", minWidth: 20, align: \"center\" },\r\n  { id: \"total\", label: \"Total\", minWidth: 200, align: \"center\" },\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"45vh\",\r\n    \"& ::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n  },\r\n});\r\n\r\nexport default function ListaVentas({ handleModalEspera }) {\r\n  const classes = useStyles();\r\n\r\n  let listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n\r\n  return (\r\n    <Paper className={classes.root}>\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              {columns.map((column, index) => (\r\n                <TableCell\r\n                  key={index}\r\n                  align={column.align}\r\n                  style={{ width: column.minWidth }}\r\n                >\r\n                  {column.label}\r\n                </TableCell>\r\n              ))}\r\n              <TableCell align=\"center\" style={{ width: 35 }}>\r\n                Regresar\r\n              </TableCell>\r\n\r\n              <TableCell align=\"center\" style={{ width: 35 }}>\r\n                Eliminar\r\n              </TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {listaEnEspera?.map((row, index) => {\r\n              return (\r\n                <RowsVentas\r\n                  venta={row}\r\n                  index={index}\r\n                  key={index}\r\n                  handleModalEspera={handleModalEspera}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst RowsVentas = ({ venta, index, handleModalEspera }) => {\r\n  const {\r\n    reloadEliminarVentaEspera,\r\n    setReloadEliminarVentaEspera,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n  const [open, setOpen] = useState(false);\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  let listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n  let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  function borrarVenta() {\r\n    if (sesion.accesos.ventas.eliminar_ventas.ver === true) {\r\n      let nueva_venta_espera = [...listaEnEspera];\r\n      nueva_venta_espera.splice(index, 1);\r\n      if (nueva_venta_espera.length === 0) {\r\n        localStorage.removeItem(\"ListaEnEspera\");\r\n      } else {\r\n        localStorage.setItem(\r\n          \"ListaEnEspera\",\r\n          JSON.stringify(nueva_venta_espera)\r\n        );\r\n      }\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const AgregarVentaDeNuevo = () => {\r\n    if (datosVenta === null) {\r\n      let nueva_venta_espera = [...listaEnEspera];\r\n      localStorage.setItem(\"DatosVentas\", JSON.stringify(venta.datosVenta));\r\n      nueva_venta_espera.splice(index, 1);\r\n      if (nueva_venta_espera.length === 0) {\r\n        localStorage.removeItem(\"ListaEnEspera\");\r\n        updateDataStorage();\r\n        handleModalEspera();\r\n        return;\r\n      }\r\n      localStorage.setItem(\"ListaEnEspera\", JSON.stringify(nueva_venta_espera));\r\n      updateDataStorage();\r\n      handleModalEspera();\r\n    } else {\r\n      setOpen(!open);\r\n    }\r\n  };\r\n\r\n  const updateDataStorage = () => {\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const verificarPermisos = () => {\r\n    if (sesion.accesos.ventas.eliminar_ventas.ver === true) {\r\n      borrarVenta();\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"eliminar_ventas\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (reloadEliminarVentaEspera === true) {\r\n      borrarVenta();\r\n      setReloadEliminarVentaEspera(false);\r\n    }\r\n  }, [reloadEliminarVentaEspera]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow hover tabIndex={-1}>\r\n        <TableCell align=\"center\">{venta.fecha ? venta.fecha : \"\"}</TableCell>\r\n        <TableCell align=\"center\">\r\n          {venta.datosVenta.cliente && venta.datosVenta.cliente.nombre_cliente\r\n            ? venta.datosVenta.cliente.nombre_cliente\r\n            : \"Pub. General\"}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          {venta.datosVenta.productos.length}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          $ {formatoMexico(venta.datosVenta.total)}\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          <RegresarVenta\r\n            AgregarVentaDeNuevo={AgregarVentaDeNuevo}\r\n            open={open}\r\n            handleClickOpen={handleClickOpen}\r\n          />\r\n        </TableCell>\r\n        <TableCell align=\"center\">\r\n          <EliminarVentaEspera verificarPermisos={verificarPermisos} />\r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst RegresarVenta = ({ open, handleClickOpen, AgregarVentaDeNuevo }) => {\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        aria-label=\"regresar\"\r\n        color=\"primary\"\r\n        size=\"small\"\r\n        onClick={() => AgregarVentaDeNuevo()}\r\n      >\r\n        <AutorenewIcon fontSize=\"medium\" />\r\n      </IconButton>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={open}\r\n        autoHideDuration={5000}\r\n        onClose={handleClickOpen}\r\n        message=\"No puedes agregar una venta cuando ya está una en curso.\"\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nconst EliminarVentaEspera = ({ verificarPermisos }) => {\r\n  const [openModal, setOpenModal] = useState(false);\r\n\r\n  const handleClickOpen = () => setOpenModal(true);\r\n  const handleClose = () => setOpenModal(false);\r\n\r\n  return (\r\n    <Fragment>\r\n      <IconButton\r\n        aria-label=\"delete\"\r\n        size=\"small\"\r\n        onClick={() => handleClickOpen()}\r\n      >\r\n        <DeleteIcon fontSize=\"medium\" />\r\n      </IconButton>\r\n      <Dialog onClose={() => handleClose()} open={openModal}>\r\n        <DialogTitle>Se eliminara esta venta en espera</DialogTitle>\r\n        <DialogActions>\r\n          <Button color=\"inherit\" size=\"small\" onClick={() => handleClose()}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            size=\"small\"\r\n            onClick={() => verificarPermisos()}\r\n          >\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  Divider,\r\n  Grid,\r\n  Typography,\r\n  Slide,\r\n  Badge,\r\n} from \"@material-ui/core\";\r\nimport ListaVentas from \"./ListaVentas\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport EnEsperaIcon from \"../../../icons/ventas/lista-de-espera.svg\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentasEspera() {\r\n  let listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n  let turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  const { updateTablaVentas } = useContext(VentasContext);\r\n\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 76) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (listaEnEspera) {\r\n      listaEnEspera = JSON.parse(localStorage.getItem(\"ListaEnEspera\"));\r\n    }\r\n  }, [updateTablaVentas]);\r\n\r\n  useEffect(() => {\r\n    turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  }, [updateTablaVentas, turnoEnCurso]);\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || (datosVentas && datosVentas.nota_credito)}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <Badge\r\n              badgeContent={listaEnEspera ? listaEnEspera.length : 0}\r\n              color=\"primary\"\r\n              style={{ fontSize: 45 }}\r\n            >\r\n              <img\r\n                src={EnEsperaIcon}\r\n                alt=\"icono caja2\"\r\n                style={{ width: 38 }}\r\n              />\r\n            </Badge>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Ventas en Espera</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + L</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogContent>\r\n          <Grid container item lg={12}>\r\n            <Box display=\"flex\" flexGrow={1}>\r\n              <Box>\r\n                <img\r\n                  src={EnEsperaIcon}\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n              </Box>\r\n              <Box m={2}>\r\n                <Divider orientation=\"vertical\" />\r\n              </Box>\r\n              <Box mt={3}>\r\n                <Typography variant=\"h6\">Ventas en espera</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                onClick={handleClickOpen}\r\n                size=\"large\"\r\n              >\r\n                <CloseIcon />\r\n              </Button>\r\n            </Box>\r\n          </Grid>\r\n          <Grid>\r\n            <ListaVentas handleModalEspera={handleClickOpen} />\r\n          </Grid>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { Close, Delete } from \"@material-ui/icons\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { CANCELAR_VENTA_SUCURSAL } from \"../../../gql/Ventas/ventas_generales\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport { Alert } from \"@material-ui/lab\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function CancelarFolio({\r\n  venta,\r\n  handleCloseInfoVenta,\r\n  refetch,\r\n  dinero_disponible,\r\n  selected,\r\n  view,\r\n}) {\r\n  const {\r\n    reloadCancelarVenta,\r\n    setReloadCancelarVenta,\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n  } = useContext(AccesosContext);\r\n  const [open, setOpen] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [values, setValues] = useState({\r\n    observaciones: \"\",\r\n    devolucion_efectivo: false,\r\n    devolucion_credito: false,\r\n  });\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  const [cancelarVentasSucursal] = useMutation(CANCELAR_VENTA_SUCURSAL);\r\n\r\n  const handleClickOpen = () => {\r\n    if (sesion.accesos.ventas.cancelar_venta.editar === true) {\r\n      setOpen(true);\r\n    } else {\r\n      if (!reloadCancelarVenta) return;\r\n      setOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleChangeChecks = (e) => {\r\n    const { name, checked } = e.target;\r\n    setValues({\r\n      ...values,\r\n      [name]: checked,\r\n    });\r\n  };\r\n\r\n  const handleCancelSale = async () => {\r\n    setLoading(true);\r\n    try {\r\n      values.turno = {\r\n        horario_en_turno: turnoEnCurso.horario_en_turno,\r\n        numero_caja: parseInt(turnoEnCurso.numero_caja),\r\n        id_caja: turnoEnCurso.id_caja,\r\n        usuario_en_turno: {\r\n          nombre: turnoEnCurso.usuario_en_turno.nombre,\r\n          numero_usuario: turnoEnCurso.usuario_en_turno.numero_usuario,\r\n          _id: sesion._id,\r\n        },\r\n        empresa: turnoEnCurso.empresa,\r\n        sucursal: turnoEnCurso.sucursal,\r\n      };\r\n      const result = await cancelarVentasSucursal({\r\n        variables: {\r\n          input: values,\r\n          empresa: venta.empresa,\r\n          sucursal: venta.sucursal,\r\n          folio: venta.folio,\r\n        },\r\n      });\r\n      setAlert({\r\n        message: `¡Listo! ${result.data.cancelarVentasSucursal.message}`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n      setLoading(false);\r\n      setValues({\r\n        devolucion_efectivo: false,\r\n        observaciones: \"\",\r\n        devolucion_credito: false,\r\n      });\r\n      refetch();\r\n      handleClose();\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      if (error.message) {\r\n        setAlert({\r\n          message: error.message,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      } else {\r\n        setAlert({\r\n          message: \"Hubo un error\",\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n      }\r\n      if (error.networkError) {\r\n        console.log(error.networkError.result);\r\n      } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const verificarPermisos = () => {\r\n    if (sesion.accesos.ventas.cancelar_venta.editar === true) {\r\n      handleClickOpen();\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"cancelar_venta\",\r\n        tipo_acceso: \"editar\",\r\n      });\r\n    }\r\n  };\r\n\r\n  let seleccionado = \"\";\r\n  if (view === \"table\") {\r\n    seleccionado = selected;\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (reloadCancelarVenta === true && seleccionado._id === venta._id) {\r\n      handleClickOpen();\r\n      setReloadCancelarVenta(false);\r\n    }\r\n  }, [reloadCancelarVenta]);\r\n\r\n  return (\r\n    <div>\r\n      {handleCloseInfoVenta ? (\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={() => verificarPermisos()}\r\n          startIcon={<Close />}\r\n          disabled={venta.status === \"CANCELADO\" || venta.factura.length ? true : false}\r\n        >\r\n          Cancelar venta\r\n        </Button>\r\n      ) : (\r\n        <IconButton\r\n          size=\"small\"\r\n          color=\"secondary\"\r\n          onClick={() => verificarPermisos()}\r\n          disabled={venta.status === \"CANCELADO\"}\r\n        >\r\n          <Delete />\r\n        </IconButton>\r\n      )}\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={handleClose}\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n      >\r\n        <DialogTitle>\r\n          <Box\r\n            display=\"flex\"\r\n            alignItems=\"center\"\r\n            justifyContent=\"space-between\"\r\n          >\r\n            <Typography variant=\"h6\">Cancelar venta</Typography>\r\n            <Button\r\n              size=\"small\"\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClose()}\r\n            >\r\n              <Close />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {venta.factura.length ? (\r\n            <Alert severity=\"info\">Una venta facturada no se puede hacer devolucion de dinero</Alert>\r\n          ) : null}\r\n          <Box>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={values.devolucion_credito}\r\n                  onChange={handleChangeChecks}\r\n                  name=\"devolucion_credito\"\r\n                  disabled={!venta.credito || venta.factura.length ? true : false}\r\n                />\r\n              }\r\n              label=\"Realizar devolucion de crédito\"\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={values.devolucion_efectivo}\r\n                  onChange={handleChangeChecks}\r\n                  name=\"devolucion_efectivo\"\r\n                  disabled={\r\n                    venta.montos_en_caja.monto_efectivo.monto >\r\n                    dinero_disponible || venta.factura.length ? true : false\r\n                  }\r\n                />\r\n              }\r\n              label=\"Realizar devolucion de dinero\"\r\n            />\r\n            <Box my={2}>\r\n              <Container maxWidth=\"xs\">\r\n                <Box mb={1}>\r\n                  <Typography>Devolución en:</Typography>\r\n                </Box>\r\n                <Grid container spacing={2}>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>Efectivo</Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_efectivo.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>\r\n                      T. Crédito\r\n                    </Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_tarjeta_credito.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>\r\n                      M. Electrónico\r\n                    </Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_monedero.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>\r\n                      Transferencia\r\n                    </Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_transferencia.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                  <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Typography style={{ width: \"120px\" }}>Cheques</Typography>\r\n                    <Box mr={1} />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled\r\n                      value={venta.montos_en_caja.monto_cheques.monto}\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              </Container>\r\n            </Box>\r\n            <TextField\r\n              label=\"Observaciones\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n              multiline\r\n              rows={3}\r\n              value={values.observaciones}\r\n              onChange={(e) =>\r\n                setValues({ ...values, observaciones: e.target.value })\r\n              }\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\" disabled={loading}>\r\n            Salir\r\n          </Button>\r\n          <Button\r\n            onClick={handleCancelSale}\r\n            color=\"secondary\"\r\n            disabled={loading}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : null\r\n            }\r\n          >\r\n            Cancelar Venta\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport AccountBoxIcon from \"@material-ui/icons/AccountBox\";\r\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\r\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport {\r\n  formatoFechaCorta,\r\n  formatoMexico,\r\n} from \"../../../config/reuserFunctions\";\r\nimport { Snackbar, Tooltip } from \"@material-ui/core\";\r\nimport { Edit } from \"@material-ui/icons\";\r\nimport CancelarFolio from \"./CancelarFolio\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  colorContainer: {\r\n    /* border: \"1px solid rgba(0,0,0, .3)\", */\r\n    /* marginLeft: 8, */\r\n    height: 28,\r\n    width: 28,\r\n    borderRadius: \"15%\",\r\n    fontSize: 18,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function InfoVentaFolio({ venta, open, handleClose, refetch, handleCloseListaVentas }) {\r\n  const [openSnack, setOpenSnack] = React.useState(false);\r\n  const { updateClientVenta, setUpdateClientVenta } = React.useContext(\r\n    ClienteCtx\r\n  );\r\n  const { updateTablaVentas, setUpdateTablaVentas } = React.useContext(VentasContext);\r\n\r\n  const updateDataStorage = () => {\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpenSnack(true);\r\n  };\r\n\r\n  const handleSnackClose = () => {\r\n    setOpenSnack(false);\r\n  };\r\n\r\n  const restaurarVenta = () => {\r\n    if(venta.nota_credito.length) return\r\n    let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    if (datosVenta === null) {\r\n      //armar array de productos\r\n      let productos = [];\r\n\r\n      venta.productos.forEach((res) => {\r\n        productos.push({\r\n          cantidad: res.cantidad,\r\n          cantidad_venta: res.cantidad_venta,\r\n          cantidad_venta_original: res.cantidad_venta,\r\n          codigo_barras: res.id_producto.datos_generales.codigo_barras,\r\n          codigo_unidad: res.codigo_unidad,\r\n          color: res.color,\r\n          concepto: res.concepto,\r\n          default: res.default,\r\n          descuento: res.id_unidad_venta.descuento,\r\n          descuento_activo: res.id_unidad_venta.descuento_activo,\r\n          granel_producto: res.granel_producto,\r\n          id_producto: res.id_producto,\r\n          id_unidad_venta: res.id_unidad_venta,\r\n          ieps_total_producto: res.ieps_total,\r\n          impuestos_total_producto: res.impuestos,\r\n          inventario_general: res.inventario_general,\r\n          iva_total_producto: res.iva_total,\r\n          medida: res.medida,\r\n          precio: res.precio,\r\n          precio_a_vender: res.precio_a_vender,\r\n          precio_actual_object: res.precio_actual_object,\r\n          precio_actual_producto: res.precio_actual_producto,\r\n          precio_anterior: res.precio_actual_producto,\r\n          precio_unidad: res.precio_unidad,\r\n          subtotal_total_producto: res.subtotal,\r\n          total_total_producto: res.total,\r\n          unidad: res.unidad,\r\n          unidad_principal: res.id_unidad_venta.unidad_principal,\r\n          _id: res.id_unidad_venta._id,\r\n        });\r\n      });\r\n\r\n      //armar objeto para Storage\r\n\r\n      let datosVenta = {\r\n        _id: venta._id,\r\n        cliente: venta.cliente,\r\n        descuento: venta.descuento,\r\n        ieps: venta.ieps,\r\n        impuestos: venta.impuestos,\r\n        iva: venta.iva,\r\n        monedero: venta.monedero,\r\n        productos,\r\n        subTotal: venta.subTotal,\r\n        total: venta.total,\r\n        venta_cliente: venta.venta_cliente,\r\n        usuario: venta.usuario,\r\n        tipo_emision: venta.tipo_emision,\r\n        folio: venta.folio,\r\n        montos_en_caja: venta.montos_en_caja,\r\n        credito: venta.credito,\r\n        abono_minimo: venta.abono_minimo,\r\n        descuento_general_activo: venta.descuento_general_activo,\r\n        dias_de_credito_venta: venta.dias_de_credito_venta,\r\n        fecha_de_vencimiento_credito: venta.fecha_de_vencimiento_credito,\r\n        cambio: venta.cambio,\r\n        metodo_pago: venta.metodo_pago,\r\n        id_caja: venta.id_caja,\r\n        forma_pago: venta.forma_pago,\r\n        factura: venta.factura,\r\n        empresa: venta.empresa,\r\n        sucursal: venta.sucursal,\r\n        fecha_registro: venta.fecha_registro,\r\n        status: venta.status,\r\n        nota_credito: true,\r\n        total_original: venta.total,\r\n        saldo_favor: 0,\r\n      };\r\n\r\n      //se agregan la venta a localStorage\r\n      localStorage.setItem(\"DatosVentas\", JSON.stringify(datosVenta));\r\n      updateDataStorage();\r\n      handleClose();\r\n      handleCloseListaVentas();\r\n    } else {\r\n      handleClickOpen();\r\n    }\r\n  };\r\n\r\n  if (!venta) return null;\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      TransitionComponent={Transition}\r\n      keepMounted\r\n      onClose={handleClose}\r\n      fullWidth\r\n      maxWidth=\"lg\"\r\n    >\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={openSnack}\r\n        autoHideDuration={5000}\r\n        onClose={handleSnackClose}\r\n        message=\"No pudes realizar esta acción, tienes una venta en curso.\"\r\n      />\r\n      <DialogTitle>\r\n        <Box style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n          <Box>\r\n            <Typography>\r\n              <b>Caja: </b>\r\n              {` ${venta.id_caja.numero_caja}`}\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>Usuario en caja:</b> {` ${venta.usuario.nombre}`}\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography align=\"right\">\r\n              <b>Folio:</b>\r\n              {` ${venta.folio}`}\r\n            </Typography>\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>Fecha:</b>\r\n              {` ${formatoFechaCorta(venta.fecha_registro)}`}\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </DialogTitle>\r\n      <DialogContent>\r\n        {venta.cliente !== null ? (\r\n          <Box my={2}>\r\n            <Box display=\"flex\" alignItems=\"center\">\r\n              <Avatar>\r\n                <AccountBoxIcon />\r\n              </Avatar>\r\n              <Box mx={1} />\r\n              <Box>\r\n                <Typography variant=\"h6\">Cliente</Typography>\r\n              </Box>\r\n            </Box>\r\n            <Box my={1}>\r\n              <Paper variant=\"outlined\">\r\n                <TableContainer>\r\n                  <Table size=\"small\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell>Numero de Cliente</TableCell>\r\n                        <TableCell>Nombre</TableCell>\r\n                        <TableCell>Clave</TableCell>\r\n                        <TableCell>Telefono</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      <TableRow>\r\n                        <TableCell>{venta.cliente.numero_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.nombre_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.clave_cliente}</TableCell>\r\n                        <TableCell>{venta.cliente.telefono}</TableCell>\r\n                      </TableRow>\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              </Paper>\r\n            </Box>\r\n          </Box>\r\n        ) : null}\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <AttachMoneyIcon />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography variant=\"h6\">Venta</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Venta Crédito</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>Monedero</TableCell>\r\n                      <TableCell>IVA</TableCell>\r\n                      <TableCell>IEPS</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    <TableRow>\r\n                      <TableCell>{venta.credito ? \"SI\" : \"NO\"}</TableCell>\r\n                      <TableCell>\r\n                        ${venta.descuento ? formatoMexico(venta.descuento) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.monedero ? formatoMexico(venta.monedero) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.iva ? formatoMexico(venta.iva) : 0}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        ${venta.ieps ? formatoMexico(venta.ieps) : 0}\r\n                      </TableCell>\r\n                      <TableCell>${formatoMexico(venta.subTotal)}</TableCell>\r\n                      <TableCell>${formatoMexico(venta.impuestos)}</TableCell>\r\n                      <TableCell>{formatoMexico(venta.total)}</TableCell>\r\n                    </TableRow>\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n        <Box my={2}>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Avatar>\r\n              <ShoppingCartIcon />\r\n            </Avatar>\r\n            <Box mx={1} />\r\n            <Box>\r\n              <Typography variant=\"h6\">Artículos</Typography>\r\n            </Box>\r\n          </Box>\r\n          <Box my={1}>\r\n            <Paper variant=\"outlined\">\r\n              <TableContainer>\r\n                <Table size=\"small\">\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Código de barras</TableCell>\r\n                      <TableCell>Producto</TableCell>\r\n                      <TableCell padding=\"checkbox\">Medida</TableCell>\r\n                      <TableCell padding=\"checkbox\">Unidad</TableCell>\r\n                      <TableCell padding=\"checkbox\">Cant</TableCell>\r\n                      <TableCell>Precio</TableCell>\r\n                      <TableCell>Descuento</TableCell>\r\n                      <TableCell>Subtotal</TableCell>\r\n                      <TableCell>Impuestos</TableCell>\r\n                      <TableCell>Total</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {venta.productos.map((row, index) => (\r\n                      <TableRow key={index}>\r\n                        <TableCell>\r\n                          {row.id_unidad_venta.codigo_barras}\r\n                        </TableCell>\r\n                        <TableCell>\r\n                          {row.id_producto.datos_generales.nombre_comercial}\r\n                        </TableCell>\r\n                        <ComponenteMedidaColor producto={row} />\r\n                        <TableCell>{row.unidad}</TableCell>\r\n                        <TableCell>{row.cantidad_venta}</TableCell>\r\n                        <TableCell>\r\n                          ${formatoMexico(row.precio_a_vender)}\r\n                        </TableCell>\r\n                        <ComponenteDescuento producto={row} />\r\n                        <TableCell>${formatoMexico(row.subtotal)}</TableCell>\r\n                        <TableCell>${formatoMexico(row.impuestos)}</TableCell>\r\n                        <TableCell>${formatoMexico(row.total)}</TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Paper>\r\n          </Box>\r\n        </Box>\r\n      </DialogContent>\r\n      <DialogActions\r\n        style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n      >\r\n        <Box display=\"flex\">\r\n          <CancelarFolio\r\n            venta={venta}\r\n            handleCloseInfoVenta={handleClose}\r\n            refetch={refetch}\r\n            selected={venta}\r\n          />\r\n          <Box mx={1} />\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"outlined\"\r\n            startIcon={venta.nota_credito.length ? null : <Edit />}\r\n            onClick={() => restaurarVenta()}\r\n            disableRipple={venta.nota_credito.length ? true : false}\r\n            disableFocusRipple={venta.nota_credito.length ? true : false}\r\n\r\n          >\r\n            {venta.nota_credito.length ? \"Ya se realizo nota de crédito\" : \"Nota de crédito\"}\r\n          </Button>\r\n        </Box>\r\n\r\n        <Button\r\n          onClick={handleClose}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n        >\r\n          Cerrar\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nconst ComponenteMedidaColor = ({ producto }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  if (producto.color.color && producto.medida.medida) {\r\n    return (\r\n      <TableCell align=\"center\">\r\n        <Tooltip title={producto.color.color} placement=\"top\" arrow>\r\n          <div\r\n            className={classes.colorContainer}\r\n            style={{\r\n              backgroundColor: producto.color.hex,\r\n              color: theme.palette.getContrastText(producto.color.hex),\r\n            }}\r\n          >\r\n            {producto.medida.medida}\r\n          </div>\r\n        </Tooltip>\r\n      </TableCell>\r\n    );\r\n  } else {\r\n    return <TableCell align=\"center\">{\"N/A\"}</TableCell>;\r\n  }\r\n};\r\n\r\nconst ComponenteDescuento = ({ producto }) => {\r\n  if (producto.id_unidad_venta.descuento_activo === true) {\r\n    const { dinero_descontado, porciento } = producto.id_unidad_venta.descuento;\r\n    return (\r\n      <TableCell>\r\n        {`$${formatoMexico(dinero_descontado)} - %${porciento}`}\r\n      </TableCell>\r\n    );\r\n  } else {\r\n    return <TableCell>{\"$0.00\"}</TableCell>;\r\n  }\r\n};\r\n","import React, { Fragment, useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport {\r\n  makeStyles,\r\n  Snackbar,\r\n  TablePagination,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport moment from \"moment\";\r\n\r\nimport { Close } from \"@material-ui/icons\";\r\nimport ErrorPage from \"../../../components/ErrorPage\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport { OBTENER_VENTAS_SUCURSAL } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\n//import { Alert } from \"@material-ui/lab\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport InfoVentaFolio from \"./InfoVenta\";\r\nimport CancelarFolio from \"./CancelarFolio\";\r\nimport { OBTENER_PRE_CORTE_CAJA } from \"../../../gql/Cajas/cajas\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"55vh\",\r\n  },\r\n}));\r\n\r\nexport default function ListaVentasRealizadas({ handleClose }) {\r\n  const [filtro, setFiltro] = useState(\"\");\r\n  const [params, setParams] = useState(\"TODAS\");\r\n\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const [value] = useDebounce(filtro, 500);\r\n  const [page, setPage] = useState(0);\r\n  const limit = 20;\r\n\r\n  const admin = sesion.accesos.ventas.cancelar_venta.editar;\r\n  const fecha_entrada = turnoEnCurso.fecha_movimiento;\r\n\r\n  const input_precorte = {\r\n    horario_en_turno: \"ABRIR TURNO\",\r\n    id_caja: turnoEnCurso ? turnoEnCurso.id_caja : \"\",\r\n    id_usuario: sesion._id,\r\n    token_turno_user: turnoEnCurso ? turnoEnCurso.token_turno_user : \"\",\r\n  };\r\n\r\n  const isDate = moment(value).isValid();\r\n\r\n  /* Queries */\r\n  const resultado_ventas = useQuery(OBTENER_VENTAS_SUCURSAL, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      filtros: {\r\n        isDate,\r\n        busqueda: value,\r\n        filtro: params,\r\n        vista: \"VENTAS\",\r\n        turno: {\r\n          id_caja: turnoEnCurso.id_caja,\r\n          fecha_entrada,\r\n        },\r\n        admin,\r\n      },\r\n      limit,\r\n      offset: page,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  });\r\n  const res_precorte = useQuery(OBTENER_PRE_CORTE_CAJA, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n      input: input_precorte,\r\n    },\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <Box mb={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid item sm={6} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              placeholder=\"Buscar por: Folio, cliente, clave o nombre\"\r\n              variant=\"outlined\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n              value={filtro}\r\n            />\r\n          </Grid>\r\n          <Grid item sm={3} xs={12}>\r\n            <FormControl variant=\"outlined\" size=\"small\" fullWidth>\r\n              <Select\r\n                value={params}\r\n                onChange={(e) => setParams(e.target.value)}\r\n              >\r\n                <MenuItem value=\"TODAS\">\r\n                  <em>Todas</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"HOY\">Ventas de hoy</MenuItem>\r\n                <MenuItem value=\"REALIZADAS\">Ventas realizadas</MenuItem>\r\n                <MenuItem value=\"CANCELADAS\">Ventas canceladas</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item sm={3} xs={12}>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n              type=\"date\"\r\n              onChange={(e) => setFiltro(e.target.value)}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      {/* <Box my={1}>\r\n        <Alert severity=\"info\">\r\n          Para ver la información completa una venta haz un doble click!\r\n        </Alert>\r\n      </Box> */}\r\n      <Box my={1} display=\"flex\">\r\n        {admin ? (\r\n          <Fragment>\r\n            <Box\r\n              border={1}\r\n              borderColor=\"#58ff8f\"\r\n              bgcolor=\"#EDFFF3\"\r\n              height=\"24px\"\r\n              width=\"24px\"\r\n            />\r\n            <Box mx={1} />\r\n            <Typography>\r\n              <b>- Ventas de hoy</b>\r\n            </Typography>\r\n            <Box mx={2} />\r\n          </Fragment>\r\n        ) : null}\r\n        <Box\r\n          border={1}\r\n          borderColor=\"#FF8A8A\"\r\n          bgcolor=\"#FFF4F4\"\r\n          height=\"24px\"\r\n          width=\"24px\"\r\n        />\r\n        <Box mx={1} />\r\n        <Typography>\r\n          <b>- Ventas canceladas</b>\r\n        </Typography>\r\n        <Box mx={1} />\r\n        <Box\r\n          border={1}\r\n          borderColor=\"#FFA91C\"\r\n          bgcolor=\"#FFEAAD\"\r\n          height=\"24px\"\r\n          width=\"24px\"\r\n        />\r\n        <Box mx={1} />\r\n        <Typography>\r\n          <b>- Notas de crédito</b>\r\n        </Typography>\r\n      </Box>\r\n      <RenderLista\r\n        resultado_ventas={resultado_ventas}\r\n        res_precorte={res_precorte}\r\n        handleClose={handleClose}\r\n        admin={admin}\r\n        page={page}\r\n        setPage={setPage}\r\n        limit={limit}\r\n      />\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst RenderLista = ({\r\n  resultado_ventas,\r\n  res_precorte,\r\n  handleClose,\r\n  admin,\r\n  page,\r\n  setPage,\r\n  limit,\r\n}) => {\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setVentaRetomada,\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n  const { loading, data, error, refetch } = resultado_ventas;\r\n  const [view, setView] = useState(false);\r\n\r\n  const handleClickView = () => {\r\n    setView(true);\r\n  };\r\n\r\n  const handleCloseView = () => {\r\n    setView(false);\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"50vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  if (error) {\r\n    return <ErrorPage />;\r\n  }\r\n\r\n  //obtener dinero en caja\r\n  const { obtenerVentasSucursal } = data;\r\n  const data_precorte = res_precorte.data;\r\n  const pre_corte = data_precorte.obtenerPreCorteCaja\r\n    ? data_precorte.obtenerPreCorteCaja.monto_efectivo_precorte\r\n    : 0;\r\n\r\n  const obtenerVenta = (click, data) => {\r\n    setSelected(data);\r\n    let temp = true;\r\n    if (click === 2 && !temp) {\r\n      let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      if (datosVenta === null) {\r\n        //armar array de productos\r\n        let productos = [];\r\n\r\n        data.productos.forEach((res) => {\r\n          productos.push({\r\n            cantidad: res.cantidad,\r\n            cantidad_venta: res.cantidad_venta,\r\n            codigo_barras: res.id_producto.datos_generales.codigo_barras,\r\n            codigo_unidad: res.codigo_unidad,\r\n            color: res.color,\r\n            concepto: res.concepto,\r\n            default: res.default,\r\n            descuento: res.id_unidad_venta.descuento,\r\n            descuento_activo: res.id_unidad_venta.descuento_activo,\r\n            granel_producto: res.granel_producto,\r\n            id_producto: res.id_producto,\r\n            ieps_total_producto: res.ieps_total,\r\n            impuestos_total_producto: res.impuestos,\r\n            inventario_general: res.inventario_general,\r\n            iva_total_producto: res.iva_total,\r\n            medida: res.medida,\r\n            precio: res.precio,\r\n            precio_a_vender: res.precio_a_vender,\r\n            precio_actual_object: res.precio_actual_object,\r\n            precio_actual_producto: res.precio_actual_producto,\r\n            precio_anterior: res.precio_actual_producto,\r\n            precio_unidad: res.precio_unidad,\r\n            subtotal_total_producto: res.subtotal,\r\n            total_total_producto: res.total,\r\n            unidad: res.unidad,\r\n            unidad_principal: res.id_unidad_venta.unidad_principal,\r\n            _id: res.id_unidad_venta._id,\r\n          });\r\n        });\r\n\r\n        //armar objeto para Storage\r\n\r\n        let datosVenta = {\r\n          cliente: data.cliente,\r\n          descuento: data.descuento,\r\n          ieps: data.ieps,\r\n          impuestos: data.impuestos,\r\n          iva: data.iva,\r\n          monedero: data.monedero,\r\n          productos,\r\n          subTotal: data.subTotal,\r\n          total: data.total,\r\n          venta_cliente: data.venta_cliente,\r\n          tipo_emision: data.tipo_emision,\r\n        };\r\n\r\n        //se agregan la venta a localStorage\r\n        localStorage.setItem(\"DatosVentas\", JSON.stringify(datosVenta));\r\n        setVentaRetomada(datosVenta);\r\n        updateDataStorage();\r\n        handleClose();\r\n      } else {\r\n        handleClickOpen();\r\n      }\r\n    } else if (click === 2 && temp) {\r\n      handleClickView();\r\n    }\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  const updateDataStorage = () => {\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setUpdateClientVenta(!updateClientVenta);\r\n  };\r\n\r\n  const handleChangePage = (_, nextPage) => {\r\n    setPage(nextPage);\r\n  };\r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: \"top\",\r\n          horizontal: \"center\",\r\n        }}\r\n        open={open}\r\n        autoHideDuration={5000}\r\n        onClose={handleClickOpen}\r\n        message=\"No puedes agregar una venta cuando ya está una en curso.\"\r\n        action={\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        }\r\n      />\r\n      <TableContainer className={classes.container}>\r\n        <Table stickyHeader size=\"small\" aria-label=\"a dense table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>Folio</TableCell>\r\n              <TableCell>Fecha</TableCell>\r\n              <TableCell>Cliente</TableCell>\r\n              <TableCell>Usuario</TableCell>\r\n              <TableCell>Caja</TableCell>\r\n              <TableCell>Descuento</TableCell>\r\n              <TableCell>Subtotal</TableCell>\r\n              <TableCell>Impuestos</TableCell>\r\n              <TableCell>Total</TableCell>\r\n              <TableCell>Cancelar Venta</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {obtenerVentasSucursal.docs.map((data, index) => {\r\n              return (\r\n                <RowComprasRealizadas\r\n                  key={index}\r\n                  data={data}\r\n                  selected={selected}\r\n                  obtenerVenta={obtenerVenta}\r\n                  refetch={refetch}\r\n                  admin={admin}\r\n                  pre_corte={pre_corte}\r\n                />\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n        <InfoVentaFolio\r\n          venta={selected}\r\n          open={view}\r\n          handleClose={handleCloseView}\r\n          handleCloseListaVentas={handleClose}\r\n          refetch={refetch}\r\n        />\r\n      </TableContainer>\r\n      <TablePagination\r\n        rowsPerPageOptions={[]}\r\n        component=\"div\"\r\n        count={obtenerVentasSucursal.totalDocs}\r\n        rowsPerPage={limit}\r\n        page={page}\r\n        onPageChange={handleChangePage}\r\n      />\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst tableStyles = makeStyles((theme) => ({\r\n  today_color: {\r\n    backgroundColor: \"#EDFFF3\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#D8FFE5\",\r\n    },\r\n  },\r\n  normal_color: {\r\n    backgroundColor: \"#FFF\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#F5F5F5\",\r\n    },\r\n  },\r\n  root: {\r\n    \"&$root\": {\r\n      backgroundColor: \"#FFF4F4\",\r\n      color: \"#FF8A8A\",\r\n    },\r\n    \"&$root:hover\": {\r\n      backgroundColor: \"#FFE0E0\",\r\n    },\r\n  },\r\n  notas_credito: {\r\n    borderLeft: \" 6px solid #FFEAAD\",\r\n  },\r\n  selected: {\r\n    \"&$selected, &$selected:hover\": {\r\n      backgroundColor: \"#E8F4FD\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst RowComprasRealizadas = ({\r\n  data,\r\n  selected,\r\n  obtenerVenta,\r\n  refetch,\r\n  admin,\r\n  pre_corte,\r\n}) => {\r\n  const classes = tableStyles();\r\n  let today =\r\n    moment(data.fecha_registro).format(\"YYYY-MM-DD\") ===\r\n    moment().locale(\"es-mx\").format(\"YYYY-MM-DD\");\r\n\r\n  return (\r\n    <TableRow\r\n      role=\"checkbox\"\r\n      tabIndex={-1}\r\n      selected={data.folio === selected.folio}\r\n      onClick={(e) => obtenerVenta(e.detail, data)}\r\n      classes={{\r\n        selected: classes.selected,\r\n        root: data.status === \"CANCELADO\" ? classes.root : null,\r\n      }}\r\n      className={ today && admin ? classes.today_color : classes.normal_color}\r\n    >\r\n      <TableCell className={data.nota_credito.length ? classes.notas_credito + \" delete-color\" : \" delete-color\"  }>{data.folio}</TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        {moment(data.fecha_registro).format(\"DD/MM/YYYY\")}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        <div className=\"noWrap2\">\r\n          {data.cliente !== null\r\n            ? data.cliente.nombre_cliente\r\n            : \"Publico General\"}\r\n        </div>\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        <div className=\"noWrap2\">{data.usuario.nombre}</div>\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">{data.id_caja.numero_caja}</TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        ${data.descuento ? formatoMexico(data.descuento) : 0}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        ${formatoMexico(data.subTotal)}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        ${formatoMexico(data.impuestos)}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\">\r\n        ${formatoMexico(data.total)}\r\n      </TableCell>\r\n      <TableCell className=\"delete-color\" align=\"center\">\r\n        <CancelarFolio\r\n          venta={data}\r\n          refetch={refetch}\r\n          dinero_disponible={pre_corte}\r\n          selected={selected}\r\n          view=\"table\"\r\n        />\r\n      </TableCell>\r\n    </TableRow>\r\n  );\r\n};\r\n","import React, { Fragment, useEffect, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Slide,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport ListaVentasRealizadas from \"./ListaVentasRealizadas\";\r\nimport { FcSearch } from \"react-icons/fc\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport VentasIcon from \"../../../icons/ventas/lista-de-espera.svg\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentasRealizadas() {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  let datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const { updateTablaVentas } = React.useContext(VentasContext);\r\n\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.altKey && e.keyCode === 86) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  }, [updateTablaVentas]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={handleClickOpen}\r\n        disabled={!turnoEnCurso || (datosVentas && datosVentas.nota_credito)}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <FcSearch style={{ fontSize: 45 }} />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Buscar Folio</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>Alt + V</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"lg\"\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n              <Box display=\"flex\" alignItems=\"center\"> \r\n                <img\r\n                  src={VentasIcon}\r\n                  alt=\"icono caja\"\r\n                  className={classes.iconSizeDialogs}\r\n                />\r\n                <Box mx={2} />\r\n                <Typography variant=\"h6\">Ventas Realizadas</Typography>\r\n              </Box>\r\n              <Button size=\"small\" color=\"secondary\" variant=\"contained\" onClick={() => handleClickOpen()}>\r\n                <Close />\r\n              </Button>\r\n            </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n            <ListaVentasRealizadas handleClose={handleClickOpen} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/cajon.b3560654.svg\";","import React, { useState } from \"react\";\r\nimport { Box, Button, Typography } from \"@material-ui/core\";\r\nimport useStyles from \"../styles\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport { abrirCajonQuery } from \"../../../components/TicketPrinter/AbrirCajon\";\r\nimport CajonIcon from \"../../../icons/ventas/cajon.svg\"\r\n\r\nexport default function AbrirCajon() {\r\n  const classes = useStyles();\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const impresora = localStorage.getItem(\"cafiTicketPrint\");\r\n\r\n  const abrirCajon = async () => {\r\n    const result = await abrirCajonQuery(impresora);\r\n    if (result.success === true) {\r\n      setAlert({\r\n        message: `Cajon abierto`,\r\n        status: \"success\",\r\n        open: true,\r\n      });\r\n    } else {\r\n      setAlert({\r\n        message: `Error al abrir cajon: ${result.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  window.addEventListener(\"keydown\", Mi_función);\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 119) {\r\n      abrirCajon();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button className={classes.borderBotonChico} onClick={abrirCajon}>\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src={CajonIcon}\r\n              alt=\"icono ventas\"\r\n              style={{ width: 38 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Cajon</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>F8</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n    </>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/notacredito.cfa5a2d0.png\";","import React, { useContext, useEffect, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Radio from \"@material-ui/core/Radio\";\r\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport { Checkbox, CircularProgress, Divider } from \"@material-ui/core\";\r\nimport { formatoMexico } from \"../../../config/reuserFunctions\";\r\nimport { CREAR_NOTA_CREDITO } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport { Add } from \"@material-ui/icons\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../../context/Catalogos/crearClienteCtx\";\r\nimport NotaIcon from \"../../../icons/notacredito.png\"\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst CrearNota = ({ open, handleClose }) => {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [cambio, setCambio] = useState({\r\n    tipo: \"monto_efectivo-01\",\r\n    cambio: datosVenta.saldo_favor,\r\n  });\r\n  const [observaciones, setObservaciones] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    setAlert\r\n  } = useContext(VentasContext);\r\n  const { updateClientVenta, setUpdateClientVenta } = useContext(ClienteCtx);\r\n\r\n\r\n  const [crearNotaCredito] = useMutation(CREAR_NOTA_CREDITO);\r\n\r\n  useEffect(() => {\r\n    setCambio({ tipo: \"monto_efectivo-01\", cambio: datosVenta.saldo_favor });\r\n  }, [open]);\r\n\r\n  const handleChangeCambio = (e) => {\r\n    const { value } = e.target;\r\n    setCambio({ ...cambio, tipo: value });\r\n  };\r\n  const crearNota = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const venta = { ...datosVenta };\r\n      let productos = [];\r\n\r\n      venta.productos.forEach((prod) => {\r\n        const cantidad_regresada =\r\n          prod.cantidad_venta_original - prod.cantidad_venta;\r\n        let {\r\n          granel,\r\n          litros,\r\n          centro_de_costos,\r\n          precio_plazos,\r\n          unidades_de_venta,\r\n          imagenes,\r\n          inventario_general,\r\n          medidas_producto,\r\n          ...id_producto\r\n        } = prod.id_producto;\r\n\r\n        delete id_producto.precios.granel;\r\n        delete id_producto.precios.litros;\r\n\r\n        productos.push({\r\n          cantidad_venta: prod.cantidad_venta,\r\n          cantidad_venta_original: prod.cantidad_venta_original,\r\n          cantidad_regresada,\r\n          codigo_barras: prod.codigo_barras,\r\n          codigo_unidad: prod.codigo_unidad,\r\n          id_producto,\r\n          id_unidad_venta: prod.id_unidad_venta,\r\n          ieps_total_producto: prod.ieps_total_producto,\r\n          impuestos_total_producto: prod.impuestos_total_producto,\r\n          iva_total_producto: prod.iva_total_producto,\r\n          precio_unidad: prod.precio_unidad,\r\n          precio: prod.precio,\r\n          precio_a_vender: prod.precio_a_vender,\r\n          subtotal_total_producto: prod.subtotal_total_producto,\r\n          total_total_producto: prod.total_total_producto,\r\n          unidad: prod.unidad,\r\n          unidad_principal: prod.unidad_principal,\r\n        });\r\n      });\r\n\r\n      const turno = {\r\n        horario_en_turno: turnoEnCurso.horario_en_turno,\r\n        numero_caja: parseInt(turnoEnCurso.numero_caja),\r\n        id_caja: turnoEnCurso.id_caja,\r\n        usuario_en_turno: {\r\n          nombre: turnoEnCurso.usuario_en_turno.nombre,\r\n          numero_usuario: parseInt(turnoEnCurso.usuario_en_turno.numero_usuario),\r\n          _id: sesion._id,\r\n        },\r\n        empresa: turnoEnCurso.empresa,\r\n        sucursal: turnoEnCurso.sucursal,\r\n      };\r\n\r\n      let cliente = venta.cliente;\r\n      if(cliente !== null){\r\n        delete cliente.imagen;\r\n        delete cliente.eliminado;\r\n        delete cliente.direccion;\r\n      }\r\n      const forma_pago = cambio.tipo.split(\"-\");\r\n      const datos = {\r\n        cliente: venta.cliente,\r\n        productos,\r\n        descuento: venta.descuento,\r\n        generar_cfdi: venta.factura.length ? true : false,\r\n        ieps: parseFloat(venta.ieps.toFixed(2)),\r\n        impuestos: parseFloat(venta.impuestos.toFixed(2)),\r\n        iva: parseFloat(venta.iva.toFixed(2)),\r\n        subTotal: venta.subTotal,\r\n        total: venta.total,\r\n        observaciones,\r\n        usuario: venta.usuario,\r\n        venta: venta._id,\r\n        folio: venta.folio,\r\n        cambio: venta.saldo_favor,\r\n        devolucion_en: forma_pago[0],\r\n        payment_form: forma_pago[1],\r\n        payment_method: \"PUE\"\r\n      };\r\n      await crearNotaCredito({\r\n        variables: {\r\n          input: datos,\r\n          empresa: turnoEnCurso.empresa,\r\n          sucursal: turnoEnCurso.sucursal,\r\n          turno\r\n        },\r\n      });\r\n      setLoading(false);\r\n      setAlert({ message: \"Listo\", status: \"success\", open: true });\r\n      handleClose();\r\n      setObservaciones(\"\");\r\n      localStorage.removeItem(\"DatosVentas\")\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n      setUpdateClientVenta(!updateClientVenta);\r\n      setDatosVentasActual({\r\n        subTotal: 0,\r\n        total: 0,\r\n        impuestos: 0,\r\n        iva: 0,\r\n        ieps: 0,\r\n        descuento: 0,\r\n        monedero: 0,\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n      setAlert({ message: \"Hubo un error\", status: \"error\", open: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        fullWidth\r\n        maxWidth=\"xs\"\r\n        open={open}\r\n        onClose={() => handleClose()}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <Box>\r\n              <img\r\n                src={NotaIcon}\r\n                alt=\"icono ventas\"\r\n                className={classes.iconSizeDialogsPequeno}\r\n              />\r\n            </Box>\r\n            <Box mx={2} flexGrow={1}>\r\n              <Typography variant=\"h5\">Crear nota de crédito</Typography>\r\n            </Box>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => handleClose()}\r\n              size=\"large\"\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Box>\r\n            <Container maxWidth=\"xs\">\r\n              <TextField\r\n                label=\"Observaciones o comentarios\"\r\n                onChange={(e) => setObservaciones(e.target.value)}\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                fullWidth\r\n                multiline\r\n                rows={2}\r\n              />\r\n              <Box mb={2} />\r\n              <Box\r\n                mb={1}\r\n                display=\"flex\"\r\n                justifyContent=\"space-between\"\r\n                alignItems=\"center\"\r\n              >\r\n                <Typography>Devolución en:</Typography>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={datosVenta.factura.length ? true : false}\r\n                    />\r\n                  }\r\n                  label=\"Generar CFDI\"\r\n                />\r\n              </Box>\r\n              <FormControl component=\"fieldset\">\r\n                <RadioGroup\r\n                  value={cambio.tipo}\r\n                  onChange={handleChangeCambio}\r\n                >\r\n                  <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                    justifyContent=\"space-between\"\r\n                  >\r\n                    <FormControlLabel\r\n                      value=\"monto_efectivo-01\"\r\n                      control={<Radio />}\r\n                      label=\"Efectivo\"\r\n                    />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled={cambio.tipo !== \"monto_efectivo-01\"}\r\n                      value={\r\n                        cambio.tipo === \"monto_efectivo-01\" ? cambio.cambio : \"0\"\r\n                      }\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        readOnly: true,\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Box>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                    justifyContent=\"space-between\"\r\n                  >\r\n                    <FormControlLabel\r\n                      value=\"monto_tarjeta_credito-04\"\r\n                      control={<Radio />}\r\n                      label=\"T. crébito\"\r\n                    />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled={cambio.tipo !== \"monto_tarjeta_credito-04\"}\r\n                      value={\r\n                        cambio.tipo === \"monto_tarjeta_credito-04\"\r\n                          ? cambio.cambio\r\n                          : \"0\"\r\n                      }\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        readOnly: true,\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Box>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                    justifyContent=\"space-between\"\r\n                  >\r\n                    <FormControlLabel\r\n                      value=\"monto_monedero-05\"\r\n                      control={<Radio />}\r\n                      label=\"M. electrónico\"\r\n                      disabled={!datosVenta.cliente}\r\n                    />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled={cambio.tipo !== \"monto_monedero-05\"}\r\n                      value={\r\n                        cambio.tipo === \"monto_monedero-05\" ? cambio.cambio : \"0\"\r\n                      }\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        readOnly: true,\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Box>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                    justifyContent=\"space-between\"\r\n                  >\r\n                    <FormControlLabel\r\n                      value=\"monto_transferencia-03\"\r\n                      control={<Radio />}\r\n                      label=\"Transferencia\"\r\n                    />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      disabled={cambio.tipo !== \"monto_transferencia-03\"}\r\n                      size=\"small\"\r\n                      value={\r\n                        cambio.tipo === \"monto_transferencia-03\"\r\n                          ? cambio.cambio\r\n                          : \"0\"\r\n                      }\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        readOnly: true,\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Box>\r\n                  <Box\r\n                    display=\"flex\"\r\n                    alignItems=\"center\"\r\n                    justifyContent=\"space-between\"\r\n                  >\r\n                    <FormControlLabel\r\n                      value=\"monto_cheques-02\"\r\n                      control={<Radio />}\r\n                      label=\"Cheques\"\r\n                    />\r\n                    <TextField\r\n                      variant=\"standard\"\r\n                      size=\"small\"\r\n                      disabled={cambio.tipo !== \"monto_cheques-02\"}\r\n                      value={\r\n                        cambio.tipo === \"monto_cheques-02\" ? cambio.cambio : \"0\"\r\n                      }\r\n                      style={{ width: \"150px\" }}\r\n                      InputProps={{\r\n                        readOnly: true,\r\n                        startAdornment: (\r\n                          <InputAdornment position=\"start\">$</InputAdornment>\r\n                        ),\r\n                      }}\r\n                    />\r\n                  </Box>\r\n                </RadioGroup>\r\n              </FormControl>\r\n              <Box mt={2}>\r\n                <Typography>{`Subtotal: $${formatoMexico(\r\n                  datosVenta.subTotal\r\n                )}`}</Typography>\r\n                <Typography>{`Impuestos: $${formatoMexico(\r\n                  datosVenta.impuestos\r\n                )}`}</Typography>\r\n\r\n                <Typography>\r\n                  <b>{`Total anterior: $${formatoMexico(\r\n                    datosVenta.total_original\r\n                  )}`}</b>\r\n                </Typography>\r\n                <Divider />\r\n                <Box display=\"flex\" justifyContent=\"space-between\">\r\n                  <Typography variant=\"h6\">{`Total: $${formatoMexico(\r\n                    datosVenta.total\r\n                  )}`}</Typography>\r\n                  <Typography variant=\"h6\">{`Cambio: $${formatoMexico(\r\n                    datosVenta.saldo_favor\r\n                  )}`}</Typography>\r\n                </Box>\r\n              </Box>\r\n            </Container>\r\n          </Box>\r\n        </DialogContent>\r\n\r\n        <DialogActions>\r\n          <Button onClick={handleClose}>Cancelar</Button>\r\n          <Button\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n            onClick={() => crearNota()}\r\n            startIcon={\r\n              loading ? <CircularProgress size={20} color=\"inherit\" /> : <Add />\r\n            }\r\n            disabled={!datosVenta.saldo_favor}\r\n          >\r\n            Crear\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CrearNota;\r\n","import React, { useState, Fragment } from \"react\";\r\nimport useStyles from \"../styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CrearNota from \"./CrearNota\";\r\nimport NotaIcon from \"../../../icons/notacredito.png\"\r\n\r\nexport default function NotaCredito() {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  function funcion_tecla(event) {\r\n    const tecla_escape = event.keyCode;\r\n    if (tecla_escape === 27 && datosVenta) {\r\n      handleClickOpen();\r\n    }\r\n  }\r\n  window.onkeydown = funcion_tecla;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Button\r\n        className={classes.borderBotonChico}\r\n        onClick={() => handleClickOpen()}\r\n        disabled={!turnoEnCurso || !datosVenta}\r\n      >\r\n        <Box>\r\n          <Box>\r\n            <img\r\n              src={NotaIcon}\r\n              alt=\"icono ventas\"\r\n              style={{ width: 38 }}\r\n            />\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"body2\">\r\n              <b>Crear Nota</b>\r\n            </Typography>\r\n          </Box>\r\n          <Box>\r\n            <Typography variant=\"caption\" style={{ color: \"#808080\" }}>\r\n              <b>ESC</b>\r\n            </Typography>\r\n          </Box>\r\n        </Box>\r\n      </Button>\r\n      <CrearNota open={open} handleClose={handleClose} />\r\n    </Fragment>\r\n  );\r\n}\r\n","import { Grid } from \"@material-ui/core\";\r\nimport React, { Fragment, useEffect } from \"react\";\r\nimport Abonos from \"../../pages/ventas/Abonos/Abonos\";\r\nimport BuscarProducto from \"../../pages/ventas/BuscarProductos/BuscarProducto\";\r\nimport ClientesVentas from \"../../pages/ventas/ClientesVentas/ClientesVentas\";\r\nimport Cotizacion from \"../../pages/ventas/Cotizacion/Cotizacion\";\r\nimport CancelarVenta from \"../../pages/ventas/Operaciones/CancelarVenta\";\r\nimport CerrarVenta from \"../../pages/ventas/CerrarVenta/CerrarVenta\";\r\n/* import ConsultarPrecio from \"../../pages/ventas/Operaciones/ConsultarPrecio/ConsultarPrecio\"; */\r\nimport PreciosProductos from \"../../pages/ventas/Operaciones/PreciosProducto\";\r\nimport VentasEspera from \"../../pages/ventas/VentasEspera/VentasEspera\";\r\nimport VentasRealizadas from \"../../pages/ventas/VentasRealizadas/VentasRealizadas\";\r\nimport useStyles from \"./styles\";\r\nimport AbrirCajon from \"../../pages/ventas/Operaciones/AbrirCajon\";\r\nimport NotaCredito from \"../../pages/ventas/NotaCredito/NotaCredito\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nexport default function NavegacionVentasLateral() {\r\n  const classes = useStyles();\r\n  let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const { updateTablaVentas } = React.useContext(VentasContext)\r\n\r\n  useEffect(() => {\r\n    datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  }, [updateTablaVentas]);\r\n\r\n  return (\r\n    <Fragment>\r\n      <Grid container className={classes.drawerColor}>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          {datosVenta && datosVenta.nota_credito ? (\r\n            <NotaCredito />\r\n          ) : (\r\n            <CerrarVenta />\r\n          )}\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <CancelarVenta />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <BuscarProducto />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <AbrirCajon />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <Cotizacion type=\"GENERAR\" />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <PreciosProductos />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <VentasEspera />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <ClientesVentas />\r\n        </Grid>\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <VentasRealizadas />\r\n        </Grid>\r\n        {/* <Grid item lg={6} md={6} xs={6}>\r\n          <ConsultarPrecio />\r\n        </Grid> */}\r\n        <Grid item lg={6} md={6} xs={6}>\r\n          <Abonos />\r\n        </Grid>\r\n      </Grid>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { forwardRef, Fragment, useContext, useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Delete } from \"@material-ui/icons\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nimport {\r\n  findProductArray,\r\n  calculatePrices2,\r\n} from \"../../config/reuserFunctions\";\r\n\r\nconst Transition = forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function EliminarProducto({ producto, setDatosVentasActual }) {\r\n  const [open, setOpen] = useState(false);\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n  let datosVenta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n\r\n  const handleToggleModal = () => {\r\n    if(datosVenta.nota_credito){\r\n      return\r\n    }\r\n    setOpen(!open)\r\n  };\r\n\r\n  const eliminarProductoBD = async () => {\r\n    // console.log(producto);\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    const venta_actual = venta === null ? [] : venta;\r\n    let productosVentasTemp = productosVentas;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n    if (producto_encontrado.found) {\r\n      const { cantidad_venta, ...newP } = producto;\r\n\r\n      // newP.precio_actual_producto = newP.descuento_activo ? newP.descuento.precio_con_descuento :  newP.precio;\r\n      //Sacar los impuestos que se van a restar\r\n      // let calculoResta = await calculatePrices(newP, cantidad_venta, newP.granel_producto, newP.precio_actual_producto);\r\n\r\n      const new_resta = await calculatePrices2({\r\n        newP: newP,\r\n        cantidad: cantidad_venta,\r\n        precio_boolean: true,\r\n        precio: newP.precio_actual_object,\r\n        granel: newP.granel_producto,\r\n        origen: \"\",\r\n      });\r\n\r\n      productosVentasTemp.splice(producto_encontrado.producto_found.index, 1);\r\n      const CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) -\r\n          parseFloat(new_resta.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) -\r\n          parseFloat(new_resta.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) -\r\n          parseFloat(new_resta.impuestoCalculo),\r\n        iva: parseFloat(venta_existente.iva) - parseFloat(new_resta.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) - parseFloat(new_resta.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) -\r\n          parseFloat(new_resta.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) -\r\n          parseFloat(new_resta.monederoCalculo),\r\n      };\r\n\r\n      let saldo_favor = 0;\r\n      if(venta.nota_credito){\r\n        saldo_favor = venta.total_original - CalculosData.total\r\n      }\r\n\r\n      if (productosVentasTemp.length === 0 && !venta.cliente.nombre_cliente) {\r\n        localStorage.removeItem(\"DatosVentas\");\r\n        localStorage.removeItem(\"VentaOriginal\");\r\n      } else {\r\n        localStorage.setItem(\r\n          \"DatosVentas\",\r\n          JSON.stringify({\r\n            ...venta,\r\n            ...CalculosData,\r\n            saldo_favor,\r\n            cliente:\r\n              venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n            venta_cliente:\r\n              venta_actual.venta_cliente === true\r\n                ? venta_actual.venta_cliente\r\n                : false,\r\n            productos: productosVentasTemp,\r\n            tipo_emision: venta_actual.tipo_emision\r\n              ? venta_actual.tipo_emision\r\n              : \"TICKET\",\r\n          })\r\n        );\r\n      }\r\n\r\n      setDatosVentasActual(CalculosData);\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {/* <SnackBarMessages alert={alert} setAlert={setAlert} /> */}\r\n      <IconButton size=\"small\" onClick={() => handleToggleModal()} disabled={datosVenta && datosVenta.nota_credito}>\r\n        <Delete size=\"small\" color={datosVenta && datosVenta.nota_credito ? \"disabled\" : \"error\"} />\r\n      </IconButton>\r\n      <Dialog\r\n        open={open}\r\n        TransitionComponent={Transition}\r\n        keepMounted\r\n        onClose={() => handleToggleModal()}\r\n        aria-labelledby=\"alert-dialog-delete-producto\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-delete-producto\">\r\n          {\"¿Estás seguro de eliminar este producto?\"}\r\n        </DialogTitle>\r\n        <DialogActions style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <Button onClick={() => handleToggleModal()} color=\"inherit\">\r\n            Cancelar\r\n          </Button>\r\n          <Button onClick={() => eliminarProductoBD()} color=\"secondary\">\r\n            Eliminar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment, useContext } from \"react\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { Add, Close, Delete } from \"@material-ui/icons\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nimport {\r\n  findProductArray,\r\n  calculatePrices2,\r\n  calculatePricesNota,\r\n} from \"../../config/reuserFunctions\";\r\nimport { TRUE } from \"sass\";\r\n\r\nexport default function EliminarProductoNota({\r\n  producto,\r\n  setDatosVentasActual,\r\n  index,\r\n}) {\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n\r\n  const eliminarProducto = async () => {\r\n    let copy_product = { ...producto };\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    const venta_actual = venta === null ? [] : venta;\r\n    let productosVentasTemp = [...productosVentas];\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    const producto_encontrado = await findProductArray(copy_product);\r\n    if (producto_encontrado.found) {\r\n      const new_resta = await calculatePricesNota({\r\n        newP: copy_product,\r\n        cantidad: copy_product.cantidad_venta,\r\n        precio_boolean: false,\r\n        precio: copy_product.precio_actual_object,\r\n        granel: copy_product.granel_producto,\r\n        origen: \"\",\r\n      });\r\n\r\n      copy_product.cantidad_regresada = copy_product.cantidad_venta_original;\r\n      copy_product.cantidad_venta = 0;\r\n      copy_product.eliminado = true;\r\n      //precios producto\r\n      copy_product.impuestos_total_producto = 0;\r\n      copy_product.subtotal_total_producto = 0;\r\n      copy_product.total_total_producto = 0;\r\n\r\n      const CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) -\r\n          parseFloat(new_resta.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) -\r\n          parseFloat(new_resta.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) -\r\n          parseFloat(new_resta.impuestoCalculo),\r\n        iva: parseFloat(venta_existente.iva) - parseFloat(new_resta.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) - parseFloat(new_resta.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) -\r\n          parseFloat(new_resta.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) -\r\n          parseFloat(new_resta.monederoCalculo),\r\n      };\r\n\r\n      productosVentasTemp.splice(index, 1, copy_product);\r\n\r\n      let saldo_favor = 0;\r\n      if (venta.nota_credito) {\r\n        saldo_favor = venta.total_original - CalculosData.total;\r\n      }\r\n\r\n      if (productosVentasTemp.length === 0 && !venta.cliente.nombre_cliente) {\r\n        localStorage.removeItem(\"DatosVentas\");\r\n        localStorage.removeItem(\"VentaOriginal\");\r\n      } else {\r\n        localStorage.setItem(\r\n          \"DatosVentas\",\r\n          JSON.stringify({\r\n            ...venta,\r\n            ...CalculosData,\r\n            saldo_favor,\r\n            cliente:\r\n              venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n            venta_cliente:\r\n              venta_actual.venta_cliente === true\r\n                ? venta_actual.venta_cliente\r\n                : false,\r\n            productos: productosVentasTemp,\r\n            tipo_emision: venta_actual.tipo_emision\r\n              ? venta_actual.tipo_emision\r\n              : \"TICKET\",\r\n          })\r\n        );\r\n      }\r\n\r\n      setDatosVentasActual(CalculosData);\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  const agregarProducto = async () => {\r\n    // console.log(producto);\r\n    let copy_product = {...producto}\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    const venta_actual = venta === null ? [] : venta;\r\n    let productosVentasTemp = [...productosVentas];\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    const producto_encontrado = await findProductArray(copy_product);\r\n    if (producto_encontrado.found) {\r\n      const { cantidad_venta, ...newP } = copy_product;\r\n\r\n      // newP.precio_actual_producto = newP.descuento_activo ? newP.descuento.precio_con_descuento :  newP.precio;\r\n      //Sacar los impuestos que se van a restar\r\n      // let calculoResta = await calculatePrices(newP, cantidad_venta, newP.granel_producto, newP.precio_actual_producto);\r\n\r\n      const new_resta = await calculatePricesNota({\r\n        newP: newP,\r\n        cantidad: copy_product.cantidad_venta_original,\r\n        precio_boolean: true,\r\n        precio: newP.precio_actual_object,\r\n        granel: newP.granel_producto,\r\n        origen: \"\",\r\n        add: true\r\n      });\r\n\r\n      //productosVentasTemp.splice(producto_encontrado.producto_found.index, 1);\r\n      copy_product.cantidad_regresada = 0;\r\n      copy_product.cantidad_venta = copy_product.cantidad_venta_original;\r\n      copy_product.eliminado = false;\r\n      //precios producto\r\n      copy_product.impuestos_total_producto = copy_product.ieps_total_producto + copy_product.iva_total_producto;\r\n      copy_product.subtotal_total_producto = copy_product.precio_a_vender - copy_product.impuestos_total_producto;\r\n      copy_product.total_total_producto = copy_product.precio_a_vender;\r\n\r\n      productosVentasTemp.splice(index, 1, copy_product)\r\n        \r\n      const CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_resta.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_resta.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_resta.impuestoCalculo),\r\n        iva: parseFloat(venta_existente.iva) + parseFloat(new_resta.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_resta.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_resta.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_resta.monederoCalculo),\r\n      };\r\n\r\n      let saldo_favor = 0;\r\n      if (venta.nota_credito) {\r\n        saldo_favor = venta.total_original - CalculosData.total;\r\n      }\r\n\r\n      if (productosVentasTemp.length === 0 && !venta.cliente.nombre_cliente) {\r\n        localStorage.removeItem(\"DatosVentas\");\r\n        localStorage.removeItem(\"VentaOriginal\");\r\n      } else {\r\n        localStorage.setItem(\r\n          \"DatosVentas\",\r\n          JSON.stringify({\r\n            ...venta,\r\n            ...CalculosData,\r\n            saldo_favor,\r\n            cliente:\r\n              venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n            venta_cliente:\r\n              venta_actual.venta_cliente === true\r\n                ? venta_actual.venta_cliente\r\n                : false,\r\n            productos: productosVentasTemp,\r\n            tipo_emision: venta_actual.tipo_emision\r\n              ? venta_actual.tipo_emision\r\n              : \"TICKET\",\r\n          })\r\n        );\r\n      }\r\n\r\n      setDatosVentasActual(CalculosData);\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {producto.eliminado ? (\r\n        <IconButton size=\"small\" onClick={() => agregarProducto()}>\r\n          <Add size=\"small\" color=\"primary\" />\r\n        </IconButton>\r\n      ) : (\r\n        <IconButton size=\"small\" onClick={() => eliminarProducto()}>\r\n          <Close size=\"small\" color=\"error\" />\r\n        </IconButton>\r\n      )}\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, {\r\n  useState,\r\n  useEffect,\r\n  Fragment,\r\n  useRef,\r\n  useContext,\r\n} from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport EliminarProductoVenta from \"./EliminarProductoVenta\";\r\n\r\nimport { useDebounce } from \"use-debounce\";\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2,\r\n  formatoMexico,\r\n} from \"../../config/reuserFunctions\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport EliminarProductoNota from \"./EliminarProductoNota\";\r\nimport { Typography } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  container: {\r\n    height: \"100%\",\r\n    maxHeight: \"61vh\",\r\n    \"& ::-webkit-scrollbar\": {\r\n      display: \"none\",\r\n    },\r\n    [theme.breakpoints.up(\"xl\")]: {\r\n      maxHeight: \"65vh\",\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTable({ setDatosVentasActual }) {\r\n  const classes = useStyles();\r\n  const [selected, setSelected] = useState([]);\r\n  /* const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\")); */\r\n  let datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  const {\r\n    setProductoCambioPrecio,\r\n    setPrecioSelectProductoVenta,\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n  } = useContext(VentasContext);\r\n\r\n  const [datosTabla, setDatosTabla] = useState([]);\r\n\r\n  useEffect(() => {\r\n    datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    setDatosTabla(datosVentas === null ? [] : datosVentas.productos);\r\n  }, [updateTablaVentas]);\r\n\r\n  const handleClick = (name) => {\r\n    if (name.unidad === \"Caja\" || name.unidad === \"Costal\") return;\r\n    let newSelected = [];\r\n    const exist = selected.indexOf(name) !== -1;\r\n    if (exist) {\r\n      newSelected = [];\r\n      setPrecioSelectProductoVenta([]);\r\n      setProductoCambioPrecio({});\r\n      setSelected(newSelected);\r\n      return;\r\n    }\r\n    newSelected = newSelected.concat([], name);\r\n    const producto = name.id_producto.precios.precios_producto.filter(\r\n      (p) => p.precio_neto === name.precio_actual_producto\r\n    );\r\n    if (producto.length > 0) setPrecioSelectProductoVenta(producto);\r\n    setProductoCambioPrecio(name);\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TwoClickInRowTableBuy = (e, producto) => {\r\n    try {\r\n      /* let timer;\r\n      clearTimeout(timer); */\r\n      if (e.detail === 2) {\r\n        handleClick(producto);\r\n        /* setProductoCambioPrecio(producto); */\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const isSelected = (name) => {\r\n    return selected.indexOf(name) !== -1;\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Paper>\r\n        <TableContainer className={classes.container}>\r\n          <Table\r\n            stickyHeader\r\n            size=\"small\"\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"a dense table\"\r\n          >\r\n            <TableHead style={{padding: 0}}>\r\n              <TableRow >\r\n                <TableCell padding=\"checkbox\"></TableCell>\r\n                <TableCell style={{ textAlign: \"center\", padding: \"0 8px 0 8px\" }}>Granel</TableCell>\r\n                {datosVentas && datosVentas.nota_credito ? (\r\n                  <TableCell style={{ textAlign: \"center\", padding: \"0 8px 0 8px\" }} padding=\"checkbox\">\r\n                    Cant. Vendida\r\n                  </TableCell>\r\n                ) : null}\r\n                <TableCell style={{ textAlign: \"center\", padding: \"0 8px 0 8px\" }} padding=\"checkbox\">\r\n                  Cantidad\r\n                </TableCell>\r\n                <TableCell>Artículo</TableCell>\r\n                <TableCell style={{ textAlign: \"center\", padding: \"0 8px 0 8px\" }} padding=\"checkbox\">\r\n                  Exist.\r\n                </TableCell>\r\n                <TableCell style={{ textAlign: \"center\", padding: \"0 8px 0 8px\" }} padding=\"checkbox\">Desc.</TableCell>\r\n                <TableCell style={{ textAlign: \"center\", padding: \"0 8px 0 8px\" }} padding=\"checkbox\">\r\n                  Receta\r\n                </TableCell>\r\n                <TableCell style={{ textAlign: \"center\", padding: \"0 8px 0 8px\" }} padding=\"checkbox\">\r\n                  U.\r\n                </TableCell>\r\n                <TableCell style={{ width: 130, textAlign: \"center\", padding: \"0 8px 0 8px\" }}>\r\n                  Precio Unit.\r\n                </TableCell>\r\n                <TableCell style={{ width: 130, textAlign: \"center\", padding: \"0 8px 0 8px\" }}>\r\n                  Total\r\n                </TableCell>\r\n                <TableCell padding=\"checkbox\" />\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {datosTabla.map((producto, index) => {\r\n                const isItemSelected = isSelected(producto);\r\n                const labelId = `enhanced-table-checkbox-${index}`;\r\n                return (\r\n                  <RenderTableRows\r\n                    key={index}\r\n                    producto={producto}\r\n                    setUpdateTablaVentas={setUpdateTablaVentas}\r\n                    updateTablaVentas={updateTablaVentas}\r\n                    setDatosVentasActual={setDatosVentasActual}\r\n                    isItemSelected={isItemSelected}\r\n                    labelId={labelId}\r\n                    handleClick={handleClick}\r\n                    selected={selected}\r\n                    TwoClickInRowTableBuy={TwoClickInRowTableBuy}\r\n                    setSelected={setSelected}\r\n                    index={index}\r\n                  />\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst RenderTableRows = ({\r\n  producto,\r\n  setUpdateTablaVentas,\r\n  updateTablaVentas,\r\n  setDatosVentasActual,\r\n  TwoClickInRowTableBuy,\r\n  handleClick,\r\n  isItemSelected,\r\n  labelId,\r\n  setSelected,\r\n  selected,\r\n  index\r\n}) => {\r\n  // const [actuallyProduct, setActuallyProduct] = useState(producto);\r\n  const [newCantidadProduct, setNewCantidadProduct] = useState(\r\n    producto.cantidad_venta\r\n  );\r\n\r\n  const [tempAmount, setTempAmount] = useState(producto.cantidad_venta);\r\n  let datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  const textfield = useRef(null);\r\n  const [value] = useDebounce(newCantidadProduct, 500);\r\n\r\n  useEffect(() => {\r\n    setTempAmount(producto.cantidad_venta);\r\n  }, [producto.cantidad_venta]);\r\n\r\n  const [count, setCount] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (count) {\r\n      CalculeDataPricing(value);\r\n    }\r\n  }, [value]);\r\n\r\n  const calculateNewPricingAmount = (cantidad) => {\r\n    setCount(true);\r\n    if (\r\n      (datosVentas &&\r\n      datosVentas.nota_credito &&\r\n      cantidad > producto.cantidad_venta_original) || (cantidad === \"0\")\r\n    ) {\r\n      return;\r\n    } else if (producto.concepto === \"medidas\") {\r\n      if (cantidad > producto.cantidad) return;\r\n    } else {\r\n      if (cantidad > producto.inventario_general[0].cantidad_existente) return;\r\n    }\r\n    try {\r\n      setTempAmount(cantidad);\r\n      setNewCantidadProduct(cantidad);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const CalculeDataPricing = async (new_cant) => {\r\n    if (new_cant === \"\" || new_cant === 0) {\r\n      setTempAmount(producto.cantidad_venta);\r\n    } else {\r\n      let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let productosVentas = venta === null ? [] : venta.productos;\r\n      const venta_actual = venta === null ? [] : venta;\r\n      let productosVentasTemp = productosVentas;\r\n      let venta_existente =\r\n        venta === null\r\n          ? {\r\n              subTotal: 0,\r\n              total: 0,\r\n              impuestos: 0,\r\n              iva: 0,\r\n              ieps: 0,\r\n              descuento: 0,\r\n              monedero: 0,\r\n            }\r\n          : venta;\r\n\r\n      let CalculosData = {};\r\n\r\n      //Buscar y obtener ese producto en el array de ventas\r\n      const producto_encontrado = await findProductArray(producto);\r\n\r\n      if (producto_encontrado.found) {\r\n        const {\r\n          cantidad_venta,\r\n          ...newP\r\n        } = producto_encontrado.producto_found.producto;\r\n\r\n        newP.cantidad_venta = parseFloat(new_cant);\r\n        const verify_prising = await verifiPrising(newP);\r\n        const newPrising = verify_prising.found\r\n          ? verify_prising.object_prising\r\n          : newP.precio_actual_object;\r\n\r\n        const new_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad: newP.granel_producto.granel ? 1 : cantidad_venta,\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n          granel: newP.granel_producto,\r\n          origen: \"Tabla\",\r\n        });\r\n\r\n        if (newP.granel_producto.granel) {\r\n          newP.granel_producto = {\r\n            granel: true,\r\n            valor: parseFloat(new_cant),\r\n          };\r\n        }\r\n\r\n        const new_suma = await calculatePrices2({\r\n          newP,\r\n          cantidad: newP.granel_producto.granel ? 1 : parseFloat(new_cant),\r\n          precio_boolean: true,\r\n          precio: newPrising,\r\n          granel: newP.granel_producto,\r\n          origen: \"Tabla\",\r\n        });\r\n\r\n        newP.iva_total_producto = parseFloat(new_suma.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(new_suma.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(new_suma.impuestoCalculo);\r\n        newP.subtotal_total_producto = parseFloat(new_suma.subtotalCalculo);\r\n        newP.total_total_producto = parseFloat(new_suma.totalCalculo);\r\n\r\n        if (verify_prising.found) {\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n          newP.precio_anterior = newP.precio_actual_porducto;\r\n          newP.precio_actual_producto = verify_prising.pricing;\r\n          newP.precio_actual_object = verify_prising.object_prising;\r\n\r\n          newP.precio_actual_object = {\r\n            cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n              ? verify_prising.object_prising.cantidad_unidad\r\n              : null,\r\n            numero_precio: verify_prising.object_prising.numero_precio\r\n              ? verify_prising.object_prising.numero_precio\r\n              : null,\r\n            unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n              ? verify_prising.object_prising.unidad_maxima\r\n              : null,\r\n            precio_general: verify_prising.object_prising.precio_general\r\n              ? verify_prising.object_prising.precio_general\r\n              : null,\r\n            precio_neto: verify_prising.object_prising.precio_neto\r\n              ? verify_prising.object_prising.precio_neto\r\n              : null,\r\n            precio_venta: verify_prising.object_prising.precio_venta\r\n              ? verify_prising.object_prising.precio_venta\r\n              : null,\r\n            iva_precio: verify_prising.object_prising.iva_precio\r\n              ? verify_prising.object_prising.iva_precio\r\n              : null,\r\n            ieps_precio: verify_prising.object_prising.ieps_precio\r\n              ? verify_prising.object_prising.ieps_precio\r\n              : null,\r\n            utilidad: verify_prising.object_prising.utilidad\r\n              ? verify_prising.object_prising.utilidad\r\n              : null,\r\n            porciento: verify_prising.object_prising.porciento\r\n              ? verify_prising.object_prising.porciento\r\n              : null,\r\n            dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n              ? verify_prising.object_prising.dinero_descontado\r\n              : null,\r\n          };\r\n        } else {\r\n          newP.cantidad_venta = parseFloat(new_cant);\r\n          newP.precio_anterior = newP.precio_actual_producto;\r\n          newP.precio_a_vender = new_suma.totalCalculo;\r\n        }\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_suma.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_suma.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_suma.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_suma.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_suma.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_suma.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_suma.monederoCalculo,\r\n        };\r\n      } else {\r\n        console.log(\"El producto no existe\");\r\n      }\r\n\r\n      let saldo_favor = 0;\r\n      if (venta.nota_credito) {\r\n        saldo_favor = venta.total_original - CalculosData.total;\r\n      }\r\n\r\n      localStorage.setItem(\r\n        \"DatosVentas\",\r\n        JSON.stringify({\r\n          ...venta,\r\n          ...CalculosData,\r\n          saldo_favor,\r\n          cliente:\r\n            venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n          venta_cliente:\r\n            venta_actual.venta_cliente === true\r\n              ? venta_actual.venta_cliente\r\n              : false,\r\n          productos: productosVentasTemp,\r\n          tipo_emision: venta_actual.tipo_emision\r\n            ? venta_actual.tipo_emision\r\n            : \"TICKET\",\r\n        })\r\n      );\r\n      setDatosVentasActual(CalculosData);\r\n      //Recargar la tabla de los productos\r\n      setUpdateTablaVentas(!updateTablaVentas);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <TableRow\r\n        role=\"checkbox\"\r\n        style={{ padding: 0, margin: 0 }}\r\n        aria-checked={isItemSelected}\r\n        tabIndex={-1}\r\n        key={producto._id}\r\n        selected={isItemSelected}\r\n        onClick={(e) =>\r\n          datosVentas && datosVentas.nota_credito\r\n            ? null\r\n            : TwoClickInRowTableBuy(e, producto)\r\n        }\r\n      >\r\n        <TableCell padding=\"checkbox\" style={{ padding: \"0 0 0 5px\" }}>\r\n          <Checkbox\r\n            onClick={(event) => {\r\n              if (selected.length > 0) setSelected([]);\r\n              handleClick(producto);\r\n            }}\r\n            disabled={datosVentas && datosVentas.nota_credito}\r\n            checked={isItemSelected}\r\n            inputProps={{ \"aria-labelledby\": labelId }}\r\n          />\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\", padding: 0 }} padding=\"checkbox\">\r\n          {producto.granel_producto.granel\r\n            ? `${producto.granel_producto.valor} ${producto.unidad}`\r\n            : \"N/A\"}\r\n        </TableCell>\r\n        {datosVentas && datosVentas.nota_credito ? (\r\n          <TableCell style={{ textAlign: \"center\", padding: 0 }}>\r\n            {producto.cantidad_venta_original}\r\n          </TableCell>\r\n        ) : null}\r\n        <TableCell style={{padding: 0}}>\r\n          <Input\r\n            inputRef={textfield}\r\n            onClick={(e) => e.stopPropagation()}\r\n            onChange={(e) => calculateNewPricingAmount(e.target.value)}\r\n            value={tempAmount}\r\n            type=\"number\"\r\n            name=\"cantidad_venta\"\r\n            inputProps={{\r\n              min: 1,\r\n              max:\r\n                datosVentas && datosVentas.nota_credito\r\n                  ? producto.cantidad_venta_original\r\n                  : producto.concepto === \"medidas\"\r\n                  ? producto.cantidad\r\n                  : producto.inventario_general.map(\r\n                      (existencia) => `${existencia.cantidad_existente}`\r\n                    ),\r\n            }}\r\n          />\r\n        </TableCell>\r\n        <TableCell style={{padding: 0}}>\r\n          <Typography noWrap variant=\"body2\">{producto.id_producto.datos_generales.nombre_comercial}</Typography>\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\", padding: 0 }}>\r\n          {producto.id_producto.datos_generales.tipo_producto === \"OTROS\"\r\n            ? producto.unidad === \"Costal\" || producto.unidad === \"Caja\"\r\n              ? producto.inventario_general[0].cantidad_existente_maxima\r\n              : producto.inventario_general[0].cantidad_existente\r\n            : producto.cantidad}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\",padding: 0 }}>\r\n          %{\" \"}\r\n          {producto.precio_actual_object.porciento !== null\r\n            ? producto.precio_actual_object.porciento\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\",padding: 0 }}>\r\n          {producto.id_producto.datos_generales.receta_farmacia === true\r\n            ? \"Si\"\r\n            : \"No\"}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\",padding: 0 }}>{producto.unidad}</TableCell>\r\n        <TableCell style={{ textAlign: \"center\",padding: 0 }}>\r\n          ${\" \"}\r\n          {producto.precio_actual_object.precio_neto\r\n            ? formatoMexico(producto.precio_actual_object.precio_neto)\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell style={{ textAlign: \"center\",padding: 0 }}>\r\n          ${\" \"}\r\n          {producto.total_total_producto\r\n            ? formatoMexico(producto.total_total_producto)\r\n            : 0}\r\n        </TableCell>\r\n        <TableCell style={{padding: \"0 5px 0 0\"}}>\r\n          {datosVentas && datosVentas.nota_credito ? (\r\n            <EliminarProductoNota\r\n            producto={producto}\r\n            setDatosVentasActual={setDatosVentasActual}\r\n            index={index}\r\n          />\r\n          ) :(\r\n            <EliminarProductoVenta\r\n            producto={producto}\r\n            setDatosVentasActual={setDatosVentasActual}\r\n          />\r\n          )}\r\n          \r\n        </TableCell>\r\n      </TableRow>\r\n    </Fragment>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/publicalo.3dac1d84.svg\";","import React, { useContext, useState } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport useStyles from \"../styles\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport TipoVentaIcon from \"../../../icons/ventas/publicalo.svg\";\r\n\r\nexport default function AgregarTipoVenta() {\r\n  /* const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\")); */\r\n  const classes = useStyles();\r\n  const { updateTablaVentas, setUpdateTablaVentas } = useContext(VentasContext);\r\n  const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const [tipo_emision, setTipoEmision] = useState(\"TICKET\");\r\n\r\n  const obtenerTipoEmision = (e) => {\r\n    const { value } = e.target;\r\n    if (!venta || venta === null) return;\r\n    setTipoEmision(value);\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({ ...venta, tipo_emision: value })\r\n    );\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n  };\r\n\r\n  return (\r\n    <Box width=\"100%\" display=\"flex\">\r\n      <Box mr={1}>\r\n        <img\r\n          src={TipoVentaIcon}\r\n          alt=\"iconoBander\"\r\n          className={classes.iconSize}\r\n        />\r\n      </Box>\r\n      <Box width=\"100%\">\r\n        <FormControl variant=\"outlined\" fullWidth size=\"small\">\r\n          <Select\r\n            id=\"tipo_documento\"\r\n            value={tipo_emision}\r\n            name=\"tipo_documento\"\r\n            onChange={obtenerTipoEmision}\r\n            disabled={!venta || venta === null}\r\n          >\r\n            <MenuItem value=\"SIN TICKET\">\r\n              <em>SIN TICKET</em>\r\n            </MenuItem>\r\n            <MenuItem value=\"TICKET\">TICKET</MenuItem>\r\n            <MenuItem value=\"FACTURA\">FACTURA</MenuItem>\r\n            <MenuItem value=\"NOTA REMISION\">NOTA REMISION</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport { OBTENER_CLIENTES_VENTAS } from \"../../gql/Ventas/ventas_generales\";\r\nimport { useQuery, useApolloClient } from \"@apollo/client\";\r\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\r\nimport { CircularProgress, TextField } from \"@material-ui/core\";\r\n// import { BlurLinear } from \"@material-ui/icons\";\r\n// import { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { ClienteCtx } from \"../../context/Catalogos/crearClienteCtx\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { useDebounce } from \"use-debounce/lib\";\r\n\r\nexport default function ClientesVentas() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  const { setUpdateClientVenta, updateClientVenta, setClientes } = useContext(\r\n    ClienteCtx\r\n  );\r\n  const { setClientesVentas } = useContext(VentasContext);\r\n  const client = useApolloClient();\r\n  const [loading, setLoading] = useState(false);\r\n  const [textValue, setTextValue] = useState(\"\");\r\n  const [dataDocs, setDataDocs] = useState([]);\r\n  const [totalDocs, setTotalDocs] = useState(0);\r\n  const [page, setPage] = useState(0);\r\n  const [loaded, setLoaded] = useState(0);\r\n  const limit = 10;\r\n\r\n  const [selectClient, setSelectClient] = useState({});\r\n\r\n  // console.log(sesion.empresa._id);\r\n  // console.log(sesion.sucursal._id);\r\n  const [VALUE] = useDebounce(textValue, 500);\r\n  const inputRef = useRef(null);\r\n\r\n  const getClientes = async (filtro = \"\", page = 0, reset = false) => {\r\n    setLoaded(true);\r\n    try {\r\n      setLoading(true);\r\n      const response = await client.query({\r\n        query: OBTENER_CLIENTES_VENTAS,\r\n        variables: {\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          filtro,\r\n          limit,\r\n          offset: page,\r\n        },\r\n        fetchPolicy: \"network-only\",\r\n      });\r\n      setLoading(false);\r\n      if (response.data) {\r\n        setDataDocs(\r\n          filtro\r\n            ? response.data.obtenerClientesVentas.docs\r\n            : reset ? response.data.obtenerClientesVentas.docs\r\n            : [...dataDocs, ...response.data.obtenerClientesVentas.docs]\r\n        );\r\n        setTotalDocs(response.data.obtenerClientesVentas.totalDocs);\r\n      }\r\n      if(loaded){\r\n        inputRef.current.focus();\r\n      }\r\n    } catch (error) {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /* const { loading, data, refetch } = useQuery(OBTENER_CLIENTES_VENTAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n    fetchPolicy: \"network-only\",\r\n  }); */\r\n\r\n  // console.log(error);\r\n  // console.log(\"data\",data);\r\n  /* console.log(data)\r\n  let obtenerClientes = [];\r\n  if (data) obtenerClientes = data.obtenerClientesVentas.docs; */\r\n  // console.log(obtenerClientes);\r\n\r\n  const loadMoreItems = (e) => {\r\n    const { scrollHeight, scrollTop, clientHeight } = e.target;\r\n    if (scrollHeight - parseInt(scrollTop + 1) === clientHeight) {\r\n      if (dataDocs.length < totalDocs) {\r\n        let newPage = page + 1;\r\n        setPage(newPage);\r\n        getClientes(\"\", newPage, false);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    try {\r\n      setClientes(dataDocs);\r\n    } catch (error) {}\r\n  }, [dataDocs]);\r\n\r\n  useEffect(() => {\r\n    setPage(0);\r\n    getClientes(VALUE, 0, true);\r\n  }, [VALUE]);\r\n\r\n  useEffect(() => {\r\n    if (datosVentas && datosVentas.cliente) {\r\n      if (datosVentas.cliente.nombre_cliente) {\r\n        setSelectClient(datosVentas.cliente);\r\n        setClientesVentas(datosVentas.cliente);\r\n      } else {\r\n        setSelectClient(null);\r\n        setClientesVentas([]);\r\n      }\r\n    } else {\r\n      setSelectClient(null);\r\n      setClientesVentas([]);\r\n    }\r\n    //refetch();\r\n  }, [/* refetch,  */ updateClientVenta]);\r\n\r\n  const ChangeClientAutocomplate = (value) => {\r\n    setTextValue(\"\");\r\n    if(!value){\r\n      setPage(0);\r\n      getClientes(\"\", 0, true);\r\n    }\r\n    try {\r\n      const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n      let venta_actual = venta === null ? {} : venta;\r\n      setSelectClient(value);\r\n\r\n      if (!value && venta.productos.length === 0) {\r\n        localStorage.removeItem(\"DatosVentas\");\r\n        setUpdateClientVenta(!updateClientVenta);\r\n        return;\r\n      }\r\n\r\n      // console.log(venta_actual);\r\n      let dataCliente = {\r\n        ...venta_actual,\r\n        subTotal:\r\n          venta_actual.subTotal === undefined ? 0 : venta_actual.subTotal,\r\n        total: venta_actual.total === undefined ? 0 : venta_actual.total,\r\n        impuestos:\r\n          venta_actual.impuestos === undefined ? 0 : venta_actual.impuestos,\r\n        iva: venta_actual.iva === undefined ? 0 : venta_actual.iva,\r\n        ieps: venta_actual.ieps === undefined ? 0 : venta_actual.ieps,\r\n        descuento:\r\n          venta_actual.descuento === undefined ? 0 : venta_actual.descuento,\r\n        monedero:\r\n          venta_actual.monedero === undefined ? 0 : venta_actual.monedero,\r\n        // tipo_cambio: venta_actual.tipo_cambio ? venta_actual.tipo_cambio : {},\r\n        venta_cliente: value === null ? false : true,\r\n        productos:\r\n          venta_actual.productos?.length > 0 ? venta_actual.productos : [],\r\n        tipo_emision: venta_actual.tipo_emision\r\n          ? venta_actual.tipo_emision\r\n          : \"TICKET\",\r\n      };\r\n      dataCliente = { ...dataCliente, cliente: value ? value : {} };\r\n      localStorage.setItem(\"DatosVentas\", JSON.stringify(dataCliente));\r\n      setUpdateClientVenta(!updateClientVenta);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  if (loading) return (\r\n    <Autocomplete\r\n        size=\"small\"\r\n        fullWidth\r\n        loading={true}\r\n        disabled={true}\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n              ...params.InputProps,\r\n              endAdornment: (\r\n                <React.Fragment>\r\n                  {loading ? (\r\n                    <CircularProgress color=\"primary\" size={20} />\r\n                  ) : null}\r\n                  {params.InputProps.endAdornment}\r\n                </React.Fragment>\r\n              ),\r\n            }}\r\n          />\r\n        )}\r\n      />\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Autocomplete\r\n        id=\"combo-box-producto-codigo\"\r\n        size=\"small\"\r\n        fullWidth\r\n        openOnFocus={true}\r\n        options={dataDocs}\r\n        loading={loading}\r\n        getOptionLabel={(option) =>\r\n          option.nombre_cliente ? option.nombre_cliente : textValue ? textValue : \"Público general\"}\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            variant=\"outlined\"\r\n            inputRef={inputRef}\r\n            onChange={(e) => setTextValue(e.target.value)}\r\n            value={textValue}\r\n            InputProps={{\r\n              ...params.InputProps,\r\n              endAdornment: (\r\n                <React.Fragment>\r\n                  {loading ? (\r\n                    <CircularProgress color=\"primary\" size={20} />\r\n                  ) : null}\r\n                  {params.InputProps.endAdornment}\r\n                </React.Fragment>\r\n              ),\r\n            }}\r\n          />\r\n        )}\r\n        onChange={(_, value) => ChangeClientAutocomplate(value)}\r\n        getOptionSelected={(option, value) =>\r\n          option.nombre_cliente === value.nombre_cliente // ? option : \"Público general\"\r\n        }\r\n        value={selectClient ? selectClient : textValue ? textValue : \"Público general\"}\r\n        ListboxProps={{\r\n          styles: {\r\n            height: 300,\r\n          },\r\n          onScroll: loadMoreItems,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport useStyles from \"../styles\";\r\nimport ClientesVentas from \"../ClientesVentas\";\r\nimport ClienteIcon from \"../../../icons/usuarios.svg\"\r\n\r\nexport default function AgregarClienteVenta() {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Box\r\n      width=\"100%\"\r\n      display=\"flex\"\r\n      justifyItems=\"center\"\r\n      alignSelf=\"center\"\r\n      justifySelf=\"center\"\r\n      alignItems=\"center\"\r\n    >\r\n      <Box mt={1} mr={1}>\r\n        <img\r\n          src={ClienteIcon}\r\n          alt=\"iconoBander\"\r\n          className={classes.iconSize}\r\n        />\r\n      </Box>\r\n      <Box width=\"100%\" alignItems=\"center\">\r\n        <ClientesVentas sesion={sesion} />\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/busqueda-de-codigos-de-barras.a9100680.svg\";","import React, { Fragment } from \"react\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function ProductoConMedidas({\r\n  agregarProductos,\r\n  open,\r\n  setOpen,\r\n  productos,\r\n}) {\r\n  const handleClickOpen = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClickOpen}\r\n        TransitionComponent={Transition}\r\n      >\r\n        <DialogTitle>\r\n          <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={handleClickOpen}\r\n            >\r\n              <CloseIcon />\r\n            </Button>\r\n          </Box>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <VistaMedidasVenta\r\n            productos={productos}\r\n            agregarProductos={agregarProductos}\r\n          />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nconst VistaMedidasVenta = ({ productos, agregarProductos }) => {\r\n  if (!productos) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"53vh\"\r\n      >\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (productos && productos.length === 0) {\r\n    return (\r\n      <Box\r\n        display=\"flex\"\r\n        flexDirection=\"column\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        height=\"40vh\"\r\n      >\r\n        NO HAY UNIDADES\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <Box mb={5}>\r\n        <Box width=\"100%\" my={3}>\r\n          <Typography variant=\"h6\" align=\"center\">\r\n            <b>{productos[0]?.id_producto.datos_generales.nombre_comercial}</b>\r\n          </Typography>\r\n        </Box>\r\n        <Grid container spacing={4} justifyContent=\"center\">\r\n          {productos.map((producto, index) => (\r\n            <MappingProductos\r\n              key={index}\r\n              producto={producto}\r\n              agregarProductos={agregarProductos}\r\n            />\r\n          ))}\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  medida: {\r\n    height: 64,\r\n    width: 74,\r\n    fontSize: 28,\r\n  },\r\n  badge: {\r\n    \"& .MuiBadge-badge\": {\r\n      height: 30,\r\n      width: 30,\r\n      borderRadius: \"100%\",\r\n      fontSize: 18,\r\n    },\r\n  },\r\n});\r\n\r\nconst MappingProductos = ({ producto, agregarProductos }) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Grid item className={classes.badge}>\r\n      <Tooltip title={producto.color.nombre} placement=\"top\" arrow>\r\n        <Badge badgeContent={producto.cantidad} color=\"primary\" showZero={true}>\r\n          <Button\r\n            disableElevation\r\n            variant=\"contained\"\r\n            className={classes.medida}\r\n            style={{\r\n              backgroundColor: producto.color.hex,\r\n              color: theme.palette.getContrastText(producto.color.hex),\r\n            }}\r\n            onClick={() => agregarProductos(producto)}\r\n          >\r\n            {producto.medida.talla}\r\n          </Button>\r\n        </Badge>\r\n      </Tooltip>\r\n    </Grid>\r\n  );\r\n};\r\n","import React, { useState, useEffect, useContext, Fragment } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport useStyles from \"../styles\";\r\nimport { Add, Search } from \"@material-ui/icons\";\r\nimport { CONSULTA_PRODUCTO_UNITARIO } from \"../../../gql/Ventas/ventas_generales\";\r\nimport { useApolloClient } from \"@apollo/client\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport SnackBarMessages from \"../../../components/SnackBarMessages\";\r\nimport CodigoIcon from \"../../../icons/ventas/busqueda-de-codigos-de-barras.svg\"\r\n\r\nimport {\r\n  findProductArray,\r\n  verifiPrising,\r\n  calculatePrices2,\r\n} from \"../../../config/reuserFunctions\";\r\nimport ProductoConMedidas from \"./ProductoConMedidas\";\r\nimport { Snackbar } from \"@material-ui/core\";\r\n\r\nexport default function AgregarProductoVenta({ loading, setLoading }) {\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const classes = useStyles();\r\n  const {\r\n    updateTablaVentas,\r\n    setUpdateTablaVentas,\r\n    setDatosVentasActual,\r\n    openBuscarProducto,\r\n    setOpenBuscarProducto,\r\n  } = useContext(VentasContext);\r\n\r\n  const [open_message, setOpenMessage] = useState(false);\r\n  const [alert, setAlert] = useState({ message: \"\", status: \"\", open: false });\r\n  const [clave, setClave] = useState(\"\");\r\n  const client = useApolloClient();\r\n  const [openMedidas, setOpenMedidas] = useState(false);\r\n  const [producto, setProducto] = useState([]);\r\n  let datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  const inputProductos = React.useRef(null);\r\n\r\n  const obtenerProductos = async (input) => {\r\n    const response = await client.query({\r\n      query: CONSULTA_PRODUCTO_UNITARIO,\r\n      variables: {\r\n        datosProductos: input.toUpperCase(),\r\n        empresa: sesion.empresa._id,\r\n        sucursal: sesion.sucursal._id,\r\n      },\r\n      fetchPolicy: \"network-only\",\r\n    });\r\n    return response;\r\n  };\r\n\r\n  const [consultaBase, setConsultaBase] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    if (venta !== null) {\r\n      setDatosVentasActual({\r\n        subTotal: parseFloat(venta.subTotal),\r\n        total: parseFloat(venta.total),\r\n        impuestos: parseFloat(venta.impuestos),\r\n        iva: parseFloat(venta.iva),\r\n        ieps: parseFloat(venta.ieps),\r\n        descuento: parseFloat(venta.descuento),\r\n        monedero: parseFloat(venta.monedero),\r\n      });\r\n    }\r\n    inputProductos.current.focus();\r\n  }, [updateTablaVentas]);\r\n\r\n  const keyUpEvent = async (event) => {\r\n    if (loading) return;\r\n    if (!clave) return;\r\n    try {\r\n      if (\r\n        event.code === \"Enter\" ||\r\n        event.code === \"NumpadEnter\" ||\r\n        event.type === \"click\"\r\n      ) {\r\n        setLoading(true);\r\n        const input_value = clave;\r\n        const data = input_value.split(\"*\");\r\n        let datosQuery = {\r\n          data: undefined,\r\n          loading: false,\r\n          error: undefined,\r\n        };\r\n        let granel_base = {\r\n          granel: false,\r\n          valor: 0,\r\n        };\r\n        if (data.length > 1) {\r\n          let data_operation = isNaN(data[0]) ? data[1] : data[0];\r\n          let data_key = isNaN(data[0]) ? data[0] : data[1];\r\n\r\n          if (!data_operation) {\r\n            datosQuery = await obtenerProductos(data_key);\r\n            setConsultaBase(!consultaBase);\r\n          } else {\r\n            granel_base = {\r\n              granel: true,\r\n              valor: parseFloat(data_operation),\r\n            };\r\n            datosQuery = await obtenerProductos(data_key);\r\n            setConsultaBase(!consultaBase);\r\n          }\r\n        } else {\r\n          datosQuery = await obtenerProductos(input_value);\r\n          setConsultaBase(!consultaBase);\r\n        }\r\n\r\n        if (datosQuery.error) {\r\n          if (datosQuery.error.networkError) {\r\n            setAlert({\r\n              message: `Error de servidor`,\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          } else if (datosQuery.error.graphQLErrors) {\r\n            setAlert({\r\n              message: `${datosQuery.error.graphQLErrors[0]?.message}`,\r\n              status: \"error\",\r\n              open: true,\r\n            });\r\n          }\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        if (datosQuery.data) {\r\n          let productosBase = datosQuery.data.obtenerUnProductoVentas;\r\n          if (productosBase !== null) {\r\n            if (productosBase.length === 1) {\r\n              if (productosBase[0].cantidad !== null) {\r\n                if (!granel_base.granel && productosBase[0].unidad === \"Kg\") {\r\n                  granel_base = {\r\n                    granel: true,\r\n                    valor: 1,\r\n                  };\r\n                } else if (granel_base.granel) {\r\n                  if (\r\n                    granel_base.valor >\r\n                    productosBase[0].inventario_general[0].cantidad_existente\r\n                  ) {\r\n                    setAlert({\r\n                      message: `Esta cantidad es mayor a la que existe en Almacen`,\r\n                      status: \"error\",\r\n                      open: true,\r\n                    });\r\n                    setLoading(false);\r\n                    return;\r\n                  }\r\n                }\r\n                agregarProductos(productosBase[0], granel_base);\r\n              } else {\r\n                /* setOpen(true); */\r\n                setAlert({\r\n                  message: `Este producto no existe`,\r\n                  status: \"error\",\r\n                  open: true,\r\n                });\r\n              }\r\n            } else if (productosBase.length > 0) {\r\n              setOpenMedidas(true);\r\n              setProducto(productosBase);\r\n            } else {\r\n              /* setOpen(true); */\r\n\r\n              setAlert({\r\n                message: `Este producto no existe`,\r\n                status: \"error\",\r\n                open: true,\r\n              });\r\n            }\r\n          }\r\n        }\r\n        setLoading(false);\r\n        setClave(\"\");\r\n        inputProductos.current.focus();\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const without_inventary = sesion.empresa.vender_sin_inventario;\r\n\r\n  const agregarProductos = async (producto, granel) => {\r\n    if (producto.concepto === \"medidas\") {\r\n      //cantidad\r\n      if (!without_inventary && producto.cantidad === 0) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    } else {\r\n      //inventario_general\r\n      if (\r\n        !without_inventary &&\r\n        producto.inventario_general[0].cantidad_existente === 0\r\n      ) {\r\n        setOpenMessage(true);\r\n        return;\r\n      }\r\n    }\r\n    let granel_base = granel\r\n      ? granel\r\n      : {\r\n          granel: false,\r\n          valor: 0,\r\n        };\r\n    let venta = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n    let productosVentas = venta === null ? [] : venta.productos;\r\n    let venta_actual = venta === null ? [] : venta;\r\n    let venta_existente =\r\n      venta === null\r\n        ? {\r\n            subTotal: 0,\r\n            total: 0,\r\n            impuestos: 0,\r\n            iva: 0,\r\n            ieps: 0,\r\n            descuento: 0,\r\n            monedero: 0,\r\n          }\r\n        : venta;\r\n\r\n    let productosVentasTemp = productosVentas;\r\n\r\n    let CalculosData = {\r\n      subTotal: 0,\r\n      total: 0,\r\n      impuestos: 0,\r\n      iva: 0,\r\n      ieps: 0,\r\n      descuento: 0,\r\n      monedero: 0,\r\n    };\r\n\r\n    const producto_encontrado = await findProductArray(producto);\r\n\r\n    if (!producto_encontrado.found && producto._id) {\r\n      const newP = { ...producto };\r\n      //Tomar el precio con descuento o normal\r\n      const productoPrecioFinal = newP.descuento_activo\r\n        ? newP.descuento.precio_neto\r\n        : newP.precio_unidad.precio_neto;\r\n\r\n      const new_prices = await calculatePrices2({\r\n        newP,\r\n        cantidad: 0,\r\n        granel: granel_base,\r\n        origen: \"Ventas1\",\r\n        precio_boolean: false,\r\n      });\r\n      new_prices.newP.precio_anterior = productoPrecioFinal;\r\n\r\n      new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n      new_prices.newP.ieps_total_producto = parseFloat(new_prices.iepsCalculo);\r\n      new_prices.newP.impuestos_total_producto = parseFloat(\r\n        new_prices.impuestoCalculo\r\n      );\r\n      new_prices.newP.subtotal_total_producto = parseFloat(\r\n        new_prices.subtotalCalculo\r\n      );\r\n      new_prices.newP.total_total_producto = parseFloat(\r\n        new_prices.totalCalculo\r\n      );\r\n\r\n      //agregar producto al inicio del arreglo\r\n      productosVentasTemp.splice(0, 0, new_prices.newP);\r\n\r\n      CalculosData = {\r\n        subTotal:\r\n          parseFloat(venta_existente.subTotal) +\r\n          parseFloat(new_prices.subtotalCalculo),\r\n        total:\r\n          parseFloat(venta_existente.total) +\r\n          parseFloat(new_prices.totalCalculo),\r\n        impuestos:\r\n          parseFloat(venta_existente.impuestos) +\r\n          parseFloat(new_prices.impuestoCalculo),\r\n        iva:\r\n          parseFloat(venta_existente.iva) + parseFloat(new_prices.ivaCalculo),\r\n        ieps:\r\n          parseFloat(venta_existente.ieps) + parseFloat(new_prices.iepsCalculo),\r\n        descuento:\r\n          parseFloat(venta_existente.descuento) +\r\n          parseFloat(new_prices.descuentoCalculo),\r\n        monedero:\r\n          parseFloat(venta_existente.monedero) +\r\n          parseFloat(new_prices.monederoCalculo),\r\n      };\r\n    } else if (producto_encontrado.found && producto._id) {\r\n      const {\r\n        cantidad_venta,\r\n        ...newP\r\n      } = producto_encontrado.producto_found.producto;\r\n\r\n      if (granel_base.granel) {\r\n        granel_base = {\r\n          granel: true,\r\n          valor: newP.granel_producto.valor + granel_base.valor,\r\n        };\r\n      }\r\n\r\n      newP.cantidad_venta = granel_base.granel\r\n        ? 1\r\n        : parseInt(cantidad_venta) + 1;\r\n\r\n      const verify_prising = await verifiPrising(newP);\r\n\r\n      //Verificar si el precio fue encontrado\r\n      if (verify_prising.found) {\r\n        const calculo_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad: 1, //cantidad_venta,\r\n          granel: newP.granel_producto,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: newP.precio_actual_object,\r\n        });\r\n\r\n        const calculo_sumar = await calculatePrices2({\r\n          newP,\r\n          cantidad_venta: granel_base.granel ? 1 : parseInt(cantidad_venta) + 1, //newP.cantidad_venta,\r\n          granel: granel_base,\r\n          origen: \"\",\r\n          precio_boolean: true,\r\n          precio: verify_prising.object_prising,\r\n        });\r\n\r\n        newP.precio_a_vender = calculo_sumar.totalCalculo;\r\n        newP.precio_anterior = newP.precio_actual_producto;\r\n        newP.precio_actual_producto = verify_prising.pricing;\r\n\r\n        newP.iva_total_producto = parseFloat(calculo_sumar.ivaCalculo);\r\n        newP.ieps_total_producto = parseFloat(calculo_sumar.iepsCalculo);\r\n        newP.impuestos_total_producto = parseFloat(\r\n          calculo_sumar.impuestoCalculo\r\n        );\r\n        newP.subtotal_total_producto = parseFloat(\r\n          calculo_sumar.subtotalCalculo\r\n        );\r\n        newP.total_total_producto = parseFloat(calculo_sumar.totalCalculo);\r\n\r\n        newP.precio_actual_object = {\r\n          cantidad_unidad: verify_prising.object_prising.cantidad_unidad\r\n            ? verify_prising.object_prising.cantidad_unidad\r\n            : null,\r\n          numero_precio: verify_prising.object_prising.numero_precio\r\n            ? verify_prising.object_prising.numero_precio\r\n            : null,\r\n          unidad_maxima: verify_prising.object_prising.unidad_maxima\r\n            ? verify_prising.object_prising.unidad_maxima\r\n            : null,\r\n          precio_general: verify_prising.object_prising.precio_general\r\n            ? verify_prising.object_prising.precio_general\r\n            : null,\r\n          precio_neto: verify_prising.object_prising.precio_neto\r\n            ? verify_prising.object_prising.precio_neto\r\n            : null,\r\n          precio_venta: verify_prising.object_prising.precio_venta\r\n            ? verify_prising.object_prising.precio_venta\r\n            : null,\r\n          iva_precio: verify_prising.object_prising.iva_precio\r\n            ? verify_prising.object_prising.iva_precio\r\n            : null,\r\n          ieps_precio: verify_prising.object_prising.ieps_precio\r\n            ? verify_prising.object_prising.ieps_precio\r\n            : null,\r\n          utilidad: verify_prising.object_prising.utilidad\r\n            ? verify_prising.object_prising.utilidad\r\n            : null,\r\n          porciento: verify_prising.object_prising.porciento\r\n            ? verify_prising.object_prising.porciento\r\n            : null,\r\n          dinero_descontado: verify_prising.object_prising.dinero_descontado\r\n            ? verify_prising.object_prising.dinero_descontado\r\n            : null,\r\n        };\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(calculo_resta.subtotalCalculo) +\r\n            calculo_sumar.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(calculo_resta.totalCalculo) +\r\n            calculo_sumar.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(calculo_resta.impuestoCalculo) +\r\n            calculo_sumar.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(calculo_resta.ivaCalculo) +\r\n            calculo_sumar.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(calculo_resta.iepsCalculo) +\r\n            calculo_sumar.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(calculo_resta.descuentoCalculo) +\r\n            calculo_sumar.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(calculo_resta.monederoCalculo) +\r\n            calculo_sumar.monederoCalculo,\r\n        };\r\n      } else {\r\n        const productoPrecioFinal = newP.descuento_activo\r\n          ? newP.descuento.precio_neto\r\n          : newP.precio_unidad.precio_neto;\r\n\r\n        const new_resta = await calculatePrices2({\r\n          newP,\r\n          cantidad: 1,\r\n          granel: newP.granel_producto,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: granel_base.granel ? 1 : parseInt(cantidad_venta) + 1,\r\n          granel: granel_base,\r\n          origen: \"Ventas2\",\r\n        });\r\n\r\n        /* const new_prices = await calculatePrices2({\r\n          newP,\r\n          cantidad: newP.cantidad_venta,\r\n          granel: granel_base,\r\n          origen: \"Ventas2\",\r\n        }); */\r\n\r\n        new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n        new_prices.newP.iva_total_producto = parseFloat(new_prices.ivaCalculo);\r\n        new_prices.newP.ieps_total_producto = parseFloat(\r\n          new_prices.iepsCalculo\r\n        );\r\n        new_prices.newP.impuestos_total_producto = parseFloat(\r\n          new_prices.impuestoCalculo\r\n        );\r\n        new_prices.newP.subtotal_total_producto = parseFloat(\r\n          new_prices.subtotalCalculo\r\n        );\r\n        new_prices.newP.total_total_producto = parseFloat(\r\n          new_prices.totalCalculo\r\n        );\r\n\r\n        /* new_prices.newP.precio_actual_producto = productoPrecioFinal;\r\n\r\n       new_prices.newP.iva_total_producto =\r\n          parseFloat(new_prices.ivaCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.ieps_total_producto =\r\n          parseFloat(new_prices.iepsCalculo) * parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.impuestos_total_producto =\r\n          parseFloat(new_prices.impuestoCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.subtotal_total_producto =\r\n          parseFloat(new_prices.subtotalCalculo) *\r\n          parseFloat(newP.cantidad_venta);\r\n        new_prices.newP.total_total_producto =\r\n          parseFloat(new_prices.totalCalculo) * parseFloat(newP.cantidad_venta); */\r\n\r\n        productosVentasTemp.splice(\r\n          producto_encontrado.producto_found.index,\r\n          1,\r\n          new_prices.newP\r\n        );\r\n\r\n        CalculosData = {\r\n          subTotal:\r\n            parseFloat(venta_existente.subTotal) -\r\n            parseFloat(new_resta.subtotalCalculo) +\r\n            new_prices.subtotalCalculo,\r\n          total:\r\n            parseFloat(venta_existente.total) -\r\n            parseFloat(new_resta.totalCalculo) +\r\n            new_prices.totalCalculo,\r\n          impuestos:\r\n            parseFloat(venta_existente.impuestos) -\r\n            parseFloat(new_resta.impuestoCalculo) +\r\n            new_prices.impuestoCalculo,\r\n          iva:\r\n            parseFloat(venta_existente.iva) -\r\n            parseFloat(new_resta.ivaCalculo) +\r\n            new_prices.ivaCalculo,\r\n          ieps:\r\n            parseFloat(venta_existente.ieps) -\r\n            parseFloat(new_resta.iepsCalculo) +\r\n            new_prices.iepsCalculo,\r\n          descuento:\r\n            parseFloat(venta_existente.descuento) -\r\n            parseFloat(new_resta.descuentoCalculo) +\r\n            new_prices.descuentoCalculo,\r\n          monedero:\r\n            parseFloat(venta_existente.monedero) -\r\n            parseFloat(new_resta.monederoCalculo) +\r\n            new_prices.monederoCalculo,\r\n        };\r\n\r\n        /* CalculosData = {\r\n          subTotal: parseFloat(venta_existente.subTotal) + parseFloat(new_prices.subtotalCalculo),\r\n          total: parseFloat(venta_existente.total) + new_prices.totalCalculo,\r\n          impuestos: parseFloat(venta_existente.impuestos) + new_prices.impuestoCalculo,\r\n          iva: parseFloat(venta_existente.iva) + new_prices.ivaCalculo,\r\n          ieps: parseFloat(venta_existente.ieps) + new_prices.iepsCalculo,\r\n          descuento: parseFloat(venta_existente.descuento) + new_prices.descuentoCalculo,\r\n          monedero: parseFloat(venta_existente.monedero) + new_prices.monederoCalculo,\r\n        }; */\r\n      }\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"DatosVentas\",\r\n      JSON.stringify({\r\n        ...CalculosData,\r\n        cliente:\r\n          venta_actual.venta_cliente === true ? venta_actual.cliente : {},\r\n        venta_cliente:\r\n          venta_actual.venta_cliente === true\r\n            ? venta_actual.venta_cliente\r\n            : false,\r\n        productos: productosVentasTemp,\r\n        tipo_emision: venta_actual.tipo_emision\r\n          ? venta_actual.tipo_emision\r\n          : \"TICKET\",\r\n      })\r\n    );\r\n    setDatosVentasActual({\r\n      ...CalculosData,\r\n    });\r\n    setUpdateTablaVentas(!updateTablaVentas);\r\n    setProducto([]);\r\n    setOpenMedidas(false);\r\n    setClave(\"\");\r\n    inputProductos.current.focus();\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <SnackBarMessages alert={alert} setAlert={setAlert} />\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        open={open_message}\r\n        onClose={() => setOpenMessage(false)}\r\n        message=\"Producto sin existencias\"\r\n        autoHideDuration={3000}\r\n      />\r\n      <ProductoConMedidas\r\n        agregarProductos={agregarProductos}\r\n        open={openMedidas}\r\n        setOpen={setOpenMedidas}\r\n        productos={producto}\r\n      />\r\n      <Box\r\n        width=\"100%\"\r\n        display=\"flex\"\r\n        justifyItems=\"center\"\r\n        alignSelf=\"center\"\r\n        justifySelf=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        <Box mt={1} mx={1}>\r\n          <img\r\n            src={CodigoIcon}\r\n            alt=\"iconoBander\"\r\n            className={classes.iconSize}\r\n          />\r\n        </Box>\r\n        <TextField\r\n          fullWidth\r\n          placeholder=\"Producto...\"\r\n          variant=\"outlined\"\r\n          size=\"small\"\r\n          onKeyUp={(e) => keyUpEvent(e)}\r\n          onChange={(e) => setClave(e.target.value)}\r\n          value={clave}\r\n          disabled={loading || (datosVentas && datosVentas.nota_credito)}\r\n          inputRef={inputProductos}\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                {loading ? (\r\n                  <IconButton disabled={loading}>\r\n                    <CircularProgress size={20} color=\"primary\" />\r\n                  </IconButton>\r\n                ) : (\r\n                  <Fragment>\r\n                    <IconButton\r\n                      onClick={(e) => keyUpEvent(e)}\r\n                      disabled={loading || (datosVentas && datosVentas.nota_credito)}\r\n                      color=\"primary\"\r\n                    >\r\n                      <Add />\r\n                    </IconButton>\r\n                  </Fragment>\r\n                )}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          inputProps={{ style: { textTransform: \"uppercase\" } }}\r\n        />\r\n        <IconButton\r\n          onClick={() => setOpenBuscarProducto(!openBuscarProducto)}\r\n          disabled={loading || (datosVentas && datosVentas.nota_credito)}\r\n        >\r\n          <Search />\r\n        </IconButton>\r\n      </Box>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport AgregarTipoVenta from \"./TipoVenta\";\r\nimport AgregarClienteVenta from \"./AgregarCliente\";\r\nimport AgregarProductoVenta from \"./AgregarProducto\";\r\n\r\nexport default function ContenedorInputsGeneral({ loading, setLoading }) {\r\n\r\n  return (\r\n    <Fragment>\r\n      <Paper>\r\n        <Grid container spacing={3} style={{ padding: 2 }}>\r\n          <Grid item md={4} xs={12}>\r\n            <AgregarProductoVenta loading={loading} setLoading={setLoading} />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <AgregarClienteVenta />\r\n          </Grid>\r\n          <Grid item md={4} xs={12}>\r\n            <AgregarTipoVenta />\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n    </Fragment>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport { formatoMexico } from \"../../config/reuserFunctions\";\r\nimport { FcBusinessman, FcCalendar, FcSalesPerformance } from \"react-icons/fc\";\r\nimport { FaBarcode, FaMoneyCheckAlt } from \"react-icons/fa\";\r\nimport { AiOutlineFieldNumber } from \"react-icons/ai\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\n\r\nfunction TotalesNotaCredito() {\r\n  const { clientesVentas, DatosVentasActual } = React.useContext(VentasContext);\r\n  let datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  //useEffect(() => {\r\n  //  datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  //}, [updateTablaVentas])\r\n  \r\n\r\n  return (\r\n    <Paper variant=\"outlined\">\r\n      <Grid container>\r\n        <Grid item md={7} sm={7} xs={12}>\r\n          <Box mx={2}>\r\n            <Grid container>\r\n              <Grid item md={6} xs={12}>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <Box display=\"flex\" alignItems=\"center\">\r\n                    <FcBusinessman style={{ fontSize: 19 }} />\r\n                    <Box mr={1} />\r\n                    <Typography variant=\"subtitle1\">\r\n                      Cliente:{\" \"}\r\n                      <b style={{ fontSize: 16 }}>\r\n                        {clientesVentas && clientesVentas.nombre_cliente\r\n                          ? clientesVentas.nombre_cliente\r\n                          : \"Público en general\"}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <FaBarcode style={{ fontSize: 19 }} />\r\n                  <Box mr={1} />\r\n                  <Typography variant=\"subtitle1\">\r\n                    Clave Cliente:{\" \"}\r\n                    <b style={{ fontSize: 16 }}>\r\n                      {clientesVentas ? clientesVentas.clave_cliente : \"\"}\r\n                    </b>\r\n                  </Typography>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item md={6} xs={12}>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <FcCalendar style={{ fontSize: 19 }} />\r\n                  <Box mr={1} />\r\n                  <Typography variant=\"subtitle1\">\r\n                    Dias Credito:{\" \"}\r\n                    <b style={{ fontSize: 16 }}>\r\n                      {clientesVentas && clientesVentas.dias_credito\r\n                        ? clientesVentas.dias_credito\r\n                        : 0}\r\n                    </b>\r\n                  </Typography>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item lg={6} xs={12}>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <FaMoneyCheckAlt style={{ fontSize: 19 }} />\r\n                  <Box mr={1} />\r\n                  <Typography variant=\"subtitle1\">\r\n                    Limite Credito:{\" \"}\r\n                    <b style={{ fontSize: 16 }}>\r\n                      $\r\n                      {clientesVentas && clientesVentas.limite_credito\r\n                        ? formatoMexico(clientesVentas.limite_credito)\r\n                        : 0}\r\n                    </b>\r\n                  </Typography>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item lg={7} xs={12}>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                  <Box mr={1} />\r\n                  <Typography variant=\"subtitle1\">\r\n                    Monedero electrónico:{\" \"}\r\n                    <b style={{ fontSize: 16 }}>\r\n                      $\r\n                      {DatosVentasActual\r\n                        ? DatosVentasActual.monedero\r\n                          ? formatoMexico(DatosVentasActual.monedero)\r\n                          : 0\r\n                        : 0}\r\n                    </b>\r\n                  </Typography>\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Grid>\r\n        <Grid item md={5} sm={5} xs={12}>\r\n          <Grid container spacing={2}>\r\n            <Grid item lg={6} xs={12}>\r\n              <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                <Typography variant=\"subtitle1\">\r\n                  Descuento:{\" \"}\r\n                  <b style={{ fontSize: 17 }}>\r\n                    ${\" \"}\r\n                    {DatosVentasActual\r\n                      ? DatosVentasActual.descuento\r\n                        ? formatoMexico(DatosVentasActual.descuento)\r\n                        : 0\r\n                      : 0}\r\n                  </b>\r\n                </Typography>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item lg={6} xs={12}>\r\n              <Box flexDirection=\"row-reverse\" display=\"flex\" mr={1}>\r\n                <Typography variant=\"subtitle1\">\r\n                  Subtotal:{\" \"}\r\n                  <b style={{ fontSize: 17 }}>\r\n                    ${\" \"}\r\n                    {DatosVentasActual?.subTotal\r\n                      ? formatoMexico(DatosVentasActual.subTotal)\r\n                      : 0}\r\n                  </b>\r\n                </Typography>\r\n              </Box>\r\n              <Box display=\"flex\" flexDirection=\"row-reverse\" mr={1}>\r\n                <Typography variant=\"subtitle1\">\r\n                  Impuestos:{\" \"}\r\n                  <b style={{ fontSize: 17 }}>\r\n                    ${\" \"}\r\n                    {DatosVentasActual?.impuestos\r\n                      ? formatoMexico(DatosVentasActual.impuestos)\r\n                      : 0}\r\n                  </b>\r\n                </Typography>\r\n              </Box>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\" p={1} width=\"100%\">\r\n            <Typography variant=\"h4\">\r\n              Total:{\" \"}\r\n              <b style={{ color: \"green\" }}>\r\n                $\r\n                {DatosVentasActual?.total\r\n                  ? formatoMexico(DatosVentasActual.total)\r\n                  : 0}\r\n              </b>\r\n            </Typography>\r\n            <Box mx={2} />\r\n            <Typography variant=\"h4\">\r\n              Cambio:{\" \"}\r\n              <b style={{ color: \"green\" }}>\r\n                $\r\n                {datosVentas.saldo_favor\r\n                  ? formatoMexico(datosVentas.saldo_favor)\r\n                  : 0}\r\n              </b>\r\n            </Typography>\r\n          </Box>\r\n      </Grid>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default TotalesNotaCredito;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport Portal from \"@material-ui/core/Portal\";\r\nimport { FcBusinessman, FcCalendar, FcSalesPerformance } from \"react-icons/fc\";\r\nimport { FaBarcode, FaMoneyCheckAlt } from \"react-icons/fa\";\r\nimport { AiOutlineFieldNumber } from \"react-icons/ai\";\r\nimport TablaVentasCheckbox from \"./Tabla_ventas_checkbox\";\r\nimport { VentasContext } from \"../../context/Ventas/ventasContext\";\r\nimport { formatoMexico } from \"../../config/reuserFunctions\";\r\nimport ContenedorInputsGeneral from \"./InputsVentasGen.js/ContenedorInputs\";\r\nimport TotalesNotaCredito from \"./TotalesNotaCredito\";\r\n\r\nexport default function VentasGenerales() {\r\n  const {\r\n    clientesVentas,\r\n    openBackDrop,\r\n    DatosVentasActual,\r\n    setDatosVentasActual,\r\n    updateTablaVentas\r\n  } = useContext(VentasContext);\r\n  let datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  //useEffect(() => {\r\n  //  datosVentas = JSON.parse(localStorage.getItem(\"DatosVentas\"));\r\n  //}, [updateTablaVentas])\r\n\r\n  return (\r\n    <Box\r\n      height=\"100%\"\r\n      display=\"flex\"\r\n      flexDirection=\"column\"\r\n      justifyContent=\"space-between\"\r\n    >\r\n      <ContenedorInputsGeneral loading={loading} setLoading={setLoading} />\r\n      <Box\r\n        height=\"100%\"\r\n        style={\r\n          loading\r\n            ? {\r\n                pointerEvents: \"none\",\r\n                opacity: 0.6,\r\n              }\r\n            : null\r\n        }\r\n      >\r\n        <TablaVentasCheckbox setDatosVentasActual={setDatosVentasActual} />\r\n      </Box>\r\n\r\n      <Box display=\"flex\" justifyContent=\"flex-end\" flexDirection=\"column\">\r\n        {datosVentas && datosVentas.nota_credito ? (\r\n          <TotalesNotaCredito />\r\n        ) : (\r\n          <Paper variant=\"outlined\">\r\n            <Grid container>\r\n              <Grid item md={7} sm={7} xs={12}>\r\n                <Box mx={2}>\r\n                  <Grid container>\r\n                    <Grid item md={6} xs={12}>\r\n                      <Box display=\"flex\" alignItems=\"center\">\r\n                        <Box display=\"flex\" alignItems=\"center\">\r\n                          <FcBusinessman style={{ fontSize: 19 }} />\r\n                          <Box mr={1} />\r\n                          <Typography variant=\"subtitle1\">\r\n                            Cliente:{\" \"}\r\n                            <b style={{ fontSize: 16 }}>\r\n                              {clientesVentas && clientesVentas.nombre_cliente\r\n                                ? clientesVentas.nombre_cliente\r\n                                : \"Público en general\"}\r\n                            </b>\r\n                          </Typography>\r\n                        </Box>\r\n                      </Box>\r\n                    </Grid>\r\n                    {/* <Grid item lg={5} xs={12}>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                  <AiOutlineFieldNumber style={{ fontSize: 19 }} />\r\n                  <Box mr={1} />\r\n                  <Typography variant=\"subtitle1\">\r\n                    No. Cliente:{\" \"}\r\n                    <b style={{ fontSize: 16 }}>\r\n                      {clientesVentas ? clientesVentas.numero_cliente : \"\"}\r\n                    </b>\r\n                  </Typography>\r\n                </Box>\r\n              </Grid> */}\r\n                    <Grid item md={6} xs={12}>\r\n                      <Box display=\"flex\" alignItems=\"center\">\r\n                        <FaBarcode style={{ fontSize: 19 }} />\r\n                        <Box mr={1} />\r\n                        <Typography variant=\"subtitle1\">\r\n                          Clave Cliente:{\" \"}\r\n                          <b style={{ fontSize: 16 }}>\r\n                            {clientesVentas ? clientesVentas.clave_cliente : \"\"}\r\n                          </b>\r\n                        </Typography>\r\n                      </Box>\r\n                    </Grid>\r\n                    <Grid item md={6} xs={12}>\r\n                      <Box display=\"flex\" alignItems=\"center\">\r\n                        <FcCalendar style={{ fontSize: 19 }} />\r\n                        <Box mr={1} />\r\n                        <Typography variant=\"subtitle1\">\r\n                          Dias Credito:{\" \"}\r\n                          <b style={{ fontSize: 16 }}>\r\n                            {clientesVentas && clientesVentas.dias_credito\r\n                              ? clientesVentas.dias_credito\r\n                              : 0}\r\n                          </b>\r\n                        </Typography>\r\n                      </Box>\r\n                    </Grid>\r\n                    <Grid item lg={6} xs={12}>\r\n                      <Box display=\"flex\" alignItems=\"center\">\r\n                        <FaMoneyCheckAlt style={{ fontSize: 19 }} />\r\n                        <Box mr={1} />\r\n                        <Typography variant=\"subtitle1\">\r\n                          Limite Credito:{\" \"}\r\n                          <b style={{ fontSize: 16 }}>\r\n                            $\r\n                            {clientesVentas && clientesVentas.limite_credito\r\n                              ? formatoMexico(clientesVentas.limite_credito)\r\n                              : 0}\r\n                          </b>\r\n                        </Typography>\r\n                      </Box>\r\n                    </Grid>\r\n                    <Grid item lg={7} xs={12}>\r\n                      <Box display=\"flex\" alignItems=\"center\">\r\n                        <FcSalesPerformance style={{ fontSize: 19 }} />\r\n                        <Box mr={1} />\r\n                        <Typography variant=\"subtitle1\">\r\n                          Monedero electrónico:{\" \"}\r\n                          <b style={{ fontSize: 16 }}>\r\n                            $\r\n                            {DatosVentasActual\r\n                              ? DatosVentasActual.monedero\r\n                                ? formatoMexico(DatosVentasActual.monedero)\r\n                                : 0\r\n                              : 0}\r\n                          </b>\r\n                        </Typography>\r\n                      </Box>\r\n                    </Grid>\r\n                  </Grid>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item md={5} sm={5} xs={12}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item lg={6} xs={12}>\r\n                    <Box display=\"flex\" justifyContent=\"flex-end\">\r\n                      <Typography variant=\"subtitle1\">\r\n                        Descuento:{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          ${\" \"}\r\n                          {DatosVentasActual\r\n                            ? DatosVentasActual.descuento\r\n                              ? formatoMexico(DatosVentasActual.descuento)\r\n                              : 0\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                  </Grid>\r\n                  <Grid item lg={6} xs={12}>\r\n                    <Box flexDirection=\"row-reverse\" display=\"flex\" mr={1}>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Subtotal:{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          ${\" \"}\r\n                          {DatosVentasActual?.subTotal\r\n                            ? formatoMexico(DatosVentasActual.subTotal)\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    <Box display=\"flex\" flexDirection=\"row-reverse\" mr={1}>\r\n                      <Typography variant=\"subtitle1\">\r\n                        Impuestos:{\" \"}\r\n                        <b style={{ fontSize: 17 }}>\r\n                          ${\" \"}\r\n                          {DatosVentasActual?.impuestos\r\n                            ? formatoMexico(DatosVentasActual.impuestos)\r\n                            : 0}\r\n                        </b>\r\n                      </Typography>\r\n                    </Box>\r\n                    {/* <Box flexDirection=\"row-reverse\" display=\"flex\" mr={1}>\r\n                    <Typography variant=\"subtitle1\">\r\n                      Iva:{\" \"}\r\n                      <b style={{ fontSize: 17 }}>\r\n                        ${\" \"}\r\n                        {DatosVentasActual?.iva\r\n                          ? DatosVentasActual.iva.toFixed(2)\r\n                          : 0}\r\n                      </b>\r\n                    </Typography>\r\n                  </Box> */}\r\n                  </Grid>\r\n                </Grid>\r\n                <Box display=\"flex\" flexDirection=\"row-reverse\" p={1}>\r\n                  <Typography variant=\"h4\">\r\n                    Total:{\" \"}\r\n                    <b style={{ color: \"green\" }}>\r\n                      $\r\n                      {DatosVentasActual?.total\r\n                        ? formatoMexico(DatosVentasActual.total)\r\n                        : 0}\r\n                    </b>\r\n                  </Typography>\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n          </Paper>\r\n        )}\r\n      </Box>\r\n      <Portal>\r\n        <Backdrop style={{ zIndex: \"99999\" }} open={openBackDrop}>\r\n          <CircularProgress color=\"inherit\" />\r\n        </Backdrop>\r\n      </Portal>\r\n    </Box>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport useStyles from \"../styles\";\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  DialogActions,\r\n  DialogContent,\r\n  FormControl,\r\n  Grid,\r\n  InputAdornment,\r\n  MenuItem,\r\n  Select,\r\n  TextField,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport { OBTENER_CAJAS } from \"../../../gql/Cajas/cajas\";\r\nimport { REGISTRAR_TURNOS } from \"../../../gql/Ventas/abrir_cerrar_turno\";\r\nimport { VentasContext } from \"../../../context/Ventas/ventasContext\";\r\nimport { AccesosContext } from \"../../../context/Accesos/accesosCtx\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/es\";\r\nmoment.locale(\"es\");\r\n\r\nexport default function AbrirTurno({\r\n  handleClickOpen,\r\n  loading,\r\n  type,\r\n  setLoading,\r\n}) {\r\n  let sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  let turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n\r\n  const [CrearRegistroDeTurno] = useMutation(REGISTRAR_TURNOS);\r\n  \r\n  const { /* setTurnoActivo,  */setAlert } = useContext(VentasContext);\r\n  const { isOnline} = useContext(AccesosContext);\r\n  const [error, setError] = useState(false);\r\n  const [abrirTurno, setAbrirTurno] = useState([]);\r\n  const [numeroCaja, setNumeroCaja] = useState(\"\");\r\n\r\n  const principal = sesion.accesos.tesoreria.caja_principal.ver;\r\n\r\n  const classes = useStyles();\r\n  let obtenerCajasSucursal = [];\r\n\r\n  const cajas = useQuery(OBTENER_CAJAS, {\r\n    variables: {\r\n      empresa: sesion.empresa._id,\r\n      sucursal: sesion.sucursal._id,\r\n    },\r\n  });\r\n\r\n  const obtenerTurno = (e) => {\r\n    setAbrirTurno({ ...abrirTurno, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  if (cajas.data) {\r\n    obtenerCajasSucursal = cajas.data.obtenerCajasSucursal;\r\n  }\r\n\r\n  let arraySesion = {\r\n    accesos: sesion.accesos,\r\n    email: sesion.email,\r\n    empresa: sesion.empresa,\r\n    estado: sesion.estado,\r\n    exp: sesion.exp,\r\n    iat: sesion.iat,\r\n    imagen: sesion.imagen,\r\n    nombre: sesion.nombre,\r\n    numero_usuario: sesion.numero_usuario,\r\n    sucursal: sesion.sucursal,\r\n    telefono: sesion.telefono,\r\n    turno_en_caja_activo: true,\r\n    _id: sesion._id,\r\n  };\r\n\r\n  const enviarDatos = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (\r\n        !abrirTurno.turno_en_curso ||\r\n        !abrirTurno.caja_elegida ||\r\n        !abrirTurno.monto_abrir\r\n      ) {\r\n        setError(true);\r\n        setLoading(false);\r\n        setAlert({\r\n          message: `Por favor complete los datos obligatorios`,\r\n          status: \"error\",\r\n          open: true,\r\n        });\r\n        return;\r\n      } else {\r\n        const input = {\r\n          horario_en_turno: abrirTurno.turno_en_curso,\r\n          concepto: \"ABRIR TURNO\",\r\n          numero_caja: numeroCaja.toString(),\r\n          comentarios: abrirTurno.comentarios,\r\n          id_caja: abrirTurno.caja_elegida,\r\n          empresa: sesion.empresa._id,\r\n          sucursal: sesion.sucursal._id,\r\n          id_usuario: sesion._id,\r\n          usuario_en_turno: {\r\n            nombre: sesion.nombre,\r\n            telefono: sesion.telefono,\r\n            numero_usuario: sesion.numero_usuario,\r\n            email: sesion.email,\r\n          },\r\n          hora_entrada: {\r\n            hora: moment().locale(\"es-mx\").format(\"hh\"),\r\n            minutos: moment().locale(\"es-mx\").format(\"mm\"),\r\n            segundos: moment().locale(\"es-mx\").format(\"ss\"),\r\n            completa: moment().locale(\"es-mx\").format(\"HH:mm:ss\"),\r\n          },\r\n          hora_salida: {\r\n            hora: \"\",\r\n            minutos: \"\",\r\n            segundos: \"\",\r\n            completa: \"\",\r\n          },\r\n          fecha_entrada: {\r\n            year: moment().locale(\"es-mx\").format(\"YYYY\"),\r\n            mes: moment().locale(\"es-mx\").locale(\"es-mx\").format(\"MM\"),\r\n            dia: moment().locale(\"es-mx\").format(\"DD\"),\r\n            no_semana_year: moment().locale(\"es-mx\").week().toString(),\r\n            no_dia_year: moment().locale(\"es-mx\").dayOfYear().toString(),\r\n            completa: moment().locale(\"es-mx\").format(\"YYYY-MM-DD\"),\r\n          },\r\n          fecha_salida: {\r\n            year: \"\",\r\n            mes: \"\",\r\n            dia: \"\",\r\n            no_semana_year: \"\",\r\n            no_dia_year: \"\",\r\n            completa: \"\",\r\n          },\r\n          fecha_movimiento: moment().locale(\"es-mx\").format(),\r\n          montos_en_caja: {\r\n            monto_efectivo: {\r\n              monto: parseFloat(abrirTurno.monto_abrir),\r\n              metodo_pago: \"01\",\r\n            },\r\n            monto_tarjeta_debito: {\r\n              monto: 0,\r\n              metodo_pago: \"28\",\r\n            },\r\n            monto_tarjeta_credito: {\r\n              monto: 0,\r\n              metodo_pago: \"04\",\r\n            },\r\n            monto_creditos: {\r\n              monto: 0,\r\n              metodo_pago: \"99\",\r\n            },\r\n            monto_monedero: {\r\n              monto: 0,\r\n              metodo_pago: \"05\",\r\n            },\r\n            monto_transferencia: {\r\n              monto: 0,\r\n              metodo_pago: \"03\",\r\n            },\r\n            monto_cheques: {\r\n              monto: 0,\r\n              metodo_pago: \"02\",\r\n            },\r\n            monto_vales_despensa: {\r\n              monto: 0,\r\n              metodo_pago: \"08\",\r\n            },\r\n          },\r\n        };\r\n\r\n        const variableTurnoAbierto = await CrearRegistroDeTurno({\r\n          variables: {\r\n            activa: true,\r\n            input,\r\n            isOnline: isOnline\r\n          },\r\n        });\r\n \r\n        if (variableTurnoAbierto.data.crearRegistroDeTurno === null) {\r\n          setLoading(false);\r\n          setAlert({\r\n            message: `Lo sentimos esta caja ya esta en uso`,\r\n            status: \"error\",\r\n            open: true,\r\n          });\r\n        } else {\r\n          let  turno = {...variableTurnoAbierto.data.crearRegistroDeTurno, onCloud: isOnline};\r\n          console.log(\"TURNO:\", turno);\r\n          localStorage.setItem(\r\n            \"turnoEnCurso\",\r\n            JSON.stringify(turno)\r\n          );\r\n          localStorage.setItem(\"sesionCafi\", JSON.stringify(arraySesion));\r\n          /* setTurnoActivo(true); */\r\n          setAlert({\r\n            message: `Turno abierto`,\r\n            status: \"success\",\r\n            open: true,\r\n          });\r\n          /* if (type !== \"FRENTE\") {\r\n            handleClickOpen();\r\n          } */\r\n          window.location.reload();\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log(error.networkError.result.errors)\r\n      \r\n      setLoading(false);\r\n      if (error.networkError.result) {\r\n        console.log(error.networkError.result.errors);\r\n        } else if (error.graphQLErrors) {\r\n        console.log(error.graphQLErrors.message);\r\n        }\r\n      setAlert({\r\n        message: `Error: ${error.message}`,\r\n        status: \"error\",\r\n        open: true,\r\n      });\r\n      /* if (type !== \"FRENTE\") {\r\n        handleClickOpen();\r\n      } */\r\n    }\r\n  };\r\n\r\n  /* if (cajas.loading)\r\n    return (\r\n      <BackdropComponent loading={loading} />\r\n      // <Box\r\n      // display=\"flex\"\r\n      // flexDirection=\"column\"\r\n      // justifyContent=\"center\"\r\n      // alignItems=\"center\"\r\n      // height=\"80vh\"\r\n      // >\r\n      // \t<CircularProgress />\r\n      // </Box>\r\n    ); */\r\n\r\n  return (\r\n    <div>\r\n      <DialogContent>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography className={classes.titulos}> Empleado:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"nombre_usuario\"\r\n              onChange={obtenerTurno}\r\n              disabled={true}\r\n              value={sesion ? sesion.nombre : \"\"}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span>Turno:\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              disabled={turnoEnCurso ? true : false}\r\n              fullWidth\r\n              size=\"small\"\r\n              error={error && !abrirTurno.turno_en_curso}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"turno_en_curso\"\r\n                onChange={obtenerTurno}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                <MenuItem value=\"MATUTINO\">Matutino</MenuItem>\r\n                <MenuItem value=\"VESPERTINO\">Vespertino</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography  className={classes.titulos}>\r\n              <span className=\"obligatorio\">* </span>Caja:\r\n            </Typography>\r\n            <FormControl\r\n              variant=\"outlined\"\r\n              disabled={turnoEnCurso ? true : false}\r\n              fullWidth\r\n              size=\"small\"\r\n              error={error && !abrirTurno.caja_elegida}\r\n            >\r\n              <Select\r\n                id=\"form-producto-tipo\"\r\n                name=\"caja_elegida\"\r\n                onChange={obtenerTurno}\r\n              >\r\n                <MenuItem value=\"\">\r\n                  <em>Selecciona uno</em>\r\n                </MenuItem>\r\n                {obtenerCajasSucursal.map((caja) => {\r\n                  return caja.activa === true || (caja.principal === true && !principal) ? null : (\r\n                    <MenuItem\r\n                      key={caja.numero_caja}\r\n                      value={caja._id}\r\n                      onClick={() => setNumeroCaja(caja.numero_caja)}\r\n                    >\r\n                      Caja {caja.numero_caja}\r\n                    </MenuItem>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </FormControl>\r\n          </Grid>\r\n          <Grid item xs={12} md={6}>\r\n            <Typography  className={classes.titulos}>\r\n              {\" \"}\r\n              <span className=\"obligatorio\">* </span>Monto para abrir:\r\n            </Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"monto_abrir\"\r\n              inputProps={{ min: 0 }}\r\n              type=\"number\"\r\n              onChange={obtenerTurno}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n              error={error && !abrirTurno.monto_abrir}\r\n              placeholder=\"0.00\"\r\n              InputProps={{\r\n                startAdornment: <InputAdornment position=\"start\">$</InputAdornment>\r\n              }}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Typography className={classes.titulos}> Comentarios:</Typography>\r\n            <TextField\r\n              fullWidth\r\n              size=\"small\"\r\n              name=\"comentarios\"\r\n              multiline\r\n              rows={5}\r\n              onChange={obtenerTurno}\r\n              id=\"form-producto-codigo-barras\"\r\n              variant=\"outlined\"\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Box display=\"flex\" alignItems=\"flex-end\">\r\n          <Button\r\n            onClick={enviarDatos}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            startIcon={loading || cajas.loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n            disabled={loading || cajas.loading}\r\n          >\r\n            Guardar\r\n          </Button>\r\n        </Box>\r\n      </DialogActions>\r\n    </div>\r\n  );\r\n}\r\n","import React, { /* useContext, useEffect, */ useState } from \"react\";\r\nimport VentasGenerales from \"./VentasGenerales\";\r\nimport AbrirTurno from \"../ventas/AbrirCerrarTurno/AbrirTurno\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\n/* import { VentasContext } from \"../../context/Ventas/ventasContext\"; */\r\nimport { DialogTitle } from \"@material-ui/core\";\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport default function VentaIndex() {\r\n  /* const { turnoActivo, setTurnoActivo } = useContext(VentasContext);\r\n  const [varActive, setVarActive] = useState(false); */\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n\r\n  /* useEffect(() => {\r\n    const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n    setVarActive(sesion.turno_en_caja_activo);\r\n    setTurnoActivo(false);\r\n  }, [turnoActivo]) */;\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      {sesion.turno_en_caja_activo && turnoEnCurso ? (\r\n        <VentasGenerales />\r\n      ) : (\r\n        <AbrirTurnoEnVentas />\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction AbrirTurnoEnVentas() {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  return (\r\n    <Dialog\r\n      open={true}\r\n      maxWidth=\"sm\"\r\n      fullWidth\r\n      keepMounted\r\n      TransitionComponent={Transition}\r\n      disableEscapeKeyDown={false}\r\n    >\r\n      <DialogTitle>\r\n        Si deseas realizar ventas inicia tu turno primeramente.\r\n      </DialogTitle>\r\n      <AbrirTurno type=\"FRENTE\" setLoading={setLoading} loading={loading} />\r\n    </Dialog>\r\n  );\r\n}\r\n","import React, { useContext, useState } from \"react\";\r\nimport NavegacionVentas from \"../Navegaciones/NavegacionVentas\";\r\nimport NavegacionVentasLateral from \"../Navegaciones/NavegacionVentasLateral\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {\r\n  VentasContext,\r\n  VentasProvider,\r\n} from \"../../context/Ventas/ventasContext\";\r\nimport VentaIndex from \"../../pages/ventas/venta_index\";\r\nimport useStyles from \"../Navegaciones/styles\";\r\nimport moment from \"moment\";\r\nimport { AccesosContext } from \"../../context/Accesos/accesosCtx\";\r\nimport { Cached, PowerSettingsNew, Settings } from \"@material-ui/icons\";\r\nimport TicketPrinterComponent from \"../TicketPrinter/TicketPrinter\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport ComponentOnline from \"../../components/Connection/ComponentOnline\";\r\n\r\nexport default function LayoutVentas(props) {\r\n  const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n  if (!sesion) props.history.push(\"/\");\r\n\r\n  return (\r\n    <Box height=\"100%\">\r\n      <VentasProvider>\r\n        <LayoutWithProvider props={props} />\r\n      </VentasProvider>\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst LayoutWithProvider = ({ props }) => {\r\n  return (\r\n    <Box>\r\n      <Box height=\"5vh\">\r\n        <NavDataCajaUsers props={props} />\r\n      </Box>\r\n      <Grid container>\r\n        <Grid item lg={9} md={8}>\r\n          <Box height=\"10vh\">\r\n            <NavegacionVentas />\r\n          </Box>\r\n          <Box height=\"85vh\">\r\n            <VentaIndex />\r\n          </Box>\r\n        </Grid>\r\n        <Grid item lg={3} md={4}>\r\n          <NavegacionVentasLateral />\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n};\r\n\r\nconst NavDataCajaUsers = ({ props }) => {\r\n  const classes = useStyles();\r\n  const turnoEnCurso = JSON.parse(localStorage.getItem(\"turnoEnCurso\"));\r\n  const sesion = JSON.parse(localStorage.getItem(\"sesionCafi\"));\r\n  const [reloadPage, setReloadPage] = useState(false)\r\n\r\n  const {\r\n    abrirTurnosDialog,\r\n    setAbrirTurnosDialog,\r\n    setUbicacionTurno,\r\n  } = useContext(VentasContext);\r\n  const {\r\n    setAbrirPanelAcceso,\r\n    abrirPanelAcceso,\r\n    setDepartamentos,\r\n    isOnline,\r\n    ventasToCloud\r\n  } = useContext(AccesosContext);\r\n  moment.locale(\"es\");\r\n\r\n  const signOut = () => {\r\n    if (sesion.turno_en_caja_activo === true && turnoEnCurso) {\r\n      setAbrirTurnosDialog(!abrirTurnosDialog);\r\n      setUbicacionTurno(\"SESION\");\r\n    } else {\r\n      localStorage.removeItem(\"sesionCafi\");\r\n      localStorage.removeItem(\"tokenCafi\");\r\n      localStorage.removeItem(\"DatosVentas\");\r\n      localStorage.removeItem(\"VentaOriginal\");\r\n      localStorage.removeItem(\"turnoEnCurso\");\r\n      localStorage.removeItem(\"ListaEnEspera\");\r\n      props.history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  function Mi_función(e) {\r\n    if (e.keyCode === 112) {\r\n      Administrador();\r\n    }\r\n  }\r\n\r\n  window.onkeydown = Mi_función;\r\n\r\n  function Administrador() {\r\n    if (sesion.accesos.ventas.administrador.ver === true) {\r\n      props.history.push(\"/admin\");\r\n    } else {\r\n      setAbrirPanelAcceso(!abrirPanelAcceso);\r\n      setDepartamentos({\r\n        departamento: \"ventas\",\r\n        subDepartamento: \"administrador\",\r\n        tipo_acceso: \"ver\",\r\n      });\r\n    }\r\n  }\r\n\r\n  const reloadApp = () =>{\r\n    setReloadPage(true);\r\n    window.location.reload()\r\n  }\r\n\r\n  return (\r\n    <Grid container alignItems=\"center\">\r\n      <Grid item md={6} style={{ display: \"flex\" }}>\r\n        <Avatar\r\n          alt=\"Remy Sharp\"\r\n          srsc=\"/static/images/avatar/1.jpg\"\r\n          className={classes.avatar}\r\n        />\r\n        <Typography color=\"textSecondary\">{sesion?.nombre}</Typography>\r\n        <Box mx={1} />\r\n        {!turnoEnCurso?.numero_caja ? (\r\n          \"\"\r\n        ) : (\r\n          <Typography color=\"textSecondary\">\r\n            <b>Caja: </b>\r\n            {turnoEnCurso?.numero_caja}\r\n          </Typography>\r\n        )}\r\n        <Box mx={1} />\r\n        <Typography color=\"textSecondary\">\r\n          {moment().locale(\"es-mx\").format(\"ll\")}\r\n        </Typography>\r\n      </Grid>\r\n      <Grid\r\n        item\r\n        md={6}\r\n        style={\r\n          !turnoEnCurso\r\n            ? { display: \"flex\", justifyContent: \"flex-end\", zIndex: 99999 }\r\n            : { display: \"flex\", justifyContent: \"flex-end\" }\r\n        }\r\n      >\r\n        <ComponentOnline isOnline={isOnline} classes={classes} ventasToCloud={ventasToCloud} sesion={sesion} fromVentas={true} />\r\n        <Box display=\"flex\" alignItems={'center'}>\r\n          <Button\r\n            onClick={() => reloadApp()}\r\n            className={classes.buttonIcon}\r\n            style={\r\n              !turnoEnCurso ? { color: \"white\", borderColor: \"white\" } : null\r\n            }\r\n          >\r\n            {(reloadPage) ? <CircularProgress color=\"inherit\" size={20} /> : <Cached />}\r\n          </Button>\r\n        </Box>\r\n        <TicketPrinterComponent turnoEnCurso={turnoEnCurso} />\r\n        <Box mx={1} />\r\n        <Button\r\n          onClick={() => Administrador()}\r\n          startIcon={<Settings />}\r\n          style={\r\n            !turnoEnCurso ? { color: \"white\", borderColor: \"white\" } : null\r\n          }\r\n        >\r\n          F1 Admin\r\n        </Button>\r\n        <Box mx={1} />\r\n        <Button\r\n          color=\"secondary\"\r\n          onClick={() => {\r\n            signOut();\r\n          }}\r\n          startIcon={<PowerSettingsNew />}\r\n          style={\r\n            !turnoEnCurso ? { color: \"white\", borderColor: \"white\" } : null\r\n          }\r\n        >\r\n          Salir\r\n        </Button>\r\n        <Box mr={2} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logochafa.744b44f9.PNG\";","export default __webpack_public_path__ + \"static/media/admin.cecfcd64.svg\";","import { Box, Button, Container, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport logo from '../../img/logochafa.PNG';\r\nimport adminIcon from '../../icons/ventas/admin.svg';\r\nimport cartIcon from '../../icons/ventas/cart-add.svg';\r\nimport PowerSettingsNewRoundedIcon from '@material-ui/icons/PowerSettingsNewRounded';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\ticon: {\r\n\t\twidth: 150,\r\n        fontSize: 150\r\n\t},\r\n\r\n}));\r\n\r\nexport default function LayoutHome(props) {\r\n\tconst classes = useStyles();\r\n\tconst sesion = JSON.parse(localStorage.getItem('sesionCafi'));\r\n\r\n\tif (!sesion) props.history.push('/');\r\n\r\n    const signOut = () => {\r\n\t\tlocalStorage.removeItem('sesionCafi');\r\n\t\tlocalStorage.removeItem('tokenCafi');\r\n\t\tprops.history.push('/');\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container maxWidth=\"md\">\r\n\t\t\t<Box height=\"90vh\">\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t<img alt=\"logo ab\" src={logo} />\r\n\t\t\t\t</Box>\r\n\t\t\t\t<Box display=\"flex\" justifyContent=\"center\" my={6}>\r\n\t\t\t\t\t<Button component={Link} to=\"/admin/inicio\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={adminIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tAdmin\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button component={Link} to=\"/ventas/venta-general\">\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<img src={cartIcon} alt=\"icono numero calzado\" className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tVentas\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n                    <Button color=\"secondary\" onClick={signOut}>\r\n\t\t\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" textAlign=\"center\">\r\n\t\t\t\t\t\t\t<Box display=\"flex\" justifyContent=\"center\">\r\n\t\t\t\t\t\t\t\t<PowerSettingsNewRoundedIcon className={classes.icon} />\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\tCerrar sesion\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Box>\r\n\t\t\t</Box>\r\n\t\t</Container>\r\n\t);\r\n}\r\n","//layouts\r\nimport LayoutLogin from '../components/Layouts/LayoutLogin';\r\nimport LayoutAdmin from '../components/Layouts/LayoutAdmin';\r\nimport LayoutVentas from '../components/Layouts/LayoutVentas';\r\nimport LayoutHome from '../components/Layouts/LayoutHome';\r\n\r\n//sucursales pages\r\nimport AdminInicio from '../pages/sucursales/AdminInicio'\r\n\r\n//ventas pages\r\n/* import Venta_index from '../pages/ventas/venta_index' */\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\t\tcomponent: LayoutLogin,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/home',\r\n\t\tcomponent: LayoutHome,\r\n\t\texact: true\r\n\t},\r\n\t{\r\n\t\tpath: '/admin',\r\n\t\tcomponent: LayoutAdmin,\r\n\t\texact: false,\r\n\t\troutes: [\r\n\t\t\t{\r\n\t\t\t\tpath: '/admin/inicio',\r\n\t\t\t\tcomponent: AdminInicio,\r\n\t\t\t\texact: true,\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\tpath: '/ventas/venta-general',\r\n\t\tcomponent: LayoutVentas,\r\n\t\texact: false\r\n\t}\r\n\t\r\n];\r\n\r\nexport default routes;\r\n","import React from 'react';\r\nimport { RegProductoProvider } from '../../context/Catalogos/CtxRegProducto';\r\nimport AdminInicio from '../../pages/sucursales/AdminInicio';\r\nimport NavegacionAdmin from '../Navegaciones/NavegacionAdmin';\r\n\r\n\r\nexport default function LayoutAdmin(props) {\r\n    const sesion = localStorage.getItem(\"sesionCafi\");\r\n\r\n    if(!sesion) props.history.push('/');\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<RegProductoProvider>\r\n\t\t\t\t<NavegacionAdmin />\r\n\t\t\t\t<AdminInicio />\r\n\t\t\t</RegProductoProvider>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { grey } from '@material-ui/core/colors';\r\nimport { createTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createTheme({\r\n\tpalette: {\r\n\t\tnavbar: grey[50],\r\n\t\tprimary: {\r\n\t\t\tmain: \"#2222a8\"\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: '#f50057'\r\n\t\t},\r\n\t\tsecondaryCafi: \"#3f3f3f\"\r\n\t}\r\n});\r\n\r\nexport default theme;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { Detector } from \"react-detect-offline\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { Close, Wifi, WifiOff } from \"@material-ui/icons\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport {AccesosContext} from \"../../context/Accesos/accesosCtx\";\r\n\r\nexport default function ConexionDetect() {\r\n  const {\r\n\r\n    setIsOnline\r\n  } = useContext(AccesosContext);\r\n  const [firstLoad, setLoasetFirstLoad] = useState(true);\r\n  const [coneccion, setConeccion] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsOnline(coneccion)\r\n  }, [coneccion])\r\n  \r\n  return (\r\n    <Box>\r\n      <Detector\r\n        render={({ online }) => {\r\n          if (online) {\r\n            setConeccion(online);\r\n            return firstLoad ? null : <SnackOnline />;\r\n          } else {\r\n            setConeccion(online);\r\n            setLoasetFirstLoad(false);\r\n            return <SnackOffline />;\r\n          }\r\n        }}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nconst SnackOnline = () => {\r\n  const [open, setOpen] = useState(true);\r\n\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: \"bottom\",\r\n        horizontal: \"left\",\r\n      }}\r\n      open={open}\r\n      autoHideDuration={6000}\r\n      TransitionComponent={Slide}\r\n      onClose={() => setOpen(false)}\r\n      message={\r\n        <Box display=\"flex\">\r\n          <Wifi htmlColor=\"#81c784\" />\r\n          <Box mx={1} />\r\n          <Typography>Estás conectado</Typography>\r\n        </Box>\r\n      }\r\n      action={\r\n        <React.Fragment>\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={() => setOpen(false)}\r\n          >\r\n            <Close fontSize=\"small\" />\r\n          </IconButton>\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nconst SnackOffline = () => (\r\n  <Snackbar\r\n    anchorOrigin={{\r\n      vertical: \"bottom\",\r\n      horizontal: \"left\",\r\n    }}\r\n    open={true}\r\n    TransitionComponent={Slide}\r\n    message={\r\n      <Box display=\"flex\">\r\n        <WifiOff htmlColor=\"#bdbdbd\" />\r\n        <Box mx={1} />\r\n        <Typography>Sin Conexión</Typography>\r\n      </Box>\r\n    }\r\n  />\r\n);\r\n","import {\r\n  ApolloClient,\r\n  /* createHttpLink, */ InMemoryCache,\r\n} from \"@apollo/client\";\r\nimport { createUploadLink } from \"apollo-upload-client\";\r\n\r\nconst httpLink = createUploadLink({\r\n  uri: process.env.REACT_APP_ENDPOINT,\r\n});\r\n\r\nconst client = new ApolloClient({\r\n  connectToDevTools: true,\r\n  cache: new InMemoryCache({\r\n    addTypename: false,\r\n  }),\r\n  link: httpLink,\r\n});\r\n\r\nexport default client;\r\n","import React from \"react\";\r\nimport { Box, CssBaseline, ThemeProvider } from \"@material-ui/core\";\r\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport routes from \"./config/routes\";\r\nimport theme from \"./config/colors\";\r\nimport ConexionDetect from \"./components/Connection/ConexionDetect\";\r\nimport client from \"./config/apollo\";\r\nimport { ApolloProvider } from \"@apollo/client\";\r\nimport { AccesosProvider } from \"./context/Accesos/accesosCtx\";\r\nimport { ClienteProvider } from \"./context/Catalogos/crearClienteCtx\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Box height=\"100vh\" className=\"App\">\r\n      <CssBaseline />\r\n      <ApolloProvider client={client}>\r\n        <AccesosProvider>\r\n          <ClienteProvider>\r\n            <ThemeProvider theme={theme}>\r\n              <ConexionDetect/>\r\n              <Router>\r\n                <Switch>\r\n                  {routes.map((route, index) => (\r\n                    <RoutesWithSubRoutes key={index} {...route} />\r\n                  ))}\r\n                </Switch>\r\n              </Router>\r\n            </ThemeProvider>\r\n          </ClienteProvider>\r\n        </AccesosProvider>\r\n      </ApolloProvider>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction RoutesWithSubRoutes(route) {\r\n  return (\r\n    <Route\r\n      path={route.path}\r\n      exact={route.exact}\r\n      render={(props) => <route.component routes={route.routes} {...props} />}\r\n    />\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport \"./index.scss\"\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}